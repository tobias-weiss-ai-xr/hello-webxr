# src/lib - Core Libraries

Utilities and core VR interaction systems.

---

## KEY FILES
| File | Purpose |
|------|---------|
| `RayControl.js` | Raycasting, grab/drop mechanics (default export class) |
| `Teleport.js` | VR teleportation system (default export class) |
| `assetManager.js` | Loads models/textures/audio from assets/ (`loadAssets()` function) |
| `shaders.js` | Packed GLSL shaders (auto-generated by packshaders.py) |
| `ColorUtils.js` | `hsv2rgb()`, `rgb2hsv()` utilities (named exports) |
| `VRButton.js` | WebXR entry button HTML + logic |
| `EventDispatcher.js` | Event emitter base class |
| `PositionalAudioPolyphonic.js` | Polyphonic positional audio (extends THREE.Object3D) |

---

## EXPORT PATTERNS

**Classes (default export):**
```javascript
export default class RayControl { }
export default class Teleport { }
```

**Functions (named exports):**
```javascript
export function loadAssets(renderer, basePath, assets, onComplete, onProgress, debug) { }
export function hsv2rgb(hsv) { }
```

---

## CONVENTIONS

- **Classes**: Constructor takes `ctx` (context object)
- **Events**: Extend `EventDispatcher`, use `dispatchEvent()`
- **Shaders**: Read from `ctx.shaders` (not import directly)
- **Assets**: Loaded by `assetManager.js`, accessed via `ctx.assets['key']`
- **Module scope**: Use `var` for module-level variables (traditional pattern)

---

## USAGE

```javascript
// Class import
import RayControl from '../lib/RayControl.js';
const raycontrol = new RayControl(ctx, 'right');

// Function import
import { loadAssets } from '../lib/assetManager.js';
loadAssets(renderer, 'assets/', assets, () => { }, null, debug);

// Utility import
import { hsv2rgb } from '../lib/ColorUtils.js';
const rgb = hsv2rgb({h: 0.5, s: 1, v: 1});
```
