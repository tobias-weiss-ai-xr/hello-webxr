{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/lib/VRButton.js","webpack:///./src/lib/slideshow.js","webpack:///./src/lib/assetManager.js","webpack:///./src/components/index.js","webpack:///./src/systems/SDFTextSystem.js","webpack:///./src/systems/DebugHelperSystem.js","webpack:///./src/systems/AreaCheckerSystem.js","webpack:///./src/systems/ControllersSystem.js","webpack:///./src/systems/HierarchySystem.js","webpack:///./src/systems/TransformSystem.js","webpack:///./src/systems/BillboardSystem.js","webpack:///./src/systems/SystemsGroup.js","webpack:///./src/assets.js","webpack:///./src/lib/shaders.js","webpack:///./src/lib/RayControl.js","webpack:///./src/lib/EventDispatcher.js","webpack:///./src/lib/Teleport.js","webpack:///./src/data/elements.js","webpack:///./src/rooms/Lobby.js","webpack:///./src/lib/modelLoader.js","webpack:///./src/lib/VoiceCommander.js","webpack:///./src/index.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","VRButton","renderer","callback","showWebXRNotFound","button","style","display","cursor","left","width","onmouseenter","onmouseleave","onclick","textContent","stylizeElement","element","position","bottom","padding","border","borderRadius","background","color","font","textAlign","opacity","outline","zIndex","transition","navigator","document","createElement","xr","isSessionSupported","then","supported","currentSession","onSessionStarted","session","addEventListener","onSessionEnded","setSession","removeEventListener","transform","requestSession","optionalFeatures","end","showEnterVR","message","isSecureContext","href","location","replace","innerHTML","textDecoration","slideshow","paths","from","THREE","lookAt","velocity","angularVelocity","setup","context","this","room","undefined","path","next","camera","set","cameraRig","goto","time","Math","random","getCamera","reset","execute","delta","copy","rotation","addScaledVector","x","y","z","getLoadedCount","assets","count","loading","allAssetsLoaded","Object3D","constructor","Rotation","Position","ParentObject3D","Text","text","anchor","baseline","fontSize","letterSpacing","lineHeight","maxWidth","Infinity","overflowWrap","whiteSpace","BoundingBox","min","max","TagComponent","AreaInside","AreaChecker","empty","AreaReactor","onEntering","onExiting","DebugHelper","Children","array","anchorMapping","baselineMapping","SDFTextSystem","System","updateText","textMesh","textComponent","material","sync","entities","queries","added","forEach","e","getComponent","TextMesh","renderOrder","addComponent","removed","object3D","getObjectByName","dispose","remove","changed","components","listen","setFromMinMax","geometry","attributes","needsUpdate","computeBoundingSphere","DebugHelperMesh","SystemStateComponent","super","boxHelper","DebugHelperSystem","results","entity","boundingBox","debugMesh","getMutableComponent","removeComponent","Not","AreaCheckerSystem","areas","checkers","bboxArea","checker","intersectsBox","ControllersSystem","HierarchySystem","parent","add","updateRotation","updatePosition","TransformSystem","cameraPosition","BillboardSystem","getWorldPosition","distance","distanceTo","clamp","sqrt","hasComponent","children","camera3D","SystemsGroup","world","Systems","play","getSystem","stop","doorfx_tex","url","options","wrapT","wrapS","generic_controller_model","controller_tex","teleport_model","glow_tex","encoding","beam_tex","door_frag","zoom_frag","basic_vert","panoball_vert","panoball_frag","beam_frag","rayMaterial","tempMatrix","validStateController","RayControl","_listeners","stats","fired","handled","eventName","listener","listeners","indexOf","hasEventListener","listenerArray","index","dispatchEvent","resetCounters","enable","setLineStyle","previousLineStyle","enabled","_sort","currentStates","sort","a","b","order","disable","lineBasic","visible","line0","controllers","controller","active","changeHandedness","primary","secondary","addState","state","activate","states","raycaster","includes","console","warn","error","activateState","deactivateAll","intersections","deactivateState","addController","inputSource","controllerData","stateHit","currentIntersection","hit","matchController","raycasterContext","removeController","findIndex","find","ctx","line","scene","uniforms","tex","vertexShader","shaders","fragmentShader","blending","transparent","rayLength","scale","clone","setFromPoints","lineStyle","basic","selector","handedness","onSelectStart","evt","target","intersection","getIntersections","colliderMesh","entries","filter","intersectionData","prevIntersection","lineStyleOnIntersection","onHover","prev","current","onHoverLeave","identity","extractRotation","matrixWorld","ray","origin","setFromMatrixPosition","direction","applyMatrix4","Array","isArray","intersectObjects","intersectObject","onSelectEnd","Teleport","mesh","teleportEntity","teleportHitGeometry","ballColliding","map","startSound","audioListener","setBuffer","setLoop","pause","endSound","hitPoint","targetPoint","headPosition","offset","sub","GROUP_COLORS","NOBLE_GAS_COLORS","He","Ne","Ar","Kr","Xe","Rn","ELEMENTS","symbol","atomicNumber","mass","group","period","block","groupNumber","description","theme","experiments","EXPERIMENTAL_ROOMS","id","icon","ion","atomCore","periodicTableMesh","infoPanel","teleportFloor","electronOrbits","elementButtons","expButtons","currentSelection","floorGeo","floorMat","floor","teleportGeo","teleportMat","PI","coreGroup","coreGeo","coreMat","glowGeo","glowMat","side","glow","createAtomNucleus","colors","level","radius","orbitGeo","orbitMat","orbit","electronGeo","electronMat","electron","electronGroup","userData","angle","speed","createElectronOrbits","pTableGroup","cellGeo","cellHeight","cellMat","cell","height","createPeriodicTableHologram","buttonGroup","angleStep","cos","sin","buttonGeo","buttonMat","roomIndex","createEntity","createElementButtons","expRoom","createExpRoomButtons","panelGeo","panelMat","titleTextEntity","titleText","descTextEntity","descText","createInfoPanel","ambientLight","coreLight","teleport","raycontrol","setScalar","showElementInfo","hideElementInfo","point","registerInteractions","enter","setClearColor","exit","GLTFLoader","DRACOLoader","VoiceCommander","controls","voiceCommander","ambientMusic","recognition","isListening","commands","currentLanguage","elementCommands","de","trigger","en","setupUI","statusDiv","css","body","appendChild","webkitSpeechRecognition","continuous","interimResults","lang","setupEventListeners","start","log","onstart","updateStatus","executeCommand","transcript","onend","Promise","resolve","setTimeout","timeout","race","statusText","getElementById","trim","lowerTranscript","toLowerCase","RegExp","triggerMatch","match","afterTrigger","substring","elementName","findElementByName","showMatch","afterShow","extractElement","type","timestamp","Date","now","elements","normalized","elementNames","words","split","word","some","getRecentCommands","cmd","getCurrentLanguage","setLanguage","toUpperCase","clock","rooms","ROOM_ELEMENTS_END","ROOM_EXP_START","urlObject","URL","debug","searchParams","has","gotoRoom","elementSymbol","expRoomId","source","playMusic","ecsyWorld","systemsGroup","init","noWebXRElement","classList","detectWebXR","handElement","World","registerSystem","antialias","logarithmicDepthBuffer","powerPreference","preserveDrawingBuffer","failIfMajorPerformanceCaveat","gammaFactor","outputEncoding","setPixelRatio","devicePixelRatio","setSize","innerWidth","innerHeight","sortObjects","autoClear","autoClearDepth","autoClearStencil","PointerLockControls","domElement","vrMode","lock","moveForward","moveBackward","moveLeft","moveRight","ev","keyCode","browserControls","getController","near","lightSun","lightFill","GotoRoom","basePath","onComplete","onProgress","basisLoader","BasisTextureLoader","setTranscoderPath","detectSupport","gltfLoader","dracoLoader","setDecoderPath","setDRACOLoader","texLoader","loaders","OBJLoader","assetId","assetPath","ext","substr","lastIndexOf","load","asset","info","repeat","opt","loadAssets","model","grabbing","event","setupControllers","roomLobby","status","wasVrMode","setAnimationLoop","animate","loadProgress","querySelector","setAttribute","selectStartSkip","selectEndSkip","OculusBrowser","userAgent","parseInt","getDelta","elapsedTime","setFromObject","bc","isLocked","translateZ","translateX","currentRoom","render","aspect","updateProjectionMatrix","onload"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([10,1,2]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n"," /*\n\n\tThis is modification of the original VRButton. I've added a callback to know\n\twhen the user enters and exists from VR\n\n\tOriginal at:\n\t  https://github.com/mrdoob/three.js/blob/dev/examples/jsm/webxr/VRButton.js\n\n */\n/**\n * @author mrdoob / http://mrdoob.com\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nvar VRButton = {\n\n\tcreateButton: function ( renderer, callback ) {\n\n\t\tfunction showEnterVR( /*device*/ ) {\n\n\t\t\tvar currentSession = null;\n\n\t\t\tfunction onSessionStarted( session ) {\n\n\t\t\t\tsession.addEventListener( 'end', onSessionEnded );\n\n\t\t\t\trenderer.xr.setSession( session );\n\t\t\t\tbutton.textContent = 'EXIT VR';\n\n\t\t\t\tcurrentSession = session;\n\n\t\t\t\tcallback('sessionStarted');\n\t\t\t}\n\n\t\t\tfunction onSessionEnded( /*event*/ ) {\n\n\t\t\t\tcurrentSession.removeEventListener( 'end', onSessionEnded );\n\n\t\t\t\tbutton.textContent = 'ENTER VR';\n\n\t\t\t\tcurrentSession = null;\n\n\t\t\t\tcallback('sessionEnded');\n\t\t\t}\n\n\n\t\t\t//\n\n\t\t\tbutton.style.display = '';\n\n\t\t\tbutton.style.cursor = 'pointer';\n\t\t\tbutton.style.left = 'calc(50% - 50px)';\n\t\t\tbutton.style.width = '100px';\n\n\t\t\tbutton.textContent = 'ENTER VR';\n\n\t\t\tbutton.onmouseenter = function () {\n\n\t\t\t\tbutton.style.background = 'rgba(0,0,0,0.9)';\n\t\t\t\tbutton.style.transform = 'scale(1.05)';\n\n\t\t\t};\n\n\t\t\tbutton.onmouseleave = function () {\n\n\t\t\t\tbutton.style.background = 'rgba(0,0,0,0.7)';\n\t\t\t\tbutton.style.transform = 'scale(1.0)';\n\n\t\t\t};\n\n\t\t\tbutton.onclick = function () {\n\n\t\t\t\tif ( currentSession === null ) {\n\n\t\t\t\t\t// WebXR's requestReferenceSpace only works if the corresponding feature\n\t\t\t\t\t// was requested at session creation time. For simplicity, just ask for\n\t\t\t\t\t// the interesting ones as optional features, but be aware that the\n\t\t\t\t\t// requestReferenceSpace call will fail if it turns out to be unavailable.\n\t\t\t\t\t// ('local' is always available for immersive sessions and doesn't need to\n\t\t\t\t\t// be requested separately.)\n\n\t\t\t\t\tvar sessionInit = { optionalFeatures: [ 'local-floor', 'bounded-floor' ] };\n\t\t\t\t\tnavigator.xr.requestSession( 'immersive-vr', sessionInit ).then( onSessionStarted );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcurrentSession.end();\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}\n\n\t\tfunction disableButton() {\n\n\t\t\tbutton.style.display = '';\n\n\t\t\tbutton.style.cursor = 'auto';\n\t\t\tbutton.style.left = 'calc(50% - 75px)';\n\t\t\tbutton.style.width = '150px';\n\n\t\t\tbutton.onmouseenter = null;\n\t\t\tbutton.onmouseleave = null;\n\n\t\t\tbutton.onclick = null;\n\n\t\t}\n\n\t\tfunction showWebXRNotFound() {\n\n\t\t\tdisableButton();\n\n\t\t\tbutton.textContent = 'VR NOT SUPPORTED';\n\n\t\t}\n\n\t\tfunction stylizeElement( element ) {\n\n\t\t\telement.style.position = 'absolute';\n\t\t\telement.style.bottom = '20px';\n\t\t\telement.style.padding = '12px 24px';\n\t\t\telement.style.border = '2px solid #fff';\n\t\t\telement.style.borderRadius = '6px';\n\t\t\telement.style.background = 'rgba(0,0,0,0.7)';\n\t\t\telement.style.color = '#fff';\n\t\t\telement.style.font = '600 14px sans-serif';\n\t\t\telement.style.textAlign = 'center';\n\t\t\telement.style.opacity = '1.0';\n\t\t\telement.style.outline = 'none';\n\t\t\telement.style.zIndex = '999';\n\t\t\telement.style.cursor = 'pointer';\n\t\t\telement.style.transition = 'all 0.2s ease';\n\n\t\t}\n\n\t\tif ( 'xr' in navigator ) {\n\n\t\t\tvar button = document.createElement( 'button' );\n\t\t\tbutton.style.display = 'none';\n\n\t\t\tstylizeElement( button );\n\n\t\t\tnavigator.xr.isSessionSupported( 'immersive-vr' ).then( function ( supported ) {\n\n\t\t\t\tsupported ? showEnterVR() : showWebXRNotFound();\n\n\t\t\t} );\n\n\t\t\treturn button;\n\n\t\t} else {\n\n\t\t\tvar message = document.createElement( 'a' );\n\n\t\t\tif ( window.isSecureContext === false ) {\n\n\t\t\t\tmessage.href = document.location.href.replace( /^http:/, 'https:' );\n\t\t\t\tmessage.innerHTML = 'WEBXR NEEDS HTTPS'; // TODO Improve message\n\n\t\t\t} else {\n\n\t\t\t\tmessage.href = 'https://immersiveweb.dev/';\n\t\t\t\tmessage.innerHTML = 'WEBXR NOT AVAILABLE';\n\n\t\t\t}\n\n\t\t\tmessage.style.left = 'calc(50% - 90px)';\n\t\t\tmessage.style.width = '180px';\n\t\t\tmessage.style.textDecoration = 'none';\n\n\t\t\tstylizeElement( message );\n\n\t\t\treturn message;\n\n\t\t}\n\n\t}\n\n};\n\nexport { VRButton };\n","import * as THREE from 'three';\n\nconst PATH_TIME = 3; // 3 secs per path\n\nvar slideshow = {};\n\nslideshow.paths = [\n  //'hall'\n  [\n    {\n      from: new THREE.Vector3(0, 1.6, 0),\n      lookAt: new THREE.Vector3(0, 1, -100),\n      velocity: new THREE.Vector3(0, 0, -0.1),\n      angularVelocity: new THREE.Vector3(0.04, 0, 0)\n    },\n    {\n      from: new THREE.Vector3(4.5, 1.6, -3),\n      lookAt: new THREE.Vector3(100, 0, 0),\n      velocity: new THREE.Vector3(0, 0, -0.15),\n      angularVelocity: new THREE.Vector3(0, 0, 0)\n    },\n    {\n      from: new THREE.Vector3(0, 1.6, 0),\n      lookAt: new THREE.Vector3(50, 0, -40),\n      velocity: new THREE.Vector3(0, 0.12, 0),\n      angularVelocity: new THREE.Vector3(0, 0.1, 0)\n    },\n    {\n      from: new THREE.Vector3(3, 2.4, -4),\n      lookAt: new THREE.Vector3(-50, 0, 40),\n      velocity: new THREE.Vector3(0, -0.12, 0),\n      angularVelocity: new THREE.Vector3(0, -0.1, 0)\n    }\n  ],\n  //'sound'\n  [\n    {\n      from: new THREE.Vector3(0, 1.6, 0),\n      lookAt: new THREE.Vector3(0, 0, -100),\n      velocity: new THREE.Vector3(0.1, 0, 0.1),\n      angularVelocity: new THREE.Vector3(0, 0.01, 0)\n    },\n  ],\n  //'photogrammetry'\n  [\n    {\n      from: new THREE.Vector3(0, 1.2, 0.8),\n      lookAt: new THREE.Vector3(-100, 0.5, 0),\n      velocity: new THREE.Vector3(0, 0, -0.2),\n      angularVelocity: new THREE.Vector3(0, 0, 0)\n    },\n    {\n      from: new THREE.Vector3(-1, 1, -1.6),\n      lookAt: new THREE.Vector3(-40, 0, 100),\n      velocity: new THREE.Vector3(-0.05, 0, 0),\n      angularVelocity: new THREE.Vector3(0, 0, 0)\n    }\n  ],\n  //'vertigo'\n  [\n    {\n      from: new THREE.Vector3(0, 1.6, 0),\n      lookAt: new THREE.Vector3(0, 0, -10),\n      velocity: new THREE.Vector3(0, 0, 0),\n      angularVelocity: new THREE.Vector3(-0.01, 0.07, 0)\n    },\n    {\n      from: new THREE.Vector3(0, 1.6, -0.4),\n      lookAt: new THREE.Vector3(0, 0, 6),\n      velocity: new THREE.Vector3(0, 0, 0.1),\n      angularVelocity: new THREE.Vector3(0.07, 0, 0)\n    }\n  ],\n  //'panoramastereo'\n  [\n    {\n      from: new THREE.Vector3(0, 0, 0),\n      lookAt: new THREE.Vector3(-100, 0, 0),\n      velocity: new THREE.Vector3(0, 0, 0),\n      angularVelocity: new THREE.Vector3(0.03, 0.05, 0)\n    }\n  ],\n  //'panorama1'\n  [\n  ],\n  //'panorama2'\n  [\n      {\n      from: new THREE.Vector3(0, 0, 0),\n      lookAt: new THREE.Vector3(-100, 0, 0),\n      velocity: new THREE.Vector3(0, 0, 0),\n      angularVelocity: new THREE.Vector3(0.01, 0.1, 0)\n    }\n  ],\n  //'panorama3'\n  [\n  ],\n  //'panorama4'\n  [\n    {\n      from: new THREE.Vector3(0, 0, 0),\n      lookAt: new THREE.Vector3(-100, 0, 0),\n      velocity: new THREE.Vector3(0, 0, 0),\n      angularVelocity: new THREE.Vector3(-0.07, -0.05, 0)\n    }\n  ],\n  //'panorama5'\n  [\n    {\n      from: new THREE.Vector3(0, 0, 0),\n      lookAt: new THREE.Vector3(100, 0, 80),\n      velocity: new THREE.Vector3(0, 0, 0),\n      angularVelocity: new THREE.Vector3(0, -0.02, 0)\n    }\n  ]\n];\n\nslideshow.setup = function (context) {\n  this.room = undefined;\n  this.path = undefined;\n  this.next(context);\n  context.camera.position.set(0, 1.6, 0);\n  context.cameraRig.position.set(0, 0, 2);\n  context.goto = this.room;\n};\n\nslideshow.next = function (context) {\n  this.time = PATH_TIME + Math.random() * PATH_TIME / 2;\n  if (this.room === undefined) {\n    this.room = 0;\n    this.path = 0;\n  } else {\n    this.path ++;\n    if (this.path >= this.paths[this.room].length){\n      // find next room with paths\n      do {\n        this.room ++;\n        if (this.room >= this.paths.length) {\n          this.room = 0;\n          context.cameraRig.position.set(0, 0, 2);\n        }\n      } while (!this.paths[this.room].length);\n      var camera = context.renderer.xr.getCamera(context.camera);\n      camera.position.set(0, 1.6, 0);\n      context.goto = this.room;\n      this.path = 0;\n    }\n  }\n  this.reset = true;\n};\n\nslideshow.execute = function (context, delta, time) {\n  const path = this.paths[this.room][this.path];\n  if (this.reset) {\n    this.reset = false;\n    // init camera settings\n    context.camera.position.copy(path.from);\n    context.camera.rotation.set(0, 0, 0);\n    context.camera.lookAt(path.lookAt);\n  }\n  context.camera.position.addScaledVector(path.velocity, delta);\n  context.camera.rotation.x += path.angularVelocity.x * delta;\n  context.camera.rotation.y += path.angularVelocity.y * delta;\n  context.camera.rotation.z += path.angularVelocity.z * delta;\n  this.time -= delta;\n  if (this.time < 0) {\n    this.next(context);\n  }\n};\n\nexport {slideshow};\n","import * as THREE from 'three';\nimport { BasisTextureLoader } from 'three/examples/jsm/loaders/BasisTextureLoader.js';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader.js';\nimport { DRACOLoader } from 'three/examples/jsm/loaders/DRACOLoader.js';\n\n//const BASIS_LIB_PATH = 'src/vendor/';\nconst BASIS_LIB_PATH = 'src/vendor/';\nconst DRACO_LIB_PATH = 'src/vendor/';\n\nfunction getLoadedCount(assets) {\n  let count = 0;\n  for (var i in assets) {\n    if (assets[i].loading !== true) { count ++; }\n  }\n  return count;\n}\n\nfunction allAssetsLoaded(assets) {\n  for (var i in assets) {\n    if (assets[i].loading === true) { return false; }\n  }\n  return true;\n}\n\nexport function loadAssets(renderer, basePath, assets, onComplete, onProgress, debug) {\n  if (basePath && basePath[basePath.length - 1] != '/') {\n    basePath += '/';\n  }\n\n  var basisLoader = new BasisTextureLoader();\n  basisLoader.setTranscoderPath(BASIS_LIB_PATH);\n  basisLoader.detectSupport(renderer);\n\n  var gltfLoader = new GLTFLoader();\n  var dracoLoader = new DRACOLoader();\n  dracoLoader.setDecoderPath(DRACO_LIB_PATH);\n  gltfLoader.setDRACOLoader(dracoLoader);\n\n  var texLoader = new THREE.TextureLoader();\n  var objLoader = new OBJLoader();\n  var fontLoader = new THREE.FontLoader();\n  var audioLoader = new THREE.AudioLoader();\n\n\n  var loaders = {\n    'gltf': gltfLoader,\n    'glb': gltfLoader,\n    'obj': objLoader,\n    'gif': texLoader,\n    'png': texLoader,\n    'jpg': texLoader,\n    'basis': basisLoader,\n    'font': fontLoader,\n    'ogg': audioLoader\n  };\n\n  for (var i in assets) {\n    let assetId = i;\n    let assetPath = assets[i].url;\n    assets[i].loading = true;\n    let ext = assetPath.substr(assetPath.lastIndexOf('.') + 1).toLowerCase();\n\n    loaders[ext].load(basePath + assetPath, asset => {\n      if (debug) {\n        console.info(`%c ${assetPath} loaded`, 'color:green');\n      }\n      var options = assets[assetId].options;\n      assets[assetId] = ext == 'font'? asset.data : asset;\n\n      if (typeof options !== \"undefined\") {\n        if (typeof options.repeat !== \"undefined\") {\n          assets[assetId].repeat.set(options.repeat[0], options.repeat[1]);\n          delete options.repeat;\n        }\n        for (let opt in options) {\n          assets[assetId][opt] = options[opt];\n        }\n\n        if (onProgress) { onProgress(getLoadedCount(assets)) };\n      }\n\n      if (onComplete && allAssetsLoaded(assets)) { onComplete(); }\n    }, () => {\n      /* on progress */\n    },\n    (e) => {\n      console.error('Error loading asset', assetPath, e);\n      // For audio files, set to null to allow graceful degradation\n      if (ext === 'ogg') {\n        assets[assetId] = null;\n        assets[assetId].loading = false;\n        if (onComplete && allAssetsLoaded(assets)) { onComplete(); }\n      }\n    }\n    );\n  }\n}\n","import * as THREE from 'three';\nimport {TagComponent} from 'ecsy';\n\nexport class Object3D {\n  constructor() {\n    this.value = null;\n  }\n\n  reset() {\n    this.value = null;\n  }\n}\n\nexport class Rotation {\n  constructor() {\n    this.rotation = new THREE.Vector3();\n  }\n\n  reset() {}\n}\n\nexport class Position {\n  constructor() {\n    this.position = new THREE.Vector3();\n  }\n\n  reset() {}\n}\n\nexport class ParentObject3D {\n  constructor() {\n    this.value = null;\n  }\n\n  reset() {\n    this.value = null;\n  }\n}\n\nexport class Text {\n  constructor() {\n    this.text = '';\n    this.textAlign = 'left'; // ['left', 'right', 'center']\n    this.anchor = 'center'; // ['left', 'right', 'center', 'align']\n    this.baseline = 'center'; // ['top', 'center', 'bottom']\n    this.color = '#FFF';\n    this.font = null;\n    this.fontSize = 0.2;\n    this.letterSpacing = 0;\n    this.lineHeight = 0;\n    this.maxWidth = Infinity;\n    this.overflowWrap = 'normal'; // ['normal', 'break-word']\n    this.whiteSpace = 'normal'; // ['normal', 'nowrap']\n    this.opacity = 1;\n  }\n\n  reset() {\n    this.text = '';\n  }\n}\n\nexport class BoundingBox {\n  constructor() {\n    this.min = new THREE.Vector3();\n    this.max = new THREE.Vector3();\n    // this.box3?\n  }\n\n  reset() {\n    this.min.set(0,0,0);\n    this.max.set(0,0,0);\n  }\n}\n\nexport class BoundingSphere {\n  constructor() {\n    this.debug = true;\n    this.center = new THREE.Vector3();\n    this.radius = 0;\n    //this.sphere?\n  }\n\n  reset() {\n    this.center.set(0,0,0);\n    this.radius = 0;\n  }\n}\n\nexport class Area {\n  constructor() {\n\n  }\n\n  reset() {\n\n  }\n}\n\nexport class AreaEntering extends TagComponent {}\nexport class AreaExiting extends TagComponent {}\nexport class AreaInside extends TagComponent {}\n\nexport class AreaChecker {\n  constructor() {\n\n  }\n\n  reset() {\n\n  }\n}\n\nconst empty = () => {};\n\nexport class AreaReactor {\n  constructor() {\n    this.reset();\n  }\n\n  reset() {\n    this.onEntering = empty;\n    this.onExiting = empty;\n  }\n}\n\nexport class DebugHelper extends TagComponent {}\n\nexport class Billboard {\n  constructor() {\n    this.camera3D = null;\n  }\n\n  reset() {\n    this.camera3D = null;\n  }\n}\n\nexport class Children {\n  constructor() {\n    this.value = [];\n  }\n\n  reset() {\n    this.value.array.length = 0;\n  }\n}\n\nexport class Opacity {\n  constructor() {\n    this.opacity = 0;\n  }\n\n  reset() {\n    this.opacity = 0;\n  }\n}\n","import * as THREE from 'three';\nimport {System} from 'ecsy';\nimport {TextMesh} from 'troika-3d-text/dist/textmesh-standalone.esm.js';\nimport {Object3D, Text} from '../components/index.js';\n\nconst anchorMapping = {\n  'left': 0,\n  'center': 0.5,\n  'right': 1\n}\nconst baselineMapping = {\n  'top': 0,\n  'center': 0.5,\n  'bottom': 1\n}\n\nexport class SDFTextSystem extends System {\n\n  updateText(textMesh, textComponent) {\n    textMesh.text = textComponent.text;\n    textMesh.textAlign = textComponent.textAlign;\n    textMesh.anchor[0] = anchorMapping[textComponent.anchor];\n    textMesh.anchor[1] = baselineMapping[textComponent.baseline];\n    textMesh.color = textComponent.color;\n    textMesh.font = textComponent.font;\n    textMesh.fontSize = textComponent.fontSize;\n    textMesh.letterSpacing = textComponent.letterSpacing || 0;\n    textMesh.lineHeight = textComponent.lineHeight || null;\n    textMesh.overflowWrap = textComponent.overflowWrap;\n    textMesh.whiteSpace = textComponent.whiteSpace;\n    textMesh.maxWidth = textComponent.maxWidth;\n    textMesh.material.opacity = textComponent.opacity;\n    textMesh.sync();\n  }\n\n  execute(delta, time) {\n    var entities = this.queries.entities;\n\n    entities.added.forEach(e => {\n      var textComponent = e.getComponent(Text);\n\n      const textMesh = new TextMesh();\n      textMesh.name = 'textMesh';\n      textMesh.anchor = [0, 0];\n      textMesh.renderOrder = 1; //brute-force fix for ugly antialiasing, see issue #67\n      this.updateText(textMesh, textComponent);\n      e.addComponent(Object3D, {value: textMesh});\n    });\n\n    entities.removed.forEach(e => {\n      var object3D = e.getComponent(Object3D).value;\n      var textMesh = object3D.getObjectByName('textMesh');\n      textMesh.dispose();\n      object3D.remove(textMesh);\n    });\n\n    entities.changed.forEach(e => {\n      var object3D = e.getComponent(Object3D).value;\n      if (object3D instanceof TextMesh) {\n        var textComponent = e.getComponent(Text);\n        this.updateText(object3D, textComponent);\n      }\n    });\n  }\n}\n\nSDFTextSystem.queries = {\n  entities: {\n    components: [Text],\n    listen: {\n      added: true,\n      removed: true,\n      changed: [Text]\n    }\n  }\n}\n","import {Object3D, DebugHelper, BoundingBox} from '../components/index.js';\nimport {System, SystemStateComponent, Not} from 'ecsy';\nimport * as THREE from 'three';\n\nTHREE.BoxHelper.prototype.setFromMinMax = function(min, max) {\n\tvar position = this.geometry.attributes.position;\n\tvar array = position.array;\n\n\tarray[ 0 ] = max.x; array[ 1 ] = max.y; array[ 2 ] = max.z;\n\tarray[ 3 ] = min.x; array[ 4 ] = max.y; array[ 5 ] = max.z;\n\tarray[ 6 ] = min.x; array[ 7 ] = min.y; array[ 8 ] = max.z;\n\tarray[ 9 ] = max.x; array[ 10 ] = min.y; array[ 11 ] = max.z;\n\tarray[ 12 ] = max.x; array[ 13 ] = max.y; array[ 14 ] = min.z;\n\tarray[ 15 ] = min.x; array[ 16 ] = max.y; array[ 17 ] = min.z;\n\tarray[ 18 ] = min.x; array[ 19 ] = min.y; array[ 20 ] = min.z;\n\tarray[ 21 ] = max.x; array[ 22 ] = min.y; array[ 23 ] = min.z;\n\n\tposition.needsUpdate = true;\n\n\tthis.geometry.computeBoundingSphere();\n}\n\nclass DebugHelperMesh extends SystemStateComponent {\n  constructor() {\n    super();\n    this.boxHelper = new THREE.BoxHelper();\n  }\n}\n\nexport class DebugHelperSystem extends System {\n  execute(delta, time) {\n    this.queries.added.results.forEach(entity => {\n      entity.addComponent(DebugHelperMesh);\n      var boundingBox = entity.getComponent(BoundingBox);\n      let debugMesh = entity.getMutableComponent(DebugHelperMesh);\n      debugMesh.boxHelper.setFromMinMax(boundingBox.min, boundingBox.max);\n\n      entity.addComponent(Object3D, {value: debugMesh.boxHelper});\n    });\n\n    this.queries.removed.results.forEach(entity => {\n      //var boundingBox = entity.getComponent(DebugHelperMesh);\n      entity.removeComponent(Object3D).removeComponent(DebugHelperMesh);\n\n/*\n      entity.addComponent(Object3D, {value: debugMesh.boxHelper});\n\n      let debugMesh = entity.getMutableComponent(DebugHelperMesh);\n      debugMesh.boxHelper.setFromMinMax(boundingBox.min, boundingBox.max);\n      entity.addComponent(Object3D, {value: debugMesh.boxHelper});\n*/\n    });\n  }\n}\n\nDebugHelperSystem.queries = {\n  added: {\n    components: [DebugHelper, Not(DebugHelperMesh)]\n  },\n  removed: {\n    components: [Not(DebugHelper), DebugHelperMesh]\n  }\n}\n","import * as THREE from 'three';\nimport {System} from 'ecsy';\nimport {Area, AreaInside, AreaExiting, AreaEntering, Object3D, AreaChecker, BoundingBox} from '../components/index.js';\n\nexport class AreaCheckerSystem extends System {\n  execute(delta, time) {\n    const areas = this.queries.areas.results;\n    const checkers = this.queries.checkers.results;\n\n    for (let i = 0; i < areas.length; i++) {\n      const area = areas[i];\n      const bboxArea = area.getComponent(BoundingBox);\n\n      for (let j = 0; j < checkers.length; j++) {\n        const checker = checkers[j];\n        const obj3D = checker.getComponent(Object3D).value;\n        if (obj3D.boundingBox.intersectsBox(bboxArea)) {\n          checker.addComponent(AreaInside);\n        } else {\n          checker.removeComponent(AreaInside);\n        }\n      }\n    }\n  }\n}\n\nAreaCheckerSystem.queries = {\n  areas: {\n    components: [Area, BoundingBox],\n  },\n  checkers: {\n    components: [AreaChecker, Object3D]\n  }\n}","import * as THREE from 'three';\nimport {System} from 'ecsy';\nimport {Area, AreaReactor, AreaInside, AreaExiting, AreaEntering, Object3D, AreaChecker, BoundingBox} from '../components/index.js';\n\nexport class ControllersSystem extends System {\n  execute(delta, time) {\n    const added = this.queries.checkers.added;\n    const removed = this.queries.checkers.removed;\n\n    for (let i = 0; i < added.length; i++) {\n      const entity = added[i];\n      const reactor = entity.getComponent(AreaReactor);\n      reactor.onEntering(entity);\n    }\n\n    for (let i = 0; i < removed.length; i++) {\n      const entity = removed[i];\n      const reactor = entity.getComponent(AreaReactor);\n      reactor.onExiting(entity);\n    }\n  }\n}\n\nControllersSystem.queries = {\n  checkers: {\n    components: [AreaChecker, Object3D, AreaInside],\n    listen: {\n      added: true,\n      removed: true\n    }\n  }\n}\n","import * as THREE from 'three';\nimport {System} from 'ecsy';\nimport {Object3D, ParentObject3D} from '../components/index.js';\n\nexport default class HierarchySystem extends System {\n  execute(delta, time) {\n    this.queries.entities.added.forEach(entity => {\n      const parent = entity.getComponent(ParentObject3D).value;\n      const object = entity.getComponent(Object3D).value;\n\n      parent.add(object);\n    });\n\n    this.queries.entities.changed.forEach(entity => {\n      const parent = entity.getComponent(ParentObject3D).value;\n      const object = entity.getComponent(Object3D).value;\n\n      parent.add(object);\n    });\n\n    this.queries.entities.removed.forEach(entity => {\n      const parent = entity.getComponent(ParentObject3D, true).value;\n      parent.remove(entity.getComponent(Object3D, true).value);\n    });\n  }\n}\n\nHierarchySystem.queries = {\n  entities: {\n    components: [Object3D, ParentObject3D],\n    listen: {\n      added: true,\n      removed: true,\n      changed: true // [Component]\n    }\n  }\n}\n","import {System} from 'ecsy';\nimport {Object3D, Rotation, Position} from '../components/index.js';\n\nlet updateRotation = entity => {\n  const rotation = entity.getComponent(Rotation);\n  const object3D = entity.getComponent(Object3D).value;\n  object3D.rotation.set(rotation.x, rotation.y, rotation.z);\n};\n\nlet updatePosition = entity => {\n  const position = entity.getComponent(Position);\n  const object3D = entity.getComponent(Object3D).value;\n  object3D.position.copy(position);\n};\n\nexport default class TransformSystem extends System {\n  execute(delta, time) {\n    // Position\n    this.queries.position.added.forEach(updatePosition);\n    this.queries.position.changed.forEach(updatePosition);\n\n    // Rotation\n    this.queries.rotation.added.forEach(updateRotation);\n    this.queries.rotation.changed.forEach(updateRotation);\n  }\n}\n\nTransformSystem.queries = {\n  position: {\n    components: [Position, Object3D],\n    listen: {\n      added: true,\n      changed: true\n    }\n  },\n  rotation: {\n    components: [Rotation, Object3D],\n    listen: {\n      added: true,\n      changed: true\n    }\n  }\n}","import * as THREE from 'three';\nimport {System} from 'ecsy';\nimport {Billboard, Object3D, Children, Text, Position} from '../components/index.js';\n\nconst SHOW_DISTANCE = 4;\n\nvar cameraPosition = new THREE.Vector3();\n\nexport default class BillboardSystem extends System {\n  execute(delta, time) {\n\n    window.context.camera.getWorldPosition(cameraPosition);\n\n    this.queries.entities.results.forEach(entity => {\n      const object3D = entity.getComponent(Object3D).value;\n      const distance = cameraPosition.distanceTo(object3D.position);\n      let opacity = 0;\n\n      if (distance < SHOW_DISTANCE){\n        opacity = THREE.Math.clamp(Math.sqrt(SHOW_DISTANCE - distance), 0, 1);\n        object3D.lookAt(cameraPosition);\n      }\n\n      object3D.material.opacity = opacity;\n      // panels text parent\n      if (entity.hasComponent(Children)) {\n        entity.getComponent(Children).value.forEach(children => {\n          let prevOpacity = children.getComponent(Text).opacity;\n          if (prevOpacity !== opacity) {\n            children.getMutableComponent(Text).opacity = opacity;\n          }\n        });\n      }\n    });\n  }\n}\n\nBillboardSystem.queries = {\n  entities: {\n    components: [Billboard, Object3D]\n  }\n}\n","export default class SystemsGroup {\n  constructor(world, Systems) {\n    this.Systems = Systems;\n    this.world = world;\n  }\n\n  play() {\n    this.Systems.forEach(System => this.world.getSystem(System).play());\n  }\n\n  stop() {\n    this.Systems.forEach(System => this.world.getSystem(System).stop());\n  }\n}","import * as THREE from 'three';\n\nexport default {\n  // Shared door texture (used by all learning rooms)\n  doorfx_tex: { url: 'doorfx.basis', options: { wrapT: THREE.RepeatWrapping, wrapS: THREE.RepeatWrapping } },\n\n  // Controller assets\n  generic_controller_model: { url: 'generic_controller.glb' },\n  controller_tex: { url: 'controller.basis' },\n\n  // Teleport assets\n  teleport_model: { url: 'teleport.glb' },\n  glow_tex: { url: 'glow.basis', options: { encoding: THREE.sRGBEncoding } },\n  beam_tex: { url: 'beamfx.png' },\n\n  // Teleport sounds - disabled due to browser compatibility issues\n  // teleport_a_snd: { url: 'ogg/teleport_a.ogg' },\n  // teleport_b_snd: { url: 'ogg/teleport_b.ogg' },\n};\n","export default {\ndoor_frag : `\nuniform float time;\nuniform float selected;\nuniform sampler2D tex;\nvarying vec2 vUv;\n\nvoid main( void ) {\n  float t = time;\n  vec2 uv = vUv * 2.0 - 1.0;\n  vec2 puv = vec2(length(uv.xy), atan(uv.x, uv.y));\n  vec4 col = texture2D(tex, vec2(log(puv.x) + t / 5.0, puv.y / 3.1415926 ));\n  float glow = (1.0 - puv.x) * (0.5 + (sin(t) + 2.0 ) / 4.0);\n  // blue glow\n  col += vec4(118.0/255.0, 144.0/255.0, 219.0/255.0, 1.0) * (0.4 + glow * 1.0);\n  // white glow\n  col += vec4(0.2) * smoothstep(0.0, 2.0, glow * glow);\n  gl_FragColor = col;\n\n}\n`,\n\nzoom_frag : `\nuniform float time;\nuniform sampler2D tex;\nuniform vec2 zoomPos;\nuniform float zoomAmount;\nuniform float zoomRatio;\nvarying vec2 vUv;\n\nvoid main( void ) {\n  float t = time;\n  vec2 uv = vec2(vUv.x - 0.5, (1.0 - vUv.y) - 0.5);\n  vec2 texUv = uv * vec2(zoomRatio, 1.0);\n  vec4 col = texture2D(tex, zoomPos + texUv * zoomAmount);\n  float dist = length(uv) * 2.0;\n  col.a = smoothstep(0.0, 0.1, 1.0 - dist);\n  float aura = smoothstep(0.80, 1.0, dist);\n  col.rgb += aura * 0.3;\n  gl_FragColor = col;\n}\n`,\n\nbasic_vert : `\nvarying vec2 vUv;\nvarying vec3 vPosition;\nvoid main()\n{\n  vUv = uv;\n  vPosition = position;\n  vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n  gl_Position = projectionMatrix * mvPosition;\n}\n`,\n\npanoball_vert : `\nvarying vec2 vUv;\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec3 vWorldPos;\nuniform float time;\nuniform float selected;\n\nmat4 inverse(mat4 m) {\n  float\n      a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n      a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n      a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n      a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3],\n\n      b00 = a00 * a11 - a01 * a10,\n      b01 = a00 * a12 - a02 * a10,\n      b02 = a00 * a13 - a03 * a10,\n      b03 = a01 * a12 - a02 * a11,\n      b04 = a01 * a13 - a03 * a11,\n      b05 = a02 * a13 - a03 * a12,\n      b06 = a20 * a31 - a21 * a30,\n      b07 = a20 * a32 - a22 * a30,\n      b08 = a20 * a33 - a23 * a30,\n      b09 = a21 * a32 - a22 * a31,\n      b10 = a21 * a33 - a23 * a31,\n      b11 = a22 * a33 - a23 * a32,\n\n      det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat4(\n      a11 * b11 - a12 * b10 + a13 * b09,\n      a02 * b10 - a01 * b11 - a03 * b09,\n      a31 * b05 - a32 * b04 + a33 * b03,\n      a22 * b04 - a21 * b05 - a23 * b03,\n      a12 * b08 - a10 * b11 - a13 * b07,\n      a00 * b11 - a02 * b08 + a03 * b07,\n      a32 * b02 - a30 * b05 - a33 * b01,\n      a20 * b05 - a22 * b02 + a23 * b01,\n      a10 * b10 - a11 * b08 + a13 * b06,\n      a01 * b08 - a00 * b10 - a03 * b06,\n      a30 * b04 - a31 * b02 + a33 * b00,\n      a21 * b02 - a20 * b04 - a23 * b00,\n      a11 * b07 - a10 * b09 - a12 * b06,\n      a00 * b09 - a01 * b07 + a02 * b06,\n      a31 * b01 - a30 * b03 - a32 * b00,\n      a20 * b03 - a21 * b01 + a22 * b00) / det;\n}\n\n\nmat4 transpose(in mat4 m) {\n  vec4 i0 = m[0];\n  vec4 i1 = m[1];\n  vec4 i2 = m[2];\n  vec4 i3 = m[3];\n\n  return mat4(\n    vec4(i0.x, i1.x, i2.x, i3.x),\n    vec4(i0.y, i1.y, i2.y, i3.y),\n    vec4(i0.z, i1.z, i2.z, i3.z),\n    vec4(i0.w, i1.w, i2.w, i3.w)\n  );\n}\n\nvoid main()\n{\n  vUv = uv;\n\n  vPosition = position;\n\n  vec3 offset = vec3(\n    sin(position.x * 50.0 + time),\n    sin(position.y * 10.0 + time * 2.0),\n    cos(position.z * 40.0 + time)\n  ) * 0.003;\n\n  vPosition *= 1.0 + selected * 0.2;\n\n  vNormal = normalize(inverse(transpose(modelMatrix)) * vec4(normalize(normal), 1.0)).xyz;\n  vWorldPos = (modelMatrix * vec4(vPosition, 1.0)).xyz;\n\n  vec4 mvPosition = modelViewMatrix * vec4(vPosition + offset, 1.0);\n  gl_Position = projectionMatrix * mvPosition;\n}\n`,\n\npanoball_frag : `\nuniform sampler2D tex, texfx;\nuniform float time;\nuniform float selected;\nvarying vec2 vUv;\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec3 vWorldPos;\n\n\nvoid main( void ) {\n  vec2 uv = vUv;\n  //uv.y =  1.0 - uv.y;\n\n  vec3 eye = normalize(cameraPosition - vWorldPos);\n  float fresnel = abs(dot(eye, vNormal));\n  float shift = pow((1.0 - fresnel), 4.0) * 0.05;\n\n  vec3 col = vec3(\n    texture2D(tex, uv - shift).r,\n    texture2D(tex, uv).g,\n    texture2D(tex, uv + shift).b\n  );\n\n  col = mix(col * 0.7, vec3(1.0), 0.7 - fresnel);\n\n  col += selected * 0.3;\n\n  float t = time * 0.4 + vPosition.x + vPosition.z;\n  uv = vec2(vUv.x + t * 0.2, vUv.y + t);\n  vec3 fx = texture2D(texfx, uv).rgb * 0.4;\n\n\n  gl_FragColor = vec4(col + fx, 1.0);\n}\n`,\n\nbeam_frag : `\nuniform float time;\nuniform sampler2D tex;\nvarying vec2 vUv;\n\nvoid main( void ) {\n  float t = time;\n  vec4 col = texture2D(tex, vec2(vUv.x, vUv.y * 3.0 + time * 2.0));\n  col *= vUv.y;\n  gl_FragColor = col;\n}\n`,\n\n};","import * as THREE from 'three';\nimport EventDispatcher from './EventDispatcher.js';\n\nvar tempMatrix = new THREE.Matrix4();\nexport var rayMaterial;\nconst validStateController = [\n  \"primary\",\n  \"secondary\",\n  \"both\",\n  \"left\",\n  \"right\"\n];\n\nexport default class RayControl extends EventDispatcher {\n  enable() {\n    this.setLineStyle(this.previousLineStyle);\n    this.enabled = true;\n  }\n\n  _sort() {\n    this.currentStates = this.currentStates.sort((a,b) => {\n      let pa = a.order || 0;\n      let pb = b.order || 0;\n      return pa - pb;\n    });\n  }\n\n  disable() {\n    this.lineBasic.visible = this.line0.visible = false;\n    this.enabled = false;\n    this.controllers.forEach(controller => controller.active = false);\n  }\n\n  changeHandedness(primary) {\n    if (primary !== this.primary) {\n      this.primary = primary;\n      this.secondary = primary === \"right\" ? \"left\" : \"right\";\n\n      this.dispatchEvent(\"handednessChanged\", {primary: this.primary, secondary: this.secondary});\n    }\n  }\n\n  addState(name, state, activate) {\n    if (this.states[name]) {\n      console.error(`RayControl state '${name}' already exist, please use a different name.`);\n      return;\n    }\n\n    state.name = name;\n\n    if (typeof state.raycaster === \"undefined\") {\n      state.raycaster = true;\n    }\n\n    if (typeof state.controller === \"undefined\") {\n      state.controller = \"primary\";\n    } else if (!validStateController.includes(state.controller)) {\n      console.warn(\"Invalid controller selector:\", state.controller);\n      state.controller = \"primary\";\n    }\n\n    this.states[name] = state;\n\n    if (activate === true) {\n      this.currentStates.push(state);\n    }\n\n    return state;\n  }\n\n  activateState(name) {\n    if (this.states[name]) {\n      this.currentStates.push(this.states[name]);\n      this._sort();\n    }\n  }\n\n  deactivateAll(name) {\n    this.currentStates = [];\n    this.controllers.forEach(c => {\n      this.currentStates.forEach(s => {\n        if (c.intersections[s.name]) {\n          c.intersections[s.name] = null;\n        }\n      });\n    });\n  }\n\n  deactivateState(name) {\n    this.currentStates.splice(this.currentStates.indexOf(name), 1);\n    this.controllers.forEach(c => {\n      if (c.intersections[name]) {\n        c.intersections[name] = null;\n      }\n    });\n\n    this._sort();\n  }\n\n  addController(controller, inputSource) {\n    let controllerData = {\n      controller: controller,\n      inputSource: inputSource,\n      active: false,\n      stateHit: {},\n      intersections: {},\n      currentIntersection: null,\n      hit: false\n    };\n\n    this.controllers.push(controllerData);\n\n    if (this.matchController(controllerData, \"primary\")) {\n      controller.add( this.raycasterContext );\n    }\n\n    this.dispatchEvent(\"controllerConnected\", controllerData);\n  }\n\n  removeController(controller) {\n    const index = this.controllers.findIndex(controllerData => controllerData.controller === controller);\n    const controllerData = this.controllers.find(controllerData => controllerData.controller === controller)\n    this.controllers.splice(index, 1);\n    this.dispatchEvent(\"controllerDisconnected\", controllerData);\n  }\n\n  constructor(ctx, primary) {\n    super();\n    this.ctx = ctx;\n\n    if (typeof primary === \"undefined\") {\n      this.primary = \"right\";\n      this.secondary = \"left\";\n    } else {\n      this.primary = primary;\n      this.secondary = primary === \"right\" ? \"left\" : \"right\";\n    }\n\n    this.controllers = [];\n\n    this.previousLineStyle = 'pretty';\n    this.enabled = true;\n    this.raycaster = new THREE.Raycaster();\n    this.states = {};\n    this.currentStates = [];\n\n    var line = ctx.assets['teleport_model'].scene.getObjectByName('beam');\n\n    ctx.assets['beam_tex'].wrapT = THREE.RepeatWrapping;\n    ctx.assets['beam_tex'].wrapS = THREE.RepeatWrapping;\n    rayMaterial = line.material = new THREE.ShaderMaterial({\n      uniforms: {\n        time: {value: 0},\n        active: {value: 0},\n        tex: {value: ctx.assets['beam_tex']}\n      },\n      vertexShader: ctx.shaders.basic_vert,\n      fragmentShader: ctx.shaders.beam_frag,\n      blending: THREE.AdditiveBlending,\n      transparent: true\n    });\n\n    line.renderOrder = 10;\n\n    line.name = 'line';\n    this.rayLength = 5;\n    line.scale.z = this.rayLength;\n\n    this.line0 = line.clone();\n    this.line0.visible = true;\n\n    this.raycasterContext = new THREE.Group();\n    this.raycasterContext.add(this.line0);\n    this.raycasterContext.name = 'raycasterContext';\n\n    var geometry = new THREE.BufferGeometry().setFromPoints( [ new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 0, 0, - 1 ) ] );\n\n    this.lineBasic = new THREE.Line( geometry );\n    this.lineBasic.name = 'line';\n    this.lineBasic.scale.z = 5;\n    this.lineBasic.visible = false;\n    this.raycasterContext.add(this.lineBasic);\n  }\n\n  setLineStyle(lineStyle) {\n    const basic = lineStyle === 'basic';\n    this.lineBasic.visible = basic;\n    this.line0.visible = !basic;\n    this.previousLineStyle = lineStyle;\n  }\n\n  /*\n  selector could be: left, right, both, primary, secondary\n  */\n  matchController(controllerData, selector) {\n    const handedness = controllerData.inputSource.handedness;\n\n    return (\n      (selector === handedness)  ||\n      (selector === \"both\" && (handedness === \"right\" || handedness === \"left\")) ||\n      (selector === \"primary\" && this.primary === handedness) ||\n      (selector === \"secondary\" && this.secondary === handedness)\n    );\n  }\n\n  onSelectStart(evt) {\n    if (!this.enabled) { return; }\n\n    let controller = evt.target;\n    let controllerData = this.controllers.find(c => c.controller === controller);\n    if (controllerData) {\n      controllerData.active = true;\n      if (controllerData.currentIntersection) {\n        const state = controllerData.currentIntersection.state;\n        if (state.onSelectStart) {\n          state.onSelectStart(controllerData.currentIntersection.intersection, controllerData.controller);\n        }\n      }\n\n      // Check no raycaster states\n      this.currentStates.forEach(state => {\n        if (state.onSelectStart && !state.raycaster) {\n          state.onSelectStart(controllerData.intersections[state.name], controller);\n        }\n      });\n    }\n  }\n\n  execute(ctx, delta, time) {\n    if (!this.enabled || this.currentStates.length === 0) { return; }\n\n    rayMaterial.uniforms.time.value = time;\n\n    let firstHit = false;\n\n    var stateIntersections = {};\n    for (var c = 0; c < this.controllers.length; c++) {\n      let controllerData = this.controllers[c];\n\n      for (var i = 0; i < this.currentStates.length; i++) {\n        let state = this.currentStates[i];\n        if (!state.raycaster) {\n          continue;\n        }\n\n        // Check if this controller should be active on this state\n        if (!this.matchController(controllerData, state.controller)) {\n          continue;\n        }\n\n        let controller = controllerData.controller;\n        let active = controllerData.active;\n        let intersections = this.getIntersections(controller, state.colliderMesh);\n\n        if (intersections.length > 0) {\n          // Use just the closest object\n          controllerData.intersections[state.name] = intersections[0];\n          controllerData.stateHit[state.name] = true;\n        } else {\n          controllerData.intersections[state.name] = null;\n        }\n      }\n    }\n\n    this.line0.scale.z = Math.min(this.rayLength, 1);\n    this.lineBasic.scale.z = Math.min(this.rayLength, 1);\n\n    // For each controller, find the closest intersection from all the states\n    for (var c = 0; c < this.controllers.length; c++) {\n      let controllerData = this.controllers[c];\n      let intersections = Object.entries(controllerData.intersections).filter(i => i[1] !== null);\n      if (intersections.length > 0) {\n\n        intersections.sort((a,b) => {\n          return a[1].distance - b[1].distance;\n        });\n\n        const intersectionData = intersections[0];\n        const intersection = intersectionData[1];\n        const state = this.states[intersectionData[0]];\n\n        controllerData.prevIntersection = controllerData.currentIntersection;\n        controllerData.currentIntersection = {\n          state, intersection\n        };\n\n        if (state.lineStyleOnIntersection) {\n          this.setLineStyle(state.lineStyleOnIntersection);\n        } else {\n          this.setLineStyle('advanced');\n        }\n\n        state.onHover && state.onHover(intersection, controllerData.active, controllerData.controller);\n        this.line0.scale.z = Math.min(intersection.distance, 1);\n        this.lineBasic.scale.z = Math.min(intersection.distance, 1);\n      } else {\n        controllerData.currentIntersection = null;\n      }\n    }\n\n    // Handle onHoverLeave\n    for (var c = 0; c < this.controllers.length; c++) {\n      let controllerData = this.controllers[c];\n      if (!controllerData.prevIntersection) {\n        continue;\n      }\n\n      // If we can't find the previous intersection currently enabled, we should emit hoverLeave\n      if (!this.controllers.find(c => {\n        let prev = controllerData.prevIntersection;\n        let current = c.currentIntersection;\n        return current && prev.state.name === current.state.name &&\n          prev.intersection.object === current.intersection.object;\n      }\n        )) {\n        controllerData.prevIntersection.state.onHoverLeave(\n          controllerData.prevIntersection.intersection,\n          false,\n          controllerData.controller\n        );\n\n        controllerData.prevIntersection = null;\n      }\n    }\n  }\n\n  getIntersections( controller, colliderMesh ) {\n    let raycasterContext = controller.getObjectByName('raycasterContext');\n    if (!raycasterContext) {\n      console.warn('No raycasterContext found for this controller', controller);\n      return [];\n    }\n\n    tempMatrix.identity().extractRotation( raycasterContext.matrixWorld );\n\n    this.raycaster.ray.origin.setFromMatrixPosition( raycasterContext.matrixWorld );\n    this.raycaster.ray.direction.set( 0, 0, - 1 ).applyMatrix4( tempMatrix );\n\n    if (Array.isArray(colliderMesh)) {\n      return this.raycaster.intersectObjects( colliderMesh, true);\n    } else {\n      return this.raycaster.intersectObject( colliderMesh, true);\n    }\n  }\n\n  onSelectEnd(evt) {\n    if (!this.enabled) { return; }\n\n    let controllerData = this.controllers.find(c => c.controller === evt.target)\n    if (!controllerData || !controllerData.active) { return; }\n\n    if (controllerData) {\n      if (controllerData.currentIntersection) {\n        const state = controllerData.currentIntersection.state;\n        if (state.onSelectEnd) {\n          state.onSelectEnd(controllerData.currentIntersection.intersection, controllerData.controller);\n        }\n      }\n\n      // Check no raycaster states\n      this.currentStates.forEach(state => {\n        if (state.onSelectEnd && !state.raycaster) {\n          state.onSelectEnd(null, controllerData.controller);\n        }\n      });\n    }\n\n    controllerData.active = false;\n  }\n}\n","/**\n * @private\n * @class EventDispatcher\n */\nexport default class EventDispatcher {\n  constructor() {\n    this._listeners = {};\n    this.stats = {\n      fired: 0,\n      handled: 0\n    };\n  }\n\n  /**\n   * Add an event listener\n   * @param {String} eventName Name of the event to listen\n   * @param {Function} listener Callback to trigger when the event is fired\n   */\n  addEventListener(eventName, listener) {\n    let listeners = this._listeners;\n    if (listeners[eventName] === undefined) {\n      listeners[eventName] = [];\n    }\n\n    if (listeners[eventName].indexOf(listener) === -1) {\n      listeners[eventName].push(listener);\n    }\n  }\n\n  /**\n   * Check if an event listener is already added to the list of listeners\n   * @param {String} eventName Name of the event to check\n   * @param {Function} listener Callback for the specified event\n   */\n  hasEventListener(eventName, listener) {\n    return (\n      this._listeners[eventName] !== undefined &&\n      this._listeners[eventName].indexOf(listener) !== -1\n    );\n  }\n\n  /**\n   * Remove an event listener\n   * @param {String} eventName Name of the event to remove\n   * @param {Function} listener Callback for the specified event\n   */\n  removeEventListener(eventName, listener) {\n    var listenerArray = this._listeners[eventName];\n    if (listenerArray !== undefined) {\n      var index = listenerArray.indexOf(listener);\n      if (index !== -1) {\n        listenerArray.splice(index, 1);\n      }\n    }\n  }\n\n  /**\n   * Dispatch an event\n   * @param {String} eventName Name of the event to dispatch\n   * @param {Data} data to eit\n   */\n  dispatchEvent(eventName, data) {\n    this.stats.fired++;\n\n    var listenerArray = this._listeners[eventName];\n    if (listenerArray !== undefined) {\n      var array = listenerArray.slice(0);\n\n      for (var i = 0; i < array.length; i++) {\n        array[i].call(this, data);\n      }\n    }\n  }\n\n  /**\n   * Reset stats counters\n   */\n  resetCounters() {\n    this.stats.fired = this.stats.handled = 0;\n  }\n}\n","import {rayMaterial} from \"./RayControl.js\";\nimport * as THREE from 'three';\n\nvar tempMatrix = new THREE.Matrix4();\nvar intersected = [];\n\nexport default class Teleport {\n  constructor(ctx, mesh) {\n    this.ctx = ctx;\n\n    // Holder for all the\n    this.teleportEntity = new THREE.Group();\n\n    this.active = false;\n\n    this.teleportHitGeometry = ctx.assets['teleport_model'].scene.getObjectByName('goal');\n    this.teleportHitGeometry.material = rayMaterial;\n\n    this.teleportHitGeometry.renderOrder = 10;\n\n    this.ballColliding = ctx.assets['teleport_model'].scene.getObjectByName('glow');\n    this.ballColliding.material = new THREE.MeshBasicMaterial({\n      color: 0x00257b,\n      map: ctx.assets['glow_tex'],\n      transparent: true,\n      blending: THREE.AdditiveBlending\n    });\n\n    this.ballColliding.renderOrder = 10;\n\n\n    this.ballColliding.visible = false;\n\n    this.teleportEntity.add(this.ballColliding);\n\n    this.teleportHitGeometry.visible = false;\n\n    this.teleportHitGeometry.position.set(-2, 0, -2);\n\n    this.teleportEntity.add(this.teleportHitGeometry);\n\n    this.ctx.scene.add(this.teleportEntity);\n\n    // sounds\n    try {\n      this.startSound = new THREE.Audio(ctx.audioListener);\n      this.startSound.setBuffer(ctx.assets['teleport_a_snd']);\n      this.startSound.setLoop(true);\n      this.startSound.pause();\n    } catch (e) {\n      console.warn('Failed to initialize start sound:', e);\n      this.startSound = null;\n    }\n\n    try {\n      this.endSound = new THREE.Audio(ctx.audioListener);\n      this.endSound.setBuffer(ctx.assets['teleport_b_snd']);\n      this.endSound.setLoop(false);\n      this.endSound.pause();\n    } catch (e) {\n      console.warn('Failed to initialize end sound:', e);\n      this.endSound = null;\n    }\n  }\n\n\n  onSelectStart(evt) {\n    //if (evt.target === this.ctx.controllers[0])\n    this.active = true;\n    if (this.endSound) this.endSound.pause();\n    if (this.startSound) this.startSound.play();\n  }\n\n  onHoverLeave() {\n    this.ballColliding.visible = false;\n    this.teleportHitGeometry.visible = false;\n    if (this.startSound) this.startSound.pause();\n  }\n\n  onHover(hitPoint, active) {\n    if (active) {\n      this.teleportHitGeometry.visible = true;\n      this.teleportHitGeometry.position.copy(hitPoint);\n      this.hit = true;\n      this.ballColliding.visible = false;\n    } else {\n      this.ballColliding.visible = true;\n      this.ballColliding.position.copy(hitPoint);\n    }\n  }\n\n  onSelectEnd(targetPoint) {\n    const headPosition = this.ctx.renderer.xr.getCamera(this.ctx.camera).position;\n    const offset = targetPoint.sub(headPosition);\n    offset.y = 0; // We don't want to change height to floor's level\n\n    this.ctx.cameraRig.position.add(offset);\n    this.teleportHitGeometry.visible = false;\n\n    this.active = false;\n\n    if (this.startSound) this.startSound.pause();\n    if (this.endSound) this.endSound.play();\n  }\n}\n\n","// Periodic Table Element Data\n// PSE in VR - Virtuelles Periodensystem\n\n// Element Group Colors\nexport const GROUP_COLORS = {\n  alkali: 0xFF6B6B,           // Alkalimetalle\n  alkalineEarth: 0xFFA94D,    // Erdalkalimetalle\n  transition: 0x74B9FF,       // bergangsmetalle\n  lanthanide: 0xD63384,       // Lanthanoide\n  actinide: 0x4A69BD,         // Actinoide\n  metal: 0x20C997,             // Metalle (13-16)\n  metalloid: 0x17A2B8,          // Metalloide\n  nonmetal: 0xFFC107,           // Nichtmetalle\n  halogen: 0x00D9FF,           // Halogene\n  nobleGas: 0xFFFFFF            // Edelgase (use specific gas colors)\n};\n\n// Noble gas discharge colors\nexport const NOBLE_GAS_COLORS = {\n  He: 0xFFE4E1,  // Helium - pale pink/white\n  Ne: 0xFF6B00,  // Neon - orange-red\n  Ar: 0x7B68EE,  // Argon - purple\n  Kr: 0x00CED1,  // Krypton - cyan\n  Xe: 0x4169E1,  // Xenon - blue\n  Rn: 0xE0FFFF   // Radon - light blue\n};\n\n// Element definitions (partial for MVP - Phase 1)\nexport const ELEMENTS = [\n  // Hydrogen\n  {\n    symbol: 'H',\n    name: 'Wasserstoff',\n    atomicNumber: 1,\n    mass: 1.008,\n    group: 'nonmetal',\n    period: 1,\n    block: 's',\n    groupNumber: 1,\n    color: 0xFFC107,\n    description: 'Das hufigste Element im Universum. Bildet 75% der Masse der Sonne.',\n    theme: 'cosmic',\n    experiments: ['knallgas', 'fusion', 'fuelcell']\n  },\n\n  // Helium\n  {\n    symbol: 'He',\n    name: 'Helium',\n    atomicNumber: 2,\n    mass: 4.003,\n    group: 'nobleGas',\n    period: 1,\n    block: 's',\n    groupNumber: 18,\n    color: NOBLE_GAS_COLORS.He,\n    description: 'Das zweithufigste Element im Universum. Wurde zuerst im Sonnenspektrum entdeckt.',\n    theme: 'solar',\n    experiments: ['superfluid', 'voiceshift']\n  },\n\n  // Lithium\n  {\n    symbol: 'Li',\n    name: 'Lithium',\n    atomicNumber: 3,\n    mass: 6.941,\n    group: 'alkali',\n    period: 2,\n    block: 's',\n    groupNumber: 1,\n    color: GROUP_COLORS.alkali,\n    description: 'Das leichteste Metall. Wichtiger Bestandteil von Lithium-Ionen-Batterien.',\n    theme: 'energy',\n    experiments: ['waterReaction', 'battery']\n  },\n\n  // Beryllium\n  {\n    symbol: 'Be',\n    name: 'Beryllium',\n    atomicNumber: 4,\n    mass: 9.012,\n    group: 'alkalineEarth',\n    period: 2,\n    block: 's',\n    groupNumber: 2,\n    color: GROUP_COLORS.alkalineEarth,\n    description: 'Hochgiftiges Metall mit niedriger Dichte. Verwendet in der Weltraumtechnik.',\n    theme: 'gem',\n    experiments: ['crystal', 'toxicity']\n  },\n\n  // Bor\n  {\n    symbol: 'B',\n    name: 'Bor',\n    atomicNumber: 5,\n    mass: 10.81,\n    group: 'metalloid',\n    period: 2,\n    block: 'p',\n    groupNumber: 13,\n    color: GROUP_COLORS.metalloid,\n    description: 'Hartes Material fr Glasfasern. Kommt in Wstensalzen vor.',\n    theme: 'desert',\n    experiments: ['borax', 'fiberglass']\n  },\n\n  // Carbon\n  {\n    symbol: 'C',\n    name: 'Kohlenstoff',\n    atomicNumber: 6,\n    mass: 12.011,\n    group: 'nonmetal',\n    period: 2,\n    block: 'p',\n    groupNumber: 14,\n    color: 0xFFC107,\n    description: 'Das Element des Lebens. Grundbaustein aller organischen Verbindungen.',\n    theme: 'life',\n    experiments: ['diamond', 'graphite', 'dna']\n  },\n\n  // Nitrogen\n  {\n    symbol: 'N',\n    name: 'Stickstoff',\n    atomicNumber: 7,\n    mass: 14.007,\n    group: 'nonmetal',\n    period: 2,\n    block: 'p',\n    groupNumber: 15,\n    color: 0xFFC107,\n    description: 'Macht 78% der Atmosphre aus. Essentiell fr Proteine und DNA.',\n    theme: 'atmosphere',\n    experiments: ['liquid', 'haberbosch', 'fertilizer']\n  },\n\n  // Oxygen\n  {\n    symbol: 'O',\n    name: 'Sauerstoff',\n    atomicNumber: 8,\n    mass: 15.999,\n    group: 'nonmetal',\n    period: 2,\n    block: 'p',\n    groupNumber: 16,\n    color: 0xFFC107,\n    description: 'Zweithufigstes Element im Universum. Notwendig fr Atmung und Verbrennung.',\n    theme: 'breath',\n    experiments: ['combustion', 'ozone', 'photosynthesis']\n  },\n\n  // Fluorine\n  {\n    symbol: 'F',\n    name: 'Fluor',\n    atomicNumber: 9,\n    mass: 18.998,\n    group: 'halogen',\n    period: 2,\n    block: 'p',\n    groupNumber: 17,\n    color: GROUP_COLORS.halogen,\n    description: 'Reaktivstes aller Elemente. Wird in Teflon und Zahncreme verwendet.',\n    theme: 'protection',\n    experiments: ['reaction', 'teflon']\n  },\n\n  // Neon\n  {\n    symbol: 'Ne',\n    name: 'Neon',\n    atomicNumber: 10,\n    mass: 20.180,\n    group: 'nobleGas',\n    period: 2,\n    block: 'p',\n    groupNumber: 18,\n    color: NOBLE_GAS_COLORS.Ne,\n    description: 'Leuchtet bei elektrischer Entladung orange-rot. Symbol der Stadtbeleuchtung.',\n    theme: 'lights',\n    experiments: ['neon', 'laser']\n  },\n\n  // Sodium\n  {\n    symbol: 'Na',\n    name: 'Natrium',\n    atomicNumber: 11,\n    mass: 22.990,\n    group: 'alkali',\n    period: 3,\n    block: 's',\n    groupNumber: 1,\n    color: GROUP_COLORS.alkali,\n    description: 'Silberglnzendes Metall, butterweich. Basis fr Speisesalz (NaCl).',\n    theme: 'kitchen',\n    experiments: ['water', 'flame', 'saltcrystal']\n  },\n\n  // Magnesium\n  {\n    symbol: 'Mg',\n    name: 'Magnesium',\n    atomicNumber: 12,\n    mass: 24.305,\n    group: 'alkalineEarth',\n    period: 3,\n    block: 's',\n    groupNumber: 2,\n    color: GROUP_COLORS.alkalineEarth,\n    description: 'Blendend weies Licht beim Verbrennen. Kommt in Chlorophyll vor.',\n    theme: 'light',\n    experiments: ['flash', 'chlorophyll', 'alloy']\n  },\n\n  // Aluminum\n  {\n    symbol: 'Al',\n    name: 'Aluminium',\n    atomicNumber: 13,\n    mass: 26.982,\n    group: 'metal',\n    period: 3,\n    block: 'p',\n    groupNumber: 13,\n    color: GROUP_COLORS.metal,\n    description: 'Das hufigste Metall der Erdkruste. Leicht und korrosionsbestndig.',\n    theme: 'industry',\n    experiments: ['hallheroult', 'thermit', 'foil']\n  },\n\n  // Silicon\n  {\n    symbol: 'Si',\n    name: 'Silizium',\n    atomicNumber: 14,\n    mass: 28.086,\n    group: 'metalloid',\n    period: 3,\n    block: 'p',\n    groupNumber: 14,\n    color: GROUP_COLORS.metalloid,\n    description: 'Zweithufigstes Element der Erdkruste. Basis aller modernen Elektronik.',\n    theme: 'silicon',\n    experiments: ['transistor', 'solar', 'sand']\n  },\n\n  // Phosphorus\n  {\n    symbol: 'P',\n    name: 'Phosphor',\n    atomicNumber: 15,\n    mass: 30.974,\n    group: 'nonmetal',\n    period: 3,\n    block: 'p',\n    groupNumber: 15,\n    color: 0xFFC107,\n    description: 'Glht wei im Dunkeln. Wichtiger Bestandteil von DNA und ATP.',\n    theme: 'fire',\n    experiments: ['white', 'red', 'match']\n  },\n\n  // Sulfur\n  {\n    symbol: 'S',\n    name: 'Schwefel',\n    atomicNumber: 16,\n    mass: 32.065,\n    group: 'nonmetal',\n    period: 3,\n    block: 'p',\n    groupNumber: 16,\n    color: 0xFFC107,\n    description: 'Gelbes Element mit charakteristischem Geruch. Kommt in Vulkanen vor.',\n    theme: 'volcano',\n    experiments: ['burning', 'gunpowder', 'bromo']\n  },\n\n  // Chlorine\n  {\n    symbol: 'Cl',\n    name: 'Chlor',\n    atomicNumber: 17,\n    mass: 35.453,\n    group: 'halogen',\n    period: 3,\n    block: 'p',\n    groupNumber: 17,\n    color: GROUP_COLORS.halogen,\n    description: 'Grn-gelbes Giftgas. Wird zur Wasserdesinfektion verwendet.',\n    theme: 'swimming',\n    experiments: ['disinfection', 'salt', 'gas']\n  },\n\n  // Argon\n  {\n    symbol: 'Ar',\n    name: 'Argon',\n    atomicNumber: 18,\n    mass: 39.948,\n    group: 'nobleGas',\n    period: 3,\n    block: 'p',\n    groupNumber: 18,\n    color: NOBLE_GAS_COLORS.Ar,\n    description: 'Hufigstes Edelgas (1% Atmosphre). Wird fr WIG-Schweien verwendet.',\n    theme: 'welding',\n    experiments: ['plasma', 'inert']\n  },\n\n  // Calcium\n  {\n    symbol: 'Ca',\n    name: 'Calcium',\n    atomicNumber: 20,\n    mass: 40.078,\n    group: 'alkalineEarth',\n    period: 4,\n    block: 's',\n    groupNumber: 2,\n    color: GROUP_COLORS.alkalineEarth,\n    description: 'Bauknochen des Lebens. Fnft-hufigstes Element der Erdkruste.',\n    theme: 'skeleton',\n    experiments: ['burning', 'bones', 'limestone']\n  },\n\n  // Iron\n  {\n    symbol: 'Fe',\n    name: 'Eisen',\n    atomicNumber: 26,\n    mass: 55.845,\n    group: 'transition',\n    period: 4,\n    block: 'd',\n    groupNumber: 8,\n    color: GROUP_COLORS.transition,\n    description: 'Wichtigstes Metall der Menschheit. Grundbaustein von Stahl und Hmoglobin.',\n    theme: 'forge',\n    experiments: ['magnet', 'rust', 'steel']\n  },\n\n  // Copper\n  {\n    symbol: 'Cu',\n    name: 'Kupfer',\n    atomicNumber: 29,\n    mass: 63.546,\n    group: 'transition',\n    period: 4,\n    block: 'd',\n    groupNumber: 11,\n    color: GROUP_COLORS.transition,\n    description: 'Erstes Metall der Menschheit. Exzellenter elektrischer Leiter.',\n    theme: 'electric',\n    experiments: ['conductivity', 'patina', 'bronze']\n  },\n\n  // Gold\n  {\n    symbol: 'Au',\n    name: 'Gold',\n    atomicNumber: 79,\n    mass: 196.967,\n    group: 'transition',\n    period: 6,\n    block: 'd',\n    groupNumber: 11,\n    color: GROUP_COLORS.transition,\n    description: 'Edelstes Metall. Einziges gelbes Metall (relativistische Effekte).',\n    theme: 'treasure',\n    experiments: ['ductility', 'alloys', 'electroplating']\n  },\n\n  // Uranium\n  {\n    symbol: 'U',\n    name: 'Uran',\n    atomicNumber: 92,\n    mass: 238.029,\n    group: 'actinide',\n    period: 7,\n    block: 'f',\n    groupNumber: 3,\n    color: GROUP_COLORS.actinide,\n    description: 'Schwerstes hufiges natrliches Element. Basis fr Kernenergie.',\n    theme: 'nuclear',\n    experiments: ['fission', 'decay', 'fluorescence']\n  },\n\n  {\n    symbol: 'K',\n    name: 'Kalium',\n    atomicNumber: 19,\n    mass: 39.098,\n    group: 'alkali',\n    period: 4,\n    block: 's',\n    groupNumber: 1,\n    color: GROUP_COLORS.alkali,\n    description: 'Reaktiv Metall, in der Natur oft als Ion. Wesentlich fr biologische Prozesse.',\n    theme: 'biological',\n    experiments: ['water', 'flame', 'banane']\n  },\n\n  {\n    symbol: 'Ca',\n    name: 'Calcium',\n    atomicNumber: 20,\n    mass: 40.078,\n    group: 'alkalineEarth',\n    period: 4,\n    block: 's',\n    groupNumber: 2,\n    color: GROUP_COLORS.alkalineEarth,\n    description: 'Fnft-hufigstes Element der Erdkruste. Fnft-hufigstes Element im menschlichen Krper.',\n    theme: 'biological',\n    experiments: ['burning', 'knochen', 'kalkstein']\n  },\n\n  {\n    symbol: 'Sc',\n    name: 'Scandium',\n    atomicNumber: 21,\n    mass: 44.956,\n    group: 'transition',\n    period: 4,\n    block: 'd',\n    groupNumber: 3,\n    color: GROUP_COLORS.transition,\n    description: 'Seltenes bergangsmetall. Wird in Sportgerten und Hochleistungslegierungen verwendet.',\n    theme: 'aerospace',\n    experiments: ['alloy', 'magnetic', 'sport']\n  },\n\n  {\n    symbol: 'Ti',\n    name: 'Titan',\n    atomicNumber: 22,\n    mass: 47.867,\n    group: 'transition',\n    period: 4,\n    block: 'd',\n    groupNumber: 4,\n    color: GROUP_COLORS.transition,\n    description: 'Korrosionsbestndiges Metall mit hohem Schmelzpunkt. Fr Luft- und Raumfahrtindustrie.',\n    theme: 'aerospace',\n    experiments: ['biokompatibilitt', 'legierung', 'oxid']\n  },\n\n  {\n    symbol: 'V',\n    name: 'Vanadium',\n    atomicNumber: 23,\n    mass: 50.942,\n    group: 'transition',\n    period: 4,\n    block: 'd',\n    groupNumber: 5,\n    color: GROUP_COLORS.transition,\n    description: 'Hartes, grau-weies Metall. Fr Werkzeugstahl und Titanlegierungen.',\n    theme: 'industry',\n    experiments: ['stahl', 'legierung', 'katalysator']\n  },\n\n  {\n    symbol: 'Cr',\n    name: 'Chrom',\n    atomicNumber: 24,\n    mass: 51.996,\n    group: 'transition',\n    period: 4,\n    block: 'd',\n    groupNumber: 6,\n    color: GROUP_COLORS.transition,\n    description: 'Glnzendes, korrosionsbestndiges Metall. Basis von Edelstahl und Verchromung.',\n    theme: 'industry',\n    experiments: ['edelstahl', 'verchromung', 'pigment']\n  },\n\n  {\n    symbol: 'Mn',\n    name: 'Mangan',\n    atomicNumber: 25,\n    mass: 54.938,\n    group: 'transition',\n    period: 4,\n    block: 'd',\n    groupNumber: 7,\n    color: GROUP_COLORS.transition,\n    description: 'Wichtig fr Stahlherstellung. Bioelement fr Photosynthese.',\n    theme: 'industry',\n    experiments: ['stahl', 'photosynthese', 'batterie']\n  },\n\n  {\n    symbol: 'Co',\n    name: 'Kobalt',\n    atomicNumber: 27,\n    mass: 58.933,\n    group: 'transition',\n    period: 4,\n    block: 'd',\n    groupNumber: 9,\n    color: GROUP_COLORS.transition,\n    description: 'Blau-graues, ferromagnetisches Metall. Fr Supraleger, Magnete und Lithium-Ionen-Batterien.',\n    theme: 'technology',\n    experiments: ['magnet', 'batterie', 'legierung']\n  },\n\n  {\n    symbol: 'Ni',\n    name: 'Nickel',\n    atomicNumber: 28,\n    mass: 58.693,\n    group: 'transition',\n    period: 4,\n    block: 'd',\n    groupNumber: 10,\n    color: GROUP_COLORS.transition,\n    description: 'Silbrig-weies, korrosionsbestndiges Metall. Mnzmetall und fr Legierungen.',\n    theme: 'technology',\n    experiments: ['mnzen', 'legierung', 'katalysator']\n  },\n\n  {\n    symbol: 'Zn',\n    name: 'Zink',\n    atomicNumber: 30,\n    mass: 65.38,\n    group: 'transition',\n    period: 4,\n    block: 'd',\n    groupNumber: 12,\n    color: GROUP_COLORS.transition,\n    description: 'Reaktionsfreies Metall. Fr galvanische Zellen, Verzinkung und Zink-Legierungen.',\n    theme: 'technology',\n    experiments: ['galvanik', 'verzinkung', 'batterie']\n  },\n\n  {\n    symbol: 'Ga',\n    name: 'Gallium',\n    atomicNumber: 31,\n    mass: 69.723,\n    group: 'metal',\n    period: 4,\n    block: 'p',\n    groupNumber: 13,\n    color: GROUP_COLORS.metal,\n    description: 'Schmilzt in der Hand bei Raumtemperatur. Fr Halbleiter und Hochtemperaturthermometer.',\n    theme: 'semiconductor',\n    experiments: ['schmelzen', 'halbleiter', 'thermometer']\n  },\n\n  {\n    symbol: 'Ge',\n    name: 'Germanium',\n    atomicNumber: 32,\n    mass: 72.630,\n    group: 'metalloid',\n    period: 4,\n    block: 'p',\n    groupNumber: 14,\n    color: GROUP_COLORS.metalloid,\n    description: 'Halbleiter fr Transistoren und Optoelektronik. Silizium-Alternative.',\n    theme: 'semiconductor',\n    experiments: ['halbleiter', 'transistor', 'faser']\n  },\n\n  {\n    symbol: 'As',\n    name: 'Arsen',\n    atomicNumber: 33,\n    mass: 74.922,\n    group: 'metalloid',\n    period: 4,\n    block: 'p',\n    groupNumber: 15,\n    color: GROUP_COLORS.metalloid,\n    description: 'Sehr giftiges Halbmetall. Historisch in Tapeten und Farben verwendet.',\n    theme: 'toxic',\n    experiments: ['gift', 'historisch', 'semiconductor']\n  },\n\n  {\n    symbol: 'Se',\n    name: 'Selen',\n    atomicNumber: 34,\n    mass: 78.96,\n    group: 'nonmetal',\n    period: 4,\n    block: 'p',\n    groupNumber: 16,\n    color: GROUP_COLORS.nonmetal,\n    description: 'Wichtiges Spurenelement. Halbleiter und fr Glhbirren.',\n    theme: 'semiconductor',\n    experiments: ['glhbirne', 'photovoltaik', 'toxisch']\n  },\n\n  {\n    symbol: 'Br',\n    name: 'Brom',\n    atomicNumber: 35,\n    mass: 79.904,\n    group: 'halogen',\n    period: 4,\n    block: 'p',\n    groupNumber: 17,\n    color: GROUP_COLORS.halogen,\n    description: 'Einziges flssige Nichtmetall bei Raumtemperatur. Rote Farbe, stechender Geruch.',\n    theme: 'liquid',\n    experiments: ['flssig', 'flammmittel', 'giftig']\n  },\n\n  {\n    symbol: 'Kr',\n    name: 'Krypton',\n    atomicNumber: 36,\n    mass: 83.798,\n    group: 'nobleGas',\n    period: 4,\n    block: 'p',\n    groupNumber: 18,\n    color: NOBLE_GAS_COLORS.Kr,\n    description: 'Edelgas mit hoher Dichte. Fr Blitzlichtlampen und Laser.',\n    theme: 'lighting',\n    experiments: ['laser', 'neon', 'isoliert']\n  },\n\n  {\n    symbol: 'Rb',\n    name: 'Rubidium',\n    atomicNumber: 37,\n    mass: 85.468,\n    group: 'alkali',\n    period: 5,\n    block: 's',\n    groupNumber: 1,\n    color: GROUP_COLORS.alkali,\n    description: 'Weiches, hochreaktives Metall. Fr Atomuhren und Feuerwerk.',\n    theme: 'pyrotechnics',\n    experiments: ['atomuhr', 'feuerwerk', 'reaktion']\n  },\n\n  {\n    symbol: 'Sr',\n    name: 'Strontium',\n    atomicNumber: 38,\n    mass: 87.62,\n    group: 'alkalineEarth',\n    period: 5,\n    block: 's',\n    groupNumber: 2,\n    color: GROUP_COLORS.alkalineEarth,\n    description: 'Fr rote Feuerwerke und Magnete. Radioaktiv (Strontium-90).',\n    theme: 'pyrotechnics',\n    experiments: ['feuerwerk', 'magnet', 'radioaktiv']\n  },\n\n  {\n    symbol: 'Y',\n    name: 'Yttrium',\n    atomicNumber: 39,\n    mass: 88.906,\n    group: 'transition',\n    period: 5,\n    block: 'd',\n    groupNumber: 3,\n    color: GROUP_COLORS.transition,\n    description: 'Seltenes Erdelement. Fr LEDs, Supraleiter und Laser.',\n    theme: 'technology',\n    experiments: ['led', 'laser', 'supraleiter']\n  },\n\n  {\n    symbol: 'Zr',\n    name: 'Zirkonium',\n    atomicNumber: 40,\n    mass: 91.224,\n    group: 'transition',\n    period: 5,\n    block: 'd',\n    groupNumber: 4,\n    color: GROUP_COLORS.transition,\n    description: 'Korrosionsbestndiges Metall. Fr Kernelemente und medizinische Implantate.',\n    theme: 'nuclear',\n    experiments: ['kernelement', 'implantat', 'keramik']\n  },\n\n  {\n    symbol: 'Nb',\n    name: 'Niob',\n    atomicNumber: 41,\n    mass: 92.906,\n    group: 'transition',\n    period: 5,\n    block: 'd',\n    groupNumber: 5,\n    color: GROUP_COLORS.transition,\n    description: 'Supraleiter bei niedrigen Temperaturen. Fr Beschleunigermagnete und Hochspannungstechnik.',\n    theme: 'technology',\n    experiments: ['supraleiter', 'magnet', 'hochspannung']\n  },\n\n  {\n    symbol: 'Mo',\n    name: 'Molybdn',\n    atomicNumber: 42,\n    mass: 95.95,\n    group: 'transition',\n    period: 5,\n    block: 'd',\n    groupNumber: 6,\n    color: GROUP_COLORS.transition,\n    description: 'Extrem hartes Metall. Fr Hochtemperaturanwendungen und Schmierstoffe.',\n    theme: 'industry',\n    experiments: ['hochtemperatur', 'schmiermittel', 'stahl']\n  },\n\n  {\n    symbol: 'Tc',\n    name: 'Technetium',\n    atomicNumber: 43,\n    mass: 98,\n    group: 'transition',\n    period: 5,\n    block: 'd',\n    groupNumber: 7,\n    color: GROUP_COLORS.transition,\n    description: 'Erstes knstliche Element. Radioaktiv. In der medizinischen Bildgebung verwendet.',\n    theme: 'nuclear',\n    experiments: ['knstlich', 'medizin', 'radioaktiv']\n  },\n\n  {\n    symbol: 'Ru',\n    name: 'Ruthenium',\n    atomicNumber: 44,\n    mass: 101.07,\n    group: 'transition',\n    period: 5,\n    block: 'd',\n    groupNumber: 8,\n    color: GROUP_COLORS.transition,\n    description: 'Seltenes, aber wichtiges Metall. Fr Elektronikkontakte und Katalysatoren.',\n    theme: 'technology',\n    experiments: ['katalysator', 'kontakte', 'legierung']\n  },\n\n  {\n    symbol: 'Rh',\n    name: 'Rhodium',\n    atomicNumber: 45,\n    mass: 102.91,\n    group: 'transition',\n    period: 5,\n    block: 'd',\n    groupNumber: 9,\n    color: GROUP_COLORS.transition,\n    description: 'Sehr wertvolles bergangsmetall. Fr Katalysatoren, Schmuck und Thermoelemente.',\n    theme: 'technology',\n    experiments: ['katalysator', 'schmuck', 'thermo']\n  },\n\n  {\n    symbol: 'Pd',\n    name: 'Palladium',\n    atomicNumber: 46,\n    mass: 106.42,\n    group: 'transition',\n    period: 5,\n    block: 'd',\n    groupNumber: 10,\n    color: GROUP_COLORS.transition,\n    description: 'Wertvolles Platin-Metall. Fr Katalysatoren, Schmuck und Wasserstofffilter.',\n    theme: 'technology',\n    experiments: ['katalysator', 'schmuck', 'wasserstoff']\n  },\n\n  {\n    symbol: 'Ag',\n    name: 'Silber',\n    atomicNumber: 47,\n    mass: 107.87,\n    group: 'transition',\n    period: 5,\n    block: 'd',\n    groupNumber: 11,\n    color: GROUP_COLORS.transition,\n    description: 'Bester elektrischer Leiter aller Metalle. Fr Schmuck, Elektronik und Fotografie.',\n    theme: 'precious',\n    experiments: ['elektrisch', 'schmuck', 'fotografie']\n  },\n\n  {\n    symbol: 'Cd',\n    name: 'Cadmium',\n    atomicNumber: 48,\n    mass: 112.41,\n    group: 'transition',\n    period: 5,\n    block: 'd',\n    groupNumber: 12,\n    color: GROUP_COLORS.transition,\n    description: 'Giftiges Metall. Fr NiCd-Batterien, Pigmente und galvanische Elemente.',\n    theme: 'toxic',\n    experiments: ['batterie', 'pigment', 'toxisch']\n  },\n\n  {\n    symbol: 'In',\n    name: 'Indium',\n    atomicNumber: 49,\n    mass: 114.82,\n    group: 'metal',\n    period: 5,\n    block: 'p',\n    groupNumber: 13,\n    color: GROUP_COLORS.metal,\n    description: 'Weiches Metall. Fr ITO-Schichten (Touchscreens), Transistoren und Ltzinn.',\n    theme: 'semiconductor',\n    experiments: ['touchscreen', 'ltinn', 'halbleiter']\n  },\n\n  {\n    symbol: 'Sn',\n    name: 'Zinn',\n    atomicNumber: 50,\n    mass: 118.71,\n    group: 'metal',\n    period: 5,\n    block: 'p',\n    groupNumber: 14,\n    color: GROUP_COLORS.metal,\n    description: 'Historisch wichtiges Metall. Fr Ltlegierungen, Bronze und Konservendosen.',\n    theme: 'history',\n    experiments: ['lten', 'bronze', 'konserven']\n  },\n\n  {\n    symbol: 'Sb',\n    name: 'Antimon',\n    atomicNumber: 51,\n    mass: 121.76,\n    group: 'metalloid',\n    period: 5,\n    block: 'p',\n    groupNumber: 15,\n    color: GROUP_COLORS.metalloid,\n    description: 'Halbmetall mit ungewhnlichen Eigenschaften. Fr Flammhemmer und Legierungen.',\n    theme: 'industry',\n    experiments: ['flammhemmer', 'legierung', 'halbleiter']\n  },\n\n  {\n    symbol: 'Te',\n    name: 'Tellur',\n    atomicNumber: 52,\n    mass: 127.60,\n    group: 'metalloid',\n    period: 5,\n    block: 'p',\n    groupNumber: 16,\n    color: GROUP_COLORS.metalloid,\n    description: 'Seltenes, seltenes Halbmetall. Fr Solarzellen und Legierungen.',\n    theme: 'semiconductor',\n    experiments: ['solarzelle', 'legierung', 'cdte']\n  },\n\n  {\n    symbol: 'I',\n    name: 'Jod',\n    atomicNumber: 53,\n    mass: 126.90,\n    group: 'halogen',\n    period: 5,\n    block: 'p',\n    groupNumber: 17,\n    color: GROUP_COLORS.halogen,\n    description: 'Wichtigstes Spurenelement fr Schilddrse. Dunkle Substanz mit charakteristischem Geruch.',\n    theme: 'biological',\n    experiments: ['schilddrse', 'antiseptik', 'sublimation']\n  },\n\n  {\n    symbol: 'Xe',\n    name: 'Xenon',\n    atomicNumber: 54,\n    mass: 131.29,\n    group: 'nobleGas',\n    period: 5,\n    block: 'p',\n    groupNumber: 18,\n    color: NOBLE_GAS_COLORS.Xe,\n    description: 'Schweres Edelgas. Fr Ionentriebwerke, Narkose und Blitzlichtlampen.',\n    theme: 'space',\n    experiments: ['ionentrieb', 'narkose', 'laser']\n  },\n\n  {\n    symbol: 'Cs',\n    name: 'Csium',\n    atomicNumber: 55,\n    mass: 132.91,\n    group: 'alkali',\n    period: 6,\n    block: 's',\n    groupNumber: 1,\n    color: GROUP_COLORS.alkali,\n    description: 'Weiches, hochreaktives Metall. Schmilzt in der Hand. Przisesste Zeitnormal.',\n    theme: 'precision',\n    experiments: ['schmelzen', 'atomuhr', 'explosion']\n  },\n\n  {\n    symbol: 'Ba',\n    name: 'Barium',\n    atomicNumber: 56,\n    mass: 137.33,\n    group: 'alkalineEarth',\n    period: 6,\n    block: 's',\n    groupNumber: 2,\n    color: GROUP_COLORS.alkalineEarth,\n    description: 'Fr medizinische Kontrastmittel und grne Feuerwerke. Schwerkresistent.',\n    theme: 'medical',\n    experiments: ['kontrastmittel', 'feuerwerk', 'magnet']\n  },\n\n  {\n    symbol: 'La',\n    name: 'Lanthan',\n    atomicNumber: 57,\n    mass: 138.91,\n    group: 'lanthanide',\n    period: 6,\n    block: 'f',\n    groupNumber: 3,\n    color: GROUP_COLORS.lanthanide,\n    description: 'Weiches, duktils Metall. Fr Hybridauto-Batterien und Zndsteine.',\n    theme: 'technology',\n    experiments: ['batterie', 'zndsteine', 'optik']\n  },\n\n  {\n    symbol: 'Ce',\n    name: 'Cer',\n    atomicNumber: 58,\n    mass: 140.12,\n    group: 'lanthanide',\n    period: 6,\n    block: 'f',\n    groupNumber: 3,\n    color: GROUP_COLORS.lanthanide,\n    description: 'Hufigstes Lanthanoid. Fr Ferrocer-Feuerzeuge und Autokatalysatoren.',\n    theme: 'technology',\n    experiments: ['feuerzeuge', 'katalysator', 'selbstreinigend']\n  },\n\n  {\n    symbol: 'Pr',\n    name: 'Praseodym',\n    atomicNumber: 59,\n    mass: 140.91,\n    group: 'lanthanide',\n    period: 6,\n    block: 'f',\n    groupNumber: 3,\n    color: GROUP_COLORS.lanthanide,\n    description: 'Fr Magnetlegierungen und Grne Farbe. Wichtig fr Hightech-Legierungen.',\n    theme: 'technology',\n    experiments: ['magnet', 'grn', 'legierung']\n  },\n\n  {\n    symbol: 'Nd',\n    name: 'Neodym',\n    atomicNumber: 60,\n    mass: 144.24,\n    group: 'lanthanide',\n    period: 6,\n    block: 'f',\n    groupNumber: 3,\n    color: GROUP_COLORS.lanthanide,\n    description: 'Strkste Permanentmagnete. Fr Kopfhrer, Windturbinen und Festplatten.',\n    theme: 'technology',\n    experiments: ['magnet', 'kopfhrer', 'windturbine']\n  },\n\n  {\n    symbol: 'Pm',\n    name: 'Promethium',\n    atomicNumber: 61,\n    mass: 145,\n    group: 'lanthanide',\n    period: 6,\n    block: 'f',\n    groupNumber: 3,\n    color: GROUP_COLORS.lanthanide,\n    description: 'Knstliches, radioaktives Element. Fr Kernbatterien in Raumfahrzeugen.',\n    theme: 'space',\n    experiments: ['knstlich', 'kernbatterie', 'radioaktiv']\n  },\n\n  {\n    symbol: 'Sm',\n    name: 'Samarium',\n    atomicNumber: 62,\n    mass: 150.36,\n    group: 'lanthanide',\n    period: 6,\n    block: 'f',\n    groupNumber: 3,\n    color: GROUP_COLORS.lanthanide,\n    description: 'Fr Permanentmagnete und Kernreaktor-Steuerstbe.',\n    theme: 'nuclear',\n    experiments: ['magnet', 'reaktor', 'absorber']\n  },\n\n  {\n    symbol: 'Eu',\n    name: 'Europium',\n    atomicNumber: 63,\n    mass: 151.96,\n    group: 'lanthanide',\n    period: 6,\n    block: 'f',\n    groupNumber: 3,\n    color: GROUP_COLORS.lanthanide,\n    description: 'Rot phosphoreszierend in Euro-Scheinen. Fr Sicherheit und Lasermaterialien.',\n    theme: 'security',\n    experiments: ['phosphoreszenz', 'euro', 'laser']\n  },\n\n  {\n    symbol: 'Gd',\n    name: 'Gadolinium',\n    atomicNumber: 64,\n    mass: 157.25,\n    group: 'lanthanide',\n    period: 6,\n    block: 'f',\n    groupNumber: 3,\n    color: GROUP_COLORS.lanthanide,\n    description: 'Hchste Neutronenabsorption. Fr MRT-Kontrastmittel und Kernreaktorsteuerung.',\n    theme: 'medical',\n    experiments: ['mrt', 'reaktor', 'absorber']\n  },\n\n  {\n    symbol: 'Tb',\n    name: 'Terbium',\n    atomicNumber: 65,\n    mass: 158.93,\n    group: 'lanthanide',\n    period: 6,\n    block: 'f',\n    groupNumber: 3,\n    color: GROUP_COLORS.lanthanide,\n    description: 'Weiches Lanthanoid. Fr Phosphorleuchtstoffe und Elektromotore.',\n    theme: 'technology',\n    experiments: ['phosphor', 'magnet', 'motor']\n  },\n\n  {\n    symbol: 'Dy',\n    name: 'Dysprosium',\n    atomicNumber: 66,\n    mass: 162.50,\n    group: 'lanthanide',\n    period: 6,\n    block: 'f',\n    groupNumber: 3,\n    color: GROUP_COLORS.lanthanide,\n    description: 'Hochwertiges Lanthanoid. Fr Kernreaktorsteuerstbe und Magnetlegierungen.',\n    theme: 'nuclear',\n    experiments: ['reaktor', 'magnet', 'legierung']\n  },\n\n  {\n    symbol: 'Ho',\n    name: 'Holmium',\n    atomicNumber: 67,\n    mass: 164.93,\n    group: 'lanthanide',\n    period: 6,\n    block: 'f',\n    groupNumber: 3,\n    color: GROUP_COLORS.lanthanide,\n    description: 'Besitzt hchstes magnetisches Moment aller Elemente. Fr Laser und Hochleistungsmagnete.',\n    theme: 'technology',\n    experiments: ['laser', 'magnet', 'hochleistung']\n  },\n\n  {\n    symbol: 'Er',\n    name: 'Erbium',\n    atomicNumber: 68,\n    mass: 167.26,\n    group: 'lanthanide',\n    period: 6,\n    block: 'f',\n    groupNumber: 3,\n    color: GROUP_COLORS.lanthanide,\n    description: 'Fr Glasfaser-Verstrker und optische Verstrker. Rosarotes Leuchten.',\n    theme: 'technology',\n    experiments: ['glasfaser', 'optik', 'laser']\n  },\n\n  {\n    symbol: 'Tm',\n    name: 'Thulium',\n    atomicNumber: 69,\n    mass: 168.93,\n    group: 'lanthanide',\n    period: 6,\n    block: 'f',\n    groupNumber: 3,\n    color: GROUP_COLORS.lanthanide,\n    description: 'Fr medizinische Rntgenanlagen. Rntgen-Kontrastmittel.',\n    theme: 'medical',\n    experiments: ['rntgen', 'medizin', 'laser']\n  },\n\n  {\n    symbol: 'Yb',\n    name: 'Ytterbium',\n    atomicNumber: 70,\n    mass: 173.05,\n    group: 'lanthanide',\n    period: 6,\n    block: 'f',\n    groupNumber: 3,\n    color: GROUP_COLORS.lanthanide,\n    description: 'Fr Stahllegierungen und Rntgenanlagen. Rote Lumineszenz.',\n    theme: 'industry',\n    experiments: ['legierung', 'rntgen', 'luminiszenz']\n  },\n\n  {\n    symbol: 'Lu',\n    name: 'Lutetium',\n    atomicNumber: 71,\n    mass: 174.97,\n    group: 'lanthanide',\n    period: 6,\n    block: 'f',\n    groupNumber: 3,\n    color: GROUP_COLORS.lanthanide,\n    description: 'Letztes natrliches Lanthanoid. Fr PET-Scanner und Katalysatoren.',\n    theme: 'technology',\n    experiments: ['scanner', 'katalysator', 'spektrometer']\n  },\n\n  {\n    symbol: 'Hf',\n    name: 'Hafnium',\n    atomicNumber: 72,\n    mass: 178.49,\n    group: 'transition',\n    period: 6,\n    block: 'd',\n    groupNumber: 4,\n    color: GROUP_COLORS.transition,\n    description: 'Korrosionsbestndiges Metall. Fr Reaktordruckbehlter und Kernenergieanwendungen.',\n    theme: 'nuclear',\n    experiments: ['reaktor', 'kernenergie', 'legierung']\n  },\n\n  {\n    symbol: 'Ta',\n    name: 'Tantal',\n    atomicNumber: 73,\n    mass: 180.95,\n    group: 'transition',\n    period: 6,\n    block: 'd',\n    groupNumber: 5,\n    color: GROUP_COLORS.transition,\n    description: 'Extrem korrosionsbestndig. Fr Kondensatoren und elektronische Bauteile.',\n    theme: 'electronics',\n    experiments: ['kondensator', 'elektronik', 'korrosion']\n  },\n\n  {\n    symbol: 'W',\n    name: 'Wolfram',\n    atomicNumber: 74,\n    mass: 183.84,\n    group: 'transition',\n    period: 6,\n    block: 'd',\n    groupNumber: 6,\n    color: GROUP_COLORS.transition,\n    description: 'Hchster Schmelzpunkt aller Elemente. Fr Glhbirnen und Wolframbearbeitung.',\n    theme: 'technology',\n    experiments: ['glhbirne', 'bearbeitung', 'legierung']\n  },\n\n  {\n    symbol: 'Re',\n    name: 'Rhenium',\n    atomicNumber: 75,\n    mass: 186.21,\n    group: 'transition',\n    period: 6,\n    block: 'd',\n    groupNumber: 7,\n    color: GROUP_COLORS.transition,\n    description: 'Selteneres, hochschmelzendes Metall. Fr Dsenlufer und Hochtemperaturlegierungen.',\n    theme: 'aerospace',\n    experiments: ['dsenlufer', 'hochtemperatur', 'legierung']\n  },\n\n  {\n    symbol: 'Os',\n    name: 'Osmium',\n    atomicNumber: 76,\n    mass: 190.23,\n    group: 'transition',\n    period: 6,\n    block: 'd',\n    groupNumber: 8,\n    color: GROUP_COLORS.transition,\n    description: 'Dichtestes natrliches Element. Fr Schreibspitzen und Implantate.',\n    theme: 'technology',\n    experiments: ['schreibspitzen', 'implantat', 'legierung']\n  },\n\n  {\n    symbol: 'Ir',\n    name: 'Iridium',\n    atomicNumber: 77,\n    mass: 192.22,\n    group: 'transition',\n    period: 6,\n    block: 'd',\n    groupNumber: 9,\n    color: GROUP_COLORS.transition,\n    description: 'Extrem korrosionsbestndiges Metall. Fr Zndkerzen und Elektroden.',\n    theme: 'technology',\n    experiments: ['zndkerzen', 'elektroden', 'legierung']\n  },\n\n  {\n    symbol: 'Pt',\n    name: 'Platin',\n    atomicNumber: 78,\n    mass: 195.08,\n    group: 'transition',\n    period: 6,\n    block: 'd',\n    groupNumber: 10,\n    color: GROUP_COLORS.transition,\n    description: 'Edelmetall fr Katalysatoren, Schmuck und Katalysatoren. Bestndiger als Gold.',\n    theme: 'precious',\n    experiments: ['katalysator', 'schmuck', 'legierung']\n  },\n\n  {\n    symbol: 'Au',\n    name: 'Gold',\n    atomicNumber: 79,\n    mass: 196.97,\n    group: 'transition',\n    period: 6,\n    block: 'd',\n    groupNumber: 11,\n    color: GROUP_COLORS.transition,\n    description: 'Edelstes Metall, einziges gelbes Metall (relativistische Effekte). Fr Elektronik und Schmuck.',\n    theme: 'treasure',\n    experiments: ['ductilitt', 'legierungen', 'elektroplattierung']\n  },\n\n  {\n    symbol: 'Hg',\n    name: 'Quecksilber',\n    atomicNumber: 80,\n    mass: 200.59,\n    group: 'transition',\n    period: 6,\n    block: 'd',\n    groupNumber: 12,\n    color: GROUP_COLORS.transition,\n    description: 'Einziges flssiges Metall bei Raumtemperatur. Fr Thermometer und Alchemiehistorie.',\n    theme: 'historical',\n    experiments: ['flssig', 'thermometer', 'alchemie']\n  },\n\n  {\n    symbol: 'Tl',\n    name: 'Thallium',\n    atomicNumber: 81,\n    mass: 204.38,\n    group: 'metal',\n    period: 6,\n    block: 'p',\n    groupNumber: 13,\n    color: GROUP_COLORS.metal,\n    description: 'Giftiges, weiches Metall. Historisch in Mordfllen verwendet. Fr Glasherstellung.',\n    theme: 'toxic',\n    experiments: ['gift', 'glasherstellung', 'temperatur']\n  },\n\n  {\n    symbol: 'Pb',\n    name: 'Blei',\n    atomicNumber: 82,\n    mass: 207.2,\n    group: 'metal',\n    period: 6,\n    block: 'p',\n    groupNumber: 14,\n    color: GROUP_COLORS.metal,\n    description: 'Schwerstes stabiles Element. Fr Akkus und Rntgenschutz. Rmisches Erbe.',\n    theme: 'history',\n    experiments: ['akkus', 'rntgen', 'blei']\n  },\n\n  {\n    symbol: 'Bi',\n    name: 'Wismut',\n    atomicNumber: 83,\n    mass: 208.98,\n    group: 'metalloid',\n    period: 6,\n    block: 'p',\n    groupNumber: 15,\n    color: GROUP_COLORS.metalloid,\n    description: 'Dichtes, schmelzendes Metall. Fr Kosmetika, Schmiermittel und Rntgenkontrast.',\n    theme: 'medical',\n    experiments: ['kosmetika', 'schmiermittel', 'rntgen']\n  },\n\n  {\n    symbol: 'Po',\n    name: 'Polonium',\n    atomicNumber: 84,\n    mass: 209,\n    group: 'metalloid',\n    period: 6,\n    block: 'p',\n    groupNumber: 16,\n    color: GROUP_COLORS.metalloid,\n    description: 'Hochradioaktiv, starkes Metall. Historisch berhmt (Curie). Fr Alphastrahler.',\n    theme: 'nuclear',\n    experiments: ['alphastrahler', 'radioaktiv', 'wrmequelle']\n  },\n\n  {\n    symbol: 'At',\n    name: 'Astatin',\n    atomicNumber: 85,\n    mass: 210,\n    group: 'halogen',\n    period: 6,\n    block: 'p',\n    groupNumber: 17,\n    color: GROUP_COLORS.halogen,\n    description: 'Seltenstes natrliches Element. Halbwertszeit ~8 Stunden. Fr Forschung.',\n    theme: 'research',\n    experiments: ['forschung', 'halbwertszeit', 'instabil']\n  },\n\n  {\n    symbol: 'Rn',\n    name: 'Radon',\n    atomicNumber: 86,\n    mass: 222,\n    group: 'nobleGas',\n    period: 6,\n    block: 'p',\n    groupNumber: 18,\n    color: NOBLE_GAS_COLORS.Rn,\n    description: 'Radionuklid, zweithufigste Lungenkrebsursache. Fr Radonmessung und Schutz.',\n    theme: 'radiation',\n    experiments: ['radonmessung', 'schutz', 'zerfall']\n  },\n\n  {\n    symbol: 'Fr',\n    name: 'Francium',\n    atomicNumber: 87,\n    mass: 223,\n    group: 'alkali',\n    period: 7,\n    block: 's',\n    groupNumber: 1,\n    color: GROUP_COLORS.alkali,\n    description: 'Instabil, radioaktiv. Nie makroskopisch beobachtet. Hypothetische Wasserreaktion.',\n    theme: 'theoretical',\n    experiments: ['instabil', 'halbwertszeit', 'theoretisch']\n  },\n\n  {\n    symbol: 'Ra',\n    name: 'Radium',\n    atomicNumber: 88,\n    mass: 226,\n    group: 'alkalineEarth',\n    period: 7,\n    block: 's',\n    groupNumber: 2,\n    color: GROUP_COLORS.alkalineEarth,\n    description: 'Hochradioaktiv, luminiszierendes Metall. Leuchtet im Dunkeln. Fr historische Lampen.',\n    theme: 'historical',\n    experiments: ['leuchten', 'historisch', 'radioaktiv']\n  },\n\n  {\n    symbol: 'Ac',\n    name: 'Actinium',\n    atomicNumber: 89,\n    mass: 227,\n    group: 'actinide',\n    period: 7,\n    block: 'f',\n    groupNumber: 3,\n    color: GROUP_COLORS.actinide,\n    description: 'Namensgeber der Actinoide. Radioaktiv. Ausgangsstoff fr Urananreicherung.',\n    theme: 'nuclear',\n    experiments: ['urananreicherung', 'strahlung', 'zerfall']\n  },\n\n  {\n    symbol: 'Th',\n    name: 'Thorium',\n    atomicNumber: 90,\n    mass: 232.04,\n    group: 'actinide',\n    period: 7,\n    block: 'f',\n    groupNumber: 3,\n    color: GROUP_COLORS.actinide,\n    description: 'Fr Flssigsalzreaktoren. Sicherer und abundanter als Uran. Mythologisch benannt.',\n    theme: 'nuclear',\n    experiments: ['flssigsalzreaktor', 'sicherheit', 'kernenergie']\n  },\n\n  {\n    symbol: 'Pa',\n    name: 'Protactinium',\n    atomicNumber: 91,\n    mass: 231.04,\n    group: 'actinide',\n    period: 7,\n    block: 'f',\n    groupNumber: 3,\n    color: GROUP_COLORS.actinide,\n    description: 'Selteneres, radioaktives Element. Fr Kernreaktor-Forschung.',\n    theme: 'research',\n    experiments: ['forschung', 'kernreaktor', 'urananreicherung']\n  },\n\n  {\n    symbol: 'Np',\n    name: 'Neptunium',\n    atomicNumber: 93,\n    mass: 237,\n    group: 'actinide',\n    period: 7,\n    block: 'f',\n    groupNumber: 3,\n    color: GROUP_COLORS.actinide,\n    description: 'Knstliches Element. Erste in Atomversuchen produziert. Fr Plutonium-Herstellung.',\n    theme: 'nuclear',\n    experiments: ['knstlich', 'plutonium', 'reaktor']\n  },\n\n  {\n    symbol: 'Pu',\n    name: 'Plutonium',\n    atomicNumber: 94,\n    mass: 244,\n    group: 'actinide',\n    period: 7,\n    block: 'f',\n    groupNumber: 3,\n    color: GROUP_COLORS.actinide,\n    description: 'Tdlichste Substanz. Mikrogramm knnen tten. Fr Kernwaffen und Raumfahrt-RTGs.',\n    theme: 'nuclear',\n    experiments: ['kernwaffen', 'raumfahrt', 'gefahr']\n  },\n\n  {\n    symbol: 'Am',\n    name: 'Americium',\n    atomicNumber: 95,\n    mass: 243,\n    group: 'actinide',\n    period: 7,\n    block: 'f',\n    groupNumber: 3,\n    color: GROUP_COLORS.actinide,\n    description: 'Knstliches Element. Entdeckt in H-Bomben-Fallout (Ivy Mike 1952). Fr Rauchdetektoren.',\n    theme: 'space',\n    experiments: ['rauchdetektor', 'h-bombe', 'spuren']\n  },\n\n  {\n    symbol: 'Cm',\n    name: 'Curium',\n    atomicNumber: 96,\n    mass: 247,\n    group: 'actinide',\n    period: 7,\n    block: 'f',\n    groupNumber: 3,\n    color: GROUP_COLORS.actinide,\n    description: 'Knstliches Element. Namensgeber: Pierre und Marie Curie. Fr Raumschiff-RTGs.',\n    theme: 'space',\n    experiments: ['raumfahrt', 'curie', 'kernenergie']\n  },\n\n  {\n    symbol: 'Bk',\n    name: 'Berkelium',\n    atomicNumber: 97,\n    mass: 247,\n    group: 'actinide',\n    period: 7,\n    block: 'f',\n    groupNumber: 3,\n    color: GROUP_COLORS.actinide,\n    description: 'Knstliches Element. Sehr kurzlebig. Fr wissenschaftliche Forschung.',\n    theme: 'research',\n    experiments: ['forschung', 'kernchemie', 'instabil']\n  },\n\n  {\n    symbol: 'Cf',\n    name: 'Californium',\n    atomicNumber: 98,\n    mass: 251,\n    group: 'actinide',\n    period: 7,\n    block: 'f',\n    groupNumber: 3,\n    color: GROUP_COLORS.actinide,\n    description: 'Knstliches Element. Fr Neutronenquellen und Elementsynthese.',\n    theme: 'nuclear',\n    experiments: ['neutronenquelle', 'synthese', 'zerfall']\n  },\n\n  {\n    symbol: 'Es',\n    name: 'Einsteinium',\n    atomicNumber: 99,\n    mass: 252,\n    group: 'actinide',\n    period: 7,\n    block: 'f',\n    groupNumber: 3,\n    color: GROUP_COLORS.actinide,\n    description: 'Knstliches Element. Entdeckt 1952 im Fallout der H-Bombe Ivy Mike. In Gedenken an Einstein.',\n    theme: 'history',\n    experiments: ['historisch', 'h-bombe', 'memorial']\n  },\n\n  {\n    symbol: 'Fm',\n    name: 'Fermium',\n    atomicNumber: 100,\n    mass: 257,\n    group: 'actinide',\n    period: 7,\n    block: 'f',\n    groupNumber: 3,\n    color: GROUP_COLORS.actinide,\n    description: 'Knstliches Element. Namensgeber: Enrico Fermi. Fr theoretische Kernreaktoren.',\n    theme: 'research',\n    experiments: ['reaktor', 'theoretisch', 'nuklearphysik']\n  },\n\n  {\n    symbol: 'Md',\n    name: 'Mendelevium',\n    atomicNumber: 101,\n    mass: 258,\n    group: 'actinide',\n    period: 7,\n    block: 'f',\n    groupNumber: 3,\n    color: GROUP_COLORS.actinide,\n    description: 'Knstliches Element. In Gedenken an Mendelejew. Ehemaliges Element 101.',\n    theme: 'history',\n    experiments: ['historisch', 'periodensystem', 'tradition']\n  },\n\n  {\n    symbol: 'No',\n    name: 'Nobelium',\n    atomicNumber: 102,\n    mass: 259,\n    group: 'actinide',\n    period: 7,\n    block: 'f',\n    groupNumber: 3,\n    color: GROUP_COLORS.actinide,\n    description: 'Knstliches Element. Benannt nach Alfred Nobel. Fr wissenschaftliche Anerkennung.',\n    theme: 'history',\n    experiments: ['auszeichnung', 'nobelpreis', 'forschung']\n  },\n\n  {\n    symbol: 'Lr',\n    name: 'Lawrencium',\n    atomicNumber: 103,\n    mass: 262,\n    group: 'actinide',\n    period: 7,\n    block: 'f',\n    groupNumber: 3,\n    color: GROUP_COLORS.actinide,\n    description: 'Letztes natrliches Element. Namensgeber: Ernest Lawrence. Entdeckung der Lanthanoide.',\n    theme: 'discovery',\n    experiments: ['entdeckung', 'synchrotron', 'teilchenbeschleuniger']\n  },\n\n  {\n    symbol: 'Rf',\n    name: 'Rutherfordium',\n    atomicNumber: 104,\n    mass: 267,\n    group: 'actinide',\n    period: 7,\n    block: 'd',\n    groupNumber: 4,\n    color: GROUP_COLORS.actinide,\n    description: 'Knstliches Element. Namensgeber: Ernest Rutherford. Entdeckung des Atomkerns.',\n    theme: 'research',\n    experiments: ['kernphysik', 'teilchen', 'reaktor']\n  },\n\n  {\n    symbol: 'Db',\n    name: 'Dubnium',\n    atomicNumber: 105,\n    mass: 268,\n    group: 'actinide',\n    period: 7,\n    block: 'd',\n    groupNumber: 5,\n    color: GROUP_COLORS.actinide,\n    description: 'Knstliches Element. Namensgeber: Stadt Dubna. Forschungszentrum Russlands.',\n    theme: 'research',\n    experiments: ['forschung', 'kernchemie', 'instabil']\n  },\n\n  {\n    symbol: 'Sg',\n    name: 'Seaborgium',\n    atomicNumber: 106,\n    mass: 269,\n    group: 'actinide',\n    period: 7,\n    block: 'd',\n    groupNumber: 6,\n    color: GROUP_COLORS.actinide,\n    description: 'Knstliches Element. Namensgeber: Glenn Seaborg. Forschungszentrum USA.',\n    theme: 'research',\n    experiments: ['forschung', 'chemie', 'synthese']\n  },\n\n  {\n    symbol: 'Bh',\n    name: 'Bohrium',\n    atomicNumber: 107,\n    mass: 270,\n    group: 'actinide',\n    period: 7,\n    block: 'd',\n    groupNumber: 7,\n    color: GROUP_COLORS.actinide,\n    description: 'Knstliches Element. Namensgeber: Niels Bohr. Quantenmechanik-Revolution.',\n    theme: 'science',\n    experiments: ['quantenmechanik', 'theoretisch', 'modell']\n  },\n\n  {\n    symbol: 'Hs',\n    name: 'Hassium',\n    atomicNumber: 108,\n    mass: 277,\n    group: 'actinide',\n    period: 7,\n    block: 'd',\n    groupNumber: 8,\n    color: GROUP_COLORS.actinide,\n    description: 'Knstliches Element. Namensgeber: Hessen (Bundesland). Erste deutsche Entdeckung.',\n    theme: 'discovery',\n    experiments: ['entdeckung', 'deutsch', 'teilchen']\n  },\n\n  {\n    symbol: 'Mt',\n    name: 'Meitnerium',\n    atomicNumber: 109,\n    mass: 278,\n    group: 'actinide',\n    period: 7,\n    block: 'd',\n    groupNumber: 8,\n    color: GROUP_COLORS.actinide,\n    description: 'Knstliches Element. Namensgeber: Lise Meitner. Entdeckung der Kernspaltung.',\n    theme: 'history',\n    experiments: ['kernspaltung', 'uran', 'geschichte']\n  },\n\n  {\n    symbol: 'Ds',\n    name: 'Darmstadtium',\n    atomicNumber: 110,\n    mass: 281,\n    group: 'actinide',\n    period: 7,\n    block: 'd',\n    groupNumber: 8,\n    color: GROUP_COLORS.actinide,\n    description: 'Knstliches Element. Namensgeber: Darmstadt. GSI Teilchenbeschleuniger.',\n    theme: 'research',\n    experiments: ['teilchenbeschleuniger', 'schwerionen', 'synthese']\n  },\n\n  {\n    symbol: 'Rg',\n    name: 'Roentgenium',\n    atomicNumber: 111,\n    mass: 282,\n    group: 'actinide',\n    period: 7,\n    block: 'd',\n    groupNumber: 8,\n    color: GROUP_COLORS.actinide,\n    description: 'Knstliches Element. Namensgeber: Wilhelm Rntgen. Fr medizinische Bildgebung.',\n    theme: 'medical',\n    experiments: ['rntgen', 'medizin', 'synthese']\n  },\n\n  {\n    symbol: 'Cn',\n    name: 'Copernicium',\n    atomicNumber: 112,\n    mass: 285,\n    group: 'actinide',\n    period: 7,\n    block: 'd',\n    groupNumber: 8,\n    color: GROUP_COLORS.actinide,\n    description: 'Knstliches Element. Namensgeber: Nikolaus Kopernikus. Revolution des Weltbilds.',\n    theme: 'history',\n    experiments: ['astronomie', 'revolution', 'universum']\n  },\n\n  {\n    symbol: 'Nh',\n    name: 'Nihonium',\n    atomicNumber: 113,\n    mass: 286,\n    group: 'actinide',\n    period: 7,\n    block: 'd',\n    groupNumber: 8,\n    color: GROUP_COLORS.actinide,\n    description: 'Knstliches Element. Namensgeber: Japan. Fr Elementsynthese-Forschung.',\n    theme: 'research',\n    experiments: ['synthese', 'element', 'forschung']\n  },\n\n  {\n    symbol: 'Fl',\n    name: 'Flerovium',\n    atomicNumber: 114,\n    mass: 289,\n    group: 'actinide',\n    period: 7,\n    block: 'd',\n    groupNumber: 8,\n    color: GROUP_COLORS.actinide,\n    description: 'Knstliches Element. Namensgeber: Georgij Flerow. Fr theoretische Physik.',\n    theme: 'science',\n    experiments: ['theoretisch', 'modell', 'stabilitt']\n  },\n\n  {\n    symbol: 'Mc',\n    name: 'Moscovium',\n    atomicNumber: 115,\n    mass: 290,\n    group: 'actinide',\n    period: 7,\n    block: 'd',\n    groupNumber: 8,\n    color: GROUP_COLORS.actinide,\n    description: 'Knstliches Element. Namensgeber: Moskau. Dubiose Entdeckungsgeschichte.',\n    theme: 'history',\n    experiments: ['dubios', 'synthese', 'wissenschaft']\n  },\n\n  {\n    symbol: 'Lv',\n    name: 'Livermorium',\n    atomicNumber: 116,\n    mass: 293,\n    group: 'actinide',\n    period: 7,\n    block: 'd',\n    groupNumber: 8,\n    color: GROUP_COLORS.actinide,\n    description: 'Knstliches Element. Namensgeber: Lawrence Livermore National Laboratory. Element 116.',\n    theme: 'research',\n    experiments: ['element116', 'kernreaktor', 'synthese']\n  },\n\n  {\n    symbol: 'Ts',\n    name: 'Tennessin',\n    atomicNumber: 117,\n    mass: 294,\n    group: 'actinide',\n    period: 7,\n    block: 'd',\n    groupNumber: 8,\n    color: GROUP_COLORS.actinide,\n    description: 'Knstliches Element. Namensgeber: Tennessee (USA). Superheavy-Elemente-Forschung.',\n    theme: 'research',\n    experiments: ['superheavy', 'inselfstabilitt', 'synthese']\n  },\n\n  {\n    symbol: 'Og',\n    name: 'Oganesson',\n    atomicNumber: 118,\n    mass: 294,\n    group: 'actinide',\n    period: 7,\n    block: 'd',\n    groupNumber: 8,\n    color: GROUP_COLORS.actinide,\n    description: 'Schwerstes natrliches Element. Namensgeber: Yuri Oganessian. Insel der Stabilitt gesucht.',\n    theme: 'discovery',\n    experiments: ['inselfstabilitt', 'insel', 'theoretisch']\n  }\n];\n\n// Get element by atomic number\nexport function getElementByNumber(atomicNumber) {\n  return ELEMENTS.find(e => e.atomicNumber === atomicNumber);\n}\n\n// Get element by symbol\nexport function getElementBySymbol(symbol) {\n  return ELEMENTS.find(e => e.symbol === symbol);\n}\n\n// Get elements by group\nexport function getElementsByGroup(group) {\n  return ELEMENTS.filter(e => e.group === group);\n}\n\n// Get elements by period\nexport function getElementsByPeriod(period) {\n  return ELEMENTS.filter(e => e.period === period);\n}\n\n// Experimental Rooms\nexport const EXPERIMENTAL_ROOMS = [\n  {\n    id: 'reaction_lab',\n    name: 'Reaktionslabor',\n    description: 'Die Alchemistenwerkstatt',\n    icon: '',\n    color: 0xFF6B6B,\n    experiments: ['alkali_water', 'thermit', 'elefantenzahnpasta']\n  },\n  {\n    id: 'nuclear_chamber',\n    name: 'Nuklearphysik',\n    description: 'Kernkraftwerk-Kontrollraum',\n    icon: '',\n    color: 0x4A69BD,\n    experiments: ['fission', 'fusion', 'decay']\n  },\n  {\n    id: 'electrochem_lab',\n    name: 'Elektrochemie',\n    description: 'Batterien und Elektrolyse',\n    ion: '',\n    color: 0x74B9FF,\n    experiments: ['lion_battery', 'galvanic', 'electrolysis']\n  },\n  {\n    id: 'organic_chem',\n    name: 'Organische Chemie',\n    description: 'Das Kohlenstoff-Universum',\n    icon: '',\n    color: 0x20C997,\n    experiments: ['dna', 'proteins', 'polymers']\n  },\n  {\n    id: 'extreme_conditions',\n    name: 'Extreme Bedingungen',\n    description: 'Grenzen der Materie',\n    icon: '',\n    color: 0xFFA94D,\n    experiments: ['superfluid', 'plasma', 'highpressure']\n  },\n  {\n    id: 'industrial_apps',\n    name: 'Industrielle Anwendungen',\n    description: 'Groindustrie der Chemie',\n    icon: '',\n    color: 0x74B9FF,\n    experiments: ['haberbosch', 'blastfurnace', 'petrochemical']\n  },\n  {\n    id: 'historical_lab',\n    name: 'Historisches Labor',\n    description: 'Meilensteine der Entdeckung',\n    icon: '',\n    color: 0xD63384,\n    experiments: ['marie_curie', 'lavoisier', 'mendeleev']\n  },\n  {\n    id: 'space_chem',\n    name: 'Weltraumchemie',\n    description: 'Chemie im Kosmos',\n    icon: '',\n    color: 0x0A0A1A,\n    experiments: ['nucleosynthesis', 'meteorites', 'interstellar']\n  },\n  {\n    id: 'nano_world',\n    name: 'Nano-Welt',\n    description: 'Die atomare Perspektive',\n    icon: '',\n    color: 0x17A2B8,\n    experiments: ['crystals', 'orbitals', 'nanotubes']\n  },\n  {\n    id: 'challenge_arena',\n    name: 'Challenge-Arena',\n    description: 'Quiz und Wettkampf',\n    icon: '',\n    color: 0xFFC107,\n    experiments: ['quiz', 'puzzle', 'escape_room']\n  }\n];\n","import * as THREE from 'three';\nimport { Text, Position, ParentObject3D, Object3D, Children } from '../components/index.js';\nimport { ELEMENTS, EXPERIMENTAL_ROOMS, GROUP_COLORS, NOBLE_GAS_COLORS } from '../data/elements.js';\n\nvar scene, atomCore, electronOrbits = [];\nvar elementButtons = [], expButtons = [];\nvar periodicTableMesh;\nvar infoPanel, currentSelection = null;\nvar teleportFloor;\n\nconst ATOM_RADIUS = 0.8;\nconst ORBIT_RADIUS = 4;\nconst ELECTRON_SPEED = 0.5;\n\nexport function setup(ctx) {\n  scene = new THREE.Scene();\n\n  scene.background = new THREE.Color(0x0a0a1a);\n\n  const floorGeo = new THREE.CylinderGeometry(15, 15, 0.2, 64);\n  const floorMat = new THREE.MeshBasicMaterial({color: 0x1a1a2e});\n  const floor = new THREE.Mesh(floorGeo, floorMat);\n  floor.position.y = -0.1;\n  scene.add(floor);\n\n  const teleportGeo = new THREE.PlaneBufferGeometry(30, 30);\n  const teleportMat = new THREE.MeshBasicMaterial({visible: false});\n  teleportFloor = new THREE.Mesh(teleportGeo, teleportMat);\n  teleportFloor.rotation.x = -Math.PI / 2;\n  teleportFloor.position.y = 0.001;\n  scene.add(teleportFloor);\n\n  createAtomNucleus(ctx);\n  createElectronOrbits(ctx);\n  createPeriodicTableHologram(ctx);\n  createElementButtons(ctx);\n  createExpRoomButtons(ctx);\n  createInfoPanel(ctx);\n\n  const ambientLight = new THREE.AmbientLight(0xffffff, 0.2);\n  scene.add(ambientLight);\n\n  const coreLight = new THREE.PointLight(0x4a90e2, 1, 10);\n  coreLight.position.set(0, 2, 0);\n  scene.add(coreLight);\n\n  scene.userData.teleport = teleportFloor;\n  scene.userData.atomCore = atomCore;\n  scene.userData.electronOrbits = electronOrbits;\n\n  registerInteractions(ctx);\n}\n\nfunction createAtomNucleus(ctx) {\n  const coreGroup = new THREE.Group();\n\n  const coreGeo = new THREE.SphereGeometry(ATOM_RADIUS, 32, 32);\n  const coreMat = new THREE.MeshBasicMaterial({\n    color: 0x4a90e2,\n    transparent: true,\n    opacity: 0.8\n  });\n  atomCore = new THREE.Mesh(coreGeo, coreMat);\n  atomCore.position.y = 1.6;\n  coreGroup.add(atomCore);\n\n  const glowGeo = new THREE.SphereGeometry(ATOM_RADIUS * 1.5, 32, 32);\n  const glowMat = new THREE.MeshBasicMaterial({\n    color: 0x4a90e2,\n    transparent: true,\n    opacity: 0.3,\n    side: THREE.BackSide\n  });\n  const glow = new THREE.Mesh(glowGeo, glowMat);\n  glow.position.y = 1.6;\n  coreGroup.add(glow);\n\n  scene.add(coreGroup);\n}\n\nfunction createElectronOrbits(ctx) {\n  const orbitLevels = [1, 2, 3];\n  const colors = [0xFF6B6B, 0x50e3c2, 0xf5a623];\n\n  orbitLevels.forEach((level, i) => {\n    const radius = ORBIT_RADIUS + (level * 1.5);\n    const orbitGeo = new THREE.TorusGeometry(radius, 0.02, 16, 100);\n    const orbitMat = new THREE.MeshBasicMaterial({\n      color: colors[i % colors.length],\n      transparent: true,\n      opacity: 0.5\n    });\n    const orbit = new THREE.Mesh(orbitGeo, orbitMat);\n    orbit.rotation.x = Math.PI / 2;\n    orbit.position.y = 1.6;\n    scene.add(orbit);\n\n    const electronGeo = new THREE.SphereGeometry(0.1, 16, 16);\n    const electronMat = new THREE.MeshBasicMaterial({color: 0xffffff});\n    const electron = new THREE.Mesh(electronGeo, electronMat);\n\n    const electronGroup = new THREE.Group();\n    electronGroup.position.y = 1.6;\n    electronGroup.add(electron);\n\n    electron.userData = {\n      angle: Math.random() * Math.PI * 2,\n      speed: ELECTRON_SPEED / (level * 0.7),\n      radius: radius\n    };\n\n    scene.add(electronGroup);\n    electronOrbits.push(electronGroup);\n  });\n}\n\nfunction createPeriodicTableHologram(ctx) {\n  const pTableGroup = new THREE.Group();\n\n  const width = 12;\n  const height = 7;\n  const cols = 18;\n  const rows = 7;\n\n  const cellWidth = width / cols;\n  const cellHeight = height / rows;\n\n  for (let z = 0; z < ELEMENTS.length && z < 3; z++) {\n    const element = ELEMENTS[z];\n    const cellGeo = new THREE.BoxGeometry(cellWidth * 0.8, cellHeight * 0.8, 0.05);\n    const cellMat = new THREE.MeshBasicMaterial({\n      color: element.color,\n      transparent: true,\n      opacity: 0.3,\n      side: THREE.DoubleSide\n    });\n    const cell = new THREE.Mesh(cellGeo, cellMat);\n\n    const x = (element.groupNumber - 9) * cellWidth;\n    const y = (4 - element.period) * cellHeight;\n\n    cell.position.set(x, y + 2, -6);\n    cell.userData.element = element;\n    cell.name = `element_${element.symbol}`;\n\n    pTableGroup.add(cell);\n  }\n\n  periodicTableMesh = pTableGroup;\n  scene.add(pTableGroup);\n}\n\nfunction createElementButtons(ctx) {\n  const buttonGroup = new THREE.Group();\n  const radius = 8;\n  const angleStep = (Math.PI * 2) / ELEMENTS.length;\n\n  ELEMENTS.forEach((element, index) => {\n    const angle = index * angleStep;\n    const x = Math.cos(angle) * radius;\n    const z = Math.sin(angle) * radius;\n\n    const buttonGeo = new THREE.SphereGeometry(0.25, 16, 16);\n    const buttonMat = new THREE.MeshBasicMaterial({\n      color: element.color,\n      transparent: true,\n      opacity: 0.7\n    });\n    const button = new THREE.Mesh(buttonGeo, buttonMat);\n    button.position.set(x, 1.6, z);\n    button.userData.element = element;\n    button.userData.roomIndex = index + 1;\n    button.name = `element_${element.symbol}_button`;\n\n    buttonGroup.add(button);\n    elementButtons.push(button);\n\n    const textEntity = ctx.world.createEntity();\n    textEntity\n      .addComponent(Text, {\n        text: element.symbol,\n        color: '#ffffff',\n        fontSize: 0.15,\n        anchor: 'center',\n        baseline: 'middle',\n        textAlign: 'center'\n      })\n      .addComponent(ParentObject3D, {value: button})\n      .addComponent(Position, {x: 0, y: 0.4, z: 0});\n\n    buttonGroup.add(button);\n  });\n\n  scene.add(buttonGroup);\n}\n\nfunction createExpRoomButtons(ctx) {\n  const buttonGroup = new THREE.Group();\n  const radius = 12;\n  const angleStep = (Math.PI * 2) / EXPERIMENTAL_ROOMS.length;\n\n  EXPERIMENTAL_ROOMS.forEach((room, index) => {\n    const angle = index * angleStep;\n    const x = Math.cos(angle) * radius;\n    const z = Math.sin(angle) * radius;\n\n    const buttonGeo = new THREE.BoxGeometry(0.8, 0.8, 0.1);\n    const buttonMat = new THREE.MeshBasicMaterial({\n      color: room.color,\n      transparent: true,\n      opacity: 0.6\n    });\n    const button = new THREE.Mesh(buttonGeo, buttonMat);\n    button.position.set(x, 1.6, z);\n    button.userData.expRoom = room;\n    button.userData.roomIndex = ELEMENTS.length + index + 1;\n    button.name = `exp_${room.id}_button`;\n\n    buttonGroup.add(button);\n    expButtons.push(button);\n  });\n\n  scene.add(buttonGroup);\n}\n\nfunction createInfoPanel(ctx) {\n  const panelGeo = new THREE.PlaneGeometry(3, 2);\n  const panelMat = new THREE.MeshBasicMaterial({\n    color: 0x2a2a3a,\n    transparent: true,\n    opacity: 0.9,\n    side: THREE.DoubleSide\n  });\n  infoPanel = new THREE.Mesh(panelGeo, panelMat);\n  infoPanel.position.set(0, 3.5, -4);\n  infoPanel.visible = false;\n  scene.add(infoPanel);\n\n  const titleTextEntity = ctx.world.createEntity();\n  titleTextEntity\n    .addComponent(Text, {\n      text: '',\n      color: '#ffffff',\n      fontSize: 0.12,\n      anchor: 'center',\n      baseline: 'top',\n      textAlign: 'center'\n    })\n    .addComponent(ParentObject3D, {value: infoPanel})\n    .addComponent(Position, {x: 0, y: 0.6, z: 0.01});\n\n  infoPanel.userData.titleText = titleTextEntity;\n\n  const descTextEntity = ctx.world.createEntity();\n  descTextEntity\n    .addComponent(Text, {\n      text: '',\n      color: '#cccccc',\n      fontSize: 0.06,\n      anchor: 'center',\n      baseline: 'top',\n      textAlign: 'center',\n      maxWidth: 2.6,\n      lineHeight: 1.4\n    })\n    .addComponent(ParentObject3D, {value: infoPanel})\n    .addComponent(Position, {x: 0, y: -0.2, z: 0.01});\n\n  infoPanel.userData.descText = descTextEntity;\n}\n\nfunction registerInteractions(ctx) {\n  ctx.raycontrol.addState('lobbyElements', {\n    colliderMesh: [...elementButtons],\n    controller: 'primary',\n    onHover: (intersection, active) => {\n      const button = intersection.object;\n      button.scale.setScalar(active ? 1.3 : 1);\n      showElementInfo(button.userData.element);\n    },\n    onHoverLeave: (intersection) => {\n      hideElementInfo();\n    },\n    onSelectStart: (intersection, e) => {\n      ctx.goto = intersection.object.userData.roomIndex;\n    },\n    onSelectEnd: (intersection) => {}\n  });\n\n  ctx.raycontrol.addState('lobbyExpRooms', {\n    colliderMesh: [...expButtons],\n    controller: 'primary',\n    onHover: (intersection, active) => {\n      const button = intersection.object;\n      button.scale.setScalar(active ? 1.2 : 1);\n    },\n    onHoverLeave: (intersection) => {},\n    onSelectStart: (intersection, e) => {\n      ctx.goto = intersection.object.userData.roomIndex;\n    },\n    onSelectEnd: (intersection) => {}\n  });\n\n  ctx.raycontrol.addState('lobbyTeleport', {\n    colliderMesh: teleportFloor,\n    controller: 'primary',\n    onHover: (intersection, active) => {\n      ctx.teleport.onHover(intersection.point, active);\n    },\n    onHoverLeave: () => {\n      ctx.teleport.onHoverLeave();\n    },\n    onSelectStart: (intersection, e) => {\n      ctx.teleport.onSelectStart(e);\n    },\n    onSelectEnd: (intersection) => {\n      ctx.teleport.onSelectEnd(intersection.point);\n    }\n  });\n}\n\nfunction showElementInfo(element) {\n  if (!element || currentSelection === element.symbol) return;\n\n  currentSelection = element.symbol;\n  infoPanel.visible = true;\n\n  const titleComp = infoPanel.userData.titleText.getComponent(Text);\n  titleComp.text = `${element.symbol} - ${element.name}`;\n\n  const descComp = infoPanel.userData.descText.getComponent(Text);\n  descComp.text = element.description;\n}\n\nfunction hideElementInfo() {\n  currentSelection = null;\n  infoPanel.visible = false;\n}\n\nexport function enter(ctx) {\n  ctx.renderer.setClearColor(0x0a0a1a);\n  ctx.scene.add(scene);\n  ctx.raycontrol.activateState('lobbyElements');\n  ctx.raycontrol.activateState('lobbyExpRooms');\n  ctx.raycontrol.activateState('lobbyTeleport');\n}\n\nexport function exit(ctx) {\n  ctx.raycontrol.deactivateState('lobbyElements');\n  ctx.raycontrol.deactivateState('lobbyExpRooms');\n  ctx.raycontrol.deactivateState('lobbyTeleport');\n  ctx.scene.remove(scene);\n  hideElementInfo();\n}\n\nexport function execute(ctx, delta, time) {\n  if (atomCore) {\n    atomCore.material.opacity = 0.6 + Math.sin(time * 2) * 0.2;\n    atomCore.scale.setScalar(1 + Math.sin(time * 3) * 0.05);\n  }\n\n  electronOrbits.forEach(group => {\n    const electron = group.children[0];\n    const userData = electron.userData;\n    userData.angle += userData.speed * delta;\n    electron.position.x = Math.cos(userData.angle) * userData.radius;\n    electron.position.z = Math.sin(userData.angle) * userData.radius;\n  });\n\n  if (periodicTableMesh) {\n    periodicTableMesh.rotation.y = time * 0.1;\n    periodicTableMesh.position.y = 2 + Math.sin(time * 0.5) * 0.2;\n  }\n\n  elementButtons.forEach((button, i) => {\n    button.position.y = 1.6 + Math.sin(time * 2 + i * 0.5) * 0.1;\n  });\n}\n","import * as THREE from 'three';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';\nimport { DRACOLoader } from 'three/examples/jsm/loaders/DRACOLoader.js';\nimport { NOBLE_GAS_COLORS } from '../data/elements.js';\n\nconst loaders = {\n  gltf: new GLTFLoader(),\n  draco: new DRACOLoader()\n};\n\nexport function loadModel(modelPath, callback) {\n  const extension = modelPath.split('.').pop().toLowerCase();\n\n  switch(extension) {\n    case 'gltf':\n    loaders.gltf.load(\n      modelPath,\n      (gltf) => {\n        callback(gltf.scene, null, null);\n      },\n      (error) => {\n        console.error('Error loading GLTF model:', error);\n        callback(null, error, null);\n      }\n    );\n      break;\n    case 'glb':\n      loaders.gltf.load(\n        modelPath,\n        (gltf) => {\n          callback(gltf.scene, null, null);\n        },\n        (error) => {\n          console.error('Error loading GLB model:', error);\n          callback(null, error, null);\n        }\n      );\n      break;\n    default:\n      console.warn('Unknown model format:', extension);\n      callback(null, new Error('Unknown model format'), null);\n  }\n}\n\nexport function createPlaceholderModel(element) {\n  const group = new THREE.Group();\n  let geo, mat, mesh;\n\n  switch(element.symbol) {\n    case 'H':\n      geo = new THREE.SphereGeometry(0.3, 32, 32);\n      mat = new THREE.MeshStandardMaterial({color: element.color, metalness: 0.1, roughness: 0.8});\n      mesh = new THREE.Mesh(geo, mat);\n      mesh.position.set(0, 0, 0);\n      group.add(mesh);\n      break;\n\n    case 'C':\n      geo = new THREE.OctahedronGeometry(0.3, 1);\n      mat = new THREE.MeshStandardMaterial({color: 0x333333, metalness: 0.2, roughness: 0.6});\n      mesh = new THREE.Mesh(geo, mat);\n      mesh.position.set(0, 0, 0);\n      group.add(mesh);\n      break;\n\n    case 'Fe':\n      geo = new THREE.IcosahedronGeometry(0.3, 1);\n      mat = new THREE.MeshStandardMaterial({color: 0x4a4a4a, metalness: 0.8, roughness: 0.3});\n      mesh = new THREE.Mesh(geo, mat);\n      mesh.position.set(0, 0, 0);\n      group.add(mesh);\n      break;\n\n    case 'Au':\n      geo = new THREE.IcosahedronGeometry(0.3, 1);\n      mat = new THREE.MeshStandardMaterial({\n        color: 0xFFD700,\n        metalness: 0.9,\n        roughness: 0.1,\n        emissive: 0xFFD700,\n        emissiveIntensity: 0.1\n      });\n      mesh = new THREE.Mesh(geo, mat);\n      mesh.position.set(0, 0, 0);\n      group.add(mesh);\n      break;\n\n    case 'U':\n      geo = new THREE.SphereGeometry(0.35, 32, 32);\n      mat = new THREE.MeshStandardMaterial({\n        color: 0x2d5a2d,\n        metalness: 0.7,\n        roughness: 0.4,\n        emissive: 0x00ff00,\n        emissiveIntensity: 0.2\n      });\n      mesh = new THREE.Mesh(geo, mat);\n      mesh.position.set(0, 0, 0);\n      group.add(mesh);\n      break;\n\n    case 'Na':\n      geo = new THREE.SphereGeometry(0.3, 32, 32);\n      mat = new THREE.MeshStandardMaterial({\n        color: element.color,\n        metalness: 0.9,\n        roughness: 0.2\n      });\n      mesh = new THREE.Mesh(geo, mat);\n      mesh.position.set(0, 0, 0);\n      group.add(mesh);\n      break;\n\n    case 'He':\n      geo = new THREE.SphereGeometry(0.25, 32, 32);\n      mat = new THREE.MeshStandardMaterial({\n        color: NOBLE_GAS_COLORS[element.symbol] || element.color,\n        metalness: 0,\n        roughness: 0.1,\n        emissive: NOBLE_GAS_COLORS[element.symbol] || element.color,\n        emissiveIntensity: 0.15\n      });\n      mesh = new THREE.Mesh(geo, mat);\n      mesh.position.set(0, 0, 0);\n      group.add(mesh);\n      break;\n\n    default:\n      geo = new THREE.SphereGeometry(0.3, 32, 32);\n      mat = new THREE.MeshStandardMaterial({\n        color: element.color,\n        metalness: element.group === 'metal' || element.group === 'transition' ? 0.7 : 0.1,\n        roughness: element.group === 'metal' || element.group === 'transition' ? 0.3 : 0.7\n      });\n      mesh = new THREE.Mesh(geo, mat);\n      mesh.position.set(0, 0, 0);\n      group.add(mesh);\n  }\n\n  return group;\n}\n\nexport function createMoleculeModel(formula, elementData) {\n  const group = new THREE.Group();\n  const atoms = [];\n\n  const parseFormula = (formula) => {\n    const elements = [];\n    const regex = /([A-Z][a-z]?)(\\d*)/g;\n    let match;\n    while ((match = regex.exec(formula)) !== null) {\n      elements.push({\n        symbol: match[1],\n        count: match[2] ? parseInt(match[2]) : 1\n      });\n    }\n    return elements;\n  };\n\n  const parsedFormula = parseFormula(formula);\n\n  const getElementColor = (symbol) => {\n    const elemData = elementData && elementData.find(e => e.symbol === symbol);\n    return elemData && elemData.color || 0xffffff;\n  };\n\n  const atomPositions = [];\n  let atomIndex = 0;\n\n  parsedFormula.forEach(item => {\n    for (let i = 0; i < item.count; i++) {\n      let x, y, z;\n\n      if (parsedFormula.length === 1 && item.count === 1) {\n        x = 0; y = 0; z = 0;\n      } else if (parsedFormula.length === 2) {\n        const angle = atomIndex * Math.PI;\n        x = Math.cos(angle) * 0.6;\n        y = 0;\n        z = Math.sin(angle) * 0.6;\n      } else if (parsedFormula.length === 3) {\n        x = (atomIndex % 3) - 1;\n        y = 0;\n        z = Math.floor(atomIndex / 3) * 0.6 - 0.3;\n      } else {\n        const phi = Math.acos(-1 + (2 * atomIndex) / parsedFormula.reduce((sum, p) => sum + p.count, 0));\n        const theta = Math.sqrt(parsedFormula.reduce((sum, p) => sum + p.count, 0) * Math.PI) * phi;\n        x = 0.7 * Math.cos(theta) * Math.sin(phi);\n        y = 0.7 * Math.sin(theta) * Math.sin(phi);\n        z = 0.7 * Math.cos(phi);\n      }\n\n      const geo = new THREE.SphereGeometry(0.25, 16, 16);\n      const mat = new THREE.MeshStandardMaterial({\n        color: getElementColor(item.symbol),\n        metalness: 0.3,\n        roughness: 0.6\n      });\n      const mesh = new THREE.Mesh(geo, mat);\n      mesh.position.set(x, y, z);\n      mesh.userData.elementSymbol = item.symbol;\n      group.add(mesh);\n      atomPositions.push({mesh, symbol: item.symbol, pos: new THREE.Vector3(x, y, z)});\n      atoms.push(mesh);\n      atomIndex++;\n    }\n  });\n\n  for (let i = 0; i < atomPositions.length; i++) {\n    for (let j = i + 1; j < atomPositions.length; j++) {\n      const dist = atomPositions[i].pos.distanceTo(atomPositions[j].pos);\n      if (dist < 1.2) {\n        const bondGeo = new THREE.CylinderGeometry(0.04, 0.04, dist, 8);\n        const bondMat = new THREE.MeshStandardMaterial({color: 0x888888, metalness: 0.5, roughness: 0.5});\n        const bond = new THREE.Mesh(bondGeo, bondMat);\n\n        const midX = (atomPositions[i].pos.x + atomPositions[j].pos.x) / 2;\n        const midY = (atomPositions[i].pos.y + atomPositions[j].pos.y) / 2;\n        const midZ = (atomPositions[i].pos.z + atomPositions[j].pos.z) / 2;\n\n        bond.position.set(midX, midY, midZ);\n        bond.lookAt(atomPositions[j].pos);\n        bond.rotateX(Math.PI / 2);\n        group.add(bond);\n      }\n    }\n  }\n\n  return group;\n}\n\nexport function createCrystalLattice(element) {\n  const group = new THREE.Group();\n  const gridSize = 3;\n  const spacing = 0.8;\n  const atomGeo = new THREE.SphereGeometry(0.15, 16, 16);\n  const atomMat = new THREE.MeshStandardMaterial({\n    color: element.color,\n    metalness: 0.6,\n    roughness: 0.4\n  });\n\n  for (let x = 0; x < gridSize; x++) {\n    for (let y = 0; y < gridSize; y++) {\n      for (let z = 0; z < gridSize; z++) {\n        const atom = new THREE.Mesh(atomGeo, atomMat);\n        atom.position.set(\n          (x - gridSize / 2) * spacing,\n          (y - gridSize / 2) * spacing,\n          (z - gridSize / 2) * spacing\n        );\n        group.add(atom);\n      }\n    }\n  }\n\n  return group;\n}\n\nexport function createThemedElementDisplay(element, type = 'standard') {\n  const group = new THREE.Group();\n  const baseSize = 1.0;\n\n  switch(type) {\n    case 'cosmic':\n      return createCosmicDisplay(element, baseSize);\n    case 'solar':\n      return createSolarDisplay(element, baseSize);\n    case 'metallic':\n      return createMetallicDisplay(element, baseSize);\n    case 'crystalline':\n      return createCrystallineDisplay(element, baseSize);\n    case 'gaseous':\n      return createGaseousDisplay(element, baseSize);\n    case 'radioactive':\n      return createRadioactiveDisplay(element, baseSize);\n    case 'biological':\n      return createBiologicalDisplay(element, baseSize);\n    case 'energy':\n      return createEnergyDisplay(element, baseSize);\n    default:\n      return createPlaceholderModel(element);\n  }\n}\n\nfunction createCosmicDisplay(element, size) {\n  const group = new THREE.Group();\n\n  const outerGlowGeo = new THREE.SphereGeometry(size * 1.5, 32, 32);\n  const outerGlowMat = new THREE.MeshBasicMaterial({\n    color: element.color,\n    transparent: true,\n    opacity: 0.15\n  });\n  const outerGlow = new THREE.Mesh(outerGlowGeo, outerGlowMat);\n  group.add(outerGlow);\n\n  const coreGeo = new THREE.SphereGeometry(size * 0.6, 32, 32);\n  const coreMat = new THREE.MeshStandardMaterial({\n    color: 0xffffff,\n    emissive: element.color,\n    emissiveIntensity: 0.8\n  });\n  const core = new THREE.Mesh(coreGeo, coreMat);\n  group.add(core);\n\n  const particlesGeo = new THREE.BufferGeometry();\n  const particleCount = 100;\n  const positions = new Float32Array(particleCount * 3);\n  for (let i = 0; i < particleCount; i++) {\n    const theta = Math.random() * Math.PI * 2;\n    const phi = Math.random() * Math.PI;\n    const r = size * (1.5 + Math.random() * 0.5);\n    positions[i * 3] = r * Math.sin(phi) * Math.cos(theta);\n    positions[i * 3 + 1] = r * Math.sin(phi) * Math.sin(theta);\n    positions[i * 3 + 2] = r * Math.cos(phi);\n  }\n  particlesGeo.setAttribute('position', new THREE.BufferAttribute(positions, 3));\n  const particlesMat = new THREE.PointsMaterial({\n    color: element.color,\n    size: 0.03,\n    transparent: true,\n    opacity: 0.6\n  });\n  const particles = new THREE.Points(particlesGeo, particlesMat);\n  group.add(particles);\n\n  return group;\n}\n\nfunction createSolarDisplay(element, size) {\n  const group = new THREE.Group();\n\n  const coronaGeo = new THREE.SphereGeometry(size * 1.3, 32, 32);\n  const coronaMat = new THREE.MeshBasicMaterial({\n    color: NOBLE_GAS_COLORS[element.symbol] || 0xffaa00,\n    transparent: true,\n    opacity: 0.2\n  });\n  const corona = new THREE.Mesh(coronaGeo, coronaMat);\n  group.add(corona);\n\n  const surfaceGeo = new THREE.SphereGeometry(size, 32, 32);\n  const surfaceMat = new THREE.MeshStandardMaterial({\n    color: NOBLE_GAS_COLORS[element.symbol] || 0xffaa00,\n    emissive: NOBLE_GAS_COLORS[element.symbol] || 0xffaa00,\n    emissiveIntensity: 0.5,\n    metalness: 0.3,\n    roughness: 0.7\n  });\n  const surface = new THREE.Mesh(surfaceGeo, surfaceMat);\n  group.add(surface);\n\n  return group;\n}\n\nfunction createMetallicDisplay(element, size) {\n  const group = new THREE.Group();\n\n  const mainGeo = new THREE.IcosahedronGeometry(size, 2);\n  const mainMat = new THREE.MeshStandardMaterial({\n    color: element.color,\n    metalness: 0.9,\n    roughness: 0.1,\n    envMapIntensity: 1.0\n  });\n  const main = new THREE.Mesh(mainGeo, mainMat);\n  group.add(main);\n\n  const highlightGeo = new THREE.IcosahedronGeometry(size * 1.05, 1);\n  const highlightMat = new THREE.MeshBasicMaterial({\n    color: 0xffffff,\n    transparent: true,\n    opacity: 0.1,\n    wireframe: true\n  });\n  const highlight = new THREE.Mesh(highlightGeo, highlightMat);\n  group.add(highlight);\n\n  return group;\n}\n\nfunction createCrystallineDisplay(element, size) {\n  const group = new THREE.Group();\n  const crystalGeo = new THREE.OctahedronGeometry(size, 1);\n  const crystalMat = new THREE.MeshStandardMaterial({\n    color: element.color,\n    metalness: 0.4,\n    roughness: 0.3,\n    transparent: true,\n    opacity: 0.85\n  });\n  const crystal = new THREE.Mesh(crystalGeo, crystalMat);\n  group.add(crystal);\n\n  const innerGeo = new THREE.OctahedronGeometry(size * 0.6, 0);\n  const innerMat = new THREE.MeshBasicMaterial({\n    color: 0xffffff,\n    transparent: true,\n    opacity: 0.3\n  });\n  const inner = new THREE.Mesh(innerGeo, innerMat);\n  group.add(inner);\n\n  return group;\n}\n\nfunction createGaseousDisplay(element, size) {\n  const group = new THREE.Group();\n\n  const blobGeo = new THREE.SphereGeometry(size, 32, 32);\n  const blobMat = new THREE.MeshStandardMaterial({\n    color: NOBLE_GAS_COLORS[element.symbol] || element.color,\n    metalness: 0,\n    roughness: 1.0,\n    transparent: true,\n    opacity: 0.6\n  });\n  const blob = new THREE.Mesh(blobGeo, blobMat);\n  group.add(blob);\n\n  for (let i = 0; i < 5; i++) {\n    const smallBlobGeo = new THREE.SphereGeometry(size * 0.3, 16, 16);\n    const smallBlobMat = new THREE.MeshBasicMaterial({\n      color: NOBLE_GAS_COLORS[element.symbol] || element.color,\n      transparent: true,\n      opacity: 0.3\n    });\n    const smallBlob = new THREE.Mesh(smallBlobGeo, smallBlobMat);\n    const angle = (i / 5) * Math.PI * 2;\n    smallBlob.position.set(\n      Math.cos(angle) * size * 1.2,\n      Math.sin(angle * 0.5) * size * 0.3,\n      Math.sin(angle) * size * 1.2\n    );\n    group.add(smallBlob);\n  }\n\n  return group;\n}\n\nfunction createRadioactiveDisplay(element, size) {\n  const group = new THREE.Group();\n\n  const coreGeo = new THREE.SphereGeometry(size * 0.6, 32, 32);\n  const coreMat = new THREE.MeshStandardMaterial({\n    color: element.color,\n    emissive: 0x00ff00,\n    emissiveIntensity: 0.5,\n    metalness: 0.6,\n    roughness: 0.4\n  });\n  const core = new THREE.Mesh(coreGeo, coreMat);\n  group.add(core);\n\n  const pulseGeo = new THREE.SphereGeometry(size, 32, 32);\n  const pulseMat = new THREE.MeshBasicMaterial({\n    color: 0x00ff00,\n    transparent: true,\n    opacity: 0.2\n  });\n  const pulse = new THREE.Mesh(pulseGeo, pulseMat);\n  group.add(pulse);\n\n  return group;\n}\n\nfunction createBiologicalDisplay(element, size) {\n  const group = new THREE.Group();\n\n  const organicGeo = new THREE.TorusKnotGeometry(size * 0.5, 0.1, 64, 8, 2, 3);\n  const organicMat = new THREE.MeshStandardMaterial({\n    color: element.color,\n    metalness: 0.2,\n    roughness: 0.8\n  });\n  const organic = new THREE.Mesh(organicGeo, organicMat);\n  organic.rotation.x = Math.PI / 4;\n  group.add(organic);\n\n  const cellGeo = new THREE.SphereGeometry(size * 0.2, 16, 16);\n  const cellMat = new THREE.MeshBasicMaterial({\n    color: element.color,\n    transparent: true,\n    opacity: 0.4\n  });\n\n  for (let i = 0; i < 6; i++) {\n    const cell = new THREE.Mesh(cellGeo, cellMat);\n    const angle = (i / 6) * Math.PI * 2;\n    cell.position.set(\n      Math.cos(angle) * size,\n      Math.sin(angle) * size * 0.3,\n      Math.sin(angle) * size\n    );\n    group.add(cell);\n  }\n\n  return group;\n}\n\nfunction createEnergyDisplay(element, size) {\n  const group = new THREE.Group();\n\n  const energyGeo = new THREE.OctahedronGeometry(size, 1);\n  const energyMat = new THREE.MeshStandardMaterial({\n    color: element.color,\n    emissive: element.color,\n    emissiveIntensity: 0.6,\n    metalness: 0.3,\n    roughness: 0.5\n  });\n  const energy = new THREE.Mesh(energyGeo, energyMat);\n  group.add(energy);\n\n  const rays = [];\n  for (let i = 0; i < 8; i++) {\n    const rayGeo = new THREE.CylinderGeometry(0.02, 0.01, size * 1.5, 8);\n    const rayMat = new THREE.MeshBasicMaterial({\n      color: element.color,\n      transparent: true,\n      opacity: 0.4\n    });\n    const ray = new THREE.Mesh(rayGeo, rayMat);\n    const angle = (i / 8) * Math.PI * 2;\n    const elevation = (i % 2) * Math.PI / 3 - Math.PI / 6;\n    ray.position.set(\n      Math.cos(angle) * Math.cos(elevation) * size * 0.8,\n      Math.sin(elevation) * size * 0.8,\n      Math.sin(angle) * Math.cos(elevation) * size * 0.8\n    );\n    ray.lookAt(ray.position.clone().multiplyScalar(2));\n    group.add(ray);\n    rays.push(ray);\n  }\n\n  return group;\n}\n\nexport function optimizeModelForVR(model) {\n  model.traverse(child => {\n    if (child.isMesh) {\n      child.castShadow = false;\n      child.receiveShadow = false;\n\n      if (child.material) {\n        child.material.side = THREE.DoubleSide;\n      child.material.needsUpdate = true;\n      child.material.transparent = child.material.opacity < 1;\n      child.material.depthWrite = !child.material.transparent;\n      child.material.depthTest = child.material.transparent\n          ? THREE.DepthTest\n          : THREE.DepthTest.Always;\n      }\n    }\n\n    if (child.isLight) {\n      child.castShadow = false;\n      child.distance = 30;\n      child.intensity *= 0.7;\n    }\n  });\n\n  model.traverse(child => {\n    if (child.isMesh && child.geometry) {\n      child.geometry.computeBoundingSphere();\n    }\n  });\n\n  return model;\n}\n\nconst ASSET_PATHS = {\n  elementModels: {\n    'H': 'assets/elements/hydrogen.glb',\n    'C': 'assets/elements/carbon.glb',\n    'Fe': 'assets/elements/iron.glb',\n    'Au': 'assets/elements/gold.glb',\n    'U': 'assets/elements/uranium.glb',\n    'Na': 'assets/elements/sodium.glb',\n    'He': 'assets/elements/helium.glb',\n    'O': 'assets/elements/oxygen.glb',\n    'N': 'assets/elements/nitrogen.glb',\n    'S': 'assets/elements/sulfur.glb',\n    'Cu': 'assets/elements/copper.glb',\n    'Al': 'assets/elements/aluminum.glb',\n    'Si': 'assets/elements/silicon.glb',\n    'Ca': 'assets/elements/calcium.glb',\n    'Mg': 'assets/elements/magnesium.glb',\n  },\n  moleculeModels: {\n    'H2O': 'assets/molecules/water.glb',\n    'CO2': 'assets/molecules/carbon_dioxide.glb',\n    'CH4': 'assets/molecules/methane.glb',\n    'NaCl': 'assets/molecules/salt.glb',\n    'O2': 'assets/molecules/oxygen.glb',\n    'N2': 'assets/molecules/nitrogen.glb',\n    'C6H12O6': 'assets/molecules/glucose.glb',\n    'DNA': 'assets/molecules/dna.glb',\n    'NH3': 'assets/molecules/ammonia.glb',\n  },\n  compoundModels: {\n    'steel': 'assets/compounds/steel.glb',\n    'bronze': 'assets/compounds/bronze.glb',\n    'brass': 'assets/compounds/brass.glb',\n    'quartz': 'assets/compounds/quartz.glb',\n    'diamond': 'assets/compounds/diamond.glb',\n    'graphite': 'assets/compounds/graphite.glb',\n  }\n};\n\nexport function getElementModelPath(elementSymbol) {\n  return ASSET_PATHS.elementModels[elementSymbol] || null;\n}\n\nexport function getMoleculeModelPath(formula) {\n  return ASSET_PATHS.moleculeModels[formula] || null;\n}\n\nexport function getCompoundModelPath(compoundName) {\n  return ASSET_PATHS.compoundModels[compoundName] || null;\n}\n\nexport function loadElementModel(element, callback) {\n  const modelPath = getElementModelPath(element.symbol);\n\n  if (modelPath) {\n    loadModel(modelPath, (scene, error) => {\n      if (error) {\n        console.warn(`Failed to load model for ${element.symbol}, using procedural`);\n        callback(createThemedElementDisplay(element, element.theme || 'standard'), null);\n      } else {\n        const optimized = optimizeModelForVR(scene);\n        optimized.scale.set(0.5, 0.5, 0.5);\n        callback(optimized, null);\n      }\n    });\n  } else {\n    const themed = createThemedElementDisplay(element, element.theme || 'standard');\n    callback(themed, null);\n  }\n}\n\nexport function loadMoleculeModel(formula, elementData, callback) {\n  const modelPath = getMoleculeModelPath(formula);\n\n  if (modelPath) {\n    loadModel(modelPath, (scene, error) => {\n      if (error) {\n        console.warn(`Failed to load molecule ${formula}, using procedural`);\n        callback(createMoleculeModel(formula, elementData), null);\n      } else {\n        const optimized = optimizeModelForVR(scene);\n        optimized.scale.set(0.5, 0.5, 0.5);\n        callback(optimized, null);\n      }\n    });\n  } else {\n    const procedural = createMoleculeModel(formula, elementData);\n    callback(procedural, null);\n  }\n}\n\nexport function createElementDisplay(element, displayType = 'standard') {\n  const displayMap = {\n    'cosmic': () => createThemedElementDisplay(element, 'cosmic'),\n    'solar': () => createThemedElementDisplay(element, 'solar'),\n    'energy': () => createThemedElementDisplay(element, 'energy'),\n    'metallic': () => createThemedElementDisplay(element, 'metallic'),\n    'crystalline': () => createThemedElementDisplay(element, 'crystalline'),\n    'gaseous': () => createThemedElementDisplay(element, 'gaseous'),\n    'radioactive': () => createThemedElementDisplay(element, 'radioactive'),\n    'biological': () => createThemedElementDisplay(element, 'biological'),\n    'industry': () => createThemedElementDisplay(element, 'metallic'),\n    'technology': () => createThemedElementDisplay(element, 'metallic'),\n    'toxic': () => createThemedElementDisplay(element, 'metallic'),\n    'precious': () => createThemedElementDisplay(element, 'metallic'),\n    'historical': () => createThemedElementDisplay(element, 'metallic'),\n    'medical': () => createThemedElementDisplay(element, 'metallic'),\n    'nuclear': () => createThemedElementDisplay(element, 'radioactive'),\n    'space': () => createThemedElementDisplay(element, 'cosmic'),\n    'research': () => createThemedElementDisplay(element, 'metallic'),\n    'light': () => createThemedElementDisplay(element, 'cosmic'),\n    'fire': () => createThemedElementDisplay(element, 'energy'),\n    'volcano': () => createThemedElementDisplay(element, 'radioactive'),\n    'swimming': () => createThemedElementDisplay(element, 'gaseous'),\n    'welding': () => createThemedElementDisplay(element, 'gaseous'),\n    'skeleton': () => createThemedElementDisplay(element, 'biological'),\n    'forge': () => createThemedElementDisplay(element, 'metallic'),\n    'electric': () => createThemedElementDisplay(element, 'metallic'),\n    'treasure': () => createThemedElementDisplay(element, 'metallic'),\n    'kitchen': () => createThemedElementDisplay(element, 'metallic'),\n    'silicon': () => createThemedElementDisplay(element, 'crystalline'),\n    'desert': () => createThemedElementDisplay(element, 'crystalline'),\n    'breath': () => createThemedElementDisplay(element, 'gaseous'),\n    'atmosphere': () => createThemedElementDisplay(element, 'gaseous'),\n    'protection': () => createThemedElementDisplay(element, 'metallic'),\n    'lights': () => createThemedElementDisplay(element, 'solar'),\n  };\n\n  const displayFn = displayMap[displayType] || displayMap['standard'];\n  return displayFn ? displayFn() : createPlaceholderModel(element);\n}\n\nexport function scaleModelForVR(model, targetScale = 1.0) {\n  const bbox = new THREE.Box3().setFromObject(model);\n  const size = new THREE.Vector3();\n  bbox.getSize(size);\n\n  const maxDim = Math.max(size.x, size.y, size.z);\n  const scaleFactor = targetScale / maxDim;\n\n  model.scale.multiplyScalar(scaleFactor);\n\n  return model;\n}\n\nexport function positionModelAt(model, position = {x: 0, y: 0, z: 0}, lookAt = null) {\n  model.position.set(position.x, position.y, position.z);\n\n  if (lookAt) {\n    const target = new THREE.Vector3(lookAt.x, lookAt.y, lookAt.z);\n    model.lookAt(target);\n  }\n\n  return model;\n}\n\nexport function createModelPedestal(size = 1.0, color = 0x333333) {\n  const group = new THREE.Group();\n\n  const baseGeo = new THREE.CylinderGeometry(size * 0.6, size * 0.8, size * 0.2, 32);\n  const baseMat = new THREE.MeshStandardMaterial({\n    color: color,\n    metalness: 0.3,\n    roughness: 0.7\n  });\n  const base = new THREE.Mesh(baseGeo, baseMat);\n  base.position.y = 0;\n  group.add(base);\n\n  const pillarGeo = new THREE.CylinderGeometry(size * 0.4, size * 0.5, size * 1.0, 32);\n  const pillarMat = new THREE.MeshStandardMaterial({\n    color: 0x444444,\n    metalness: 0.2,\n    roughness: 0.6\n  });\n  const pillar = new THREE.Mesh(pillarGeo, pillarMat);\n  pillar.position.y = size * 0.6;\n  group.add(pillar);\n\n  const topGeo = new THREE.CylinderGeometry(size * 0.5, size * 0.6, size * 0.15, 32);\n  const topMat = new THREE.MeshStandardMaterial({\n    color: color,\n    metalness: 0.5,\n    roughness: 0.4\n  });\n  const top = new THREE.Mesh(topGeo, topMat);\n  top.position.y = size * 1.7;\n  group.add(top);\n\n  return group;\n}\n\nexport function createInteractiveHotspot(size = 0.2, color = 0xff6b6b) {\n  const group = new THREE.Group();\n\n  const sphereGeo = new THREE.SphereGeometry(size, 16, 16);\n  const sphereMat = new THREE.MeshBasicMaterial({\n    color: color,\n    transparent: true,\n    opacity: 0.6\n  });\n  const sphere = new THREE.Mesh(sphereGeo, sphereMat);\n  group.add(sphere);\n\n  const ringGeo = new THREE.RingGeometry(size * 1.5, size * 1.5, 32);\n  const ringMat = new THREE.MeshBasicMaterial({\n    color: color,\n    transparent: true,\n    opacity: 0.3,\n    side: THREE.DoubleSide\n  });\n  const ring = new THREE.Mesh(ringGeo, ringMat);\n  ring.rotation.x = Math.PI / 2;\n  group.add(ring);\n\n  group.userData.interactive = true;\n  group.userData.hotspotType = 'info';\n\n  return group;\n}\n\nexport function batchOptimizeModels(models) {\n  const scene = new THREE.Scene();\n\n  models.forEach(model => {\n    scene.add(model);\n  });\n\n  scene.traverse(child => {\n    if (child.isMesh) {\n      child.geometry.computeBoundingSphere();\n    }\n  });\n\n  return scene;\n}\n\nexport function createLODModel(baseModel, levels = 3) {\n  const lodGroup = new THREE.Group();\n  const distances = [0, 5, 10, 20];\n\n  for (let level = 0; level < levels; level++) {\n    const clone = baseModel.clone();\n    const simplifyFactor = level / (levels - 1);\n\n    clone.traverse(child => {\n      if (child.isMesh && child.geometry) {\n        const originalVertices = child.geometry.attributes.position.count;\n        const targetVertices = Math.floor(originalVertices * (1 - simplifyFactor * 0.5));\n\n        if (child.geometry.index) {\n          child.geometry.setDrawRange(0, targetVertices);\n        }\n\n        if (child.material) {\n          const simplifiedMat = child.material.clone();\n          simplifiedMat.wireframe = level === levels - 1;\n          child.material = simplifiedMat;\n        }\n      }\n    });\n\n    clone.position.set(0, 0, 0);\n    lodGroup.add(clone);\n  }\n\n  return lodGroup;\n}\n\nexport class VRObjectPool {\n  constructor() {\n    this.pools = new Map();\n    this.maxSize = 50;\n  }\n\n  get(type, key) {\n    const poolKey = `${type}_${key}`;\n    if (!this.pools.has(poolKey)) {\n      this.pools.set(poolKey, []);\n    }\n\n    const pool = this.pools.get(poolKey);\n    return pool.length > 0 ? pool.pop() : null;\n  }\n\n  release(type, key, object) {\n    const poolKey = `${type}_${key}`;\n    if (!this.pools.has(poolKey)) {\n      this.pools.set(poolKey, []);\n    }\n\n    const pool = this.pools.get(poolKey);\n    if (pool.length < this.maxSize) {\n      object.visible = false;\n      object.position.set(0, 0, 0);\n      object.rotation.set(0, 0, 0);\n      pool.push(object);\n    } else {\n      object.traverse(child => {\n        if (child.geometry) child.geometry.dispose();\n        if (child.material) child.material.dispose();\n      });\n    }\n  }\n\n  dispose() {\n    this.pools.forEach(pool => {\n      pool.forEach(object => {\n        object.traverse(child => {\n          if (child.geometry) child.geometry.dispose();\n          if (child.material) child.material.dispose();\n        });\n      });\n    });\n    this.pools.clear();\n  }\n}\n\nexport function optimizeForMobileVR(model) {\n  const simplified = model.clone();\n\n  simplified.traverse(child => {\n    if (child.isMesh) {\n      if (child.geometry) {\n        child.geometry.computeVertexNormals();\n\n        if (child.geometry.attributes.uv) {\n          const uv = child.geometry.attributes.uv;\n          for (let i = 0; i < uv.count; i++) {\n            uv.setXY(i, Math.round(uv.getX(i) * 64) / 64, Math.round(uv.getY(i) * 64) / 64);\n          }\n          uv.needsUpdate = true;\n        }\n      }\n\n      if (child.material) {\n        if (child.material.map) {\n          if (child.material.map.image) {\n            const canvas = document.createElement('canvas');\n            canvas.width = 64;\n            canvas.height = 64;\n            const ctx = canvas.getContext('2d');\n            ctx.drawImage(child.material.map.image, 0, 0, 64, 64);\n            const texture = new THREE.CanvasTexture(canvas);\n            child.material.map = texture;\n          }\n        }\n\n        child.material.side = THREE.DoubleSide;\n\n        if (Array.isArray(child.material)) {\n          child.material.forEach(mat => {\n            mat.side = THREE.DoubleSide;\n          });\n        }\n      }\n    }\n  });\n\n  return simplified;\n}\n\nexport function createDistanceCuller(models, camera) {\n  return {\n    update: function() {\n      const frustum = new THREE.Frustum();\n      frustum.setFromProjectionMatrix(camera.projectionMatrix);\n      frustum.multiplyMatrices(camera.matrixWorldInverse, frustum);\n\n      models.forEach(model => {\n        if (model.userData.boundingSphere) {\n          model.visible = frustum.intersectsSphere(model.userData.boundingSphere);\n        } else {\n          const sphere = new THREE.Sphere();\n          sphere.setFromObject(model);\n          model.userData.boundingSphere = sphere;\n          model.visible = frustum.intersectsSphere(sphere);\n        }\n      });\n    }\n  };\n}\n\nexport function measureModelPerformance(model) {\n  const stats = {\n    vertices: 0,\n    triangles: 0,\n    materials: 0,\n    drawCalls: 0\n  };\n\n  model.traverse(child => {\n    if (child.isMesh) {\n      if (child.geometry) {\n        if (child.geometry.attributes.position) {\n          stats.vertices += child.geometry.attributes.position.count;\n        }\n        if (child.geometry.index) {\n          stats.triangles += child.geometry.index.count / 3;\n        } else {\n          stats.triangles += child.geometry.attributes.position.count / 3;\n        }\n      }\n\n      if (child.material) {\n        const mats = Array.isArray(child.material) ? child.material : [child.material];\n        stats.materials += mats.length;\n        stats.drawCalls++;\n      }\n    }\n  });\n\n  return stats;\n}\n\nexport function validateModelForVR(model, warnings = []) {\n  const stats = measureModelPerformance(model);\n\n  if (stats.triangles > 100000) {\n    warnings.push({\n      type: 'high_poly',\n      message: `Model has ${stats.triangles.toLocaleString()} triangles. Consider simplifying.`,\n      severity: 'warning'\n    });\n  }\n\n  if (stats.triangles > 50000) {\n    warnings.push({\n      type: 'medium_poly',\n      message: `Model has ${stats.triangles.toLocaleString()} triangles. Recommended: <50k for VR.`,\n      severity: 'info'\n    });\n  }\n\n  if (stats.materials > 10) {\n    warnings.push({\n      type: 'high_materials',\n      message: `Model uses ${stats.materials} materials. Consider batching.`,\n      severity: 'warning'\n    });\n  }\n\n  const hasAnimation = model.animations && model.animations.length > 0;\n  if (hasAnimation && stats.triangles > 20000) {\n    warnings.push({\n      type: 'animated_poly',\n      message: `Animated model has ${stats.triangles.toLocaleString()} triangles. High for VR animation.`,\n      severity: 'warning'\n    });\n  }\n\n  model.userData.validationWarnings = warnings;\n  model.userData.performanceStats = stats;\n\n  return {stats, warnings};\n}\n\nexport function createBillboard(text, color, size = 1) {\n  const canvas = document.createElement('canvas');\n  const ctx = canvas.getContext('2d');\n  canvas.width = 512;\n  canvas.height = 256;\n\n  ctx.font = `${size * 60}px Arial`;\n  ctx.fillStyle = color || '#ffffff';\n  ctx.textAlign = 'center';\n  ctx.textBaseline = 'middle';\n  ctx.fillText(text, 256, 128);\n\n  const texture = new THREE.CanvasTexture(canvas);\n  texture.needsUpdate = true;\n\n  const geo = new THREE.PlaneGeometry(1, 0.5);\n  const mat = new THREE.MeshBasicMaterial({\n    map: texture,\n    transparent: true,\n    side: THREE.DoubleSide\n  });\n\n  const mesh = new THREE.Mesh(geo, mat);\n  mesh.position.set(0, 0, 0);\n\n  const group = new THREE.Group();\n  group.add(mesh);\n\n  return group;\n}\n","import * as THREE from 'three';\n\nexport class VoiceCommander {\n  constructor(context) {\n    this.ctx = context;\n    this.recognition = null;\n    this.isListening = false;\n    this.commands = [];\n    this.currentLanguage = 'de';\n\n    this.elementCommands = {\n      de: {\n        trigger: 'zeige mir',\n        element: 'element'\n      },\n      en: {\n        trigger: 'show me',\n        element: 'element'\n      }\n    };\n\n    this.setupUI();\n  }\n\n  setupUI() {\n    const statusDiv = document.createElement('div');\n    statusDiv.id = 'voice-status';\n    statusDiv.style.css = `\n      position: fixed;\n      bottom: 20px;\n      left: 50%;\n      transform: translateX(-50%);\n      background: rgba(0, 0, 0, 0.7);\n      padding: 15px 20px;\n      border-radius: 8px;\n      font-family: Arial, sans-serif;\n      color: white;\n      z-index: 1000;\n      font-size: 16px;\n      pointer-events: none;\n    `;\n    statusDiv.innerHTML = `\n      <div style=\"display: flex; align-items: center; gap: 10px;\">\n        <button id=\"voice-toggle\" style=\"\n          background: linear-gradient(135deg, #667eea, #764ba2);\n          border: none;\n          border-radius: 20px;\n          padding: 10px 20px;\n          color: white;\n          font-weight: bold;\n          font-size: 14px;\n          cursor: pointer;\n        \">\n           Mikrofon an\n        </button>\n      </div>\n      <div id=\"voice-text\" style=\"\n        font-size: 18px;\n        margin-top: 10px;\n        min-height: 24px;\n      );\n        Sprechen Sie \"Zeige mir Element\" oder \"Show me Element\"\n      </div>\n    `;\n    document.body.appendChild(statusDiv);\n  }\n\n  async init() {\n    if (!('webkitSpeechRecognition' in window)) {\n      console.warn('Web Speech API not supported');\n      this.setupUI();\n      return;\n    }\n\n    this.recognition = new webkitSpeechRecognition();\n    this.recognition.continuous = false;\n    this.recognition.interimResults = false;\n    this.recognition.lang = this.currentLanguage === 'de' ? 'de-DE' : 'en-US';\n\n    this.setupEventListeners();\n    await this.recognition.start();\n\n    console.log('Voice recognition initialized');\n  }\n\n  setupEventListeners() {\n    this.recognition.onstart = () => {\n      this.isListening = true;\n      this.updateStatus('Zuhrt...');\n      this.executeCommand(this.recognition.transcript || '');\n    };\n\n    this.recognition.onend = () => {\n      this.isListening = false;\n      this.updateStatus('Bereit');\n    };\n  }\n\n  async startListening() {\n    this.stop();\n    await new Promise(resolve => setTimeout(resolve, 100));\n\n    try {\n      await this.recognition.start();\n\n      const timeout = setTimeout(() => {\n        this.recognition.stop();\n        resolve(false);\n      }, 5000);\n\n      this.isListening = true;\n      this.updateStatus('Zuhrt...');\n\n      const result = await Promise.race([\n        this.recognition.start(),\n        timeout\n      ]);\n\n      this.recognition.stop();\n      this.isListening = false;\n      this.updateStatus('Bereit');\n\n      resolve(result);\n    } catch (error) {\n      console.error('Voice recognition error:', error);\n      this.recognition.stop();\n      resolve(false);\n    }\n  }\n\n  stop() {\n    this.isListening = false;\n    if (this.recognition) {\n      this.recognition.stop();\n    }\n    this.updateStatus('Bereit');\n  }\n\n  updateStatus(text) {\n    const statusText = document.getElementById('voice-text');\n    if (statusText) {\n      statusText.textContent = text;\n    }\n  }\n\n  async executeCommand(transcript) {\n    if (!transcript || !transcript.trim()) return null;\n\n    const lowerTranscript = transcript.toLowerCase();\n    const commands = this.elementCommands[this.currentLanguage];\n\n    let element = null;\n    let roomId = null;\n\n    const commandPattern = new RegExp(commands.trigger + '\\\\s+(' + commands.element + '(\\\\s+[a-z]+)?', 'i');\n\n    const triggerMatch = lowerTranscript.match(commands.trigger);\n\n    if (triggerMatch) {\n      if (triggerMatch.index > -1) {\n        const afterTrigger = lowerTranscript.substring(triggerMatch.index + triggerMatch[0].length).trim();\n\n        if (this.currentLanguage === 'de') {\n          if (afterTrigger.includes('und') || afterTrigger.includes('und die')) {\n            afterTrigger = afterTrigger.replace(/und die/, '');\n          }\n\n          const elementName = afterTrigger.trim();\n          element = this.findElementByName(elementName);\n        } else {\n          const showMatch = lowerTranscript.match(/show\\s+me\\s+(\\w+)(?:\\s+of)?/i);\n          if (showMatch) {\n            const afterShow = lowerTranscript.substring(showMatch.index + 4).trim();\n            element = this.findElementByName(afterShow);\n          } else {\n            const showMatch = lowerTranscript.match(/show\\s+(\\w+)(?:\\s+of)?/i);\n            if (showMatch) {\n              const afterShow = lowerTranscript.substring(showMatch.index + 4).trim();\n              element = this.findElementByName(afterShow);\n            }\n          }\n        }\n      } else if (commands.element && triggerMatch.index === -1) {\n        element = this.extractElement(transcript);\n      }\n\n      if (element) {\n        console.log(`Voice command: Navigate to ${element.symbol}`);\n        this.commands.push({\n          type: 'navigate',\n          element: element,\n          timestamp: Date.now()\n        });\n\n        return element;\n      }\n    }\n\n    return null;\n  }\n\n  findElementByName(name) {\n    if (this.ctx && this.ctx.assets) {\n      const elements = this.ctx.assets.elements;\n\n      const normalized = name.toLowerCase()\n        .replace(//g, 'ae')\n        .replace(//g, 'oe')\n        .replace(//g, 'ue')\n        .replace(//g, 'ss');\n\n      return elements.find(e => \n        e.name.toLowerCase().replace(//g, 'ae')\n        .replace(//g, 'oe')\n        .replace(//g, 'ue')\n        .replace(//g, 'ss')\n        .includes(normalized) ||\n        e.symbol.toLowerCase() === normalized ||\n        normalized.includes(e.name.toLowerCase())\n      );\n    }\n\n    return null;\n  }\n\n  extractElement(text) {\n    const elementNames = [];\n    const words = text.toLowerCase().split(/[\\s,.,!?]+/);\n\n    for (const word of words) {\n      if (word.length < 2) continue;\n\n      if (ELEMENTS.some(e => {\n        const name = e.name.toLowerCase();\n        return name.includes(word) ||\n               name === word ||\n               e.symbol.toLowerCase() === word ||\n               normalized.includes(name);\n      })) {\n        elementNames.push(word);\n      }\n    }\n\n    if (elementNames.length === 1) {\n      return ELEMENTS.find(e =>\n        elementNames.includes(e.name.toLowerCase()) ||\n        elementNames.includes(e.symbol.toLowerCase())\n      );\n    }\n\n    return null;\n  }\n\n  getRecentCommands() {\n    const now = Date.now();\n    const recent = this.commands.filter(cmd =>\n      cmd.timestamp && (now - cmd.timestamp) < 10000\n    );\n\n    return recent;\n  }\n\n  getCurrentLanguage() {\n    return this.currentLanguage;\n  }\n\n  setLanguage(lang) {\n    if (['de', 'en'].includes(lang)) {\n      this.currentLanguage = lang;\n      this.updateStatus(`Sprache: ${lang.toUpperCase()}`);\n    }\n  }\n}\n\nexport default VoiceCommander;\n","import * as THREE from 'three';\nimport { PointerLockControls } from 'three/examples/jsm/controls/PointerLockControls.js';\n\nimport {VRButton} from './lib/VRButton.js';\nimport {slideshow} from './lib/slideshow.js';\nimport {loadAssets} from './lib/assetManager.js';\n\n// ECSY\nimport { World } from 'ecsy';\nimport { SDFTextSystem } from './systems/SDFTextSystem.js';\nimport { DebugHelperSystem } from './systems/DebugHelperSystem.js';\nimport { AreaCheckerSystem } from './systems/AreaCheckerSystem.js';\nimport { ControllersSystem } from './systems/ControllersSystem.js';\nimport HierarchySystem from './systems/HierarchySystem.js';\nimport TransformSystem from './systems/TransformSystem.js';\nimport BillboardSystem from './systems/BillboardSystem.js';\n\nimport SystemsGroup from './systems/SystemsGroup.js';\n\nimport assets from './assets.js';\nimport shaders from './lib/shaders.js';\n\nimport { Text, Object3D, AreaChecker } from './components/index.js';\n\nimport RayControl from './lib/RayControl.js';\nimport Teleport from './lib/Teleport.js';\n\nimport * as roomLobby from './rooms/Lobby.js';\nimport ElementRoom from './rooms/ElementRoom.js';\nimport ExperimentalRoom from './rooms/ExperimentalRoom.js';\n\nimport {ELEMENTS, EXPERIMENTAL_ROOMS} from './data/elements.js';\nimport ParticleSystem from './lib/ParticleSys.js';\nimport VoiceCommander from './lib/VoiceCommander.js';\n\nvar clock = new THREE.Clock();\n\nvar scene, renderer, camera, controls, context = {};\nvar raycontrol, teleport, controllers = [];\nvar voiceCommander;\n\nvar listener, ambientMusic;\n\nvar rooms = [];\nvar currentElementRoom = null;\nvar currentExpRoom = null;\n\nconst ROOM_LOBBY = 0;\nconst ROOM_ELEMENTS_START = 1;\nconst ROOM_ELEMENTS_END = ROOM_ELEMENTS_START + ELEMENTS.length - 1;\nconst ROOM_EXP_START = ROOM_ELEMENTS_END + 1;\n\nvar elementRooms = [];\nvar expRooms = [];\n\nconst urlObject = new URL(window.location);\nconst roomName = urlObject.searchParams.get('room');\nconst debug = urlObject.searchParams.has('debug');\nconst handedness = urlObject.searchParams.has('handedness') ? urlObject.searchParams.get('handedness') : \"right\";\n\nconst targetPositions = {\n  lobby: {\n    fromElement: new THREE.Vector3(0, 0, 5)\n  },\n  elements: {\n    toLobby: new THREE.Vector3(0, 0, -5)\n  },\n  expRooms: {\n    toLobby: new THREE.Vector3(0, 0, -5)\n  }\n};\n\nfunction gotoRoom(roomIndex, elementSymbol = null, expRoomId = null) {\n  rooms[context.room].exit(context);\n  raycontrol.deactivateAll();\n\n  const prevRoom = context.room;\n\n  if (roomIndex === ROOM_LOBBY) {\n    currentElementRoom = null;\n    currentExpRoom = null;\n  } else if (roomIndex >= ROOM_ELEMENTS_START && roomIndex <= ROOM_ELEMENTS_END) {\n    currentElementRoom = elementSymbol;\n    currentExpRoom = null;\n  } else if (roomIndex >= ROOM_EXP_START) {\n    currentElementRoom = null;\n    currentExpRoom = expRoomId;\n  }\n\n  context.room = roomIndex;\n  playMusic(roomIndex);\n\n  rooms[context.room].enter(context, elementSymbol || expRoomId);\n}\n\nfunction playMusic(roomIndex) {\n  if (ambientMusic && ambientMusic.source) ambientMusic.stop();\n\n  if (roomIndex !== ROOM_LOBBY) {\n  }\n}\n\nvar ecsyWorld;\nvar systemsGroup = {};\n\nfunction detectWebXR() {\n  if ('xr' in navigator) {\n    navigator.xr.isSessionSupported('immersive-vr').then( supported => {\n      const noWebXRElement = document.getElementById('no-webxr');\n      if (!supported && noWebXRElement) {\n        noWebXRElement.classList.remove('hidden');\n      }\n    } );\n\n  } else {\n    const noWebXRElement = document.getElementById('no-webxr');\n    if (noWebXRElement) {\n      noWebXRElement.classList.remove('hidden');\n    }\n  }\n}\n\nexport function init() {\n  detectWebXR();\n\n  const handElement = document.getElementById(handedness + 'hand');\n  if (handElement) {\n    handElement.classList.add('activehand');\n  }\n\n  ecsyWorld = new World();\n  ecsyWorld\n    .registerSystem(SDFTextSystem)\n    .registerSystem(AreaCheckerSystem)\n    .registerSystem(ControllersSystem)\n    .registerSystem(DebugHelperSystem)\n    .registerSystem(TransformSystem)\n    .registerSystem(BillboardSystem)\n    .registerSystem(HierarchySystem);\n\n  systemsGroup['lobby'] = new SystemsGroup(ecsyWorld, [\n    AreaCheckerSystem, ControllersSystem, DebugHelperSystem\n  ]);\n\n  renderer = new THREE.WebGLRenderer({\n    antialias: true,\n    logarithmicDepthBuffer: false,\n    powerPreference: \"high-performance\",\n    preserveDrawingBuffer: false,\n    failIfMajorPerformanceCaveat: false\n  });\n  renderer.gammaFactor = 2.2;\n  renderer.outputEncoding = THREE.sRGBEncoding;\n  renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n  renderer.setSize(window.innerWidth, window.innerHeight);\n  renderer.xr.enabled = true;\n\n  renderer.sortObjects = false;\n  renderer.autoClear = true;\n  renderer.autoClearDepth = true;\n  renderer.autoClearStencil = true;\n\n  scene = new THREE.Scene();\n  camera = new THREE.PerspectiveCamera(80, window.innerWidth / window.innerHeight, 0.005, 10000);\n  camera.position.set(0, 1.6, 0);\n  listener = new THREE.AudioListener();\n  camera.add(listener);\n\n  ambientMusic = new THREE.Audio(listener);\n\n  controls = new PointerLockControls(camera, renderer.domElement);\n\n  document.body.addEventListener('click', () => {\n    if (!context.vrMode) {\n      controls.lock();\n    }\n  });\n\n  var moveForward = false;\n  var moveBackward = false;\n  var moveLeft = false;\n  var moveRight = false;\n\n  document.addEventListener('keydown', (ev) => {\n    switch(ev.keyCode) {\n      case 87: case 38: moveForward = true; break;\n      case 65: case 37: moveLeft = true; break;\n      case 83: case 40: moveBackward = true; break;\n      case 68: case 39: moveRight = true; break;\n    }\n  });\n\n  document.addEventListener('keyup', (ev) => {\n    switch(ev.keyCode) {\n      case 87: case 38: moveForward = false; break;\n      case 65: case 37: moveLeft = false; break;\n      case 83: case 40: moveBackward = false; break;\n      case 68: case 39: moveRight = false; break;\n    }\n  });\n\n  context.browserControls = {\n    controls: controls,\n    moveForward: () => moveForward,\n    moveBackward: () => moveBackward,\n    moveLeft: () => moveLeft,\n    moveRight: () => moveRight\n  };\n\n  for (let i = 0; i < 2; i++) {\n    controllers[i] = renderer.xr.getController(i);\n    controllers[i].raycaster = new THREE.Raycaster();\n    controllers[i].raycaster.near = 0.1;\n    controllers[i].addEventListener('selectstart', onSelectStart);\n    controllers[i].addEventListener('selectend', onSelectEnd);\n  }\n\n  const lightSun = new THREE.DirectionalLight(0xeeffff);\n  lightSun.name = 'sun';\n  lightSun.position.set(0.2, 1, 0.1);\n  const lightFill = new THREE.DirectionalLight(0xfff0ee, 0.3);\n  lightFill.name = 'fillLight';\n  lightFill.position.set(-0.2, -1, -0.1);\n\n  scene.add(lightSun, lightFill);\n\n  var cameraRig = new THREE.Group();\n  cameraRig.add(camera);\n  cameraRig.add(controllers[0]);\n  cameraRig.add(controllers[1]);\n  cameraRig.position.set(0, 0, 2);\n  scene.add(cameraRig);\n\n  context.vrMode = false;\n  context.assets = assets;\n  context.shaders = shaders;\n  context.scene = scene;\n  context.renderer = renderer;\n  context.camera = camera;\n  context.audioListener = listener;\n  context.goto = null;\n  context.cameraRig = cameraRig;\n  context.controllers = controllers;\n  context.world = ecsyWorld;\n  context.systemsGroup = systemsGroup;\n  context.handedness = handedness;\n  context.GotoRoom = gotoRoom;\n\n  window.context = context;\n\n  loadAssets(renderer, 'assets/', assets, () => {\n    raycontrol = new RayControl(context, handedness);\n    context.raycontrol = raycontrol;\n\n    teleport = new Teleport(context);\n    context.teleport = teleport;\n\n    voiceCommander = new VoiceCommander(context);\n\n    setupControllers();\n\n    rooms[ROOM_LOBBY] = roomLobby;\n    rooms[ROOM_LOBBY].setup(context);\n    context.room = ROOM_LOBBY;\n    context.cameraRig.position.set(0, 0, 2);\n\n    document.body.appendChild(renderer.domElement);\n    document.body.appendChild(VRButton.createButton(renderer, status => {\n      const wasVrMode = context.vrMode;\n      context.vrMode = status === 'sessionStarted';\n\n      if (context.vrMode && !wasVrMode) {\n        rooms[context.room].exit(context);\n        context.cameraRig.position.set(0, 0, 2);\n      } else if (!context.vrMode && wasVrMode) {\n        rooms[context.room].enter(context);\n      }\n    }));\n\n    document.getElementById('loading').style.display = 'none';\n\n    rooms[ROOM_LOBBY].enter(context);\n    renderer.setAnimationLoop(animate);\n  },\n\n  loadProgress => {\n    document.querySelector('#progressbar').setAttribute('stroke-dashoffset',\n      - (282 - Math.floor(loadProgress / 27 * 282)));\n  },\n\n  debug);\n}\n\nfunction setupControllers() {\n  voiceCommander.init();\n\n  var model = assets['generic_controller_model'].scene;\n  var material = new THREE.MeshLambertMaterial({\n    map: assets['controller_tex'],\n  });\n  model.getObjectByName('body').material = material;\n  model.getObjectByName('trigger').material = material;\n\n  for (let i = 0; i < 2; i++) {\n    let controller = controllers[i];\n    controller.boundingBox = new THREE.Box3();\n    controller.userData.grabbing = null;\n    controller.addEventListener( 'connected', function ( event ) {\n      this.add(model.clone());\n      raycontrol.addController(this, event.data);\n    } );\n    controller.addEventListener( 'disconnect', function () {\n      this.remove(this.children[0]);\n      raycontrol.removeController(this, event.data);\n    });\n  }\n}\n\nvar selectStartSkip = {};\nvar selectEndSkip = {};\nvar OculusBrowser = navigator.userAgent.indexOf(\"OculusBrowser\") !== -1 &&\n  parseInt(navigator.userAgent.match(/OculusBrowser\\/([0-9]+)./)[1]) < 8;\n\nfunction onSelectStart(ev) {\n  if (OculusBrowser) {\n    const controller = ev.target;\n    if (!selectStartSkip[controller]) {\n      selectStartSkip[controller] = true;\n      return;\n    }\n    selectStartSkip[controller] = false;\n  }\n\n  const trigger = ev.target.getObjectByName('trigger');\n  trigger.rotation.x = -0.3;\n  raycontrol.onSelectStart(ev);\n}\n\nfunction onSelectEnd(ev) {\n  if (OculusBrowser) {\n    const controller = ev.target;\n    if (!selectEndSkip[controller]) {\n      selectEndSkip[controller] = true;\n      return;\n    }\n    selectEndSkip[controller] = false;\n  }\n\n  const trigger = ev.target.getObjectByName('trigger');\n  trigger.rotation.x = 0;\n  raycontrol.onSelectEnd(ev);\n}\n\nfunction onWindowResize() {\n  camera.aspect = window.innerWidth / window.innerHeight;\n  camera.updateProjectionMatrix();\n  renderer.setSize(window.innerWidth, window.innerHeight);\n}\n\nfunction animate() {\n  var delta = clock.getDelta();\n  var elapsedTime = clock.elapsedTime;\n\n  ecsyWorld.execute(delta, elapsedTime);\n\n  for (let i = 0; i < controllers.length; i++) {\n    const model = controllers[i].getObjectByName('Scene');\n    if (model) {\n      controllers[i].boundingBox.setFromObject(model);\n    }\n  }\n\n  if (!context.vrMode && context.browserControls) {\n    const velocity = 3.0;\n    const bc = context.browserControls;\n\n    if (bc.controls.isLocked) {\n      if (bc.moveForward()) context.camera.translateZ(-velocity * delta);\n      if (bc.moveBackward()) context.camera.translateZ(velocity * delta);\n      if (bc.moveLeft()) context.camera.translateX(-velocity * delta);\n      if (bc.moveRight()) context.camera.translateX(velocity * delta);\n    }\n  }\n\n  if (context.raycontrol) {\n    context.raycontrol.execute(context, delta, elapsedTime);\n  }\n  if (typeof context.room !== 'undefined' && rooms[context.room]) {\n    const currentRoom = rooms[context.room];\n    if (typeof currentRoom.execute === 'function') {\n      currentRoom.execute(context, delta, elapsedTime);\n    }\n  }\n\n  renderer.render(scene, camera);\n  if (typeof context.goto !== 'undefined' && context.goto !== null) {\n    gotoRoom(context.goto);\n    context.goto = null;\n  }\n}\n\nwindow.addEventListener('resize', onWindowResize, false);\nwindow.onload = () => {init()};\n"],"sourceRoot":""}