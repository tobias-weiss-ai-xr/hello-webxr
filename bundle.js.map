{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/lib/VRButton.js","webpack:///./src/lib/slideshow.js","webpack:///./src/lib/assetManager.js","webpack:///./src/components/index.js","webpack:///./src/systems/SDFTextSystem.js","webpack:///./src/systems/DebugHelperSystem.js","webpack:///./src/systems/AreaCheckerSystem.js","webpack:///./src/systems/ControllersSystem.js","webpack:///./src/systems/HierarchySystem.js","webpack:///./src/systems/TransformSystem.js","webpack:///./src/systems/BillboardSystem.js","webpack:///./src/systems/SystemsGroup.js","webpack:///./src/assets.js","webpack:///./src/lib/shaders.js","webpack:///./src/lib/RayControl.js","webpack:///./src/lib/EventDispatcher.js","webpack:///./src/lib/Teleport.js","webpack:///./src/data/elements.js","webpack:///./src/rooms/Lobby.js","webpack:///./src/lib/modelLoader.js","webpack:///./src/index.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","VRButton","renderer","callback","showWebXRNotFound","button","style","display","cursor","left","width","onmouseenter","onmouseleave","onclick","textContent","stylizeElement","element","position","bottom","padding","border","borderRadius","background","color","font","textAlign","opacity","outline","zIndex","transition","navigator","document","createElement","xr","isSessionSupported","then","supported","currentSession","onSessionStarted","session","addEventListener","onSessionEnded","setSession","removeEventListener","transform","requestSession","optionalFeatures","end","showEnterVR","message","isSecureContext","href","location","replace","innerHTML","textDecoration","slideshow","paths","from","THREE","lookAt","velocity","angularVelocity","setup","context","this","room","undefined","path","next","camera","set","cameraRig","goto","time","Math","random","getCamera","reset","execute","delta","copy","rotation","addScaledVector","x","y","z","getLoadedCount","assets","count","loading","allAssetsLoaded","Object3D","constructor","Rotation","Position","ParentObject3D","Text","text","anchor","baseline","fontSize","letterSpacing","lineHeight","maxWidth","Infinity","overflowWrap","whiteSpace","BoundingBox","min","max","TagComponent","AreaInside","AreaChecker","empty","AreaReactor","onEntering","onExiting","DebugHelper","Children","array","anchorMapping","baselineMapping","SDFTextSystem","System","updateText","textMesh","textComponent","material","sync","entities","queries","added","forEach","e","getComponent","TextMesh","renderOrder","addComponent","removed","object3D","getObjectByName","dispose","remove","changed","components","listen","setFromMinMax","geometry","attributes","needsUpdate","computeBoundingSphere","DebugHelperMesh","SystemStateComponent","super","boxHelper","DebugHelperSystem","results","entity","boundingBox","debugMesh","getMutableComponent","removeComponent","Not","AreaCheckerSystem","areas","checkers","bboxArea","checker","intersectsBox","ControllersSystem","HierarchySystem","parent","add","updateRotation","updatePosition","TransformSystem","cameraPosition","BillboardSystem","getWorldPosition","distance","distanceTo","clamp","sqrt","hasComponent","children","camera3D","SystemsGroup","world","Systems","play","getSystem","stop","doorfx_tex","url","options","wrapT","wrapS","generic_controller_model","controller_tex","teleport_model","glow_tex","encoding","beam_tex","door_frag","zoom_frag","basic_vert","panoball_vert","panoball_frag","beam_frag","rayMaterial","tempMatrix","validStateController","RayControl","_listeners","stats","fired","handled","eventName","listener","listeners","indexOf","hasEventListener","listenerArray","index","dispatchEvent","resetCounters","enable","setLineStyle","previousLineStyle","enabled","_sort","currentStates","sort","a","b","order","disable","lineBasic","visible","line0","controllers","controller","active","changeHandedness","primary","secondary","addState","state","activate","states","raycaster","includes","console","warn","error","activateState","deactivateAll","intersections","deactivateState","addController","inputSource","controllerData","stateHit","currentIntersection","hit","matchController","raycasterContext","removeController","findIndex","find","ctx","line","scene","uniforms","tex","vertexShader","shaders","fragmentShader","blending","transparent","rayLength","scale","clone","setFromPoints","lineStyle","basic","selector","handedness","onSelectStart","evt","target","intersection","getIntersections","colliderMesh","entries","filter","intersectionData","prevIntersection","lineStyleOnIntersection","onHover","prev","current","onHoverLeave","identity","extractRotation","matrixWorld","ray","origin","setFromMatrixPosition","direction","applyMatrix4","Array","isArray","intersectObjects","intersectObject","onSelectEnd","Teleport","mesh","teleportEntity","teleportHitGeometry","ballColliding","map","startSound","audioListener","setBuffer","setLoop","pause","endSound","hitPoint","targetPoint","headPosition","offset","sub","GROUP_COLORS","NOBLE_GAS_COLORS","He","Ne","Ar","Kr","Xe","Rn","ELEMENTS","symbol","atomicNumber","mass","group","period","block","groupNumber","description","theme","experiments","EXPERIMENTAL_ROOMS","id","icon","ion","atomCore","periodicTableMesh","infoPanel","teleportFloor","electronOrbits","elementButtons","expButtons","currentSelection","floorGeo","floorMat","floor","teleportGeo","teleportMat","PI","coreGroup","coreGeo","coreMat","glowGeo","glowMat","side","glow","createAtomNucleus","colors","level","radius","orbitGeo","orbitMat","orbit","electronGeo","electronMat","electron","electronGroup","userData","angle","speed","createElectronOrbits","pTableGroup","cellGeo","cellHeight","cellMat","cell","height","createPeriodicTableHologram","buttonGroup","angleStep","cos","sin","buttonGeo","buttonMat","roomIndex","createEntity","createElementButtons","expRoom","createExpRoomButtons","panelGeo","panelMat","titleTextEntity","titleText","descTextEntity","descText","createInfoPanel","ambientLight","coreLight","teleport","raycontrol","setScalar","showElementInfo","hideElementInfo","point","registerInteractions","enter","setClearColor","exit","GLTFLoader","DRACOLoader","controls","ambientMusic","clock","rooms","ROOM_ELEMENTS_END","ROOM_EXP_START","urlObject","URL","debug","searchParams","has","gotoRoom","elementSymbol","expRoomId","source","playMusic","ecsyWorld","systemsGroup","init","noWebXRElement","getElementById","classList","detectWebXR","handElement","World","registerSystem","antialias","logarithmicDepthBuffer","powerPreference","preserveDrawingBuffer","failIfMajorPerformanceCaveat","gammaFactor","outputEncoding","setPixelRatio","devicePixelRatio","setSize","innerWidth","innerHeight","sortObjects","autoClear","autoClearDepth","autoClearStencil","PointerLockControls","domElement","body","vrMode","lock","moveForward","moveBackward","moveLeft","moveRight","ev","keyCode","browserControls","getController","near","lightSun","lightFill","GotoRoom","basePath","onComplete","onProgress","basisLoader","BasisTextureLoader","setTranscoderPath","detectSupport","gltfLoader","dracoLoader","setDecoderPath","setDRACOLoader","texLoader","loaders","OBJLoader","assetId","assetPath","ext","substr","lastIndexOf","toLowerCase","load","asset","info","repeat","opt","loadAssets","model","grabbing","event","setupControllers","roomLobby","appendChild","status","wasVrMode","setAnimationLoop","animate","loadProgress","querySelector","setAttribute","selectStartSkip","selectEndSkip","OculusBrowser","userAgent","parseInt","match","getDelta","elapsedTime","setFromObject","bc","isLocked","translateZ","translateX","currentRoom","render","aspect","updateProjectionMatrix","onload"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([10,1,2]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n"," /*\r\n\r\n\tThis is modification of the original VRButton. I've added a callback to know\r\n\twhen the user enters and exists from VR\r\n\r\n\tOriginal at:\r\n\t  https://github.com/mrdoob/three.js/blob/dev/examples/jsm/webxr/VRButton.js\r\n\r\n */\r\n/**\r\n * @author mrdoob / http://mrdoob.com\r\n * @author Mugen87 / https://github.com/Mugen87\r\n */\r\n\r\nvar VRButton = {\r\n\r\n\tcreateButton: function ( renderer, callback ) {\r\n\r\n\t\tfunction showEnterVR( /*device*/ ) {\r\n\r\n\t\t\tvar currentSession = null;\r\n\r\n\t\t\tfunction onSessionStarted( session ) {\r\n\r\n\t\t\t\tsession.addEventListener( 'end', onSessionEnded );\r\n\r\n\t\t\t\trenderer.xr.setSession( session );\r\n\t\t\t\tbutton.textContent = 'EXIT VR';\r\n\r\n\t\t\t\tcurrentSession = session;\r\n\r\n\t\t\t\tcallback('sessionStarted');\r\n\t\t\t}\r\n\r\n\t\t\tfunction onSessionEnded( /*event*/ ) {\r\n\r\n\t\t\t\tcurrentSession.removeEventListener( 'end', onSessionEnded );\r\n\r\n\t\t\t\tbutton.textContent = 'ENTER VR';\r\n\r\n\t\t\t\tcurrentSession = null;\r\n\r\n\t\t\t\tcallback('sessionEnded');\r\n\t\t\t}\r\n\r\n\r\n\t\t\t//\r\n\r\n\t\t\tbutton.style.display = '';\r\n\r\n\t\t\tbutton.style.cursor = 'pointer';\r\n\t\t\tbutton.style.left = 'calc(50% - 50px)';\r\n\t\t\tbutton.style.width = '100px';\r\n\r\n\t\t\tbutton.textContent = 'ENTER VR';\r\n\r\n\t\t\tbutton.onmouseenter = function () {\r\n\r\n\t\t\t\tbutton.style.background = 'rgba(0,0,0,0.9)';\r\n\t\t\t\tbutton.style.transform = 'scale(1.05)';\r\n\r\n\t\t\t};\r\n\r\n\t\t\tbutton.onmouseleave = function () {\r\n\r\n\t\t\t\tbutton.style.background = 'rgba(0,0,0,0.7)';\r\n\t\t\t\tbutton.style.transform = 'scale(1.0)';\r\n\r\n\t\t\t};\r\n\r\n\t\t\tbutton.onclick = function () {\r\n\r\n\t\t\t\tif ( currentSession === null ) {\r\n\r\n\t\t\t\t\t// WebXR's requestReferenceSpace only works if the corresponding feature\r\n\t\t\t\t\t// was requested at session creation time. For simplicity, just ask for\r\n\t\t\t\t\t// the interesting ones as optional features, but be aware that the\r\n\t\t\t\t\t// requestReferenceSpace call will fail if it turns out to be unavailable.\r\n\t\t\t\t\t// ('local' is always available for immersive sessions and doesn't need to\r\n\t\t\t\t\t// be requested separately.)\r\n\r\n\t\t\t\t\tvar sessionInit = { optionalFeatures: [ 'local-floor', 'bounded-floor' ] };\r\n\t\t\t\t\tnavigator.xr.requestSession( 'immersive-vr', sessionInit ).then( onSessionStarted );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tcurrentSession.end();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tfunction disableButton() {\r\n\r\n\t\t\tbutton.style.display = '';\r\n\r\n\t\t\tbutton.style.cursor = 'auto';\r\n\t\t\tbutton.style.left = 'calc(50% - 75px)';\r\n\t\t\tbutton.style.width = '150px';\r\n\r\n\t\t\tbutton.onmouseenter = null;\r\n\t\t\tbutton.onmouseleave = null;\r\n\r\n\t\t\tbutton.onclick = null;\r\n\r\n\t\t}\r\n\r\n\t\tfunction showWebXRNotFound() {\r\n\r\n\t\t\tdisableButton();\r\n\r\n\t\t\tbutton.textContent = 'VR NOT ENABLED';\r\n\r\n\t\t}\r\n\r\n\t\tfunction stylizeElement( element ) {\r\n\r\n\t\t\telement.style.position = 'absolute';\r\n\t\t\telement.style.bottom = '20px';\r\n\t\t\telement.style.padding = '12px 24px';\r\n\t\t\telement.style.border = '2px solid #fff';\r\n\t\t\telement.style.borderRadius = '6px';\r\n\t\t\telement.style.background = 'rgba(0,0,0,0.7)';\r\n\t\t\telement.style.color = '#fff';\r\n\t\t\telement.style.font = '600 14px sans-serif';\r\n\t\t\telement.style.textAlign = 'center';\r\n\t\t\telement.style.opacity = '1.0';\r\n\t\t\telement.style.outline = 'none';\r\n\t\t\telement.style.zIndex = '999';\r\n\t\t\telement.style.cursor = 'pointer';\r\n\t\t\telement.style.transition = 'all 0.2s ease';\r\n\r\n\t\t}\r\n\r\n\t\tif ( 'xr' in navigator ) {\r\n\r\n\t\t\tvar button = document.createElement( 'button' );\r\n\t\t\tbutton.style.display = 'none';\r\n\r\n\t\t\tstylizeElement( button );\r\n\r\n\t\t\tnavigator.xr.isSessionSupported( 'immersive-vr' ).then( function ( supported ) {\r\n\r\n\t\t\t\tsupported ? showEnterVR() : showWebXRNotFound();\r\n\r\n\t\t\t} );\r\n\r\n\t\t\treturn button;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar message = document.createElement( 'a' );\r\n\r\n\t\t\tif ( window.isSecureContext === false ) {\r\n\r\n\t\t\t\tmessage.href = document.location.href.replace( /^http:/, 'https:' );\r\n\t\t\t\tmessage.innerHTML = 'WEBXR NEEDS HTTPS'; // TODO Improve message\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tmessage.href = 'https://immersiveweb.dev/';\r\n\t\t\t\tmessage.innerHTML = 'WEBXR NOT AVAILABLE';\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmessage.style.left = 'calc(50% - 90px)';\r\n\t\t\tmessage.style.width = '180px';\r\n\t\t\tmessage.style.textDecoration = 'none';\r\n\r\n\t\t\tstylizeElement( message );\r\n\r\n\t\t\treturn message;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nexport { VRButton };\r\n","import * as THREE from 'three';\n\nconst PATH_TIME = 3; // 3 secs per path\n\nvar slideshow = {};\n\nslideshow.paths = [\n  //'hall'\n  [\n    {\n      from: new THREE.Vector3(0, 1.6, 0),\n      lookAt: new THREE.Vector3(0, 1, -100),\n      velocity: new THREE.Vector3(0, 0, -0.1),\n      angularVelocity: new THREE.Vector3(0.04, 0, 0)\n    },\n    {\n      from: new THREE.Vector3(4.5, 1.6, -3),\n      lookAt: new THREE.Vector3(100, 0, 0),\n      velocity: new THREE.Vector3(0, 0, -0.15),\n      angularVelocity: new THREE.Vector3(0, 0, 0)\n    },\n    {\n      from: new THREE.Vector3(0, 1.6, 0),\n      lookAt: new THREE.Vector3(50, 0, -40),\n      velocity: new THREE.Vector3(0, 0.12, 0),\n      angularVelocity: new THREE.Vector3(0, 0.1, 0)\n    },\n    {\n      from: new THREE.Vector3(3, 2.4, -4),\n      lookAt: new THREE.Vector3(-50, 0, 40),\n      velocity: new THREE.Vector3(0, -0.12, 0),\n      angularVelocity: new THREE.Vector3(0, -0.1, 0)\n    }\n  ],\n  //'sound'\n  [\n    {\n      from: new THREE.Vector3(0, 1.6, 0),\n      lookAt: new THREE.Vector3(0, 0, -100),\n      velocity: new THREE.Vector3(0.1, 0, 0.1),\n      angularVelocity: new THREE.Vector3(0, 0.01, 0)\n    },\n  ],\n  //'photogrammetry'\n  [\n    {\n      from: new THREE.Vector3(0, 1.2, 0.8),\n      lookAt: new THREE.Vector3(-100, 0.5, 0),\n      velocity: new THREE.Vector3(0, 0, -0.2),\n      angularVelocity: new THREE.Vector3(0, 0, 0)\n    },\n    {\n      from: new THREE.Vector3(-1, 1, -1.6),\n      lookAt: new THREE.Vector3(-40, 0, 100),\n      velocity: new THREE.Vector3(-0.05, 0, 0),\n      angularVelocity: new THREE.Vector3(0, 0, 0)\n    }\n  ],\n  //'vertigo'\n  [\n    {\n      from: new THREE.Vector3(0, 1.6, 0),\n      lookAt: new THREE.Vector3(0, 0, -10),\n      velocity: new THREE.Vector3(0, 0, 0),\n      angularVelocity: new THREE.Vector3(-0.01, 0.07, 0)\n    },\n    {\n      from: new THREE.Vector3(0, 1.6, -0.4),\n      lookAt: new THREE.Vector3(0, 0, 6),\n      velocity: new THREE.Vector3(0, 0, 0.1),\n      angularVelocity: new THREE.Vector3(0.07, 0, 0)\n    }\n  ],\n  //'panoramastereo'\n  [\n    {\n      from: new THREE.Vector3(0, 0, 0),\n      lookAt: new THREE.Vector3(-100, 0, 0),\n      velocity: new THREE.Vector3(0, 0, 0),\n      angularVelocity: new THREE.Vector3(0.03, 0.05, 0)\n    }\n  ],\n  //'panorama1'\n  [\n  ],\n  //'panorama2'\n  [\n      {\n      from: new THREE.Vector3(0, 0, 0),\n      lookAt: new THREE.Vector3(-100, 0, 0),\n      velocity: new THREE.Vector3(0, 0, 0),\n      angularVelocity: new THREE.Vector3(0.01, 0.1, 0)\n    }\n  ],\n  //'panorama3'\n  [\n  ],\n  //'panorama4'\n  [\n    {\n      from: new THREE.Vector3(0, 0, 0),\n      lookAt: new THREE.Vector3(-100, 0, 0),\n      velocity: new THREE.Vector3(0, 0, 0),\n      angularVelocity: new THREE.Vector3(-0.07, -0.05, 0)\n    }\n  ],\n  //'panorama5'\n  [\n    {\n      from: new THREE.Vector3(0, 0, 0),\n      lookAt: new THREE.Vector3(100, 0, 80),\n      velocity: new THREE.Vector3(0, 0, 0),\n      angularVelocity: new THREE.Vector3(0, -0.02, 0)\n    }\n  ]\n];\n\nslideshow.setup = function (context) {\n  this.room = undefined;\n  this.path = undefined;\n  this.next(context);\n  context.camera.position.set(0, 1.6, 0);\n  context.cameraRig.position.set(0, 0, 2);\n  context.goto = this.room;\n};\n\nslideshow.next = function (context) {\n  this.time = PATH_TIME + Math.random() * PATH_TIME / 2;\n  if (this.room === undefined) {\n    this.room = 0;\n    this.path = 0;\n  } else {\n    this.path ++;\n    if (this.path >= this.paths[this.room].length){\n      // find next room with paths\n      do {\n        this.room ++;\n        if (this.room >= this.paths.length) {\n          this.room = 0;\n          context.cameraRig.position.set(0, 0, 2);\n        }\n      } while (!this.paths[this.room].length);\n      var camera = context.renderer.xr.getCamera(context.camera);\n      camera.position.set(0, 1.6, 0);\n      context.goto = this.room;\n      this.path = 0;\n    }\n  }\n  this.reset = true;\n};\n\nslideshow.execute = function (context, delta, time) {\n  const path = this.paths[this.room][this.path];\n  if (this.reset) {\n    this.reset = false;\n    // init camera settings\n    context.camera.position.copy(path.from);\n    context.camera.rotation.set(0, 0, 0);\n    context.camera.lookAt(path.lookAt);\n  }\n  context.camera.position.addScaledVector(path.velocity, delta);\n  context.camera.rotation.x += path.angularVelocity.x * delta;\n  context.camera.rotation.y += path.angularVelocity.y * delta;\n  context.camera.rotation.z += path.angularVelocity.z * delta;\n  this.time -= delta;\n  if (this.time < 0) {\n    this.next(context);\n  }\n};\n\nexport {slideshow};\n","import * as THREE from 'three';\r\nimport { BasisTextureLoader } from 'three/examples/jsm/loaders/BasisTextureLoader.js';\r\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';\r\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader.js';\r\nimport { DRACOLoader } from 'three/examples/jsm/loaders/DRACOLoader.js';\r\n\r\n//const BASIS_LIB_PATH = 'src/vendor/';\r\nconst BASIS_LIB_PATH = 'src/vendor/';\r\nconst DRACO_LIB_PATH = 'src/vendor/';\r\n\r\nfunction getLoadedCount(assets) {\r\n  let count = 0;\r\n  for (var i in assets) {\r\n    if (assets[i].loading !== true) { count ++; }\r\n  }\r\n  return count;\r\n}\r\n\r\nfunction allAssetsLoaded(assets) {\r\n  for (var i in assets) {\r\n    if (assets[i].loading === true) { return false; }\r\n  }\r\n  return true;\r\n}\r\n\r\nexport function loadAssets(renderer, basePath, assets, onComplete, onProgress, debug) {\r\n  if (basePath && basePath[basePath.length - 1] != '/') {\r\n    basePath += '/';\r\n  }\r\n\r\n  var basisLoader = new BasisTextureLoader();\r\n  basisLoader.setTranscoderPath(BASIS_LIB_PATH);\r\n  basisLoader.detectSupport(renderer);\r\n\r\n  var gltfLoader = new GLTFLoader();\r\n  var dracoLoader = new DRACOLoader();\r\n  dracoLoader.setDecoderPath(DRACO_LIB_PATH);\r\n  gltfLoader.setDRACOLoader(dracoLoader);\r\n\r\n  var texLoader = new THREE.TextureLoader();\r\n  var objLoader = new OBJLoader();\r\n  var fontLoader = new THREE.FontLoader();\r\n  var audioLoader = new THREE.AudioLoader();\r\n\r\n\r\n  var loaders = {\r\n    'gltf': gltfLoader,\r\n    'glb': gltfLoader,\r\n    'obj': objLoader,\r\n    'gif': texLoader,\r\n    'png': texLoader,\r\n    'jpg': texLoader,\r\n    'basis': basisLoader,\r\n    'font': fontLoader,\r\n    'ogg': audioLoader\r\n  };\r\n\r\n  for (var i in assets) {\r\n    let assetId = i;\r\n    let assetPath = assets[i].url;\r\n    assets[i].loading = true;\r\n    let ext = assetPath.substr(assetPath.lastIndexOf('.') + 1).toLowerCase();\r\n\r\n    loaders[ext].load(basePath + assetPath, asset => {\r\n      if (debug) {\r\n        console.info(`%c ${assetPath} loaded`, 'color:green');\r\n      }\r\n      var options = assets[assetId].options;\r\n      assets[assetId] = ext == 'font'? asset.data : asset;\r\n\r\n      if (typeof options !== \"undefined\") {\r\n        if (typeof options.repeat !== \"undefined\") {\r\n          assets[assetId].repeat.set(options.repeat[0], options.repeat[1]);\r\n          delete options.repeat;\r\n        }\r\n        for (let opt in options) {\r\n          assets[assetId][opt] = options[opt];\r\n        }\r\n\r\n        if (onProgress) { onProgress(getLoadedCount(assets)) };\r\n      }\r\n\r\n      if (onComplete && allAssetsLoaded(assets)) { onComplete(); }\r\n    }, () => {\r\n      /* on progress */\r\n    },\r\n    (e) => {\r\n      console.error('Error loading asset', assetPath, e);\r\n      // For audio files, set to null to allow graceful degradation\r\n      if (ext === 'ogg') {\r\n        assets[assetId] = null;\r\n        assets[assetId].loading = false;\r\n        if (onComplete && allAssetsLoaded(assets)) { onComplete(); }\r\n      }\r\n    }\r\n    );\r\n  }\r\n}\r\n","import * as THREE from 'three';\r\nimport {TagComponent} from 'ecsy';\r\n\r\nexport class Object3D {\r\n  constructor() {\r\n    this.value = null;\r\n  }\r\n\r\n  reset() {\r\n    this.value = null;\r\n  }\r\n}\r\n\r\nexport class Rotation {\r\n  constructor() {\r\n    this.rotation = new THREE.Vector3();\r\n  }\r\n\r\n  reset() {}\r\n}\r\n\r\nexport class Position {\r\n  constructor() {\r\n    this.position = new THREE.Vector3();\r\n  }\r\n\r\n  reset() {}\r\n}\r\n\r\nexport class ParentObject3D {\r\n  constructor() {\r\n    this.value = null;\r\n  }\r\n\r\n  reset() {\r\n    this.value = null;\r\n  }\r\n}\r\n\r\nexport class Text {\r\n  constructor() {\r\n    this.text = '';\r\n    this.textAlign = 'left'; // ['left', 'right', 'center']\r\n    this.anchor = 'center'; // ['left', 'right', 'center', 'align']\r\n    this.baseline = 'center'; // ['top', 'center', 'bottom']\r\n    this.color = '#FFF';\r\n    this.font = null;\r\n    this.fontSize = 0.2;\r\n    this.letterSpacing = 0;\r\n    this.lineHeight = 0;\r\n    this.maxWidth = Infinity;\r\n    this.overflowWrap = 'normal'; // ['normal', 'break-word']\r\n    this.whiteSpace = 'normal'; // ['normal', 'nowrap']\r\n    this.opacity = 1;\r\n  }\r\n\r\n  reset() {\r\n    this.text = '';\r\n  }\r\n}\r\n\r\nexport class BoundingBox {\r\n  constructor() {\r\n    this.min = new THREE.Vector3();\r\n    this.max = new THREE.Vector3();\r\n    // this.box3?\r\n  }\r\n\r\n  reset() {\r\n    this.min.set(0,0,0);\r\n    this.max.set(0,0,0);\r\n  }\r\n}\r\n\r\nexport class BoundingSphere {\r\n  constructor() {\r\n    this.debug = true;\r\n    this.center = new THREE.Vector3();\r\n    this.radius = 0;\r\n    //this.sphere?\r\n  }\r\n\r\n  reset() {\r\n    this.center.set(0,0,0);\r\n    this.radius = 0;\r\n  }\r\n}\r\n\r\nexport class Area {\r\n  constructor() {\r\n\r\n  }\r\n\r\n  reset() {\r\n\r\n  }\r\n}\r\n\r\nexport class AreaEntering extends TagComponent {}\r\nexport class AreaExiting extends TagComponent {}\r\nexport class AreaInside extends TagComponent {}\r\n\r\nexport class AreaChecker {\r\n  constructor() {\r\n\r\n  }\r\n\r\n  reset() {\r\n\r\n  }\r\n}\r\n\r\nconst empty = () => {};\r\n\r\nexport class AreaReactor {\r\n  constructor() {\r\n    this.reset();\r\n  }\r\n\r\n  reset() {\r\n    this.onEntering = empty;\r\n    this.onExiting = empty;\r\n  }\r\n}\r\n\r\nexport class DebugHelper extends TagComponent {}\r\n\r\nexport class Billboard {\r\n  constructor() {\r\n    this.camera3D = null;\r\n  }\r\n\r\n  reset() {\r\n    this.camera3D = null;\r\n  }\r\n}\r\n\r\nexport class Children {\r\n  constructor() {\r\n    this.value = [];\r\n  }\r\n\r\n  reset() {\r\n    this.value.array.length = 0;\r\n  }\r\n}\r\n\r\nexport class Opacity {\r\n  constructor() {\r\n    this.opacity = 0;\r\n  }\r\n\r\n  reset() {\r\n    this.opacity = 0;\r\n  }\r\n}\r\n","import * as THREE from 'three';\nimport {System} from 'ecsy';\nimport {TextMesh} from 'troika-3d-text/dist/textmesh-standalone.esm.js';\nimport {Object3D, Text} from '../components/index.js';\n\nconst anchorMapping = {\n  'left': 0,\n  'center': 0.5,\n  'right': 1\n}\nconst baselineMapping = {\n  'top': 0,\n  'center': 0.5,\n  'bottom': 1\n}\n\nexport class SDFTextSystem extends System {\n\n  updateText(textMesh, textComponent) {\n    textMesh.text = textComponent.text;\n    textMesh.textAlign = textComponent.textAlign;\n    textMesh.anchor[0] = anchorMapping[textComponent.anchor];\n    textMesh.anchor[1] = baselineMapping[textComponent.baseline];\n    textMesh.color = textComponent.color;\n    textMesh.font = textComponent.font;\n    textMesh.fontSize = textComponent.fontSize;\n    textMesh.letterSpacing = textComponent.letterSpacing || 0;\n    textMesh.lineHeight = textComponent.lineHeight || null;\n    textMesh.overflowWrap = textComponent.overflowWrap;\n    textMesh.whiteSpace = textComponent.whiteSpace;\n    textMesh.maxWidth = textComponent.maxWidth;\n    textMesh.material.opacity = textComponent.opacity;\n    textMesh.sync();\n  }\n\n  execute(delta, time) {\n    var entities = this.queries.entities;\n\n    entities.added.forEach(e => {\n      var textComponent = e.getComponent(Text);\n\n      const textMesh = new TextMesh();\n      textMesh.name = 'textMesh';\n      textMesh.anchor = [0, 0];\n      textMesh.renderOrder = 1; //brute-force fix for ugly antialiasing, see issue #67\n      this.updateText(textMesh, textComponent);\n      e.addComponent(Object3D, {value: textMesh});\n    });\n\n    entities.removed.forEach(e => {\n      var object3D = e.getComponent(Object3D).value;\n      var textMesh = object3D.getObjectByName('textMesh');\n      textMesh.dispose();\n      object3D.remove(textMesh);\n    });\n\n    entities.changed.forEach(e => {\n      var object3D = e.getComponent(Object3D).value;\n      if (object3D instanceof TextMesh) {\n        var textComponent = e.getComponent(Text);\n        this.updateText(object3D, textComponent);\n      }\n    });\n  }\n}\n\nSDFTextSystem.queries = {\n  entities: {\n    components: [Text],\n    listen: {\n      added: true,\n      removed: true,\n      changed: [Text]\n    }\n  }\n}\n","import {Object3D, DebugHelper, BoundingBox} from '../components/index.js';\nimport {System, SystemStateComponent, Not} from 'ecsy';\nimport * as THREE from 'three';\n\nTHREE.BoxHelper.prototype.setFromMinMax = function(min, max) {\n\tvar position = this.geometry.attributes.position;\n\tvar array = position.array;\n\n\tarray[ 0 ] = max.x; array[ 1 ] = max.y; array[ 2 ] = max.z;\n\tarray[ 3 ] = min.x; array[ 4 ] = max.y; array[ 5 ] = max.z;\n\tarray[ 6 ] = min.x; array[ 7 ] = min.y; array[ 8 ] = max.z;\n\tarray[ 9 ] = max.x; array[ 10 ] = min.y; array[ 11 ] = max.z;\n\tarray[ 12 ] = max.x; array[ 13 ] = max.y; array[ 14 ] = min.z;\n\tarray[ 15 ] = min.x; array[ 16 ] = max.y; array[ 17 ] = min.z;\n\tarray[ 18 ] = min.x; array[ 19 ] = min.y; array[ 20 ] = min.z;\n\tarray[ 21 ] = max.x; array[ 22 ] = min.y; array[ 23 ] = min.z;\n\n\tposition.needsUpdate = true;\n\n\tthis.geometry.computeBoundingSphere();\n}\n\nclass DebugHelperMesh extends SystemStateComponent {\n  constructor() {\n    super();\n    this.boxHelper = new THREE.BoxHelper();\n  }\n}\n\nexport class DebugHelperSystem extends System {\n  execute(delta, time) {\n    this.queries.added.results.forEach(entity => {\n      entity.addComponent(DebugHelperMesh);\n      var boundingBox = entity.getComponent(BoundingBox);\n      let debugMesh = entity.getMutableComponent(DebugHelperMesh);\n      debugMesh.boxHelper.setFromMinMax(boundingBox.min, boundingBox.max);\n\n      entity.addComponent(Object3D, {value: debugMesh.boxHelper});\n    });\n\n    this.queries.removed.results.forEach(entity => {\n      //var boundingBox = entity.getComponent(DebugHelperMesh);\n      entity.removeComponent(Object3D).removeComponent(DebugHelperMesh);\n\n/*\n      entity.addComponent(Object3D, {value: debugMesh.boxHelper});\n\n      let debugMesh = entity.getMutableComponent(DebugHelperMesh);\n      debugMesh.boxHelper.setFromMinMax(boundingBox.min, boundingBox.max);\n      entity.addComponent(Object3D, {value: debugMesh.boxHelper});\n*/\n    });\n  }\n}\n\nDebugHelperSystem.queries = {\n  added: {\n    components: [DebugHelper, Not(DebugHelperMesh)]\n  },\n  removed: {\n    components: [Not(DebugHelper), DebugHelperMesh]\n  }\n}\n","import * as THREE from 'three';\nimport {System} from 'ecsy';\nimport {Area, AreaInside, AreaExiting, AreaEntering, Object3D, AreaChecker, BoundingBox} from '../components/index.js';\n\nexport class AreaCheckerSystem extends System {\n  execute(delta, time) {\n    const areas = this.queries.areas.results;\n    const checkers = this.queries.checkers.results;\n\n    for (let i = 0; i < areas.length; i++) {\n      const area = areas[i];\n      const bboxArea = area.getComponent(BoundingBox);\n\n      for (let j = 0; j < checkers.length; j++) {\n        const checker = checkers[j];\n        const obj3D = checker.getComponent(Object3D).value;\n        if (obj3D.boundingBox.intersectsBox(bboxArea)) {\n          checker.addComponent(AreaInside);\n        } else {\n          checker.removeComponent(AreaInside);\n        }\n      }\n    }\n  }\n}\n\nAreaCheckerSystem.queries = {\n  areas: {\n    components: [Area, BoundingBox],\n  },\n  checkers: {\n    components: [AreaChecker, Object3D]\n  }\n}","import * as THREE from 'three';\nimport {System} from 'ecsy';\nimport {Area, AreaReactor, AreaInside, AreaExiting, AreaEntering, Object3D, AreaChecker, BoundingBox} from '../components/index.js';\n\nexport class ControllersSystem extends System {\n  execute(delta, time) {\n    const added = this.queries.checkers.added;\n    const removed = this.queries.checkers.removed;\n\n    for (let i = 0; i < added.length; i++) {\n      const entity = added[i];\n      const reactor = entity.getComponent(AreaReactor);\n      reactor.onEntering(entity);\n    }\n\n    for (let i = 0; i < removed.length; i++) {\n      const entity = removed[i];\n      const reactor = entity.getComponent(AreaReactor);\n      reactor.onExiting(entity);\n    }\n  }\n}\n\nControllersSystem.queries = {\n  checkers: {\n    components: [AreaChecker, Object3D, AreaInside],\n    listen: {\n      added: true,\n      removed: true\n    }\n  }\n}\n","import * as THREE from 'three';\nimport {System} from 'ecsy';\nimport {Object3D, ParentObject3D} from '../components/index.js';\n\nexport default class HierarchySystem extends System {\n  execute(delta, time) {\n    this.queries.entities.added.forEach(entity => {\n      const parent = entity.getComponent(ParentObject3D).value;\n      const object = entity.getComponent(Object3D).value;\n\n      parent.add(object);\n    });\n\n    this.queries.entities.changed.forEach(entity => {\n      const parent = entity.getComponent(ParentObject3D).value;\n      const object = entity.getComponent(Object3D).value;\n\n      parent.add(object);\n    });\n\n    this.queries.entities.removed.forEach(entity => {\n      const parent = entity.getComponent(ParentObject3D, true).value;\n      parent.remove(entity.getComponent(Object3D, true).value);\n    });\n  }\n}\n\nHierarchySystem.queries = {\n  entities: {\n    components: [Object3D, ParentObject3D],\n    listen: {\n      added: true,\n      removed: true,\n      changed: true // [Component]\n    }\n  }\n}\n","import {System} from 'ecsy';\nimport {Object3D, Rotation, Position} from '../components/index.js';\n\nlet updateRotation = entity => {\n  const rotation = entity.getComponent(Rotation);\n  const object3D = entity.getComponent(Object3D).value;\n  object3D.rotation.set(rotation.x, rotation.y, rotation.z);\n};\n\nlet updatePosition = entity => {\n  const position = entity.getComponent(Position);\n  const object3D = entity.getComponent(Object3D).value;\n  object3D.position.copy(position);\n};\n\nexport default class TransformSystem extends System {\n  execute(delta, time) {\n    // Position\n    this.queries.position.added.forEach(updatePosition);\n    this.queries.position.changed.forEach(updatePosition);\n\n    // Rotation\n    this.queries.rotation.added.forEach(updateRotation);\n    this.queries.rotation.changed.forEach(updateRotation);\n  }\n}\n\nTransformSystem.queries = {\n  position: {\n    components: [Position, Object3D],\n    listen: {\n      added: true,\n      changed: true\n    }\n  },\n  rotation: {\n    components: [Rotation, Object3D],\n    listen: {\n      added: true,\n      changed: true\n    }\n  }\n}","import * as THREE from 'three';\nimport {System} from 'ecsy';\nimport {Billboard, Object3D, Children, Text, Position} from '../components/index.js';\n\nconst SHOW_DISTANCE = 4;\n\nvar cameraPosition = new THREE.Vector3();\n\nexport default class BillboardSystem extends System {\n  execute(delta, time) {\n\n    window.context.camera.getWorldPosition(cameraPosition);\n\n    this.queries.entities.results.forEach(entity => {\n      const object3D = entity.getComponent(Object3D).value;\n      const distance = cameraPosition.distanceTo(object3D.position);\n      let opacity = 0;\n\n      if (distance < SHOW_DISTANCE){\n        opacity = THREE.Math.clamp(Math.sqrt(SHOW_DISTANCE - distance), 0, 1);\n        object3D.lookAt(cameraPosition);\n      }\n\n      object3D.material.opacity = opacity;\n      // panels text parent\n      if (entity.hasComponent(Children)) {\n        entity.getComponent(Children).value.forEach(children => {\n          let prevOpacity = children.getComponent(Text).opacity;\n          if (prevOpacity !== opacity) {\n            children.getMutableComponent(Text).opacity = opacity;\n          }\n        });\n      }\n    });\n  }\n}\n\nBillboardSystem.queries = {\n  entities: {\n    components: [Billboard, Object3D]\n  }\n}\n","export default class SystemsGroup {\n  constructor(world, Systems) {\n    this.Systems = Systems;\n    this.world = world;\n  }\n\n  play() {\n    this.Systems.forEach(System => this.world.getSystem(System).play());\n  }\n\n  stop() {\n    this.Systems.forEach(System => this.world.getSystem(System).stop());\n  }\n}","import * as THREE from 'three';\r\n\r\nexport default {\r\n  // Shared door texture (used by all learning rooms)\r\n  doorfx_tex: { url: 'doorfx.basis', options: { wrapT: THREE.RepeatWrapping, wrapS: THREE.RepeatWrapping } },\r\n\r\n  // Controller assets\r\n  generic_controller_model: { url: 'generic_controller.glb' },\r\n  controller_tex: { url: 'controller.basis' },\r\n\r\n  // Teleport assets\r\n  teleport_model: { url: 'teleport.glb' },\r\n  glow_tex: { url: 'glow.basis', options: { encoding: THREE.sRGBEncoding } },\r\n  beam_tex: { url: 'beamfx.png' },\r\n\r\n  // Teleport sounds - disabled due to browser compatibility issues\r\n  // teleport_a_snd: { url: 'ogg/teleport_a.ogg' },\r\n  // teleport_b_snd: { url: 'ogg/teleport_b.ogg' },\r\n};\r\n","export default {\r\ndoor_frag : `\r\nuniform float time;\r\nuniform float selected;\r\nuniform sampler2D tex;\r\nvarying vec2 vUv;\r\n\r\nvoid main( void ) {\r\n  float t = time;\r\n  vec2 uv = vUv * 2.0 - 1.0;\r\n  vec2 puv = vec2(length(uv.xy), atan(uv.x, uv.y));\r\n  vec4 col = texture2D(tex, vec2(log(puv.x) + t / 5.0, puv.y / 3.1415926 ));\r\n  float glow = (1.0 - puv.x) * (0.5 + (sin(t) + 2.0 ) / 4.0);\r\n  // blue glow\r\n  col += vec4(118.0/255.0, 144.0/255.0, 219.0/255.0, 1.0) * (0.4 + glow * 1.0);\r\n  // white glow\r\n  col += vec4(0.2) * smoothstep(0.0, 2.0, glow * glow);\r\n  gl_FragColor = col;\r\n\r\n}\r\n`,\r\n\r\nzoom_frag : `\r\nuniform float time;\r\nuniform sampler2D tex;\r\nuniform vec2 zoomPos;\r\nuniform float zoomAmount;\r\nuniform float zoomRatio;\r\nvarying vec2 vUv;\r\n\r\nvoid main( void ) {\r\n  float t = time;\r\n  vec2 uv = vec2(vUv.x - 0.5, (1.0 - vUv.y) - 0.5);\r\n  vec2 texUv = uv * vec2(zoomRatio, 1.0);\r\n  vec4 col = texture2D(tex, zoomPos + texUv * zoomAmount);\r\n  float dist = length(uv) * 2.0;\r\n  col.a = smoothstep(0.0, 0.1, 1.0 - dist);\r\n  float aura = smoothstep(0.80, 1.0, dist);\r\n  col.rgb += aura * 0.3;\r\n  gl_FragColor = col;\r\n}\r\n`,\r\n\r\nbasic_vert : `\r\nvarying vec2 vUv;\r\nvarying vec3 vPosition;\r\nvoid main()\r\n{\r\n  vUv = uv;\r\n  vPosition = position;\r\n  vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\r\n  gl_Position = projectionMatrix * mvPosition;\r\n}\r\n`,\r\n\r\npanoball_vert : `\r\nvarying vec2 vUv;\r\nvarying vec3 vPosition;\r\nvarying vec3 vNormal;\r\nvarying vec3 vWorldPos;\r\nuniform float time;\r\nuniform float selected;\r\n\r\nmat4 inverse(mat4 m) {\r\n  float\r\n      a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\r\n      a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\r\n      a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\r\n      a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3],\r\n\r\n      b00 = a00 * a11 - a01 * a10,\r\n      b01 = a00 * a12 - a02 * a10,\r\n      b02 = a00 * a13 - a03 * a10,\r\n      b03 = a01 * a12 - a02 * a11,\r\n      b04 = a01 * a13 - a03 * a11,\r\n      b05 = a02 * a13 - a03 * a12,\r\n      b06 = a20 * a31 - a21 * a30,\r\n      b07 = a20 * a32 - a22 * a30,\r\n      b08 = a20 * a33 - a23 * a30,\r\n      b09 = a21 * a32 - a22 * a31,\r\n      b10 = a21 * a33 - a23 * a31,\r\n      b11 = a22 * a33 - a23 * a32,\r\n\r\n      det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\r\n\r\n  return mat4(\r\n      a11 * b11 - a12 * b10 + a13 * b09,\r\n      a02 * b10 - a01 * b11 - a03 * b09,\r\n      a31 * b05 - a32 * b04 + a33 * b03,\r\n      a22 * b04 - a21 * b05 - a23 * b03,\r\n      a12 * b08 - a10 * b11 - a13 * b07,\r\n      a00 * b11 - a02 * b08 + a03 * b07,\r\n      a32 * b02 - a30 * b05 - a33 * b01,\r\n      a20 * b05 - a22 * b02 + a23 * b01,\r\n      a10 * b10 - a11 * b08 + a13 * b06,\r\n      a01 * b08 - a00 * b10 - a03 * b06,\r\n      a30 * b04 - a31 * b02 + a33 * b00,\r\n      a21 * b02 - a20 * b04 - a23 * b00,\r\n      a11 * b07 - a10 * b09 - a12 * b06,\r\n      a00 * b09 - a01 * b07 + a02 * b06,\r\n      a31 * b01 - a30 * b03 - a32 * b00,\r\n      a20 * b03 - a21 * b01 + a22 * b00) / det;\r\n}\r\n\r\n\r\nmat4 transpose(in mat4 m) {\r\n  vec4 i0 = m[0];\r\n  vec4 i1 = m[1];\r\n  vec4 i2 = m[2];\r\n  vec4 i3 = m[3];\r\n\r\n  return mat4(\r\n    vec4(i0.x, i1.x, i2.x, i3.x),\r\n    vec4(i0.y, i1.y, i2.y, i3.y),\r\n    vec4(i0.z, i1.z, i2.z, i3.z),\r\n    vec4(i0.w, i1.w, i2.w, i3.w)\r\n  );\r\n}\r\n\r\nvoid main()\r\n{\r\n  vUv = uv;\r\n\r\n  vPosition = position;\r\n\r\n  vec3 offset = vec3(\r\n    sin(position.x * 50.0 + time),\r\n    sin(position.y * 10.0 + time * 2.0),\r\n    cos(position.z * 40.0 + time)\r\n  ) * 0.003;\r\n\r\n  vPosition *= 1.0 + selected * 0.2;\r\n\r\n  vNormal = normalize(inverse(transpose(modelMatrix)) * vec4(normalize(normal), 1.0)).xyz;\r\n  vWorldPos = (modelMatrix * vec4(vPosition, 1.0)).xyz;\r\n\r\n  vec4 mvPosition = modelViewMatrix * vec4(vPosition + offset, 1.0);\r\n  gl_Position = projectionMatrix * mvPosition;\r\n}\r\n`,\r\n\r\npanoball_frag : `\r\nuniform sampler2D tex, texfx;\r\nuniform float time;\r\nuniform float selected;\r\nvarying vec2 vUv;\r\nvarying vec3 vPosition;\r\nvarying vec3 vNormal;\r\nvarying vec3 vWorldPos;\r\n\r\n\r\nvoid main( void ) {\r\n  vec2 uv = vUv;\r\n  //uv.y =  1.0 - uv.y;\r\n\r\n  vec3 eye = normalize(cameraPosition - vWorldPos);\r\n  float fresnel = abs(dot(eye, vNormal));\r\n  float shift = pow((1.0 - fresnel), 4.0) * 0.05;\r\n\r\n  vec3 col = vec3(\r\n    texture2D(tex, uv - shift).r,\r\n    texture2D(tex, uv).g,\r\n    texture2D(tex, uv + shift).b\r\n  );\r\n\r\n  col = mix(col * 0.7, vec3(1.0), 0.7 - fresnel);\r\n\r\n  col += selected * 0.3;\r\n\r\n  float t = time * 0.4 + vPosition.x + vPosition.z;\r\n  uv = vec2(vUv.x + t * 0.2, vUv.y + t);\r\n  vec3 fx = texture2D(texfx, uv).rgb * 0.4;\r\n\r\n\r\n  gl_FragColor = vec4(col + fx, 1.0);\r\n}\r\n`,\r\n\r\nbeam_frag : `\r\nuniform float time;\r\nuniform sampler2D tex;\r\nvarying vec2 vUv;\r\n\r\nvoid main( void ) {\r\n  float t = time;\r\n  vec4 col = texture2D(tex, vec2(vUv.x, vUv.y * 3.0 + time * 2.0));\r\n  col *= vUv.y;\r\n  gl_FragColor = col;\r\n}\r\n`,\r\n\r\n};","import * as THREE from 'three';\nimport EventDispatcher from './EventDispatcher.js';\n\nvar tempMatrix = new THREE.Matrix4();\nexport var rayMaterial;\nconst validStateController = [\n  \"primary\",\n  \"secondary\",\n  \"both\",\n  \"left\",\n  \"right\"\n];\n\nexport default class RayControl extends EventDispatcher {\n  enable() {\n    this.setLineStyle(this.previousLineStyle);\n    this.enabled = true;\n  }\n\n  _sort() {\n    this.currentStates = this.currentStates.sort((a,b) => {\n      let pa = a.order || 0;\n      let pb = b.order || 0;\n      return pa - pb;\n    });\n  }\n\n  disable() {\n    this.lineBasic.visible = this.line0.visible = false;\n    this.enabled = false;\n    this.controllers.forEach(controller => controller.active = false);\n  }\n\n  changeHandedness(primary) {\n    if (primary !== this.primary) {\n      this.primary = primary;\n      this.secondary = primary === \"right\" ? \"left\" : \"right\";\n\n      this.dispatchEvent(\"handednessChanged\", {primary: this.primary, secondary: this.secondary});\n    }\n  }\n\n  addState(name, state, activate) {\n    if (this.states[name]) {\n      console.error(`RayControl state '${name}' already exist, please use a different name.`);\n      return;\n    }\n\n    state.name = name;\n\n    if (typeof state.raycaster === \"undefined\") {\n      state.raycaster = true;\n    }\n\n    if (typeof state.controller === \"undefined\") {\n      state.controller = \"primary\";\n    } else if (!validStateController.includes(state.controller)) {\n      console.warn(\"Invalid controller selector:\", state.controller);\n      state.controller = \"primary\";\n    }\n\n    this.states[name] = state;\n\n    if (activate === true) {\n      this.currentStates.push(state);\n    }\n\n    return state;\n  }\n\n  activateState(name) {\n    if (this.states[name]) {\n      this.currentStates.push(this.states[name]);\n      this._sort();\n    }\n  }\n\n  deactivateAll(name) {\n    this.currentStates = [];\n    this.controllers.forEach(c => {\n      this.currentStates.forEach(s => {\n        if (c.intersections[s.name]) {\n          c.intersections[s.name] = null;\n        }\n      });\n    });\n  }\n\n  deactivateState(name) {\n    this.currentStates.splice(this.currentStates.indexOf(name), 1);\n    this.controllers.forEach(c => {\n      if (c.intersections[name]) {\n        c.intersections[name] = null;\n      }\n    });\n\n    this._sort();\n  }\n\n  addController(controller, inputSource) {\n    let controllerData = {\n      controller: controller,\n      inputSource: inputSource,\n      active: false,\n      stateHit: {},\n      intersections: {},\n      currentIntersection: null,\n      hit: false\n    };\n\n    this.controllers.push(controllerData);\n\n    if (this.matchController(controllerData, \"primary\")) {\n      controller.add( this.raycasterContext );\n    }\n\n    this.dispatchEvent(\"controllerConnected\", controllerData);\n  }\n\n  removeController(controller) {\n    const index = this.controllers.findIndex(controllerData => controllerData.controller === controller);\n    const controllerData = this.controllers.find(controllerData => controllerData.controller === controller)\n    this.controllers.splice(index, 1);\n    this.dispatchEvent(\"controllerDisconnected\", controllerData);\n  }\n\n  constructor(ctx, primary) {\n    super();\n    this.ctx = ctx;\n\n    if (typeof primary === \"undefined\") {\n      this.primary = \"right\";\n      this.secondary = \"left\";\n    } else {\n      this.primary = primary;\n      this.secondary = primary === \"right\" ? \"left\" : \"right\";\n    }\n\n    this.controllers = [];\n\n    this.previousLineStyle = 'pretty';\n    this.enabled = true;\n    this.raycaster = new THREE.Raycaster();\n    this.states = {};\n    this.currentStates = [];\n\n    var line = ctx.assets['teleport_model'].scene.getObjectByName('beam');\n\n    ctx.assets['beam_tex'].wrapT = THREE.RepeatWrapping;\n    ctx.assets['beam_tex'].wrapS = THREE.RepeatWrapping;\n    rayMaterial = line.material = new THREE.ShaderMaterial({\n      uniforms: {\n        time: {value: 0},\n        active: {value: 0},\n        tex: {value: ctx.assets['beam_tex']}\n      },\n      vertexShader: ctx.shaders.basic_vert,\n      fragmentShader: ctx.shaders.beam_frag,\n      blending: THREE.AdditiveBlending,\n      transparent: true\n    });\n\n    line.renderOrder = 10;\n\n    line.name = 'line';\n    this.rayLength = 5;\n    line.scale.z = this.rayLength;\n\n    this.line0 = line.clone();\n    this.line0.visible = true;\n\n    this.raycasterContext = new THREE.Group();\n    this.raycasterContext.add(this.line0);\n    this.raycasterContext.name = 'raycasterContext';\n\n    var geometry = new THREE.BufferGeometry().setFromPoints( [ new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 0, 0, - 1 ) ] );\n\n    this.lineBasic = new THREE.Line( geometry );\n    this.lineBasic.name = 'line';\n    this.lineBasic.scale.z = 5;\n    this.lineBasic.visible = false;\n    this.raycasterContext.add(this.lineBasic);\n  }\n\n  setLineStyle(lineStyle) {\n    const basic = lineStyle === 'basic';\n    this.lineBasic.visible = basic;\n    this.line0.visible = !basic;\n    this.previousLineStyle = lineStyle;\n  }\n\n  /*\n  selector could be: left, right, both, primary, secondary\n  */\n  matchController(controllerData, selector) {\n    const handedness = controllerData.inputSource.handedness;\n\n    return (\n      (selector === handedness)  ||\n      (selector === \"both\" && (handedness === \"right\" || handedness === \"left\")) ||\n      (selector === \"primary\" && this.primary === handedness) ||\n      (selector === \"secondary\" && this.secondary === handedness)\n    );\n  }\n\n  onSelectStart(evt) {\n    if (!this.enabled) { return; }\n\n    let controller = evt.target;\n    let controllerData = this.controllers.find(c => c.controller === controller);\n    if (controllerData) {\n      controllerData.active = true;\n      if (controllerData.currentIntersection) {\n        const state = controllerData.currentIntersection.state;\n        if (state.onSelectStart) {\n          state.onSelectStart(controllerData.currentIntersection.intersection, controllerData.controller);\n        }\n      }\n\n      // Check no raycaster states\n      this.currentStates.forEach(state => {\n        if (state.onSelectStart && !state.raycaster) {\n          state.onSelectStart(controllerData.intersections[state.name], controller);\n        }\n      });\n    }\n  }\n\n  execute(ctx, delta, time) {\n    if (!this.enabled || this.currentStates.length === 0) { return; }\n\n    rayMaterial.uniforms.time.value = time;\n\n    let firstHit = false;\n\n    var stateIntersections = {};\n    for (var c = 0; c < this.controllers.length; c++) {\n      let controllerData = this.controllers[c];\n\n      for (var i = 0; i < this.currentStates.length; i++) {\n        let state = this.currentStates[i];\n        if (!state.raycaster) {\n          continue;\n        }\n\n        // Check if this controller should be active on this state\n        if (!this.matchController(controllerData, state.controller)) {\n          continue;\n        }\n\n        let controller = controllerData.controller;\n        let active = controllerData.active;\n        let intersections = this.getIntersections(controller, state.colliderMesh);\n\n        if (intersections.length > 0) {\n          // Use just the closest object\n          controllerData.intersections[state.name] = intersections[0];\n          controllerData.stateHit[state.name] = true;\n        } else {\n          controllerData.intersections[state.name] = null;\n        }\n      }\n    }\n\n    this.line0.scale.z = Math.min(this.rayLength, 1);\n    this.lineBasic.scale.z = Math.min(this.rayLength, 1);\n\n    // For each controller, find the closest intersection from all the states\n    for (var c = 0; c < this.controllers.length; c++) {\n      let controllerData = this.controllers[c];\n      let intersections = Object.entries(controllerData.intersections).filter(i => i[1] !== null);\n      if (intersections.length > 0) {\n\n        intersections.sort((a,b) => {\n          return a[1].distance - b[1].distance;\n        });\n\n        const intersectionData = intersections[0];\n        const intersection = intersectionData[1];\n        const state = this.states[intersectionData[0]];\n\n        controllerData.prevIntersection = controllerData.currentIntersection;\n        controllerData.currentIntersection = {\n          state, intersection\n        };\n\n        if (state.lineStyleOnIntersection) {\n          this.setLineStyle(state.lineStyleOnIntersection);\n        } else {\n          this.setLineStyle('advanced');\n        }\n\n        state.onHover && state.onHover(intersection, controllerData.active, controllerData.controller);\n        this.line0.scale.z = Math.min(intersection.distance, 1);\n        this.lineBasic.scale.z = Math.min(intersection.distance, 1);\n      } else {\n        controllerData.currentIntersection = null;\n      }\n    }\n\n    // Handle onHoverLeave\n    for (var c = 0; c < this.controllers.length; c++) {\n      let controllerData = this.controllers[c];\n      if (!controllerData.prevIntersection) {\n        continue;\n      }\n\n      // If we can't find the previous intersection currently enabled, we should emit hoverLeave\n      if (!this.controllers.find(c => {\n        let prev = controllerData.prevIntersection;\n        let current = c.currentIntersection;\n        return current && prev.state.name === current.state.name &&\n          prev.intersection.object === current.intersection.object;\n      }\n        )) {\n        controllerData.prevIntersection.state.onHoverLeave(\n          controllerData.prevIntersection.intersection,\n          false,\n          controllerData.controller\n        );\n\n        controllerData.prevIntersection = null;\n      }\n    }\n  }\n\n  getIntersections( controller, colliderMesh ) {\n    let raycasterContext = controller.getObjectByName('raycasterContext');\n    if (!raycasterContext) {\n      console.warn('No raycasterContext found for this controller', controller);\n      return [];\n    }\n\n    tempMatrix.identity().extractRotation( raycasterContext.matrixWorld );\n\n    this.raycaster.ray.origin.setFromMatrixPosition( raycasterContext.matrixWorld );\n    this.raycaster.ray.direction.set( 0, 0, - 1 ).applyMatrix4( tempMatrix );\n\n    if (Array.isArray(colliderMesh)) {\n      return this.raycaster.intersectObjects( colliderMesh, true);\n    } else {\n      return this.raycaster.intersectObject( colliderMesh, true);\n    }\n  }\n\n  onSelectEnd(evt) {\n    if (!this.enabled) { return; }\n\n    let controllerData = this.controllers.find(c => c.controller === evt.target)\n    if (!controllerData || !controllerData.active) { return; }\n\n    if (controllerData) {\n      if (controllerData.currentIntersection) {\n        const state = controllerData.currentIntersection.state;\n        if (state.onSelectEnd) {\n          state.onSelectEnd(controllerData.currentIntersection.intersection, controllerData.controller);\n        }\n      }\n\n      // Check no raycaster states\n      this.currentStates.forEach(state => {\n        if (state.onSelectEnd && !state.raycaster) {\n          state.onSelectEnd(null, controllerData.controller);\n        }\n      });\n    }\n\n    controllerData.active = false;\n  }\n}\n","/**\n * @private\n * @class EventDispatcher\n */\nexport default class EventDispatcher {\n  constructor() {\n    this._listeners = {};\n    this.stats = {\n      fired: 0,\n      handled: 0\n    };\n  }\n\n  /**\n   * Add an event listener\n   * @param {String} eventName Name of the event to listen\n   * @param {Function} listener Callback to trigger when the event is fired\n   */\n  addEventListener(eventName, listener) {\n    let listeners = this._listeners;\n    if (listeners[eventName] === undefined) {\n      listeners[eventName] = [];\n    }\n\n    if (listeners[eventName].indexOf(listener) === -1) {\n      listeners[eventName].push(listener);\n    }\n  }\n\n  /**\n   * Check if an event listener is already added to the list of listeners\n   * @param {String} eventName Name of the event to check\n   * @param {Function} listener Callback for the specified event\n   */\n  hasEventListener(eventName, listener) {\n    return (\n      this._listeners[eventName] !== undefined &&\n      this._listeners[eventName].indexOf(listener) !== -1\n    );\n  }\n\n  /**\n   * Remove an event listener\n   * @param {String} eventName Name of the event to remove\n   * @param {Function} listener Callback for the specified event\n   */\n  removeEventListener(eventName, listener) {\n    var listenerArray = this._listeners[eventName];\n    if (listenerArray !== undefined) {\n      var index = listenerArray.indexOf(listener);\n      if (index !== -1) {\n        listenerArray.splice(index, 1);\n      }\n    }\n  }\n\n  /**\n   * Dispatch an event\n   * @param {String} eventName Name of the event to dispatch\n   * @param {Data} data to eit\n   */\n  dispatchEvent(eventName, data) {\n    this.stats.fired++;\n\n    var listenerArray = this._listeners[eventName];\n    if (listenerArray !== undefined) {\n      var array = listenerArray.slice(0);\n\n      for (var i = 0; i < array.length; i++) {\n        array[i].call(this, data);\n      }\n    }\n  }\n\n  /**\n   * Reset stats counters\n   */\n  resetCounters() {\n    this.stats.fired = this.stats.handled = 0;\n  }\n}\n","import {rayMaterial} from \"./RayControl.js\";\r\nimport * as THREE from 'three';\r\n\r\nvar tempMatrix = new THREE.Matrix4();\r\nvar intersected = [];\r\n\r\nexport default class Teleport {\r\n  constructor(ctx, mesh) {\r\n    this.ctx = ctx;\r\n\r\n    // Holder for all the\r\n    this.teleportEntity = new THREE.Group();\r\n\r\n    this.active = false;\r\n\r\n    this.teleportHitGeometry = ctx.assets['teleport_model'].scene.getObjectByName('goal');\r\n    this.teleportHitGeometry.material = rayMaterial;\r\n\r\n    this.teleportHitGeometry.renderOrder = 10;\r\n\r\n    this.ballColliding = ctx.assets['teleport_model'].scene.getObjectByName('glow');\r\n    this.ballColliding.material = new THREE.MeshBasicMaterial({\r\n      color: 0x00257b,\r\n      map: ctx.assets['glow_tex'],\r\n      transparent: true,\r\n      blending: THREE.AdditiveBlending\r\n    });\r\n\r\n    this.ballColliding.renderOrder = 10;\r\n\r\n\r\n    this.ballColliding.visible = false;\r\n\r\n    this.teleportEntity.add(this.ballColliding);\r\n\r\n    this.teleportHitGeometry.visible = false;\r\n\r\n    this.teleportHitGeometry.position.set(-2, 0, -2);\r\n\r\n    this.teleportEntity.add(this.teleportHitGeometry);\r\n\r\n    this.ctx.scene.add(this.teleportEntity);\r\n\r\n    // sounds\r\n    try {\r\n      this.startSound = new THREE.Audio(ctx.audioListener);\r\n      this.startSound.setBuffer(ctx.assets['teleport_a_snd']);\r\n      this.startSound.setLoop(true);\r\n      this.startSound.pause();\r\n    } catch (e) {\r\n      console.warn('Failed to initialize start sound:', e);\r\n      this.startSound = null;\r\n    }\r\n\r\n    try {\r\n      this.endSound = new THREE.Audio(ctx.audioListener);\r\n      this.endSound.setBuffer(ctx.assets['teleport_b_snd']);\r\n      this.endSound.setLoop(false);\r\n      this.endSound.pause();\r\n    } catch (e) {\r\n      console.warn('Failed to initialize end sound:', e);\r\n      this.endSound = null;\r\n    }\r\n  }\r\n\r\n\r\n  onSelectStart(evt) {\r\n    //if (evt.target === this.ctx.controllers[0])\r\n    this.active = true;\r\n    if (this.endSound) this.endSound.pause();\r\n    if (this.startSound) this.startSound.play();\r\n  }\r\n\r\n  onHoverLeave() {\r\n    this.ballColliding.visible = false;\r\n    this.teleportHitGeometry.visible = false;\r\n    if (this.startSound) this.startSound.pause();\r\n  }\r\n\r\n  onHover(hitPoint, active) {\r\n    if (active) {\r\n      this.teleportHitGeometry.visible = true;\r\n      this.teleportHitGeometry.position.copy(hitPoint);\r\n      this.hit = true;\r\n      this.ballColliding.visible = false;\r\n    } else {\r\n      this.ballColliding.visible = true;\r\n      this.ballColliding.position.copy(hitPoint);\r\n    }\r\n  }\r\n\r\n  onSelectEnd(targetPoint) {\r\n    const headPosition = this.ctx.renderer.xr.getCamera(this.ctx.camera).position;\r\n    const offset = targetPoint.sub(headPosition);\r\n    offset.y = 0; // We don't want to change height to floor's level\r\n\r\n    this.ctx.cameraRig.position.add(offset);\r\n    this.teleportHitGeometry.visible = false;\r\n\r\n    this.active = false;\r\n\r\n    if (this.startSound) this.startSound.pause();\r\n    if (this.endSound) this.endSound.play();\r\n  }\r\n}\r\n\r\n","// Periodic Table Element Data\r\n// PSE in VR - Virtuelles Periodensystem\r\n\r\n// Element Group Colors\r\nexport const GROUP_COLORS = {\r\n  alkali: 0xFF6B6B,           // Alkalimetalle\r\n  alkalineEarth: 0xFFA94D,    // Erdalkalimetalle\r\n  transition: 0x74B9FF,       // bergangsmetalle\r\n  lanthanide: 0xD63384,       // Lanthanoide\r\n  actinide: 0x4A69BD,         // Actinoide\r\n  metal: 0x20C997,             // Metalle (13-16)\r\n  metalloid: 0x17A2B8,          // Metalloide\r\n  nonmetal: 0xFFC107,           // Nichtmetalle\r\n  halogen: 0x00D9FF,           // Halogene\r\n  nobleGas: 0xFFFFFF            // Edelgase (use specific gas colors)\r\n};\r\n\r\n// Noble gas discharge colors\r\nexport const NOBLE_GAS_COLORS = {\r\n  He: 0xFFE4E1,  // Helium - pale pink/white\r\n  Ne: 0xFF6B00,  // Neon - orange-red\r\n  Ar: 0x7B68EE,  // Argon - purple\r\n  Kr: 0x00CED1,  // Krypton - cyan\r\n  Xe: 0x4169E1,  // Xenon - blue\r\n  Rn: 0xE0FFFF   // Radon - light blue\r\n};\r\n\r\n// Element definitions (partial for MVP - Phase 1)\r\nexport const ELEMENTS = [\r\n  // Hydrogen\r\n  {\r\n    symbol: 'H',\r\n    name: 'Wasserstoff',\r\n    atomicNumber: 1,\r\n    mass: 1.008,\r\n    group: 'nonmetal',\r\n    period: 1,\r\n    block: 's',\r\n    groupNumber: 1,\r\n    color: 0xFFC107,\r\n    description: 'Das hufigste Element im Universum. Bildet 75% der Masse der Sonne.',\r\n    theme: 'cosmic',\r\n    experiments: ['knallgas', 'fusion', 'fuelcell']\r\n  },\r\n\r\n  // Helium\r\n  {\r\n    symbol: 'He',\r\n    name: 'Helium',\r\n    atomicNumber: 2,\r\n    mass: 4.003,\r\n    group: 'nobleGas',\r\n    period: 1,\r\n    block: 's',\r\n    groupNumber: 18,\r\n    color: NOBLE_GAS_COLORS.He,\r\n    description: 'Das zweithufigste Element im Universum. Wurde zuerst im Sonnenspektrum entdeckt.',\r\n    theme: 'solar',\r\n    experiments: ['superfluid', 'voiceshift']\r\n  },\r\n\r\n  // Lithium\r\n  {\r\n    symbol: 'Li',\r\n    name: 'Lithium',\r\n    atomicNumber: 3,\r\n    mass: 6.941,\r\n    group: 'alkali',\r\n    period: 2,\r\n    block: 's',\r\n    groupNumber: 1,\r\n    color: GROUP_COLORS.alkali,\r\n    description: 'Das leichteste Metall. Wichtiger Bestandteil von Lithium-Ionen-Batterien.',\r\n    theme: 'energy',\r\n    experiments: ['waterReaction', 'battery']\r\n  },\r\n\r\n  // Beryllium\r\n  {\r\n    symbol: 'Be',\r\n    name: 'Beryllium',\r\n    atomicNumber: 4,\r\n    mass: 9.012,\r\n    group: 'alkalineEarth',\r\n    period: 2,\r\n    block: 's',\r\n    groupNumber: 2,\r\n    color: GROUP_COLORS.alkalineEarth,\r\n    description: 'Hochgiftiges Metall mit niedriger Dichte. Verwendet in der Weltraumtechnik.',\r\n    theme: 'gem',\r\n    experiments: ['crystal', 'toxicity']\r\n  },\r\n\r\n  // Bor\r\n  {\r\n    symbol: 'B',\r\n    name: 'Bor',\r\n    atomicNumber: 5,\r\n    mass: 10.81,\r\n    group: 'metalloid',\r\n    period: 2,\r\n    block: 'p',\r\n    groupNumber: 13,\r\n    color: GROUP_COLORS.metalloid,\r\n    description: 'Hartes Material fr Glasfasern. Kommt in Wstensalzen vor.',\r\n    theme: 'desert',\r\n    experiments: ['borax', 'fiberglass']\r\n  },\r\n\r\n  // Carbon\r\n  {\r\n    symbol: 'C',\r\n    name: 'Kohlenstoff',\r\n    atomicNumber: 6,\r\n    mass: 12.011,\r\n    group: 'nonmetal',\r\n    period: 2,\r\n    block: 'p',\r\n    groupNumber: 14,\r\n    color: 0xFFC107,\r\n    description: 'Das Element des Lebens. Grundbaustein aller organischen Verbindungen.',\r\n    theme: 'life',\r\n    experiments: ['diamond', 'graphite', 'dna']\r\n  },\r\n\r\n  // Nitrogen\r\n  {\r\n    symbol: 'N',\r\n    name: 'Stickstoff',\r\n    atomicNumber: 7,\r\n    mass: 14.007,\r\n    group: 'nonmetal',\r\n    period: 2,\r\n    block: 'p',\r\n    groupNumber: 15,\r\n    color: 0xFFC107,\r\n    description: 'Macht 78% der Atmosphre aus. Essentiell fr Proteine und DNA.',\r\n    theme: 'atmosphere',\r\n    experiments: ['liquid', 'haberbosch', 'fertilizer']\r\n  },\r\n\r\n  // Oxygen\r\n  {\r\n    symbol: 'O',\r\n    name: 'Sauerstoff',\r\n    atomicNumber: 8,\r\n    mass: 15.999,\r\n    group: 'nonmetal',\r\n    period: 2,\r\n    block: 'p',\r\n    groupNumber: 16,\r\n    color: 0xFFC107,\r\n    description: 'Zweithufigstes Element im Universum. Notwendig fr Atmung und Verbrennung.',\r\n    theme: 'breath',\r\n    experiments: ['combustion', 'ozone', 'photosynthesis']\r\n  },\r\n\r\n  // Fluorine\r\n  {\r\n    symbol: 'F',\r\n    name: 'Fluor',\r\n    atomicNumber: 9,\r\n    mass: 18.998,\r\n    group: 'halogen',\r\n    period: 2,\r\n    block: 'p',\r\n    groupNumber: 17,\r\n    color: GROUP_COLORS.halogen,\r\n    description: 'Reaktivstes aller Elemente. Wird in Teflon und Zahncreme verwendet.',\r\n    theme: 'protection',\r\n    experiments: ['reaction', 'teflon']\r\n  },\r\n\r\n  // Neon\r\n  {\r\n    symbol: 'Ne',\r\n    name: 'Neon',\r\n    atomicNumber: 10,\r\n    mass: 20.180,\r\n    group: 'nobleGas',\r\n    period: 2,\r\n    block: 'p',\r\n    groupNumber: 18,\r\n    color: NOBLE_GAS_COLORS.Ne,\r\n    description: 'Leuchtet bei elektrischer Entladung orange-rot. Symbol der Stadtbeleuchtung.',\r\n    theme: 'lights',\r\n    experiments: ['neon', 'laser']\r\n  },\r\n\r\n  // Sodium\r\n  {\r\n    symbol: 'Na',\r\n    name: 'Natrium',\r\n    atomicNumber: 11,\r\n    mass: 22.990,\r\n    group: 'alkali',\r\n    period: 3,\r\n    block: 's',\r\n    groupNumber: 1,\r\n    color: GROUP_COLORS.alkali,\r\n    description: 'Silberglnzendes Metall, butterweich. Basis fr Speisesalz (NaCl).',\r\n    theme: 'kitchen',\r\n    experiments: ['water', 'flame', 'saltcrystal']\r\n  },\r\n\r\n  // Magnesium\r\n  {\r\n    symbol: 'Mg',\r\n    name: 'Magnesium',\r\n    atomicNumber: 12,\r\n    mass: 24.305,\r\n    group: 'alkalineEarth',\r\n    period: 3,\r\n    block: 's',\r\n    groupNumber: 2,\r\n    color: GROUP_COLORS.alkalineEarth,\r\n    description: 'Blendend weies Licht beim Verbrennen. Kommt in Chlorophyll vor.',\r\n    theme: 'light',\r\n    experiments: ['flash', 'chlorophyll', 'alloy']\r\n  },\r\n\r\n  // Aluminum\r\n  {\r\n    symbol: 'Al',\r\n    name: 'Aluminium',\r\n    atomicNumber: 13,\r\n    mass: 26.982,\r\n    group: 'metal',\r\n    period: 3,\r\n    block: 'p',\r\n    groupNumber: 13,\r\n    color: GROUP_COLORS.metal,\r\n    description: 'Das hufigste Metall der Erdkruste. Leicht und korrosionsbestndig.',\r\n    theme: 'industry',\r\n    experiments: ['hallheroult', 'thermit', 'foil']\r\n  },\r\n\r\n  // Silicon\r\n  {\r\n    symbol: 'Si',\r\n    name: 'Silizium',\r\n    atomicNumber: 14,\r\n    mass: 28.086,\r\n    group: 'metalloid',\r\n    period: 3,\r\n    block: 'p',\r\n    groupNumber: 14,\r\n    color: GROUP_COLORS.metalloid,\r\n    description: 'Zweithufigstes Element der Erdkruste. Basis aller modernen Elektronik.',\r\n    theme: 'silicon',\r\n    experiments: ['transistor', 'solar', 'sand']\r\n  },\r\n\r\n  // Phosphorus\r\n  {\r\n    symbol: 'P',\r\n    name: 'Phosphor',\r\n    atomicNumber: 15,\r\n    mass: 30.974,\r\n    group: 'nonmetal',\r\n    period: 3,\r\n    block: 'p',\r\n    groupNumber: 15,\r\n    color: 0xFFC107,\r\n    description: 'Glht wei im Dunkeln. Wichtiger Bestandteil von DNA und ATP.',\r\n    theme: 'fire',\r\n    experiments: ['white', 'red', 'match']\r\n  },\r\n\r\n  // Sulfur\r\n  {\r\n    symbol: 'S',\r\n    name: 'Schwefel',\r\n    atomicNumber: 16,\r\n    mass: 32.065,\r\n    group: 'nonmetal',\r\n    period: 3,\r\n    block: 'p',\r\n    groupNumber: 16,\r\n    color: 0xFFC107,\r\n    description: 'Gelbes Element mit charakteristischem Geruch. Kommt in Vulkanen vor.',\r\n    theme: 'volcano',\r\n    experiments: ['burning', 'gunpowder', 'bromo']\r\n  },\r\n\r\n  // Chlorine\r\n  {\r\n    symbol: 'Cl',\r\n    name: 'Chlor',\r\n    atomicNumber: 17,\r\n    mass: 35.453,\r\n    group: 'halogen',\r\n    period: 3,\r\n    block: 'p',\r\n    groupNumber: 17,\r\n    color: GROUP_COLORS.halogen,\r\n    description: 'Grn-gelbes Giftgas. Wird zur Wasserdesinfektion verwendet.',\r\n    theme: 'swimming',\r\n    experiments: ['disinfection', 'salt', 'gas']\r\n  },\r\n\r\n  // Argon\r\n  {\r\n    symbol: 'Ar',\r\n    name: 'Argon',\r\n    atomicNumber: 18,\r\n    mass: 39.948,\r\n    group: 'nobleGas',\r\n    period: 3,\r\n    block: 'p',\r\n    groupNumber: 18,\r\n    color: NOBLE_GAS_COLORS.Ar,\r\n    description: 'Hufigstes Edelgas (1% Atmosphre). Wird fr WIG-Schweien verwendet.',\r\n    theme: 'welding',\r\n    experiments: ['plasma', 'inert']\r\n  },\r\n\r\n  // Calcium\r\n  {\r\n    symbol: 'Ca',\r\n    name: 'Calcium',\r\n    atomicNumber: 20,\r\n    mass: 40.078,\r\n    group: 'alkalineEarth',\r\n    period: 4,\r\n    block: 's',\r\n    groupNumber: 2,\r\n    color: GROUP_COLORS.alkalineEarth,\r\n    description: 'Bauknochen des Lebens. Fnft-hufigstes Element der Erdkruste.',\r\n    theme: 'skeleton',\r\n    experiments: ['burning', 'bones', 'limestone']\r\n  },\r\n\r\n  // Iron\r\n  {\r\n    symbol: 'Fe',\r\n    name: 'Eisen',\r\n    atomicNumber: 26,\r\n    mass: 55.845,\r\n    group: 'transition',\r\n    period: 4,\r\n    block: 'd',\r\n    groupNumber: 8,\r\n    color: GROUP_COLORS.transition,\r\n    description: 'Wichtigstes Metall der Menschheit. Grundbaustein von Stahl und Hmoglobin.',\r\n    theme: 'forge',\r\n    experiments: ['magnet', 'rust', 'steel']\r\n  },\r\n\r\n  // Copper\r\n  {\r\n    symbol: 'Cu',\r\n    name: 'Kupfer',\r\n    atomicNumber: 29,\r\n    mass: 63.546,\r\n    group: 'transition',\r\n    period: 4,\r\n    block: 'd',\r\n    groupNumber: 11,\r\n    color: GROUP_COLORS.transition,\r\n    description: 'Erstes Metall der Menschheit. Exzellenter elektrischer Leiter.',\r\n    theme: 'electric',\r\n    experiments: ['conductivity', 'patina', 'bronze']\r\n  },\r\n\r\n  // Gold\r\n  {\r\n    symbol: 'Au',\r\n    name: 'Gold',\r\n    atomicNumber: 79,\r\n    mass: 196.967,\r\n    group: 'transition',\r\n    period: 6,\r\n    block: 'd',\r\n    groupNumber: 11,\r\n    color: GROUP_COLORS.transition,\r\n    description: 'Edelstes Metall. Einziges gelbes Metall (relativistische Effekte).',\r\n    theme: 'treasure',\r\n    experiments: ['ductility', 'alloys', 'electroplating']\r\n  },\r\n\r\n  // Uranium\r\n  {\r\n    symbol: 'U',\r\n    name: 'Uran',\r\n    atomicNumber: 92,\r\n    mass: 238.029,\r\n    group: 'actinide',\r\n    period: 7,\r\n    block: 'f',\r\n    groupNumber: 3,\r\n    color: GROUP_COLORS.actinide,\r\n    description: 'Schwerstes hufiges natrliches Element. Basis fr Kernenergie.',\r\n    theme: 'nuclear',\r\n    experiments: ['fission', 'decay', 'fluorescence']\r\n  },\r\n\r\n  {\r\n    symbol: 'K',\r\n    name: 'Kalium',\r\n    atomicNumber: 19,\r\n    mass: 39.098,\r\n    group: 'alkali',\r\n    period: 4,\r\n    block: 's',\r\n    groupNumber: 1,\r\n    color: GROUP_COLORS.alkali,\r\n    description: 'Reaktiv Metall, in der Natur oft als Ion. Wesentlich fr biologische Prozesse.',\r\n    theme: 'biological',\r\n    experiments: ['water', 'flame', 'banane']\r\n  },\r\n\r\n  {\r\n    symbol: 'Ca',\r\n    name: 'Calcium',\r\n    atomicNumber: 20,\r\n    mass: 40.078,\r\n    group: 'alkalineEarth',\r\n    period: 4,\r\n    block: 's',\r\n    groupNumber: 2,\r\n    color: GROUP_COLORS.alkalineEarth,\r\n    description: 'Fnft-hufigstes Element der Erdkruste. Fnft-hufigstes Element im menschlichen Krper.',\r\n    theme: 'biological',\r\n    experiments: ['burning', 'knochen', 'kalkstein']\r\n  },\r\n\r\n  {\r\n    symbol: 'Sc',\r\n    name: 'Scandium',\r\n    atomicNumber: 21,\r\n    mass: 44.956,\r\n    group: 'transition',\r\n    period: 4,\r\n    block: 'd',\r\n    groupNumber: 3,\r\n    color: GROUP_COLORS.transition,\r\n    description: 'Seltenes bergangsmetall. Wird in Sportgerten und Hochleistungslegierungen verwendet.',\r\n    theme: 'aerospace',\r\n    experiments: ['alloy', 'magnetic', 'sport']\r\n  },\r\n\r\n  {\r\n    symbol: 'Ti',\r\n    name: 'Titan',\r\n    atomicNumber: 22,\r\n    mass: 47.867,\r\n    group: 'transition',\r\n    period: 4,\r\n    block: 'd',\r\n    groupNumber: 4,\r\n    color: GROUP_COLORS.transition,\r\n    description: 'Korrosionsbestndiges Metall mit hohem Schmelzpunkt. Fr Luft- und Raumfahrtindustrie.',\r\n    theme: 'aerospace',\r\n    experiments: ['biokompatibilitt', 'legierung', 'oxid']\r\n  },\r\n\r\n  {\r\n    symbol: 'V',\r\n    name: 'Vanadium',\r\n    atomicNumber: 23,\r\n    mass: 50.942,\r\n    group: 'transition',\r\n    period: 4,\r\n    block: 'd',\r\n    groupNumber: 5,\r\n    color: GROUP_COLORS.transition,\r\n    description: 'Hartes, grau-weies Metall. Fr Werkzeugstahl und Titanlegierungen.',\r\n    theme: 'industry',\r\n    experiments: ['stahl', 'legierung', 'katalysator']\r\n  },\r\n\r\n  {\r\n    symbol: 'Cr',\r\n    name: 'Chrom',\r\n    atomicNumber: 24,\r\n    mass: 51.996,\r\n    group: 'transition',\r\n    period: 4,\r\n    block: 'd',\r\n    groupNumber: 6,\r\n    color: GROUP_COLORS.transition,\r\n    description: 'Glnzendes, korrosionsbestndiges Metall. Basis von Edelstahl und Verchromung.',\r\n    theme: 'industry',\r\n    experiments: ['edelstahl', 'verchromung', 'pigment']\r\n  },\r\n\r\n  {\r\n    symbol: 'Mn',\r\n    name: 'Mangan',\r\n    atomicNumber: 25,\r\n    mass: 54.938,\r\n    group: 'transition',\r\n    period: 4,\r\n    block: 'd',\r\n    groupNumber: 7,\r\n    color: GROUP_COLORS.transition,\r\n    description: 'Wichtig fr Stahlherstellung. Bioelement fr Photosynthese.',\r\n    theme: 'industry',\r\n    experiments: ['stahl', 'photosynthese', 'batterie']\r\n  },\r\n\r\n  {\r\n    symbol: 'Co',\r\n    name: 'Kobalt',\r\n    atomicNumber: 27,\r\n    mass: 58.933,\r\n    group: 'transition',\r\n    period: 4,\r\n    block: 'd',\r\n    groupNumber: 9,\r\n    color: GROUP_COLORS.transition,\r\n    description: 'Blau-graues, ferromagnetisches Metall. Fr Supraleger, Magnete und Lithium-Ionen-Batterien.',\r\n    theme: 'technology',\r\n    experiments: ['magnet', 'batterie', 'legierung']\r\n  },\r\n\r\n  {\r\n    symbol: 'Ni',\r\n    name: 'Nickel',\r\n    atomicNumber: 28,\r\n    mass: 58.693,\r\n    group: 'transition',\r\n    period: 4,\r\n    block: 'd',\r\n    groupNumber: 10,\r\n    color: GROUP_COLORS.transition,\r\n    description: 'Silbrig-weies, korrosionsbestndiges Metall. Mnzmetall und fr Legierungen.',\r\n    theme: 'technology',\r\n    experiments: ['mnzen', 'legierung', 'katalysator']\r\n  },\r\n\r\n  {\r\n    symbol: 'Zn',\r\n    name: 'Zink',\r\n    atomicNumber: 30,\r\n    mass: 65.38,\r\n    group: 'transition',\r\n    period: 4,\r\n    block: 'd',\r\n    groupNumber: 12,\r\n    color: GROUP_COLORS.transition,\r\n    description: 'Reaktionsfreies Metall. Fr galvanische Zellen, Verzinkung und Zink-Legierungen.',\r\n    theme: 'technology',\r\n    experiments: ['galvanik', 'verzinkung', 'batterie']\r\n  },\r\n\r\n  {\r\n    symbol: 'Ga',\r\n    name: 'Gallium',\r\n    atomicNumber: 31,\r\n    mass: 69.723,\r\n    group: 'metal',\r\n    period: 4,\r\n    block: 'p',\r\n    groupNumber: 13,\r\n    color: GROUP_COLORS.metal,\r\n    description: 'Schmilzt in der Hand bei Raumtemperatur. Fr Halbleiter und Hochtemperaturthermometer.',\r\n    theme: 'semiconductor',\r\n    experiments: ['schmelzen', 'halbleiter', 'thermometer']\r\n  },\r\n\r\n  {\r\n    symbol: 'Ge',\r\n    name: 'Germanium',\r\n    atomicNumber: 32,\r\n    mass: 72.630,\r\n    group: 'metalloid',\r\n    period: 4,\r\n    block: 'p',\r\n    groupNumber: 14,\r\n    color: GROUP_COLORS.metalloid,\r\n    description: 'Halbleiter fr Transistoren und Optoelektronik. Silizium-Alternative.',\r\n    theme: 'semiconductor',\r\n    experiments: ['halbleiter', 'transistor', 'faser']\r\n  },\r\n\r\n  {\r\n    symbol: 'As',\r\n    name: 'Arsen',\r\n    atomicNumber: 33,\r\n    mass: 74.922,\r\n    group: 'metalloid',\r\n    period: 4,\r\n    block: 'p',\r\n    groupNumber: 15,\r\n    color: GROUP_COLORS.metalloid,\r\n    description: 'Sehr giftiges Halbmetall. Historisch in Tapeten und Farben verwendet.',\r\n    theme: 'toxic',\r\n    experiments: ['gift', 'historisch', 'semiconductor']\r\n  },\r\n\r\n  {\r\n    symbol: 'Se',\r\n    name: 'Selen',\r\n    atomicNumber: 34,\r\n    mass: 78.96,\r\n    group: 'nonmetal',\r\n    period: 4,\r\n    block: 'p',\r\n    groupNumber: 16,\r\n    color: GROUP_COLORS.nonmetal,\r\n    description: 'Wichtiges Spurenelement. Halbleiter und fr Glhbirren.',\r\n    theme: 'semiconductor',\r\n    experiments: ['glhbirne', 'photovoltaik', 'toxisch']\r\n  },\r\n\r\n  {\r\n    symbol: 'Br',\r\n    name: 'Brom',\r\n    atomicNumber: 35,\r\n    mass: 79.904,\r\n    group: 'halogen',\r\n    period: 4,\r\n    block: 'p',\r\n    groupNumber: 17,\r\n    color: GROUP_COLORS.halogen,\r\n    description: 'Einziges flssige Nichtmetall bei Raumtemperatur. Rote Farbe, stechender Geruch.',\r\n    theme: 'liquid',\r\n    experiments: ['flssig', 'flammmittel', 'giftig']\r\n  },\r\n\r\n  {\r\n    symbol: 'Kr',\r\n    name: 'Krypton',\r\n    atomicNumber: 36,\r\n    mass: 83.798,\r\n    group: 'nobleGas',\r\n    period: 4,\r\n    block: 'p',\r\n    groupNumber: 18,\r\n    color: NOBLE_GAS_COLORS.Kr,\r\n    description: 'Edelgas mit hoher Dichte. Fr Blitzlichtlampen und Laser.',\r\n    theme: 'lighting',\r\n    experiments: ['laser', 'neon', 'isoliert']\r\n  },\r\n\r\n  {\r\n    symbol: 'Rb',\r\n    name: 'Rubidium',\r\n    atomicNumber: 37,\r\n    mass: 85.468,\r\n    group: 'alkali',\r\n    period: 5,\r\n    block: 's',\r\n    groupNumber: 1,\r\n    color: GROUP_COLORS.alkali,\r\n    description: 'Weiches, hochreaktives Metall. Fr Atomuhren und Feuerwerk.',\r\n    theme: 'pyrotechnics',\r\n    experiments: ['atomuhr', 'feuerwerk', 'reaktion']\r\n  },\r\n\r\n  {\r\n    symbol: 'Sr',\r\n    name: 'Strontium',\r\n    atomicNumber: 38,\r\n    mass: 87.62,\r\n    group: 'alkalineEarth',\r\n    period: 5,\r\n    block: 's',\r\n    groupNumber: 2,\r\n    color: GROUP_COLORS.alkalineEarth,\r\n    description: 'Fr rote Feuerwerke und Magnete. Radioaktiv (Strontium-90).',\r\n    theme: 'pyrotechnics',\r\n    experiments: ['feuerwerk', 'magnet', 'radioaktiv']\r\n  },\r\n\r\n  {\r\n    symbol: 'Y',\r\n    name: 'Yttrium',\r\n    atomicNumber: 39,\r\n    mass: 88.906,\r\n    group: 'transition',\r\n    period: 5,\r\n    block: 'd',\r\n    groupNumber: 3,\r\n    color: GROUP_COLORS.transition,\r\n    description: 'Seltenes Erdelement. Fr LEDs, Supraleiter und Laser.',\r\n    theme: 'technology',\r\n    experiments: ['led', 'laser', 'supraleiter']\r\n  },\r\n\r\n  {\r\n    symbol: 'Zr',\r\n    name: 'Zirkonium',\r\n    atomicNumber: 40,\r\n    mass: 91.224,\r\n    group: 'transition',\r\n    period: 5,\r\n    block: 'd',\r\n    groupNumber: 4,\r\n    color: GROUP_COLORS.transition,\r\n    description: 'Korrosionsbestndiges Metall. Fr Kernelemente und medizinische Implantate.',\r\n    theme: 'nuclear',\r\n    experiments: ['kernelement', 'implantat', 'keramik']\r\n  },\r\n\r\n  {\r\n    symbol: 'Nb',\r\n    name: 'Niob',\r\n    atomicNumber: 41,\r\n    mass: 92.906,\r\n    group: 'transition',\r\n    period: 5,\r\n    block: 'd',\r\n    groupNumber: 5,\r\n    color: GROUP_COLORS.transition,\r\n    description: 'Supraleiter bei niedrigen Temperaturen. Fr Beschleunigermagnete und Hochspannungstechnik.',\r\n    theme: 'technology',\r\n    experiments: ['supraleiter', 'magnet', 'hochspannung']\r\n  },\r\n\r\n  {\r\n    symbol: 'Mo',\r\n    name: 'Molybdn',\r\n    atomicNumber: 42,\r\n    mass: 95.95,\r\n    group: 'transition',\r\n    period: 5,\r\n    block: 'd',\r\n    groupNumber: 6,\r\n    color: GROUP_COLORS.transition,\r\n    description: 'Extrem hartes Metall. Fr Hochtemperaturanwendungen und Schmierstoffe.',\r\n    theme: 'industry',\r\n    experiments: ['hochtemperatur', 'schmiermittel', 'stahl']\r\n  },\r\n\r\n  {\r\n    symbol: 'Tc',\r\n    name: 'Technetium',\r\n    atomicNumber: 43,\r\n    mass: 98,\r\n    group: 'transition',\r\n    period: 5,\r\n    block: 'd',\r\n    groupNumber: 7,\r\n    color: GROUP_COLORS.transition,\r\n    description: 'Erstes knstliche Element. Radioaktiv. In der medizinischen Bildgebung verwendet.',\r\n    theme: 'nuclear',\r\n    experiments: ['knstlich', 'medizin', 'radioaktiv']\r\n  },\r\n\r\n  {\r\n    symbol: 'Ru',\r\n    name: 'Ruthenium',\r\n    atomicNumber: 44,\r\n    mass: 101.07,\r\n    group: 'transition',\r\n    period: 5,\r\n    block: 'd',\r\n    groupNumber: 8,\r\n    color: GROUP_COLORS.transition,\r\n    description: 'Seltenes, aber wichtiges Metall. Fr Elektronikkontakte und Katalysatoren.',\r\n    theme: 'technology',\r\n    experiments: ['katalysator', 'kontakte', 'legierung']\r\n  },\r\n\r\n  {\r\n    symbol: 'Rh',\r\n    name: 'Rhodium',\r\n    atomicNumber: 45,\r\n    mass: 102.91,\r\n    group: 'transition',\r\n    period: 5,\r\n    block: 'd',\r\n    groupNumber: 9,\r\n    color: GROUP_COLORS.transition,\r\n    description: 'Sehr wertvolles bergangsmetall. Fr Katalysatoren, Schmuck und Thermoelemente.',\r\n    theme: 'technology',\r\n    experiments: ['katalysator', 'schmuck', 'thermo']\r\n  },\r\n\r\n  {\r\n    symbol: 'Pd',\r\n    name: 'Palladium',\r\n    atomicNumber: 46,\r\n    mass: 106.42,\r\n    group: 'transition',\r\n    period: 5,\r\n    block: 'd',\r\n    groupNumber: 10,\r\n    color: GROUP_COLORS.transition,\r\n    description: 'Wertvolles Platin-Metall. Fr Katalysatoren, Schmuck und Wasserstofffilter.',\r\n    theme: 'technology',\r\n    experiments: ['katalysator', 'schmuck', 'wasserstoff']\r\n  },\r\n\r\n  {\r\n    symbol: 'Ag',\r\n    name: 'Silber',\r\n    atomicNumber: 47,\r\n    mass: 107.87,\r\n    group: 'transition',\r\n    period: 5,\r\n    block: 'd',\r\n    groupNumber: 11,\r\n    color: GROUP_COLORS.transition,\r\n    description: 'Bester elektrischer Leiter aller Metalle. Fr Schmuck, Elektronik und Fotografie.',\r\n    theme: 'precious',\r\n    experiments: ['elektrisch', 'schmuck', 'fotografie']\r\n  },\r\n\r\n  {\r\n    symbol: 'Cd',\r\n    name: 'Cadmium',\r\n    atomicNumber: 48,\r\n    mass: 112.41,\r\n    group: 'transition',\r\n    period: 5,\r\n    block: 'd',\r\n    groupNumber: 12,\r\n    color: GROUP_COLORS.transition,\r\n    description: 'Giftiges Metall. Fr NiCd-Batterien, Pigmente und galvanische Elemente.',\r\n    theme: 'toxic',\r\n    experiments: ['batterie', 'pigment', 'toxisch']\r\n  },\r\n\r\n  {\r\n    symbol: 'In',\r\n    name: 'Indium',\r\n    atomicNumber: 49,\r\n    mass: 114.82,\r\n    group: 'metal',\r\n    period: 5,\r\n    block: 'p',\r\n    groupNumber: 13,\r\n    color: GROUP_COLORS.metal,\r\n    description: 'Weiches Metall. Fr ITO-Schichten (Touchscreens), Transistoren und Ltzinn.',\r\n    theme: 'semiconductor',\r\n    experiments: ['touchscreen', 'ltinn', 'halbleiter']\r\n  },\r\n\r\n  {\r\n    symbol: 'Sn',\r\n    name: 'Zinn',\r\n    atomicNumber: 50,\r\n    mass: 118.71,\r\n    group: 'metal',\r\n    period: 5,\r\n    block: 'p',\r\n    groupNumber: 14,\r\n    color: GROUP_COLORS.metal,\r\n    description: 'Historisch wichtiges Metall. Fr Ltlegierungen, Bronze und Konservendosen.',\r\n    theme: 'history',\r\n    experiments: ['lten', 'bronze', 'konserven']\r\n  },\r\n\r\n  {\r\n    symbol: 'Sb',\r\n    name: 'Antimon',\r\n    atomicNumber: 51,\r\n    mass: 121.76,\r\n    group: 'metalloid',\r\n    period: 5,\r\n    block: 'p',\r\n    groupNumber: 15,\r\n    color: GROUP_COLORS.metalloid,\r\n    description: 'Halbmetall mit ungewhnlichen Eigenschaften. Fr Flammhemmer und Legierungen.',\r\n    theme: 'industry',\r\n    experiments: ['flammhemmer', 'legierung', 'halbleiter']\r\n  },\r\n\r\n  {\r\n    symbol: 'Te',\r\n    name: 'Tellur',\r\n    atomicNumber: 52,\r\n    mass: 127.60,\r\n    group: 'metalloid',\r\n    period: 5,\r\n    block: 'p',\r\n    groupNumber: 16,\r\n    color: GROUP_COLORS.metalloid,\r\n    description: 'Seltenes, seltenes Halbmetall. Fr Solarzellen und Legierungen.',\r\n    theme: 'semiconductor',\r\n    experiments: ['solarzelle', 'legierung', 'cdte']\r\n  },\r\n\r\n  {\r\n    symbol: 'I',\r\n    name: 'Jod',\r\n    atomicNumber: 53,\r\n    mass: 126.90,\r\n    group: 'halogen',\r\n    period: 5,\r\n    block: 'p',\r\n    groupNumber: 17,\r\n    color: GROUP_COLORS.halogen,\r\n    description: 'Wichtigstes Spurenelement fr Schilddrse. Dunkle Substanz mit charakteristischem Geruch.',\r\n    theme: 'biological',\r\n    experiments: ['schilddrse', 'antiseptik', 'sublimation']\r\n  },\r\n\r\n  {\r\n    symbol: 'Xe',\r\n    name: 'Xenon',\r\n    atomicNumber: 54,\r\n    mass: 131.29,\r\n    group: 'nobleGas',\r\n    period: 5,\r\n    block: 'p',\r\n    groupNumber: 18,\r\n    color: NOBLE_GAS_COLORS.Xe,\r\n    description: 'Schweres Edelgas. Fr Ionentriebwerke, Narkose und Blitzlichtlampen.',\r\n    theme: 'space',\r\n    experiments: ['ionentrieb', 'narkose', 'laser']\r\n  },\r\n\r\n  {\r\n    symbol: 'Cs',\r\n    name: 'Csium',\r\n    atomicNumber: 55,\r\n    mass: 132.91,\r\n    group: 'alkali',\r\n    period: 6,\r\n    block: 's',\r\n    groupNumber: 1,\r\n    color: GROUP_COLORS.alkali,\r\n    description: 'Weiches, hochreaktives Metall. Schmilzt in der Hand. Przisesste Zeitnormal.',\r\n    theme: 'precision',\r\n    experiments: ['schmelzen', 'atomuhr', 'explosion']\r\n  },\r\n\r\n  {\r\n    symbol: 'Ba',\r\n    name: 'Barium',\r\n    atomicNumber: 56,\r\n    mass: 137.33,\r\n    group: 'alkalineEarth',\r\n    period: 6,\r\n    block: 's',\r\n    groupNumber: 2,\r\n    color: GROUP_COLORS.alkalineEarth,\r\n    description: 'Fr medizinische Kontrastmittel und grne Feuerwerke. Schwerkresistent.',\r\n    theme: 'medical',\r\n    experiments: ['kontrastmittel', 'feuerwerk', 'magnet']\r\n  },\r\n\r\n  {\r\n    symbol: 'La',\r\n    name: 'Lanthan',\r\n    atomicNumber: 57,\r\n    mass: 138.91,\r\n    group: 'lanthanide',\r\n    period: 6,\r\n    block: 'f',\r\n    groupNumber: 3,\r\n    color: GROUP_COLORS.lanthanide,\r\n    description: 'Weiches, duktils Metall. Fr Hybridauto-Batterien und Zndsteine.',\r\n    theme: 'technology',\r\n    experiments: ['batterie', 'zndsteine', 'optik']\r\n  },\r\n\r\n  {\r\n    symbol: 'Ce',\r\n    name: 'Cer',\r\n    atomicNumber: 58,\r\n    mass: 140.12,\r\n    group: 'lanthanide',\r\n    period: 6,\r\n    block: 'f',\r\n    groupNumber: 3,\r\n    color: GROUP_COLORS.lanthanide,\r\n    description: 'Hufigstes Lanthanoid. Fr Ferrocer-Feuerzeuge und Autokatalysatoren.',\r\n    theme: 'technology',\r\n    experiments: ['feuerzeuge', 'katalysator', 'selbstreinigend']\r\n  },\r\n\r\n  {\r\n    symbol: 'Pr',\r\n    name: 'Praseodym',\r\n    atomicNumber: 59,\r\n    mass: 140.91,\r\n    group: 'lanthanide',\r\n    period: 6,\r\n    block: 'f',\r\n    groupNumber: 3,\r\n    color: GROUP_COLORS.lanthanide,\r\n    description: 'Fr Magnetlegierungen und Grne Farbe. Wichtig fr Hightech-Legierungen.',\r\n    theme: 'technology',\r\n    experiments: ['magnet', 'grn', 'legierung']\r\n  },\r\n\r\n  {\r\n    symbol: 'Nd',\r\n    name: 'Neodym',\r\n    atomicNumber: 60,\r\n    mass: 144.24,\r\n    group: 'lanthanide',\r\n    period: 6,\r\n    block: 'f',\r\n    groupNumber: 3,\r\n    color: GROUP_COLORS.lanthanide,\r\n    description: 'Strkste Permanentmagnete. Fr Kopfhrer, Windturbinen und Festplatten.',\r\n    theme: 'technology',\r\n    experiments: ['magnet', 'kopfhrer', 'windturbine']\r\n  },\r\n\r\n  {\r\n    symbol: 'Pm',\r\n    name: 'Promethium',\r\n    atomicNumber: 61,\r\n    mass: 145,\r\n    group: 'lanthanide',\r\n    period: 6,\r\n    block: 'f',\r\n    groupNumber: 3,\r\n    color: GROUP_COLORS.lanthanide,\r\n    description: 'Knstliches, radioaktives Element. Fr Kernbatterien in Raumfahrzeugen.',\r\n    theme: 'space',\r\n    experiments: ['knstlich', 'kernbatterie', 'radioaktiv']\r\n  },\r\n\r\n  {\r\n    symbol: 'Sm',\r\n    name: 'Samarium',\r\n    atomicNumber: 62,\r\n    mass: 150.36,\r\n    group: 'lanthanide',\r\n    period: 6,\r\n    block: 'f',\r\n    groupNumber: 3,\r\n    color: GROUP_COLORS.lanthanide,\r\n    description: 'Fr Permanentmagnete und Kernreaktor-Steuerstbe.',\r\n    theme: 'nuclear',\r\n    experiments: ['magnet', 'reaktor', 'absorber']\r\n  },\r\n\r\n  {\r\n    symbol: 'Eu',\r\n    name: 'Europium',\r\n    atomicNumber: 63,\r\n    mass: 151.96,\r\n    group: 'lanthanide',\r\n    period: 6,\r\n    block: 'f',\r\n    groupNumber: 3,\r\n    color: GROUP_COLORS.lanthanide,\r\n    description: 'Rot phosphoreszierend in Euro-Scheinen. Fr Sicherheit und Lasermaterialien.',\r\n    theme: 'security',\r\n    experiments: ['phosphoreszenz', 'euro', 'laser']\r\n  },\r\n\r\n  {\r\n    symbol: 'Gd',\r\n    name: 'Gadolinium',\r\n    atomicNumber: 64,\r\n    mass: 157.25,\r\n    group: 'lanthanide',\r\n    period: 6,\r\n    block: 'f',\r\n    groupNumber: 3,\r\n    color: GROUP_COLORS.lanthanide,\r\n    description: 'Hchste Neutronenabsorption. Fr MRT-Kontrastmittel und Kernreaktorsteuerung.',\r\n    theme: 'medical',\r\n    experiments: ['mrt', 'reaktor', 'absorber']\r\n  },\r\n\r\n  {\r\n    symbol: 'Tb',\r\n    name: 'Terbium',\r\n    atomicNumber: 65,\r\n    mass: 158.93,\r\n    group: 'lanthanide',\r\n    period: 6,\r\n    block: 'f',\r\n    groupNumber: 3,\r\n    color: GROUP_COLORS.lanthanide,\r\n    description: 'Weiches Lanthanoid. Fr Phosphorleuchtstoffe und Elektromotore.',\r\n    theme: 'technology',\r\n    experiments: ['phosphor', 'magnet', 'motor']\r\n  },\r\n\r\n  {\r\n    symbol: 'Dy',\r\n    name: 'Dysprosium',\r\n    atomicNumber: 66,\r\n    mass: 162.50,\r\n    group: 'lanthanide',\r\n    period: 6,\r\n    block: 'f',\r\n    groupNumber: 3,\r\n    color: GROUP_COLORS.lanthanide,\r\n    description: 'Hochwertiges Lanthanoid. Fr Kernreaktorsteuerstbe und Magnetlegierungen.',\r\n    theme: 'nuclear',\r\n    experiments: ['reaktor', 'magnet', 'legierung']\r\n  },\r\n\r\n  {\r\n    symbol: 'Ho',\r\n    name: 'Holmium',\r\n    atomicNumber: 67,\r\n    mass: 164.93,\r\n    group: 'lanthanide',\r\n    period: 6,\r\n    block: 'f',\r\n    groupNumber: 3,\r\n    color: GROUP_COLORS.lanthanide,\r\n    description: 'Besitzt hchstes magnetisches Moment aller Elemente. Fr Laser und Hochleistungsmagnete.',\r\n    theme: 'technology',\r\n    experiments: ['laser', 'magnet', 'hochleistung']\r\n  },\r\n\r\n  {\r\n    symbol: 'Er',\r\n    name: 'Erbium',\r\n    atomicNumber: 68,\r\n    mass: 167.26,\r\n    group: 'lanthanide',\r\n    period: 6,\r\n    block: 'f',\r\n    groupNumber: 3,\r\n    color: GROUP_COLORS.lanthanide,\r\n    description: 'Fr Glasfaser-Verstrker und optische Verstrker. Rosarotes Leuchten.',\r\n    theme: 'technology',\r\n    experiments: ['glasfaser', 'optik', 'laser']\r\n  },\r\n\r\n  {\r\n    symbol: 'Tm',\r\n    name: 'Thulium',\r\n    atomicNumber: 69,\r\n    mass: 168.93,\r\n    group: 'lanthanide',\r\n    period: 6,\r\n    block: 'f',\r\n    groupNumber: 3,\r\n    color: GROUP_COLORS.lanthanide,\r\n    description: 'Fr medizinische Rntgenanlagen. Rntgen-Kontrastmittel.',\r\n    theme: 'medical',\r\n    experiments: ['rntgen', 'medizin', 'laser']\r\n  },\r\n\r\n  {\r\n    symbol: 'Yb',\r\n    name: 'Ytterbium',\r\n    atomicNumber: 70,\r\n    mass: 173.05,\r\n    group: 'lanthanide',\r\n    period: 6,\r\n    block: 'f',\r\n    groupNumber: 3,\r\n    color: GROUP_COLORS.lanthanide,\r\n    description: 'Fr Stahllegierungen und Rntgenanlagen. Rote Lumineszenz.',\r\n    theme: 'industry',\r\n    experiments: ['legierung', 'rntgen', 'luminiszenz']\r\n  },\r\n\r\n  {\r\n    symbol: 'Lu',\r\n    name: 'Lutetium',\r\n    atomicNumber: 71,\r\n    mass: 174.97,\r\n    group: 'lanthanide',\r\n    period: 6,\r\n    block: 'f',\r\n    groupNumber: 3,\r\n    color: GROUP_COLORS.lanthanide,\r\n    description: 'Letztes natrliches Lanthanoid. Fr PET-Scanner und Katalysatoren.',\r\n    theme: 'technology',\r\n    experiments: ['scanner', 'katalysator', 'spektrometer']\r\n  },\r\n\r\n  {\r\n    symbol: 'Hf',\r\n    name: 'Hafnium',\r\n    atomicNumber: 72,\r\n    mass: 178.49,\r\n    group: 'transition',\r\n    period: 6,\r\n    block: 'd',\r\n    groupNumber: 4,\r\n    color: GROUP_COLORS.transition,\r\n    description: 'Korrosionsbestndiges Metall. Fr Reaktordruckbehlter und Kernenergieanwendungen.',\r\n    theme: 'nuclear',\r\n    experiments: ['reaktor', 'kernenergie', 'legierung']\r\n  },\r\n\r\n  {\r\n    symbol: 'Ta',\r\n    name: 'Tantal',\r\n    atomicNumber: 73,\r\n    mass: 180.95,\r\n    group: 'transition',\r\n    period: 6,\r\n    block: 'd',\r\n    groupNumber: 5,\r\n    color: GROUP_COLORS.transition,\r\n    description: 'Extrem korrosionsbestndig. Fr Kondensatoren und elektronische Bauteile.',\r\n    theme: 'electronics',\r\n    experiments: ['kondensator', 'elektronik', 'korrosion']\r\n  },\r\n\r\n  {\r\n    symbol: 'W',\r\n    name: 'Wolfram',\r\n    atomicNumber: 74,\r\n    mass: 183.84,\r\n    group: 'transition',\r\n    period: 6,\r\n    block: 'd',\r\n    groupNumber: 6,\r\n    color: GROUP_COLORS.transition,\r\n    description: 'Hchster Schmelzpunkt aller Elemente. Fr Glhbirnen und Wolframbearbeitung.',\r\n    theme: 'technology',\r\n    experiments: ['glhbirne', 'bearbeitung', 'legierung']\r\n  },\r\n\r\n  {\r\n    symbol: 'Re',\r\n    name: 'Rhenium',\r\n    atomicNumber: 75,\r\n    mass: 186.21,\r\n    group: 'transition',\r\n    period: 6,\r\n    block: 'd',\r\n    groupNumber: 7,\r\n    color: GROUP_COLORS.transition,\r\n    description: 'Selteneres, hochschmelzendes Metall. Fr Dsenlufer und Hochtemperaturlegierungen.',\r\n    theme: 'aerospace',\r\n    experiments: ['dsenlufer', 'hochtemperatur', 'legierung']\r\n  },\r\n\r\n  {\r\n    symbol: 'Os',\r\n    name: 'Osmium',\r\n    atomicNumber: 76,\r\n    mass: 190.23,\r\n    group: 'transition',\r\n    period: 6,\r\n    block: 'd',\r\n    groupNumber: 8,\r\n    color: GROUP_COLORS.transition,\r\n    description: 'Dichtestes natrliches Element. Fr Schreibspitzen und Implantate.',\r\n    theme: 'technology',\r\n    experiments: ['schreibspitzen', 'implantat', 'legierung']\r\n  },\r\n\r\n  {\r\n    symbol: 'Ir',\r\n    name: 'Iridium',\r\n    atomicNumber: 77,\r\n    mass: 192.22,\r\n    group: 'transition',\r\n    period: 6,\r\n    block: 'd',\r\n    groupNumber: 9,\r\n    color: GROUP_COLORS.transition,\r\n    description: 'Extrem korrosionsbestndiges Metall. Fr Zndkerzen und Elektroden.',\r\n    theme: 'technology',\r\n    experiments: ['zndkerzen', 'elektroden', 'legierung']\r\n  },\r\n\r\n  {\r\n    symbol: 'Pt',\r\n    name: 'Platin',\r\n    atomicNumber: 78,\r\n    mass: 195.08,\r\n    group: 'transition',\r\n    period: 6,\r\n    block: 'd',\r\n    groupNumber: 10,\r\n    color: GROUP_COLORS.transition,\r\n    description: 'Edelmetall fr Katalysatoren, Schmuck und Katalysatoren. Bestndiger als Gold.',\r\n    theme: 'precious',\r\n    experiments: ['katalysator', 'schmuck', 'legierung']\r\n  },\r\n\r\n  {\r\n    symbol: 'Au',\r\n    name: 'Gold',\r\n    atomicNumber: 79,\r\n    mass: 196.97,\r\n    group: 'transition',\r\n    period: 6,\r\n    block: 'd',\r\n    groupNumber: 11,\r\n    color: GROUP_COLORS.transition,\r\n    description: 'Edelstes Metall, einziges gelbes Metall (relativistische Effekte). Fr Elektronik und Schmuck.',\r\n    theme: 'treasure',\r\n    experiments: ['ductilitt', 'legierungen', 'elektroplattierung']\r\n  },\r\n\r\n  {\r\n    symbol: 'Hg',\r\n    name: 'Quecksilber',\r\n    atomicNumber: 80,\r\n    mass: 200.59,\r\n    group: 'transition',\r\n    period: 6,\r\n    block: 'd',\r\n    groupNumber: 12,\r\n    color: GROUP_COLORS.transition,\r\n    description: 'Einziges flssiges Metall bei Raumtemperatur. Fr Thermometer und Alchemiehistorie.',\r\n    theme: 'historical',\r\n    experiments: ['flssig', 'thermometer', 'alchemie']\r\n  },\r\n\r\n  {\r\n    symbol: 'Tl',\r\n    name: 'Thallium',\r\n    atomicNumber: 81,\r\n    mass: 204.38,\r\n    group: 'metal',\r\n    period: 6,\r\n    block: 'p',\r\n    groupNumber: 13,\r\n    color: GROUP_COLORS.metal,\r\n    description: 'Giftiges, weiches Metall. Historisch in Mordfllen verwendet. Fr Glasherstellung.',\r\n    theme: 'toxic',\r\n    experiments: ['gift', 'glasherstellung', 'temperatur']\r\n  },\r\n\r\n  {\r\n    symbol: 'Pb',\r\n    name: 'Blei',\r\n    atomicNumber: 82,\r\n    mass: 207.2,\r\n    group: 'metal',\r\n    period: 6,\r\n    block: 'p',\r\n    groupNumber: 14,\r\n    color: GROUP_COLORS.metal,\r\n    description: 'Schwerstes stabiles Element. Fr Akkus und Rntgenschutz. Rmisches Erbe.',\r\n    theme: 'history',\r\n    experiments: ['akkus', 'rntgen', 'blei']\r\n  },\r\n\r\n  {\r\n    symbol: 'Bi',\r\n    name: 'Wismut',\r\n    atomicNumber: 83,\r\n    mass: 208.98,\r\n    group: 'metalloid',\r\n    period: 6,\r\n    block: 'p',\r\n    groupNumber: 15,\r\n    color: GROUP_COLORS.metalloid,\r\n    description: 'Dichtes, schmelzendes Metall. Fr Kosmetika, Schmiermittel und Rntgenkontrast.',\r\n    theme: 'medical',\r\n    experiments: ['kosmetika', 'schmiermittel', 'rntgen']\r\n  },\r\n\r\n  {\r\n    symbol: 'Po',\r\n    name: 'Polonium',\r\n    atomicNumber: 84,\r\n    mass: 209,\r\n    group: 'metalloid',\r\n    period: 6,\r\n    block: 'p',\r\n    groupNumber: 16,\r\n    color: GROUP_COLORS.metalloid,\r\n    description: 'Hochradioaktiv, starkes Metall. Historisch berhmt (Curie). Fr Alphastrahler.',\r\n    theme: 'nuclear',\r\n    experiments: ['alphastrahler', 'radioaktiv', 'wrmequelle']\r\n  },\r\n\r\n  {\r\n    symbol: 'At',\r\n    name: 'Astatin',\r\n    atomicNumber: 85,\r\n    mass: 210,\r\n    group: 'halogen',\r\n    period: 6,\r\n    block: 'p',\r\n    groupNumber: 17,\r\n    color: GROUP_COLORS.halogen,\r\n    description: 'Seltenstes natrliches Element. Halbwertszeit ~8 Stunden. Fr Forschung.',\r\n    theme: 'research',\r\n    experiments: ['forschung', 'halbwertszeit', 'instabil']\r\n  },\r\n\r\n  {\r\n    symbol: 'Rn',\r\n    name: 'Radon',\r\n    atomicNumber: 86,\r\n    mass: 222,\r\n    group: 'nobleGas',\r\n    period: 6,\r\n    block: 'p',\r\n    groupNumber: 18,\r\n    color: NOBLE_GAS_COLORS.Rn,\r\n    description: 'Radionuklid, zweithufigste Lungenkrebsursache. Fr Radonmessung und Schutz.',\r\n    theme: 'radiation',\r\n    experiments: ['radonmessung', 'schutz', 'zerfall']\r\n  },\r\n\r\n  {\r\n    symbol: 'Fr',\r\n    name: 'Francium',\r\n    atomicNumber: 87,\r\n    mass: 223,\r\n    group: 'alkali',\r\n    period: 7,\r\n    block: 's',\r\n    groupNumber: 1,\r\n    color: GROUP_COLORS.alkali,\r\n    description: 'Instabil, radioaktiv. Nie makroskopisch beobachtet. Hypothetische Wasserreaktion.',\r\n    theme: 'theoretical',\r\n    experiments: ['instabil', 'halbwertszeit', 'theoretisch']\r\n  },\r\n\r\n  {\r\n    symbol: 'Ra',\r\n    name: 'Radium',\r\n    atomicNumber: 88,\r\n    mass: 226,\r\n    group: 'alkalineEarth',\r\n    period: 7,\r\n    block: 's',\r\n    groupNumber: 2,\r\n    color: GROUP_COLORS.alkalineEarth,\r\n    description: 'Hochradioaktiv, luminiszierendes Metall. Leuchtet im Dunkeln. Fr historische Lampen.',\r\n    theme: 'historical',\r\n    experiments: ['leuchten', 'historisch', 'radioaktiv']\r\n  },\r\n\r\n  {\r\n    symbol: 'Ac',\r\n    name: 'Actinium',\r\n    atomicNumber: 89,\r\n    mass: 227,\r\n    group: 'actinide',\r\n    period: 7,\r\n    block: 'f',\r\n    groupNumber: 3,\r\n    color: GROUP_COLORS.actinide,\r\n    description: 'Namensgeber der Actinoide. Radioaktiv. Ausgangsstoff fr Urananreicherung.',\r\n    theme: 'nuclear',\r\n    experiments: ['urananreicherung', 'strahlung', 'zerfall']\r\n  },\r\n\r\n  {\r\n    symbol: 'Th',\r\n    name: 'Thorium',\r\n    atomicNumber: 90,\r\n    mass: 232.04,\r\n    group: 'actinide',\r\n    period: 7,\r\n    block: 'f',\r\n    groupNumber: 3,\r\n    color: GROUP_COLORS.actinide,\r\n    description: 'Fr Flssigsalzreaktoren. Sicherer und abundanter als Uran. Mythologisch benannt.',\r\n    theme: 'nuclear',\r\n    experiments: ['flssigsalzreaktor', 'sicherheit', 'kernenergie']\r\n  },\r\n\r\n  {\r\n    symbol: 'Pa',\r\n    name: 'Protactinium',\r\n    atomicNumber: 91,\r\n    mass: 231.04,\r\n    group: 'actinide',\r\n    period: 7,\r\n    block: 'f',\r\n    groupNumber: 3,\r\n    color: GROUP_COLORS.actinide,\r\n    description: 'Selteneres, radioaktives Element. Fr Kernreaktor-Forschung.',\r\n    theme: 'research',\r\n    experiments: ['forschung', 'kernreaktor', 'urananreicherung']\r\n  },\r\n\r\n  {\r\n    symbol: 'Np',\r\n    name: 'Neptunium',\r\n    atomicNumber: 93,\r\n    mass: 237,\r\n    group: 'actinide',\r\n    period: 7,\r\n    block: 'f',\r\n    groupNumber: 3,\r\n    color: GROUP_COLORS.actinide,\r\n    description: 'Knstliches Element. Erste in Atomversuchen produziert. Fr Plutonium-Herstellung.',\r\n    theme: 'nuclear',\r\n    experiments: ['knstlich', 'plutonium', 'reaktor']\r\n  },\r\n\r\n  {\r\n    symbol: 'Pu',\r\n    name: 'Plutonium',\r\n    atomicNumber: 94,\r\n    mass: 244,\r\n    group: 'actinide',\r\n    period: 7,\r\n    block: 'f',\r\n    groupNumber: 3,\r\n    color: GROUP_COLORS.actinide,\r\n    description: 'Tdlichste Substanz. Mikrogramm knnen tten. Fr Kernwaffen und Raumfahrt-RTGs.',\r\n    theme: 'nuclear',\r\n    experiments: ['kernwaffen', 'raumfahrt', 'gefahr']\r\n  },\r\n\r\n  {\r\n    symbol: 'Am',\r\n    name: 'Americium',\r\n    atomicNumber: 95,\r\n    mass: 243,\r\n    group: 'actinide',\r\n    period: 7,\r\n    block: 'f',\r\n    groupNumber: 3,\r\n    color: GROUP_COLORS.actinide,\r\n    description: 'Knstliches Element. Entdeckt in H-Bomben-Fallout (Ivy Mike 1952). Fr Rauchdetektoren.',\r\n    theme: 'space',\r\n    experiments: ['rauchdetektor', 'h-bombe', 'spuren']\r\n  },\r\n\r\n  {\r\n    symbol: 'Cm',\r\n    name: 'Curium',\r\n    atomicNumber: 96,\r\n    mass: 247,\r\n    group: 'actinide',\r\n    period: 7,\r\n    block: 'f',\r\n    groupNumber: 3,\r\n    color: GROUP_COLORS.actinide,\r\n    description: 'Knstliches Element. Namensgeber: Pierre und Marie Curie. Fr Raumschiff-RTGs.',\r\n    theme: 'space',\r\n    experiments: ['raumfahrt', 'curie', 'kernenergie']\r\n  },\r\n\r\n  {\r\n    symbol: 'Bk',\r\n    name: 'Berkelium',\r\n    atomicNumber: 97,\r\n    mass: 247,\r\n    group: 'actinide',\r\n    period: 7,\r\n    block: 'f',\r\n    groupNumber: 3,\r\n    color: GROUP_COLORS.actinide,\r\n    description: 'Knstliches Element. Sehr kurzlebig. Fr wissenschaftliche Forschung.',\r\n    theme: 'research',\r\n    experiments: ['forschung', 'kernchemie', 'instabil']\r\n  },\r\n\r\n  {\r\n    symbol: 'Cf',\r\n    name: 'Californium',\r\n    atomicNumber: 98,\r\n    mass: 251,\r\n    group: 'actinide',\r\n    period: 7,\r\n    block: 'f',\r\n    groupNumber: 3,\r\n    color: GROUP_COLORS.actinide,\r\n    description: 'Knstliches Element. Fr Neutronenquellen und Elementsynthese.',\r\n    theme: 'nuclear',\r\n    experiments: ['neutronenquelle', 'synthese', 'zerfall']\r\n  },\r\n\r\n  {\r\n    symbol: 'Es',\r\n    name: 'Einsteinium',\r\n    atomicNumber: 99,\r\n    mass: 252,\r\n    group: 'actinide',\r\n    period: 7,\r\n    block: 'f',\r\n    groupNumber: 3,\r\n    color: GROUP_COLORS.actinide,\r\n    description: 'Knstliches Element. Entdeckt 1952 im Fallout der H-Bombe Ivy Mike. In Gedenken an Einstein.',\r\n    theme: 'history',\r\n    experiments: ['historisch', 'h-bombe', 'memorial']\r\n  },\r\n\r\n  {\r\n    symbol: 'Fm',\r\n    name: 'Fermium',\r\n    atomicNumber: 100,\r\n    mass: 257,\r\n    group: 'actinide',\r\n    period: 7,\r\n    block: 'f',\r\n    groupNumber: 3,\r\n    color: GROUP_COLORS.actinide,\r\n    description: 'Knstliches Element. Namensgeber: Enrico Fermi. Fr theoretische Kernreaktoren.',\r\n    theme: 'research',\r\n    experiments: ['reaktor', 'theoretisch', 'nuklearphysik']\r\n  },\r\n\r\n  {\r\n    symbol: 'Md',\r\n    name: 'Mendelevium',\r\n    atomicNumber: 101,\r\n    mass: 258,\r\n    group: 'actinide',\r\n    period: 7,\r\n    block: 'f',\r\n    groupNumber: 3,\r\n    color: GROUP_COLORS.actinide,\r\n    description: 'Knstliches Element. In Gedenken an Mendelejew. Ehemaliges Element 101.',\r\n    theme: 'history',\r\n    experiments: ['historisch', 'periodensystem', 'tradition']\r\n  },\r\n\r\n  {\r\n    symbol: 'No',\r\n    name: 'Nobelium',\r\n    atomicNumber: 102,\r\n    mass: 259,\r\n    group: 'actinide',\r\n    period: 7,\r\n    block: 'f',\r\n    groupNumber: 3,\r\n    color: GROUP_COLORS.actinide,\r\n    description: 'Knstliches Element. Benannt nach Alfred Nobel. Fr wissenschaftliche Anerkennung.',\r\n    theme: 'history',\r\n    experiments: ['auszeichnung', 'nobelpreis', 'forschung']\r\n  },\r\n\r\n  {\r\n    symbol: 'Lr',\r\n    name: 'Lawrencium',\r\n    atomicNumber: 103,\r\n    mass: 262,\r\n    group: 'actinide',\r\n    period: 7,\r\n    block: 'f',\r\n    groupNumber: 3,\r\n    color: GROUP_COLORS.actinide,\r\n    description: 'Letztes natrliches Element. Namensgeber: Ernest Lawrence. Entdeckung der Lanthanoide.',\r\n    theme: 'discovery',\r\n    experiments: ['entdeckung', 'synchrotron', 'teilchenbeschleuniger']\r\n  },\r\n\r\n  {\r\n    symbol: 'Rf',\r\n    name: 'Rutherfordium',\r\n    atomicNumber: 104,\r\n    mass: 267,\r\n    group: 'actinide',\r\n    period: 7,\r\n    block: 'd',\r\n    groupNumber: 4,\r\n    color: GROUP_COLORS.actinide,\r\n    description: 'Knstliches Element. Namensgeber: Ernest Rutherford. Entdeckung des Atomkerns.',\r\n    theme: 'research',\r\n    experiments: ['kernphysik', 'teilchen', 'reaktor']\r\n  },\r\n\r\n  {\r\n    symbol: 'Db',\r\n    name: 'Dubnium',\r\n    atomicNumber: 105,\r\n    mass: 268,\r\n    group: 'actinide',\r\n    period: 7,\r\n    block: 'd',\r\n    groupNumber: 5,\r\n    color: GROUP_COLORS.actinide,\r\n    description: 'Knstliches Element. Namensgeber: Stadt Dubna. Forschungszentrum Russlands.',\r\n    theme: 'research',\r\n    experiments: ['forschung', 'kernchemie', 'instabil']\r\n  },\r\n\r\n  {\r\n    symbol: 'Sg',\r\n    name: 'Seaborgium',\r\n    atomicNumber: 106,\r\n    mass: 269,\r\n    group: 'actinide',\r\n    period: 7,\r\n    block: 'd',\r\n    groupNumber: 6,\r\n    color: GROUP_COLORS.actinide,\r\n    description: 'Knstliches Element. Namensgeber: Glenn Seaborg. Forschungszentrum USA.',\r\n    theme: 'research',\r\n    experiments: ['forschung', 'chemie', 'synthese']\r\n  },\r\n\r\n  {\r\n    symbol: 'Bh',\r\n    name: 'Bohrium',\r\n    atomicNumber: 107,\r\n    mass: 270,\r\n    group: 'actinide',\r\n    period: 7,\r\n    block: 'd',\r\n    groupNumber: 7,\r\n    color: GROUP_COLORS.actinide,\r\n    description: 'Knstliches Element. Namensgeber: Niels Bohr. Quantenmechanik-Revolution.',\r\n    theme: 'science',\r\n    experiments: ['quantenmechanik', 'theoretisch', 'modell']\r\n  },\r\n\r\n  {\r\n    symbol: 'Hs',\r\n    name: 'Hassium',\r\n    atomicNumber: 108,\r\n    mass: 277,\r\n    group: 'actinide',\r\n    period: 7,\r\n    block: 'd',\r\n    groupNumber: 8,\r\n    color: GROUP_COLORS.actinide,\r\n    description: 'Knstliches Element. Namensgeber: Hessen (Bundesland). Erste deutsche Entdeckung.',\r\n    theme: 'discovery',\r\n    experiments: ['entdeckung', 'deutsch', 'teilchen']\r\n  },\r\n\r\n  {\r\n    symbol: 'Mt',\r\n    name: 'Meitnerium',\r\n    atomicNumber: 109,\r\n    mass: 278,\r\n    group: 'actinide',\r\n    period: 7,\r\n    block: 'd',\r\n    groupNumber: 8,\r\n    color: GROUP_COLORS.actinide,\r\n    description: 'Knstliches Element. Namensgeber: Lise Meitner. Entdeckung der Kernspaltung.',\r\n    theme: 'history',\r\n    experiments: ['kernspaltung', 'uran', 'geschichte']\r\n  },\r\n\r\n  {\r\n    symbol: 'Ds',\r\n    name: 'Darmstadtium',\r\n    atomicNumber: 110,\r\n    mass: 281,\r\n    group: 'actinide',\r\n    period: 7,\r\n    block: 'd',\r\n    groupNumber: 8,\r\n    color: GROUP_COLORS.actinide,\r\n    description: 'Knstliches Element. Namensgeber: Darmstadt. GSI Teilchenbeschleuniger.',\r\n    theme: 'research',\r\n    experiments: ['teilchenbeschleuniger', 'schwerionen', 'synthese']\r\n  },\r\n\r\n  {\r\n    symbol: 'Rg',\r\n    name: 'Roentgenium',\r\n    atomicNumber: 111,\r\n    mass: 282,\r\n    group: 'actinide',\r\n    period: 7,\r\n    block: 'd',\r\n    groupNumber: 8,\r\n    color: GROUP_COLORS.actinide,\r\n    description: 'Knstliches Element. Namensgeber: Wilhelm Rntgen. Fr medizinische Bildgebung.',\r\n    theme: 'medical',\r\n    experiments: ['rntgen', 'medizin', 'synthese']\r\n  },\r\n\r\n  {\r\n    symbol: 'Cn',\r\n    name: 'Copernicium',\r\n    atomicNumber: 112,\r\n    mass: 285,\r\n    group: 'actinide',\r\n    period: 7,\r\n    block: 'd',\r\n    groupNumber: 8,\r\n    color: GROUP_COLORS.actinide,\r\n    description: 'Knstliches Element. Namensgeber: Nikolaus Kopernikus. Revolution des Weltbilds.',\r\n    theme: 'history',\r\n    experiments: ['astronomie', 'revolution', 'universum']\r\n  },\r\n\r\n  {\r\n    symbol: 'Nh',\r\n    name: 'Nihonium',\r\n    atomicNumber: 113,\r\n    mass: 286,\r\n    group: 'actinide',\r\n    period: 7,\r\n    block: 'd',\r\n    groupNumber: 8,\r\n    color: GROUP_COLORS.actinide,\r\n    description: 'Knstliches Element. Namensgeber: Japan. Fr Elementsynthese-Forschung.',\r\n    theme: 'research',\r\n    experiments: ['synthese', 'element', 'forschung']\r\n  },\r\n\r\n  {\r\n    symbol: 'Fl',\r\n    name: 'Flerovium',\r\n    atomicNumber: 114,\r\n    mass: 289,\r\n    group: 'actinide',\r\n    period: 7,\r\n    block: 'd',\r\n    groupNumber: 8,\r\n    color: GROUP_COLORS.actinide,\r\n    description: 'Knstliches Element. Namensgeber: Georgij Flerow. Fr theoretische Physik.',\r\n    theme: 'science',\r\n    experiments: ['theoretisch', 'modell', 'stabilitt']\r\n  },\r\n\r\n  {\r\n    symbol: 'Mc',\r\n    name: 'Moscovium',\r\n    atomicNumber: 115,\r\n    mass: 290,\r\n    group: 'actinide',\r\n    period: 7,\r\n    block: 'd',\r\n    groupNumber: 8,\r\n    color: GROUP_COLORS.actinide,\r\n    description: 'Knstliches Element. Namensgeber: Moskau. Dubiose Entdeckungsgeschichte.',\r\n    theme: 'history',\r\n    experiments: ['dubios', 'synthese', 'wissenschaft']\r\n  },\r\n\r\n  {\r\n    symbol: 'Lv',\r\n    name: 'Livermorium',\r\n    atomicNumber: 116,\r\n    mass: 293,\r\n    group: 'actinide',\r\n    period: 7,\r\n    block: 'd',\r\n    groupNumber: 8,\r\n    color: GROUP_COLORS.actinide,\r\n    description: 'Knstliches Element. Namensgeber: Lawrence Livermore National Laboratory. Element 116.',\r\n    theme: 'research',\r\n    experiments: ['element116', 'kernreaktor', 'synthese']\r\n  },\r\n\r\n  {\r\n    symbol: 'Ts',\r\n    name: 'Tennessin',\r\n    atomicNumber: 117,\r\n    mass: 294,\r\n    group: 'actinide',\r\n    period: 7,\r\n    block: 'd',\r\n    groupNumber: 8,\r\n    color: GROUP_COLORS.actinide,\r\n    description: 'Knstliches Element. Namensgeber: Tennessee (USA). Superheavy-Elemente-Forschung.',\r\n    theme: 'research',\r\n    experiments: ['superheavy', 'inselfstabilitt', 'synthese']\r\n  },\r\n\r\n  {\r\n    symbol: 'Og',\r\n    name: 'Oganesson',\r\n    atomicNumber: 118,\r\n    mass: 294,\r\n    group: 'actinide',\r\n    period: 7,\r\n    block: 'd',\r\n    groupNumber: 8,\r\n    color: GROUP_COLORS.actinide,\r\n    description: 'Schwerstes natrliches Element. Namensgeber: Yuri Oganessian. Insel der Stabilitt gesucht.',\r\n    theme: 'discovery',\r\n    experiments: ['inselfstabilitt', 'insel', 'theoretisch']\r\n  }\r\n];\r\n\r\n// Get element by atomic number\r\nexport function getElementByNumber(atomicNumber) {\r\n  return ELEMENTS.find(e => e.atomicNumber === atomicNumber);\r\n}\r\n\r\n// Get element by symbol\r\nexport function getElementBySymbol(symbol) {\r\n  return ELEMENTS.find(e => e.symbol === symbol);\r\n}\r\n\r\n// Get elements by group\r\nexport function getElementsByGroup(group) {\r\n  return ELEMENTS.filter(e => e.group === group);\r\n}\r\n\r\n// Get elements by period\r\nexport function getElementsByPeriod(period) {\r\n  return ELEMENTS.filter(e => e.period === period);\r\n}\r\n\r\n// Experimental Rooms\r\nexport const EXPERIMENTAL_ROOMS = [\r\n  {\r\n    id: 'reaction_lab',\r\n    name: 'Reaktionslabor',\r\n    description: 'Die Alchemistenwerkstatt',\r\n    icon: '',\r\n    color: 0xFF6B6B,\r\n    experiments: ['alkali_water', 'thermit', 'elefantenzahnpasta']\r\n  },\r\n  {\r\n    id: 'nuclear_chamber',\r\n    name: 'Nuklearphysik',\r\n    description: 'Kernkraftwerk-Kontrollraum',\r\n    icon: '',\r\n    color: 0x4A69BD,\r\n    experiments: ['fission', 'fusion', 'decay']\r\n  },\r\n  {\r\n    id: 'electrochem_lab',\r\n    name: 'Elektrochemie',\r\n    description: 'Batterien und Elektrolyse',\r\n    ion: '',\r\n    color: 0x74B9FF,\r\n    experiments: ['lion_battery', 'galvanic', 'electrolysis']\r\n  },\r\n  {\r\n    id: 'organic_chem',\r\n    name: 'Organische Chemie',\r\n    description: 'Das Kohlenstoff-Universum',\r\n    icon: '',\r\n    color: 0x20C997,\r\n    experiments: ['dna', 'proteins', 'polymers']\r\n  },\r\n  {\r\n    id: 'extreme_conditions',\r\n    name: 'Extreme Bedingungen',\r\n    description: 'Grenzen der Materie',\r\n    icon: '',\r\n    color: 0xFFA94D,\r\n    experiments: ['superfluid', 'plasma', 'highpressure']\r\n  },\r\n  {\r\n    id: 'industrial_apps',\r\n    name: 'Industrielle Anwendungen',\r\n    description: 'Groindustrie der Chemie',\r\n    icon: '',\r\n    color: 0x74B9FF,\r\n    experiments: ['haberbosch', 'blastfurnace', 'petrochemical']\r\n  },\r\n  {\r\n    id: 'historical_lab',\r\n    name: 'Historisches Labor',\r\n    description: 'Meilensteine der Entdeckung',\r\n    icon: '',\r\n    color: 0xD63384,\r\n    experiments: ['marie_curie', 'lavoisier', 'mendeleev']\r\n  },\r\n  {\r\n    id: 'space_chem',\r\n    name: 'Weltraumchemie',\r\n    description: 'Chemie im Kosmos',\r\n    icon: '',\r\n    color: 0x0A0A1A,\r\n    experiments: ['nucleosynthesis', 'meteorites', 'interstellar']\r\n  },\r\n  {\r\n    id: 'nano_world',\r\n    name: 'Nano-Welt',\r\n    description: 'Die atomare Perspektive',\r\n    icon: '',\r\n    color: 0x17A2B8,\r\n    experiments: ['crystals', 'orbitals', 'nanotubes']\r\n  },\r\n  {\r\n    id: 'challenge_arena',\r\n    name: 'Challenge-Arena',\r\n    description: 'Quiz und Wettkampf',\r\n    icon: '',\r\n    color: 0xFFC107,\r\n    experiments: ['quiz', 'puzzle', 'escape_room']\r\n  }\r\n];\r\n","import * as THREE from 'three';\r\nimport { Text, Position, ParentObject3D, Object3D, Children } from '../components/index.js';\r\nimport { ELEMENTS, EXPERIMENTAL_ROOMS, GROUP_COLORS, NOBLE_GAS_COLORS } from '../data/elements.js';\r\n\r\nvar scene, atomCore, electronOrbits = [];\r\nvar elementButtons = [], expButtons = [];\r\nvar periodicTableMesh;\r\nvar infoPanel, currentSelection = null;\r\nvar teleportFloor;\r\n\r\nconst ATOM_RADIUS = 0.8;\r\nconst ORBIT_RADIUS = 4;\r\nconst ELECTRON_SPEED = 0.5;\r\n\r\nexport function setup(ctx) {\r\n  scene = new THREE.Scene();\r\n\r\n  scene.background = new THREE.Color(0x0a0a1a);\r\n\r\n  const floorGeo = new THREE.CylinderGeometry(15, 15, 0.2, 64);\r\n  const floorMat = new THREE.MeshBasicMaterial({color: 0x1a1a2e});\r\n  const floor = new THREE.Mesh(floorGeo, floorMat);\r\n  floor.position.y = -0.1;\r\n  scene.add(floor);\r\n\r\n  const teleportGeo = new THREE.PlaneBufferGeometry(30, 30);\r\n  const teleportMat = new THREE.MeshBasicMaterial({visible: false});\r\n  teleportFloor = new THREE.Mesh(teleportGeo, teleportMat);\r\n  teleportFloor.rotation.x = -Math.PI / 2;\r\n  teleportFloor.position.y = 0.001;\r\n  scene.add(teleportFloor);\r\n\r\n  createAtomNucleus(ctx);\r\n  createElectronOrbits(ctx);\r\n  createPeriodicTableHologram(ctx);\r\n  createElementButtons(ctx);\r\n  createExpRoomButtons(ctx);\r\n  createInfoPanel(ctx);\r\n\r\n  const ambientLight = new THREE.AmbientLight(0xffffff, 0.2);\r\n  scene.add(ambientLight);\r\n\r\n  const coreLight = new THREE.PointLight(0x4a90e2, 1, 10);\r\n  coreLight.position.set(0, 2, 0);\r\n  scene.add(coreLight);\r\n\r\n  scene.userData.teleport = teleportFloor;\r\n  scene.userData.atomCore = atomCore;\r\n  scene.userData.electronOrbits = electronOrbits;\r\n\r\n  registerInteractions(ctx);\r\n}\r\n\r\nfunction createAtomNucleus(ctx) {\r\n  const coreGroup = new THREE.Group();\r\n\r\n  const coreGeo = new THREE.SphereGeometry(ATOM_RADIUS, 32, 32);\r\n  const coreMat = new THREE.MeshBasicMaterial({\r\n    color: 0x4a90e2,\r\n    transparent: true,\r\n    opacity: 0.8\r\n  });\r\n  atomCore = new THREE.Mesh(coreGeo, coreMat);\r\n  atomCore.position.y = 1.6;\r\n  coreGroup.add(atomCore);\r\n\r\n  const glowGeo = new THREE.SphereGeometry(ATOM_RADIUS * 1.5, 32, 32);\r\n  const glowMat = new THREE.MeshBasicMaterial({\r\n    color: 0x4a90e2,\r\n    transparent: true,\r\n    opacity: 0.3,\r\n    side: THREE.BackSide\r\n  });\r\n  const glow = new THREE.Mesh(glowGeo, glowMat);\r\n  glow.position.y = 1.6;\r\n  coreGroup.add(glow);\r\n\r\n  scene.add(coreGroup);\r\n}\r\n\r\nfunction createElectronOrbits(ctx) {\r\n  const orbitLevels = [1, 2, 3];\r\n  const colors = [0xFF6B6B, 0x50e3c2, 0xf5a623];\r\n\r\n  orbitLevels.forEach((level, i) => {\r\n    const radius = ORBIT_RADIUS + (level * 1.5);\r\n    const orbitGeo = new THREE.TorusGeometry(radius, 0.02, 16, 100);\r\n    const orbitMat = new THREE.MeshBasicMaterial({\r\n      color: colors[i % colors.length],\r\n      transparent: true,\r\n      opacity: 0.5\r\n    });\r\n    const orbit = new THREE.Mesh(orbitGeo, orbitMat);\r\n    orbit.rotation.x = Math.PI / 2;\r\n    orbit.position.y = 1.6;\r\n    scene.add(orbit);\r\n\r\n    const electronGeo = new THREE.SphereGeometry(0.1, 16, 16);\r\n    const electronMat = new THREE.MeshBasicMaterial({color: 0xffffff});\r\n    const electron = new THREE.Mesh(electronGeo, electronMat);\r\n\r\n    const electronGroup = new THREE.Group();\r\n    electronGroup.position.y = 1.6;\r\n    electronGroup.add(electron);\r\n\r\n    electron.userData = {\r\n      angle: Math.random() * Math.PI * 2,\r\n      speed: ELECTRON_SPEED / (level * 0.7),\r\n      radius: radius\r\n    };\r\n\r\n    scene.add(electronGroup);\r\n    electronOrbits.push(electronGroup);\r\n  });\r\n}\r\n\r\nfunction createPeriodicTableHologram(ctx) {\r\n  const pTableGroup = new THREE.Group();\r\n\r\n  const width = 12;\r\n  const height = 7;\r\n  const cols = 18;\r\n  const rows = 7;\r\n\r\n  const cellWidth = width / cols;\r\n  const cellHeight = height / rows;\r\n\r\n  for (let z = 0; z < ELEMENTS.length && z < 3; z++) {\r\n    const element = ELEMENTS[z];\r\n    const cellGeo = new THREE.BoxGeometry(cellWidth * 0.8, cellHeight * 0.8, 0.05);\r\n    const cellMat = new THREE.MeshBasicMaterial({\r\n      color: element.color,\r\n      transparent: true,\r\n      opacity: 0.3,\r\n      side: THREE.DoubleSide\r\n    });\r\n    const cell = new THREE.Mesh(cellGeo, cellMat);\r\n\r\n    const x = (element.groupNumber - 9) * cellWidth;\r\n    const y = (4 - element.period) * cellHeight;\r\n\r\n    cell.position.set(x, y + 2, -6);\r\n    cell.userData.element = element;\r\n    cell.name = `element_${element.symbol}`;\r\n\r\n    pTableGroup.add(cell);\r\n  }\r\n\r\n  periodicTableMesh = pTableGroup;\r\n  scene.add(pTableGroup);\r\n}\r\n\r\nfunction createElementButtons(ctx) {\r\n  const buttonGroup = new THREE.Group();\r\n  const radius = 8;\r\n  const angleStep = (Math.PI * 2) / ELEMENTS.length;\r\n\r\n  ELEMENTS.forEach((element, index) => {\r\n    const angle = index * angleStep;\r\n    const x = Math.cos(angle) * radius;\r\n    const z = Math.sin(angle) * radius;\r\n\r\n    const buttonGeo = new THREE.SphereGeometry(0.25, 16, 16);\r\n    const buttonMat = new THREE.MeshBasicMaterial({\r\n      color: element.color,\r\n      transparent: true,\r\n      opacity: 0.7\r\n    });\r\n    const button = new THREE.Mesh(buttonGeo, buttonMat);\r\n    button.position.set(x, 1.6, z);\r\n    button.userData.element = element;\r\n    button.userData.roomIndex = index + 1;\r\n    button.name = `element_${element.symbol}_button`;\r\n\r\n    buttonGroup.add(button);\r\n    elementButtons.push(button);\r\n\r\n    const textEntity = ctx.world.createEntity();\r\n    textEntity\r\n      .addComponent(Text, {\r\n        text: element.symbol,\r\n        color: '#ffffff',\r\n        fontSize: 0.15,\r\n        anchor: 'center',\r\n        baseline: 'middle',\r\n        textAlign: 'center'\r\n      })\r\n      .addComponent(ParentObject3D, {value: button})\r\n      .addComponent(Position, {x: 0, y: 0.4, z: 0});\r\n\r\n    buttonGroup.add(button);\r\n  });\r\n\r\n  scene.add(buttonGroup);\r\n}\r\n\r\nfunction createExpRoomButtons(ctx) {\r\n  const buttonGroup = new THREE.Group();\r\n  const radius = 12;\r\n  const angleStep = (Math.PI * 2) / EXPERIMENTAL_ROOMS.length;\r\n\r\n  EXPERIMENTAL_ROOMS.forEach((room, index) => {\r\n    const angle = index * angleStep;\r\n    const x = Math.cos(angle) * radius;\r\n    const z = Math.sin(angle) * radius;\r\n\r\n    const buttonGeo = new THREE.BoxGeometry(0.8, 0.8, 0.1);\r\n    const buttonMat = new THREE.MeshBasicMaterial({\r\n      color: room.color,\r\n      transparent: true,\r\n      opacity: 0.6\r\n    });\r\n    const button = new THREE.Mesh(buttonGeo, buttonMat);\r\n    button.position.set(x, 1.6, z);\r\n    button.userData.expRoom = room;\r\n    button.userData.roomIndex = ELEMENTS.length + index + 1;\r\n    button.name = `exp_${room.id}_button`;\r\n\r\n    buttonGroup.add(button);\r\n    expButtons.push(button);\r\n  });\r\n\r\n  scene.add(buttonGroup);\r\n}\r\n\r\nfunction createInfoPanel(ctx) {\r\n  const panelGeo = new THREE.PlaneGeometry(3, 2);\r\n  const panelMat = new THREE.MeshBasicMaterial({\r\n    color: 0x2a2a3a,\r\n    transparent: true,\r\n    opacity: 0.9,\r\n    side: THREE.DoubleSide\r\n  });\r\n  infoPanel = new THREE.Mesh(panelGeo, panelMat);\r\n  infoPanel.position.set(0, 3.5, -4);\r\n  infoPanel.visible = false;\r\n  scene.add(infoPanel);\r\n\r\n  const titleTextEntity = ctx.world.createEntity();\r\n  titleTextEntity\r\n    .addComponent(Text, {\r\n      text: '',\r\n      color: '#ffffff',\r\n      fontSize: 0.12,\r\n      anchor: 'center',\r\n      baseline: 'top',\r\n      textAlign: 'center'\r\n    })\r\n    .addComponent(ParentObject3D, {value: infoPanel})\r\n    .addComponent(Position, {x: 0, y: 0.6, z: 0.01});\r\n\r\n  infoPanel.userData.titleText = titleTextEntity;\r\n\r\n  const descTextEntity = ctx.world.createEntity();\r\n  descTextEntity\r\n    .addComponent(Text, {\r\n      text: '',\r\n      color: '#cccccc',\r\n      fontSize: 0.06,\r\n      anchor: 'center',\r\n      baseline: 'top',\r\n      textAlign: 'center',\r\n      maxWidth: 2.6,\r\n      lineHeight: 1.4\r\n    })\r\n    .addComponent(ParentObject3D, {value: infoPanel})\r\n    .addComponent(Position, {x: 0, y: -0.2, z: 0.01});\r\n\r\n  infoPanel.userData.descText = descTextEntity;\r\n}\r\n\r\nfunction registerInteractions(ctx) {\r\n  ctx.raycontrol.addState('lobbyElements', {\r\n    colliderMesh: [...elementButtons],\r\n    controller: 'primary',\r\n    onHover: (intersection, active) => {\r\n      const button = intersection.object;\r\n      button.scale.setScalar(active ? 1.3 : 1);\r\n      showElementInfo(button.userData.element);\r\n    },\r\n    onHoverLeave: (intersection) => {\r\n      hideElementInfo();\r\n    },\r\n    onSelectStart: (intersection, e) => {\r\n      ctx.goto = intersection.object.userData.roomIndex;\r\n    },\r\n    onSelectEnd: (intersection) => {}\r\n  });\r\n\r\n  ctx.raycontrol.addState('lobbyExpRooms', {\r\n    colliderMesh: [...expButtons],\r\n    controller: 'primary',\r\n    onHover: (intersection, active) => {\r\n      const button = intersection.object;\r\n      button.scale.setScalar(active ? 1.2 : 1);\r\n    },\r\n    onHoverLeave: (intersection) => {},\r\n    onSelectStart: (intersection, e) => {\r\n      ctx.goto = intersection.object.userData.roomIndex;\r\n    },\r\n    onSelectEnd: (intersection) => {}\r\n  });\r\n\r\n  ctx.raycontrol.addState('lobbyTeleport', {\r\n    colliderMesh: teleportFloor,\r\n    controller: 'primary',\r\n    onHover: (intersection, active) => {\r\n      ctx.teleport.onHover(intersection.point, active);\r\n    },\r\n    onHoverLeave: () => {\r\n      ctx.teleport.onHoverLeave();\r\n    },\r\n    onSelectStart: (intersection, e) => {\r\n      ctx.teleport.onSelectStart(e);\r\n    },\r\n    onSelectEnd: (intersection) => {\r\n      ctx.teleport.onSelectEnd(intersection.point);\r\n    }\r\n  });\r\n}\r\n\r\nfunction showElementInfo(element) {\r\n  if (!element || currentSelection === element.symbol) return;\r\n\r\n  currentSelection = element.symbol;\r\n  infoPanel.visible = true;\r\n\r\n  const titleComp = infoPanel.userData.titleText.getComponent(Text);\r\n  titleComp.text = `${element.symbol} - ${element.name}`;\r\n\r\n  const descComp = infoPanel.userData.descText.getComponent(Text);\r\n  descComp.text = element.description;\r\n}\r\n\r\nfunction hideElementInfo() {\r\n  currentSelection = null;\r\n  infoPanel.visible = false;\r\n}\r\n\r\nexport function enter(ctx) {\r\n  ctx.renderer.setClearColor(0x0a0a1a);\r\n  ctx.scene.add(scene);\r\n  ctx.raycontrol.activateState('lobbyElements');\r\n  ctx.raycontrol.activateState('lobbyExpRooms');\r\n  ctx.raycontrol.activateState('lobbyTeleport');\r\n}\r\n\r\nexport function exit(ctx) {\r\n  ctx.raycontrol.deactivateState('lobbyElements');\r\n  ctx.raycontrol.deactivateState('lobbyExpRooms');\r\n  ctx.raycontrol.deactivateState('lobbyTeleport');\r\n  ctx.scene.remove(scene);\r\n  hideElementInfo();\r\n}\r\n\r\nexport function execute(ctx, delta, time) {\r\n  if (atomCore) {\r\n    atomCore.material.opacity = 0.6 + Math.sin(time * 2) * 0.2;\r\n    atomCore.scale.setScalar(1 + Math.sin(time * 3) * 0.05);\r\n  }\r\n\r\n  electronOrbits.forEach(group => {\r\n    const electron = group.children[0];\r\n    const userData = electron.userData;\r\n    userData.angle += userData.speed * delta;\r\n    electron.position.x = Math.cos(userData.angle) * userData.radius;\r\n    electron.position.z = Math.sin(userData.angle) * userData.radius;\r\n  });\r\n\r\n  if (periodicTableMesh) {\r\n    periodicTableMesh.rotation.y = time * 0.1;\r\n    periodicTableMesh.position.y = 2 + Math.sin(time * 0.5) * 0.2;\r\n  }\r\n\r\n  elementButtons.forEach((button, i) => {\r\n    button.position.y = 1.6 + Math.sin(time * 2 + i * 0.5) * 0.1;\r\n  });\r\n}\r\n","import * as THREE from 'three';\r\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';\r\nimport { DRACOLoader } from 'three/examples/jsm/loaders/DRACOLoader.js';\r\nimport { NOBLE_GAS_COLORS } from '../data/elements.js';\r\n\r\nconst loaders = {\r\n  gltf: new GLTFLoader(),\r\n  draco: new DRACOLoader()\r\n};\r\n\r\nexport function loadModel(modelPath, callback) {\r\n  const extension = modelPath.split('.').pop().toLowerCase();\r\n\r\n  switch(extension) {\r\n    case 'gltf':\r\n    loaders.gltf.load(\r\n      modelPath,\r\n      (gltf) => {\r\n        callback(gltf.scene, null, null);\r\n      },\r\n      (error) => {\r\n        console.error('Error loading GLTF model:', error);\r\n        callback(null, error, null);\r\n      }\r\n    );\r\n      break;\r\n    case 'glb':\r\n      loaders.gltf.load(\r\n        modelPath,\r\n        (gltf) => {\r\n          callback(gltf.scene, null, null);\r\n        },\r\n        (error) => {\r\n          console.error('Error loading GLB model:', error);\r\n          callback(null, error, null);\r\n        }\r\n      );\r\n      break;\r\n    default:\r\n      console.warn('Unknown model format:', extension);\r\n      callback(null, new Error('Unknown model format'), null);\r\n  }\r\n}\r\n\r\nexport function createPlaceholderModel(element) {\r\n  const group = new THREE.Group();\r\n  let geo, mat, mesh;\r\n\r\n  switch(element.symbol) {\r\n    case 'H':\r\n      geo = new THREE.SphereGeometry(0.3, 32, 32);\r\n      mat = new THREE.MeshStandardMaterial({color: element.color, metalness: 0.1, roughness: 0.8});\r\n      mesh = new THREE.Mesh(geo, mat);\r\n      mesh.position.set(0, 0, 0);\r\n      group.add(mesh);\r\n      break;\r\n\r\n    case 'C':\r\n      geo = new THREE.OctahedronGeometry(0.3, 1);\r\n      mat = new THREE.MeshStandardMaterial({color: 0x333333, metalness: 0.2, roughness: 0.6});\r\n      mesh = new THREE.Mesh(geo, mat);\r\n      mesh.position.set(0, 0, 0);\r\n      group.add(mesh);\r\n      break;\r\n\r\n    case 'Fe':\r\n      geo = new THREE.IcosahedronGeometry(0.3, 1);\r\n      mat = new THREE.MeshStandardMaterial({color: 0x4a4a4a, metalness: 0.8, roughness: 0.3});\r\n      mesh = new THREE.Mesh(geo, mat);\r\n      mesh.position.set(0, 0, 0);\r\n      group.add(mesh);\r\n      break;\r\n\r\n    case 'Au':\r\n      geo = new THREE.IcosahedronGeometry(0.3, 1);\r\n      mat = new THREE.MeshStandardMaterial({\r\n        color: 0xFFD700,\r\n        metalness: 0.9,\r\n        roughness: 0.1,\r\n        emissive: 0xFFD700,\r\n        emissiveIntensity: 0.1\r\n      });\r\n      mesh = new THREE.Mesh(geo, mat);\r\n      mesh.position.set(0, 0, 0);\r\n      group.add(mesh);\r\n      break;\r\n\r\n    case 'U':\r\n      geo = new THREE.SphereGeometry(0.35, 32, 32);\r\n      mat = new THREE.MeshStandardMaterial({\r\n        color: 0x2d5a2d,\r\n        metalness: 0.7,\r\n        roughness: 0.4,\r\n        emissive: 0x00ff00,\r\n        emissiveIntensity: 0.2\r\n      });\r\n      mesh = new THREE.Mesh(geo, mat);\r\n      mesh.position.set(0, 0, 0);\r\n      group.add(mesh);\r\n      break;\r\n\r\n    case 'Na':\r\n      geo = new THREE.SphereGeometry(0.3, 32, 32);\r\n      mat = new THREE.MeshStandardMaterial({\r\n        color: element.color,\r\n        metalness: 0.9,\r\n        roughness: 0.2\r\n      });\r\n      mesh = new THREE.Mesh(geo, mat);\r\n      mesh.position.set(0, 0, 0);\r\n      group.add(mesh);\r\n      break;\r\n\r\n    case 'He':\r\n      geo = new THREE.SphereGeometry(0.25, 32, 32);\r\n      mat = new THREE.MeshStandardMaterial({\r\n        color: NOBLE_GAS_COLORS[element.symbol] || element.color,\r\n        metalness: 0,\r\n        roughness: 0.1,\r\n        emissive: NOBLE_GAS_COLORS[element.symbol] || element.color,\r\n        emissiveIntensity: 0.15\r\n      });\r\n      mesh = new THREE.Mesh(geo, mat);\r\n      mesh.position.set(0, 0, 0);\r\n      group.add(mesh);\r\n      break;\r\n\r\n    default:\r\n      geo = new THREE.SphereGeometry(0.3, 32, 32);\r\n      mat = new THREE.MeshStandardMaterial({\r\n        color: element.color,\r\n        metalness: element.group === 'metal' || element.group === 'transition' ? 0.7 : 0.1,\r\n        roughness: element.group === 'metal' || element.group === 'transition' ? 0.3 : 0.7\r\n      });\r\n      mesh = new THREE.Mesh(geo, mat);\r\n      mesh.position.set(0, 0, 0);\r\n      group.add(mesh);\r\n  }\r\n\r\n  return group;\r\n}\r\n\r\nexport function createMoleculeModel(formula, elementData) {\r\n  const group = new THREE.Group();\r\n  const atoms = [];\r\n\r\n  const parseFormula = (formula) => {\r\n    const elements = [];\r\n    const regex = /([A-Z][a-z]?)(\\d*)/g;\r\n    let match;\r\n    while ((match = regex.exec(formula)) !== null) {\r\n      elements.push({\r\n        symbol: match[1],\r\n        count: match[2] ? parseInt(match[2]) : 1\r\n      });\r\n    }\r\n    return elements;\r\n  };\r\n\r\n  const parsedFormula = parseFormula(formula);\r\n\r\n  const getElementColor = (symbol) => {\r\n    const elemData = elementData && elementData.find(e => e.symbol === symbol);\r\n    return elemData && elemData.color || 0xffffff;\r\n  };\r\n\r\n  const atomPositions = [];\r\n  let atomIndex = 0;\r\n\r\n  parsedFormula.forEach(item => {\r\n    for (let i = 0; i < item.count; i++) {\r\n      let x, y, z;\r\n\r\n      if (parsedFormula.length === 1 && item.count === 1) {\r\n        x = 0; y = 0; z = 0;\r\n      } else if (parsedFormula.length === 2) {\r\n        const angle = atomIndex * Math.PI;\r\n        x = Math.cos(angle) * 0.6;\r\n        y = 0;\r\n        z = Math.sin(angle) * 0.6;\r\n      } else if (parsedFormula.length === 3) {\r\n        x = (atomIndex % 3) - 1;\r\n        y = 0;\r\n        z = Math.floor(atomIndex / 3) * 0.6 - 0.3;\r\n      } else {\r\n        const phi = Math.acos(-1 + (2 * atomIndex) / parsedFormula.reduce((sum, p) => sum + p.count, 0));\r\n        const theta = Math.sqrt(parsedFormula.reduce((sum, p) => sum + p.count, 0) * Math.PI) * phi;\r\n        x = 0.7 * Math.cos(theta) * Math.sin(phi);\r\n        y = 0.7 * Math.sin(theta) * Math.sin(phi);\r\n        z = 0.7 * Math.cos(phi);\r\n      }\r\n\r\n      const geo = new THREE.SphereGeometry(0.25, 16, 16);\r\n      const mat = new THREE.MeshStandardMaterial({\r\n        color: getElementColor(item.symbol),\r\n        metalness: 0.3,\r\n        roughness: 0.6\r\n      });\r\n      const mesh = new THREE.Mesh(geo, mat);\r\n      mesh.position.set(x, y, z);\r\n      mesh.userData.elementSymbol = item.symbol;\r\n      group.add(mesh);\r\n      atomPositions.push({mesh, symbol: item.symbol, pos: new THREE.Vector3(x, y, z)});\r\n      atoms.push(mesh);\r\n      atomIndex++;\r\n    }\r\n  });\r\n\r\n  for (let i = 0; i < atomPositions.length; i++) {\r\n    for (let j = i + 1; j < atomPositions.length; j++) {\r\n      const dist = atomPositions[i].pos.distanceTo(atomPositions[j].pos);\r\n      if (dist < 1.2) {\r\n        const bondGeo = new THREE.CylinderGeometry(0.04, 0.04, dist, 8);\r\n        const bondMat = new THREE.MeshStandardMaterial({color: 0x888888, metalness: 0.5, roughness: 0.5});\r\n        const bond = new THREE.Mesh(bondGeo, bondMat);\r\n\r\n        const midX = (atomPositions[i].pos.x + atomPositions[j].pos.x) / 2;\r\n        const midY = (atomPositions[i].pos.y + atomPositions[j].pos.y) / 2;\r\n        const midZ = (atomPositions[i].pos.z + atomPositions[j].pos.z) / 2;\r\n\r\n        bond.position.set(midX, midY, midZ);\r\n        bond.lookAt(atomPositions[j].pos);\r\n        bond.rotateX(Math.PI / 2);\r\n        group.add(bond);\r\n      }\r\n    }\r\n  }\r\n\r\n  return group;\r\n}\r\n\r\nexport function createCrystalLattice(element) {\r\n  const group = new THREE.Group();\r\n  const gridSize = 3;\r\n  const spacing = 0.8;\r\n  const atomGeo = new THREE.SphereGeometry(0.15, 16, 16);\r\n  const atomMat = new THREE.MeshStandardMaterial({\r\n    color: element.color,\r\n    metalness: 0.6,\r\n    roughness: 0.4\r\n  });\r\n\r\n  for (let x = 0; x < gridSize; x++) {\r\n    for (let y = 0; y < gridSize; y++) {\r\n      for (let z = 0; z < gridSize; z++) {\r\n        const atom = new THREE.Mesh(atomGeo, atomMat);\r\n        atom.position.set(\r\n          (x - gridSize / 2) * spacing,\r\n          (y - gridSize / 2) * spacing,\r\n          (z - gridSize / 2) * spacing\r\n        );\r\n        group.add(atom);\r\n      }\r\n    }\r\n  }\r\n\r\n  return group;\r\n}\r\n\r\nexport function createThemedElementDisplay(element, type = 'standard') {\r\n  const group = new THREE.Group();\r\n  const baseSize = 1.0;\r\n\r\n  switch(type) {\r\n    case 'cosmic':\r\n      return createCosmicDisplay(element, baseSize);\r\n    case 'solar':\r\n      return createSolarDisplay(element, baseSize);\r\n    case 'metallic':\r\n      return createMetallicDisplay(element, baseSize);\r\n    case 'crystalline':\r\n      return createCrystallineDisplay(element, baseSize);\r\n    case 'gaseous':\r\n      return createGaseousDisplay(element, baseSize);\r\n    case 'radioactive':\r\n      return createRadioactiveDisplay(element, baseSize);\r\n    case 'biological':\r\n      return createBiologicalDisplay(element, baseSize);\r\n    case 'energy':\r\n      return createEnergyDisplay(element, baseSize);\r\n    default:\r\n      return createPlaceholderModel(element);\r\n  }\r\n}\r\n\r\nfunction createCosmicDisplay(element, size) {\r\n  const group = new THREE.Group();\r\n\r\n  const outerGlowGeo = new THREE.SphereGeometry(size * 1.5, 32, 32);\r\n  const outerGlowMat = new THREE.MeshBasicMaterial({\r\n    color: element.color,\r\n    transparent: true,\r\n    opacity: 0.15\r\n  });\r\n  const outerGlow = new THREE.Mesh(outerGlowGeo, outerGlowMat);\r\n  group.add(outerGlow);\r\n\r\n  const coreGeo = new THREE.SphereGeometry(size * 0.6, 32, 32);\r\n  const coreMat = new THREE.MeshStandardMaterial({\r\n    color: 0xffffff,\r\n    emissive: element.color,\r\n    emissiveIntensity: 0.8\r\n  });\r\n  const core = new THREE.Mesh(coreGeo, coreMat);\r\n  group.add(core);\r\n\r\n  const particlesGeo = new THREE.BufferGeometry();\r\n  const particleCount = 100;\r\n  const positions = new Float32Array(particleCount * 3);\r\n  for (let i = 0; i < particleCount; i++) {\r\n    const theta = Math.random() * Math.PI * 2;\r\n    const phi = Math.random() * Math.PI;\r\n    const r = size * (1.5 + Math.random() * 0.5);\r\n    positions[i * 3] = r * Math.sin(phi) * Math.cos(theta);\r\n    positions[i * 3 + 1] = r * Math.sin(phi) * Math.sin(theta);\r\n    positions[i * 3 + 2] = r * Math.cos(phi);\r\n  }\r\n  particlesGeo.setAttribute('position', new THREE.BufferAttribute(positions, 3));\r\n  const particlesMat = new THREE.PointsMaterial({\r\n    color: element.color,\r\n    size: 0.03,\r\n    transparent: true,\r\n    opacity: 0.6\r\n  });\r\n  const particles = new THREE.Points(particlesGeo, particlesMat);\r\n  group.add(particles);\r\n\r\n  return group;\r\n}\r\n\r\nfunction createSolarDisplay(element, size) {\r\n  const group = new THREE.Group();\r\n\r\n  const coronaGeo = new THREE.SphereGeometry(size * 1.3, 32, 32);\r\n  const coronaMat = new THREE.MeshBasicMaterial({\r\n    color: NOBLE_GAS_COLORS[element.symbol] || 0xffaa00,\r\n    transparent: true,\r\n    opacity: 0.2\r\n  });\r\n  const corona = new THREE.Mesh(coronaGeo, coronaMat);\r\n  group.add(corona);\r\n\r\n  const surfaceGeo = new THREE.SphereGeometry(size, 32, 32);\r\n  const surfaceMat = new THREE.MeshStandardMaterial({\r\n    color: NOBLE_GAS_COLORS[element.symbol] || 0xffaa00,\r\n    emissive: NOBLE_GAS_COLORS[element.symbol] || 0xffaa00,\r\n    emissiveIntensity: 0.5,\r\n    metalness: 0.3,\r\n    roughness: 0.7\r\n  });\r\n  const surface = new THREE.Mesh(surfaceGeo, surfaceMat);\r\n  group.add(surface);\r\n\r\n  return group;\r\n}\r\n\r\nfunction createMetallicDisplay(element, size) {\r\n  const group = new THREE.Group();\r\n\r\n  const mainGeo = new THREE.IcosahedronGeometry(size, 2);\r\n  const mainMat = new THREE.MeshStandardMaterial({\r\n    color: element.color,\r\n    metalness: 0.9,\r\n    roughness: 0.1,\r\n    envMapIntensity: 1.0\r\n  });\r\n  const main = new THREE.Mesh(mainGeo, mainMat);\r\n  group.add(main);\r\n\r\n  const highlightGeo = new THREE.IcosahedronGeometry(size * 1.05, 1);\r\n  const highlightMat = new THREE.MeshBasicMaterial({\r\n    color: 0xffffff,\r\n    transparent: true,\r\n    opacity: 0.1,\r\n    wireframe: true\r\n  });\r\n  const highlight = new THREE.Mesh(highlightGeo, highlightMat);\r\n  group.add(highlight);\r\n\r\n  return group;\r\n}\r\n\r\nfunction createCrystallineDisplay(element, size) {\r\n  const group = new THREE.Group();\r\n  const crystalGeo = new THREE.OctahedronGeometry(size, 1);\r\n  const crystalMat = new THREE.MeshStandardMaterial({\r\n    color: element.color,\r\n    metalness: 0.4,\r\n    roughness: 0.3,\r\n    transparent: true,\r\n    opacity: 0.85\r\n  });\r\n  const crystal = new THREE.Mesh(crystalGeo, crystalMat);\r\n  group.add(crystal);\r\n\r\n  const innerGeo = new THREE.OctahedronGeometry(size * 0.6, 0);\r\n  const innerMat = new THREE.MeshBasicMaterial({\r\n    color: 0xffffff,\r\n    transparent: true,\r\n    opacity: 0.3\r\n  });\r\n  const inner = new THREE.Mesh(innerGeo, innerMat);\r\n  group.add(inner);\r\n\r\n  return group;\r\n}\r\n\r\nfunction createGaseousDisplay(element, size) {\r\n  const group = new THREE.Group();\r\n\r\n  const blobGeo = new THREE.SphereGeometry(size, 32, 32);\r\n  const blobMat = new THREE.MeshStandardMaterial({\r\n    color: NOBLE_GAS_COLORS[element.symbol] || element.color,\r\n    metalness: 0,\r\n    roughness: 1.0,\r\n    transparent: true,\r\n    opacity: 0.6\r\n  });\r\n  const blob = new THREE.Mesh(blobGeo, blobMat);\r\n  group.add(blob);\r\n\r\n  for (let i = 0; i < 5; i++) {\r\n    const smallBlobGeo = new THREE.SphereGeometry(size * 0.3, 16, 16);\r\n    const smallBlobMat = new THREE.MeshBasicMaterial({\r\n      color: NOBLE_GAS_COLORS[element.symbol] || element.color,\r\n      transparent: true,\r\n      opacity: 0.3\r\n    });\r\n    const smallBlob = new THREE.Mesh(smallBlobGeo, smallBlobMat);\r\n    const angle = (i / 5) * Math.PI * 2;\r\n    smallBlob.position.set(\r\n      Math.cos(angle) * size * 1.2,\r\n      Math.sin(angle * 0.5) * size * 0.3,\r\n      Math.sin(angle) * size * 1.2\r\n    );\r\n    group.add(smallBlob);\r\n  }\r\n\r\n  return group;\r\n}\r\n\r\nfunction createRadioactiveDisplay(element, size) {\r\n  const group = new THREE.Group();\r\n\r\n  const coreGeo = new THREE.SphereGeometry(size * 0.6, 32, 32);\r\n  const coreMat = new THREE.MeshStandardMaterial({\r\n    color: element.color,\r\n    emissive: 0x00ff00,\r\n    emissiveIntensity: 0.5,\r\n    metalness: 0.6,\r\n    roughness: 0.4\r\n  });\r\n  const core = new THREE.Mesh(coreGeo, coreMat);\r\n  group.add(core);\r\n\r\n  const pulseGeo = new THREE.SphereGeometry(size, 32, 32);\r\n  const pulseMat = new THREE.MeshBasicMaterial({\r\n    color: 0x00ff00,\r\n    transparent: true,\r\n    opacity: 0.2\r\n  });\r\n  const pulse = new THREE.Mesh(pulseGeo, pulseMat);\r\n  group.add(pulse);\r\n\r\n  return group;\r\n}\r\n\r\nfunction createBiologicalDisplay(element, size) {\r\n  const group = new THREE.Group();\r\n\r\n  const organicGeo = new THREE.TorusKnotGeometry(size * 0.5, 0.1, 64, 8, 2, 3);\r\n  const organicMat = new THREE.MeshStandardMaterial({\r\n    color: element.color,\r\n    metalness: 0.2,\r\n    roughness: 0.8\r\n  });\r\n  const organic = new THREE.Mesh(organicGeo, organicMat);\r\n  organic.rotation.x = Math.PI / 4;\r\n  group.add(organic);\r\n\r\n  const cellGeo = new THREE.SphereGeometry(size * 0.2, 16, 16);\r\n  const cellMat = new THREE.MeshBasicMaterial({\r\n    color: element.color,\r\n    transparent: true,\r\n    opacity: 0.4\r\n  });\r\n\r\n  for (let i = 0; i < 6; i++) {\r\n    const cell = new THREE.Mesh(cellGeo, cellMat);\r\n    const angle = (i / 6) * Math.PI * 2;\r\n    cell.position.set(\r\n      Math.cos(angle) * size,\r\n      Math.sin(angle) * size * 0.3,\r\n      Math.sin(angle) * size\r\n    );\r\n    group.add(cell);\r\n  }\r\n\r\n  return group;\r\n}\r\n\r\nfunction createEnergyDisplay(element, size) {\r\n  const group = new THREE.Group();\r\n\r\n  const energyGeo = new THREE.OctahedronGeometry(size, 1);\r\n  const energyMat = new THREE.MeshStandardMaterial({\r\n    color: element.color,\r\n    emissive: element.color,\r\n    emissiveIntensity: 0.6,\r\n    metalness: 0.3,\r\n    roughness: 0.5\r\n  });\r\n  const energy = new THREE.Mesh(energyGeo, energyMat);\r\n  group.add(energy);\r\n\r\n  const rays = [];\r\n  for (let i = 0; i < 8; i++) {\r\n    const rayGeo = new THREE.CylinderGeometry(0.02, 0.01, size * 1.5, 8);\r\n    const rayMat = new THREE.MeshBasicMaterial({\r\n      color: element.color,\r\n      transparent: true,\r\n      opacity: 0.4\r\n    });\r\n    const ray = new THREE.Mesh(rayGeo, rayMat);\r\n    const angle = (i / 8) * Math.PI * 2;\r\n    const elevation = (i % 2) * Math.PI / 3 - Math.PI / 6;\r\n    ray.position.set(\r\n      Math.cos(angle) * Math.cos(elevation) * size * 0.8,\r\n      Math.sin(elevation) * size * 0.8,\r\n      Math.sin(angle) * Math.cos(elevation) * size * 0.8\r\n    );\r\n    ray.lookAt(ray.position.clone().multiplyScalar(2));\r\n    group.add(ray);\r\n    rays.push(ray);\r\n  }\r\n\r\n  return group;\r\n}\r\n\r\nexport function optimizeModelForVR(model) {\r\n  model.traverse(child => {\r\n    if (child.isMesh) {\r\n      child.castShadow = false;\r\n      child.receiveShadow = false;\r\n\r\n      if (child.material) {\r\n        child.material.side = THREE.DoubleSide;\r\n      child.material.needsUpdate = true;\r\n      child.material.transparent = child.material.opacity < 1;\r\n      child.material.depthWrite = !child.material.transparent;\r\n      child.material.depthTest = child.material.transparent\r\n          ? THREE.DepthTest\r\n          : THREE.DepthTest.Always;\r\n      }\r\n    }\r\n\r\n    if (child.isLight) {\r\n      child.castShadow = false;\r\n      child.distance = 30;\r\n      child.intensity *= 0.7;\r\n    }\r\n  });\r\n\r\n  model.traverse(child => {\r\n    if (child.isMesh && child.geometry) {\r\n      child.geometry.computeBoundingSphere();\r\n    }\r\n  });\r\n\r\n  return model;\r\n}\r\n\r\nconst ASSET_PATHS = {\r\n  elementModels: {\r\n    'H': 'assets/elements/hydrogen.glb',\r\n    'C': 'assets/elements/carbon.glb',\r\n    'Fe': 'assets/elements/iron.glb',\r\n    'Au': 'assets/elements/gold.glb',\r\n    'U': 'assets/elements/uranium.glb',\r\n    'Na': 'assets/elements/sodium.glb',\r\n    'He': 'assets/elements/helium.glb',\r\n    'O': 'assets/elements/oxygen.glb',\r\n    'N': 'assets/elements/nitrogen.glb',\r\n    'S': 'assets/elements/sulfur.glb',\r\n    'Cu': 'assets/elements/copper.glb',\r\n    'Al': 'assets/elements/aluminum.glb',\r\n    'Si': 'assets/elements/silicon.glb',\r\n    'Ca': 'assets/elements/calcium.glb',\r\n    'Mg': 'assets/elements/magnesium.glb',\r\n  },\r\n  moleculeModels: {\r\n    'H2O': 'assets/molecules/water.glb',\r\n    'CO2': 'assets/molecules/carbon_dioxide.glb',\r\n    'CH4': 'assets/molecules/methane.glb',\r\n    'NaCl': 'assets/molecules/salt.glb',\r\n    'O2': 'assets/molecules/oxygen.glb',\r\n    'N2': 'assets/molecules/nitrogen.glb',\r\n    'C6H12O6': 'assets/molecules/glucose.glb',\r\n    'DNA': 'assets/molecules/dna.glb',\r\n    'NH3': 'assets/molecules/ammonia.glb',\r\n  },\r\n  compoundModels: {\r\n    'steel': 'assets/compounds/steel.glb',\r\n    'bronze': 'assets/compounds/bronze.glb',\r\n    'brass': 'assets/compounds/brass.glb',\r\n    'quartz': 'assets/compounds/quartz.glb',\r\n    'diamond': 'assets/compounds/diamond.glb',\r\n    'graphite': 'assets/compounds/graphite.glb',\r\n  }\r\n};\r\n\r\nexport function getElementModelPath(elementSymbol) {\r\n  return ASSET_PATHS.elementModels[elementSymbol] || null;\r\n}\r\n\r\nexport function getMoleculeModelPath(formula) {\r\n  return ASSET_PATHS.moleculeModels[formula] || null;\r\n}\r\n\r\nexport function getCompoundModelPath(compoundName) {\r\n  return ASSET_PATHS.compoundModels[compoundName] || null;\r\n}\r\n\r\nexport function loadElementModel(element, callback) {\r\n  const modelPath = getElementModelPath(element.symbol);\r\n\r\n  if (modelPath) {\r\n    loadModel(modelPath, (scene, error) => {\r\n      if (error) {\r\n        console.warn(`Failed to load model for ${element.symbol}, using procedural`);\r\n        callback(createThemedElementDisplay(element, element.theme || 'standard'), null);\r\n      } else {\r\n        const optimized = optimizeModelForVR(scene);\r\n        optimized.scale.set(0.5, 0.5, 0.5);\r\n        callback(optimized, null);\r\n      }\r\n    });\r\n  } else {\r\n    const themed = createThemedElementDisplay(element, element.theme || 'standard');\r\n    callback(themed, null);\r\n  }\r\n}\r\n\r\nexport function loadMoleculeModel(formula, elementData, callback) {\r\n  const modelPath = getMoleculeModelPath(formula);\r\n\r\n  if (modelPath) {\r\n    loadModel(modelPath, (scene, error) => {\r\n      if (error) {\r\n        console.warn(`Failed to load molecule ${formula}, using procedural`);\r\n        callback(createMoleculeModel(formula, elementData), null);\r\n      } else {\r\n        const optimized = optimizeModelForVR(scene);\r\n        optimized.scale.set(0.5, 0.5, 0.5);\r\n        callback(optimized, null);\r\n      }\r\n    });\r\n  } else {\r\n    const procedural = createMoleculeModel(formula, elementData);\r\n    callback(procedural, null);\r\n  }\r\n}\r\n\r\nexport function createElementDisplay(element, displayType = 'standard') {\r\n  const displayMap = {\r\n    'cosmic': () => createThemedElementDisplay(element, 'cosmic'),\r\n    'solar': () => createThemedElementDisplay(element, 'solar'),\r\n    'energy': () => createThemedElementDisplay(element, 'energy'),\r\n    'metallic': () => createThemedElementDisplay(element, 'metallic'),\r\n    'crystalline': () => createThemedElementDisplay(element, 'crystalline'),\r\n    'gaseous': () => createThemedElementDisplay(element, 'gaseous'),\r\n    'radioactive': () => createThemedElementDisplay(element, 'radioactive'),\r\n    'biological': () => createThemedElementDisplay(element, 'biological'),\r\n    'industry': () => createThemedElementDisplay(element, 'metallic'),\r\n    'technology': () => createThemedElementDisplay(element, 'metallic'),\r\n    'toxic': () => createThemedElementDisplay(element, 'metallic'),\r\n    'precious': () => createThemedElementDisplay(element, 'metallic'),\r\n    'historical': () => createThemedElementDisplay(element, 'metallic'),\r\n    'medical': () => createThemedElementDisplay(element, 'metallic'),\r\n    'nuclear': () => createThemedElementDisplay(element, 'radioactive'),\r\n    'space': () => createThemedElementDisplay(element, 'cosmic'),\r\n    'research': () => createThemedElementDisplay(element, 'metallic'),\r\n    'light': () => createThemedElementDisplay(element, 'cosmic'),\r\n    'fire': () => createThemedElementDisplay(element, 'energy'),\r\n    'volcano': () => createThemedElementDisplay(element, 'radioactive'),\r\n    'swimming': () => createThemedElementDisplay(element, 'gaseous'),\r\n    'welding': () => createThemedElementDisplay(element, 'gaseous'),\r\n    'skeleton': () => createThemedElementDisplay(element, 'biological'),\r\n    'forge': () => createThemedElementDisplay(element, 'metallic'),\r\n    'electric': () => createThemedElementDisplay(element, 'metallic'),\r\n    'treasure': () => createThemedElementDisplay(element, 'metallic'),\r\n    'kitchen': () => createThemedElementDisplay(element, 'metallic'),\r\n    'silicon': () => createThemedElementDisplay(element, 'crystalline'),\r\n    'desert': () => createThemedElementDisplay(element, 'crystalline'),\r\n    'breath': () => createThemedElementDisplay(element, 'gaseous'),\r\n    'atmosphere': () => createThemedElementDisplay(element, 'gaseous'),\r\n    'protection': () => createThemedElementDisplay(element, 'metallic'),\r\n    'lights': () => createThemedElementDisplay(element, 'solar'),\r\n  };\r\n\r\n  const displayFn = displayMap[displayType] || displayMap['standard'];\r\n  return displayFn ? displayFn() : createPlaceholderModel(element);\r\n}\r\n\r\nexport function scaleModelForVR(model, targetScale = 1.0) {\r\n  const bbox = new THREE.Box3().setFromObject(model);\r\n  const size = new THREE.Vector3();\r\n  bbox.getSize(size);\r\n\r\n  const maxDim = Math.max(size.x, size.y, size.z);\r\n  const scaleFactor = targetScale / maxDim;\r\n\r\n  model.scale.multiplyScalar(scaleFactor);\r\n\r\n  return model;\r\n}\r\n\r\nexport function positionModelAt(model, position = {x: 0, y: 0, z: 0}, lookAt = null) {\r\n  model.position.set(position.x, position.y, position.z);\r\n\r\n  if (lookAt) {\r\n    const target = new THREE.Vector3(lookAt.x, lookAt.y, lookAt.z);\r\n    model.lookAt(target);\r\n  }\r\n\r\n  return model;\r\n}\r\n\r\nexport function createModelPedestal(size = 1.0, color = 0x333333) {\r\n  const group = new THREE.Group();\r\n\r\n  const baseGeo = new THREE.CylinderGeometry(size * 0.6, size * 0.8, size * 0.2, 32);\r\n  const baseMat = new THREE.MeshStandardMaterial({\r\n    color: color,\r\n    metalness: 0.3,\r\n    roughness: 0.7\r\n  });\r\n  const base = new THREE.Mesh(baseGeo, baseMat);\r\n  base.position.y = 0;\r\n  group.add(base);\r\n\r\n  const pillarGeo = new THREE.CylinderGeometry(size * 0.4, size * 0.5, size * 1.0, 32);\r\n  const pillarMat = new THREE.MeshStandardMaterial({\r\n    color: 0x444444,\r\n    metalness: 0.2,\r\n    roughness: 0.6\r\n  });\r\n  const pillar = new THREE.Mesh(pillarGeo, pillarMat);\r\n  pillar.position.y = size * 0.6;\r\n  group.add(pillar);\r\n\r\n  const topGeo = new THREE.CylinderGeometry(size * 0.5, size * 0.6, size * 0.15, 32);\r\n  const topMat = new THREE.MeshStandardMaterial({\r\n    color: color,\r\n    metalness: 0.5,\r\n    roughness: 0.4\r\n  });\r\n  const top = new THREE.Mesh(topGeo, topMat);\r\n  top.position.y = size * 1.7;\r\n  group.add(top);\r\n\r\n  return group;\r\n}\r\n\r\nexport function createInteractiveHotspot(size = 0.2, color = 0xff6b6b) {\r\n  const group = new THREE.Group();\r\n\r\n  const sphereGeo = new THREE.SphereGeometry(size, 16, 16);\r\n  const sphereMat = new THREE.MeshBasicMaterial({\r\n    color: color,\r\n    transparent: true,\r\n    opacity: 0.6\r\n  });\r\n  const sphere = new THREE.Mesh(sphereGeo, sphereMat);\r\n  group.add(sphere);\r\n\r\n  const ringGeo = new THREE.RingGeometry(size * 1.5, size * 1.5, 32);\r\n  const ringMat = new THREE.MeshBasicMaterial({\r\n    color: color,\r\n    transparent: true,\r\n    opacity: 0.3,\r\n    side: THREE.DoubleSide\r\n  });\r\n  const ring = new THREE.Mesh(ringGeo, ringMat);\r\n  ring.rotation.x = Math.PI / 2;\r\n  group.add(ring);\r\n\r\n  group.userData.interactive = true;\r\n  group.userData.hotspotType = 'info';\r\n\r\n  return group;\r\n}\r\n\r\nexport function batchOptimizeModels(models) {\r\n  const scene = new THREE.Scene();\r\n\r\n  models.forEach(model => {\r\n    scene.add(model);\r\n  });\r\n\r\n  scene.traverse(child => {\r\n    if (child.isMesh) {\r\n      child.geometry.computeBoundingSphere();\r\n    }\r\n  });\r\n\r\n  return scene;\r\n}\r\n\r\nexport function createLODModel(baseModel, levels = 3) {\r\n  const lodGroup = new THREE.Group();\r\n  const distances = [0, 5, 10, 20];\r\n\r\n  for (let level = 0; level < levels; level++) {\r\n    const clone = baseModel.clone();\r\n    const simplifyFactor = level / (levels - 1);\r\n\r\n    clone.traverse(child => {\r\n      if (child.isMesh && child.geometry) {\r\n        const originalVertices = child.geometry.attributes.position.count;\r\n        const targetVertices = Math.floor(originalVertices * (1 - simplifyFactor * 0.5));\r\n\r\n        if (child.geometry.index) {\r\n          child.geometry.setDrawRange(0, targetVertices);\r\n        }\r\n\r\n        if (child.material) {\r\n          const simplifiedMat = child.material.clone();\r\n          simplifiedMat.wireframe = level === levels - 1;\r\n          child.material = simplifiedMat;\r\n        }\r\n      }\r\n    });\r\n\r\n    clone.position.set(0, 0, 0);\r\n    lodGroup.add(clone);\r\n  }\r\n\r\n  return lodGroup;\r\n}\r\n\r\nexport class VRObjectPool {\r\n  constructor() {\r\n    this.pools = new Map();\r\n    this.maxSize = 50;\r\n  }\r\n\r\n  get(type, key) {\r\n    const poolKey = `${type}_${key}`;\r\n    if (!this.pools.has(poolKey)) {\r\n      this.pools.set(poolKey, []);\r\n    }\r\n\r\n    const pool = this.pools.get(poolKey);\r\n    return pool.length > 0 ? pool.pop() : null;\r\n  }\r\n\r\n  release(type, key, object) {\r\n    const poolKey = `${type}_${key}`;\r\n    if (!this.pools.has(poolKey)) {\r\n      this.pools.set(poolKey, []);\r\n    }\r\n\r\n    const pool = this.pools.get(poolKey);\r\n    if (pool.length < this.maxSize) {\r\n      object.visible = false;\r\n      object.position.set(0, 0, 0);\r\n      object.rotation.set(0, 0, 0);\r\n      pool.push(object);\r\n    } else {\r\n      object.traverse(child => {\r\n        if (child.geometry) child.geometry.dispose();\r\n        if (child.material) child.material.dispose();\r\n      });\r\n    }\r\n  }\r\n\r\n  dispose() {\r\n    this.pools.forEach(pool => {\r\n      pool.forEach(object => {\r\n        object.traverse(child => {\r\n          if (child.geometry) child.geometry.dispose();\r\n          if (child.material) child.material.dispose();\r\n        });\r\n      });\r\n    });\r\n    this.pools.clear();\r\n  }\r\n}\r\n\r\nexport function optimizeForMobileVR(model) {\r\n  const simplified = model.clone();\r\n\r\n  simplified.traverse(child => {\r\n    if (child.isMesh) {\r\n      if (child.geometry) {\r\n        child.geometry.computeVertexNormals();\r\n\r\n        if (child.geometry.attributes.uv) {\r\n          const uv = child.geometry.attributes.uv;\r\n          for (let i = 0; i < uv.count; i++) {\r\n            uv.setXY(i, Math.round(uv.getX(i) * 64) / 64, Math.round(uv.getY(i) * 64) / 64);\r\n          }\r\n          uv.needsUpdate = true;\r\n        }\r\n      }\r\n\r\n      if (child.material) {\r\n        if (child.material.map) {\r\n          if (child.material.map.image) {\r\n            const canvas = document.createElement('canvas');\r\n            canvas.width = 64;\r\n            canvas.height = 64;\r\n            const ctx = canvas.getContext('2d');\r\n            ctx.drawImage(child.material.map.image, 0, 0, 64, 64);\r\n            const texture = new THREE.CanvasTexture(canvas);\r\n            child.material.map = texture;\r\n          }\r\n        }\r\n\r\n        child.material.side = THREE.DoubleSide;\r\n\r\n        if (Array.isArray(child.material)) {\r\n          child.material.forEach(mat => {\r\n            mat.side = THREE.DoubleSide;\r\n          });\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  return simplified;\r\n}\r\n\r\nexport function createDistanceCuller(models, camera) {\r\n  return {\r\n    update: function() {\r\n      const frustum = new THREE.Frustum();\r\n      frustum.setFromProjectionMatrix(camera.projectionMatrix);\r\n      frustum.multiplyMatrices(camera.matrixWorldInverse, frustum);\r\n\r\n      models.forEach(model => {\r\n        if (model.userData.boundingSphere) {\r\n          model.visible = frustum.intersectsSphere(model.userData.boundingSphere);\r\n        } else {\r\n          const sphere = new THREE.Sphere();\r\n          sphere.setFromObject(model);\r\n          model.userData.boundingSphere = sphere;\r\n          model.visible = frustum.intersectsSphere(sphere);\r\n        }\r\n      });\r\n    }\r\n  };\r\n}\r\n\r\nexport function measureModelPerformance(model) {\r\n  const stats = {\r\n    vertices: 0,\r\n    triangles: 0,\r\n    materials: 0,\r\n    drawCalls: 0\r\n  };\r\n\r\n  model.traverse(child => {\r\n    if (child.isMesh) {\r\n      if (child.geometry) {\r\n        if (child.geometry.attributes.position) {\r\n          stats.vertices += child.geometry.attributes.position.count;\r\n        }\r\n        if (child.geometry.index) {\r\n          stats.triangles += child.geometry.index.count / 3;\r\n        } else {\r\n          stats.triangles += child.geometry.attributes.position.count / 3;\r\n        }\r\n      }\r\n\r\n      if (child.material) {\r\n        const mats = Array.isArray(child.material) ? child.material : [child.material];\r\n        stats.materials += mats.length;\r\n        stats.drawCalls++;\r\n      }\r\n    }\r\n  });\r\n\r\n  return stats;\r\n}\r\n\r\nexport function validateModelForVR(model, warnings = []) {\r\n  const stats = measureModelPerformance(model);\r\n\r\n  if (stats.triangles > 100000) {\r\n    warnings.push({\r\n      type: 'high_poly',\r\n      message: `Model has ${stats.triangles.toLocaleString()} triangles. Consider simplifying.`,\r\n      severity: 'warning'\r\n    });\r\n  }\r\n\r\n  if (stats.triangles > 50000) {\r\n    warnings.push({\r\n      type: 'medium_poly',\r\n      message: `Model has ${stats.triangles.toLocaleString()} triangles. Recommended: <50k for VR.`,\r\n      severity: 'info'\r\n    });\r\n  }\r\n\r\n  if (stats.materials > 10) {\r\n    warnings.push({\r\n      type: 'high_materials',\r\n      message: `Model uses ${stats.materials} materials. Consider batching.`,\r\n      severity: 'warning'\r\n    });\r\n  }\r\n\r\n  const hasAnimation = model.animations && model.animations.length > 0;\r\n  if (hasAnimation && stats.triangles > 20000) {\r\n    warnings.push({\r\n      type: 'animated_poly',\r\n      message: `Animated model has ${stats.triangles.toLocaleString()} triangles. High for VR animation.`,\r\n      severity: 'warning'\r\n    });\r\n  }\r\n\r\n  model.userData.validationWarnings = warnings;\r\n  model.userData.performanceStats = stats;\r\n\r\n  return {stats, warnings};\r\n}\r\n\r\nexport function createBillboard(text, color, size = 1) {\r\n  const canvas = document.createElement('canvas');\r\n  const ctx = canvas.getContext('2d');\r\n  canvas.width = 512;\r\n  canvas.height = 256;\r\n\r\n  ctx.font = `${size * 60}px Arial`;\r\n  ctx.fillStyle = color || '#ffffff';\r\n  ctx.textAlign = 'center';\r\n  ctx.textBaseline = 'middle';\r\n  ctx.fillText(text, 256, 128);\r\n\r\n  const texture = new THREE.CanvasTexture(canvas);\r\n  texture.needsUpdate = true;\r\n\r\n  const geo = new THREE.PlaneGeometry(1, 0.5);\r\n  const mat = new THREE.MeshBasicMaterial({\r\n    map: texture,\r\n    transparent: true,\r\n    side: THREE.DoubleSide\r\n  });\r\n\r\n  const mesh = new THREE.Mesh(geo, mat);\r\n  mesh.position.set(0, 0, 0);\r\n\r\n  const group = new THREE.Group();\r\n  group.add(mesh);\r\n\r\n  return group;\r\n}\r\n","import * as THREE from 'three';\r\nimport { PointerLockControls } from 'three/examples/jsm/controls/PointerLockControls.js';\r\n\r\nimport {VRButton} from './lib/VRButton.js';\r\nimport {slideshow} from './lib/slideshow.js';\r\nimport {loadAssets} from './lib/assetManager.js';\r\n\r\n// ECSY\r\nimport { World } from 'ecsy';\r\nimport { SDFTextSystem } from './systems/SDFTextSystem.js';\r\nimport { DebugHelperSystem } from './systems/DebugHelperSystem.js';\r\nimport { AreaCheckerSystem } from './systems/AreaCheckerSystem.js';\r\nimport { ControllersSystem } from './systems/ControllersSystem.js';\r\nimport HierarchySystem from './systems/HierarchySystem.js';\r\nimport TransformSystem from './systems/TransformSystem.js';\r\nimport BillboardSystem from './systems/BillboardSystem.js';\r\n\r\nimport SystemsGroup from './systems/SystemsGroup.js';\r\n\r\nimport assets from './assets.js';\r\nimport shaders from './lib/shaders.js';\r\n\r\nimport { Text, Object3D, AreaChecker } from './components/index.js';\r\n\r\nimport RayControl from './lib/RayControl.js';\r\nimport Teleport from './lib/Teleport.js';\r\n\r\nimport * as roomLobby from './rooms/Lobby.js';\r\nimport ElementRoom from './rooms/ElementRoom.js';\r\nimport ExperimentalRoom from './rooms/ExperimentalRoom.js';\r\n\r\nimport {ELEMENTS, EXPERIMENTAL_ROOMS} from './data/elements.js';\r\nimport ParticleSystem from './lib/ParticleSys.js';\r\n// import VoiceCommander from './lib/VoiceCommander.js';\n\nvar clock = new THREE.Clock();\n\nvar scene, renderer, camera, controls, context = {};\nvar raycontrol, teleport, controllers = [];\n// var voiceCommander;\n\r\nvar listener, ambientMusic;\r\n\r\nvar rooms = [];\r\nvar currentElementRoom = null;\r\nvar currentExpRoom = null;\r\n\r\nconst ROOM_LOBBY = 0;\r\nconst ROOM_ELEMENTS_START = 1;\r\nconst ROOM_ELEMENTS_END = ROOM_ELEMENTS_START + ELEMENTS.length - 1;\r\nconst ROOM_EXP_START = ROOM_ELEMENTS_END + 1;\r\n\r\nvar elementRooms = [];\r\nvar expRooms = [];\r\n\r\nconst urlObject = new URL(window.location);\r\nconst roomName = urlObject.searchParams.get('room');\r\nconst debug = urlObject.searchParams.has('debug');\r\nconst handedness = urlObject.searchParams.has('handedness') ? urlObject.searchParams.get('handedness') : \"right\";\r\n\r\nconst targetPositions = {\r\n  lobby: {\r\n    fromElement: new THREE.Vector3(0, 0, 5)\r\n  },\r\n  elements: {\r\n    toLobby: new THREE.Vector3(0, 0, -5)\r\n  },\r\n  expRooms: {\r\n    toLobby: new THREE.Vector3(0, 0, -5)\r\n  }\r\n};\r\n\r\nfunction gotoRoom(roomIndex, elementSymbol = null, expRoomId = null) {\r\n  rooms[context.room].exit(context);\r\n  raycontrol.deactivateAll();\r\n\r\n  const prevRoom = context.room;\r\n\r\n  if (roomIndex === ROOM_LOBBY) {\r\n    currentElementRoom = null;\r\n    currentExpRoom = null;\r\n  } else if (roomIndex >= ROOM_ELEMENTS_START && roomIndex <= ROOM_ELEMENTS_END) {\r\n    currentElementRoom = elementSymbol;\r\n    currentExpRoom = null;\r\n  } else if (roomIndex >= ROOM_EXP_START) {\r\n    currentElementRoom = null;\r\n    currentExpRoom = expRoomId;\r\n  }\r\n\r\n  context.room = roomIndex;\r\n  playMusic(roomIndex);\r\n\r\n  rooms[context.room].enter(context, elementSymbol || expRoomId);\r\n}\r\n\r\nfunction playMusic(roomIndex) {\r\n  if (ambientMusic && ambientMusic.source) ambientMusic.stop();\r\n\r\n  if (roomIndex !== ROOM_LOBBY) {\r\n  }\r\n}\r\n\r\nvar ecsyWorld;\r\nvar systemsGroup = {};\r\n\r\nfunction detectWebXR() {\r\n  if ('xr' in navigator) {\r\n    navigator.xr.isSessionSupported('immersive-vr').then( supported => {\r\n      const noWebXRElement = document.getElementById('no-webxr');\r\n      if (!supported && noWebXRElement) {\r\n        noWebXRElement.classList.remove('hidden');\r\n      }\r\n    } );\r\n\r\n  } else {\r\n    const noWebXRElement = document.getElementById('no-webxr');\r\n    if (noWebXRElement) {\r\n      noWebXRElement.classList.remove('hidden');\r\n    }\r\n  }\r\n}\r\n\r\nexport function init() {\r\n  detectWebXR();\r\n\r\n  const handElement = document.getElementById(handedness + 'hand');\r\n  if (handElement) {\r\n    handElement.classList.add('activehand');\r\n  }\r\n\r\n  ecsyWorld = new World();\r\n  ecsyWorld\r\n    .registerSystem(SDFTextSystem)\r\n    .registerSystem(AreaCheckerSystem)\r\n    .registerSystem(ControllersSystem)\r\n    .registerSystem(DebugHelperSystem)\r\n    .registerSystem(TransformSystem)\r\n    .registerSystem(BillboardSystem)\r\n    .registerSystem(HierarchySystem);\r\n\r\n  systemsGroup['lobby'] = new SystemsGroup(ecsyWorld, [\r\n    AreaCheckerSystem, ControllersSystem, DebugHelperSystem\r\n  ]);\r\n\r\n  renderer = new THREE.WebGLRenderer({\r\n    antialias: true,\r\n    logarithmicDepthBuffer: false,\r\n    powerPreference: \"high-performance\",\r\n    preserveDrawingBuffer: false,\r\n    failIfMajorPerformanceCaveat: false\r\n  });\r\n  renderer.gammaFactor = 2.2;\r\n  renderer.outputEncoding = THREE.sRGBEncoding;\r\n  renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\r\n  renderer.setSize(window.innerWidth, window.innerHeight);\r\n  renderer.xr.enabled = true;\r\n\r\n  renderer.sortObjects = false;\r\n  renderer.autoClear = true;\r\n  renderer.autoClearDepth = true;\r\n  renderer.autoClearStencil = true;\r\n\r\n  scene = new THREE.Scene();\r\n  camera = new THREE.PerspectiveCamera(80, window.innerWidth / window.innerHeight, 0.005, 10000);\r\n  camera.position.set(0, 1.6, 0);\r\n  listener = new THREE.AudioListener();\r\n  camera.add(listener);\r\n\r\n  ambientMusic = new THREE.Audio(listener);\r\n\r\n  controls = new PointerLockControls(camera, renderer.domElement);\r\n\r\n  document.body.addEventListener('click', () => {\r\n    if (!context.vrMode) {\r\n      controls.lock();\r\n    }\r\n  });\r\n\r\n  var moveForward = false;\r\n  var moveBackward = false;\r\n  var moveLeft = false;\r\n  var moveRight = false;\r\n\r\n  document.addEventListener('keydown', (ev) => {\r\n    switch(ev.keyCode) {\r\n      case 87: case 38: moveForward = true; break;\r\n      case 65: case 37: moveLeft = true; break;\r\n      case 83: case 40: moveBackward = true; break;\r\n      case 68: case 39: moveRight = true; break;\r\n    }\r\n  });\r\n\r\n  document.addEventListener('keyup', (ev) => {\r\n    switch(ev.keyCode) {\r\n      case 87: case 38: moveForward = false; break;\r\n      case 65: case 37: moveLeft = false; break;\r\n      case 83: case 40: moveBackward = false; break;\r\n      case 68: case 39: moveRight = false; break;\r\n    }\r\n  });\r\n\r\n  context.browserControls = {\r\n    controls: controls,\r\n    moveForward: () => moveForward,\r\n    moveBackward: () => moveBackward,\r\n    moveLeft: () => moveLeft,\r\n    moveRight: () => moveRight\r\n  };\r\n\r\n  for (let i = 0; i < 2; i++) {\r\n    controllers[i] = renderer.xr.getController(i);\r\n    controllers[i].raycaster = new THREE.Raycaster();\r\n    controllers[i].raycaster.near = 0.1;\r\n    controllers[i].addEventListener('selectstart', onSelectStart);\r\n    controllers[i].addEventListener('selectend', onSelectEnd);\r\n  }\r\n\r\n  const lightSun = new THREE.DirectionalLight(0xeeffff);\r\n  lightSun.name = 'sun';\r\n  lightSun.position.set(0.2, 1, 0.1);\r\n  const lightFill = new THREE.DirectionalLight(0xfff0ee, 0.3);\r\n  lightFill.name = 'fillLight';\r\n  lightFill.position.set(-0.2, -1, -0.1);\r\n\r\n  scene.add(lightSun, lightFill);\r\n\r\n  var cameraRig = new THREE.Group();\r\n  cameraRig.add(camera);\r\n  cameraRig.add(controllers[0]);\r\n  cameraRig.add(controllers[1]);\r\n  cameraRig.position.set(0, 0, 2);\r\n  scene.add(cameraRig);\r\n\r\n  context.vrMode = false;\r\n  context.assets = assets;\r\n  context.shaders = shaders;\r\n  context.scene = scene;\r\n  context.renderer = renderer;\r\n  context.camera = camera;\r\n  context.audioListener = listener;\r\n  context.goto = null;\r\n  context.cameraRig = cameraRig;\r\n  context.controllers = controllers;\r\n  context.world = ecsyWorld;\r\n  context.systemsGroup = systemsGroup;\r\n  context.handedness = handedness;\r\n  context.GotoRoom = gotoRoom;\r\n\r\n  window.context = context;\r\n\r\n  loadAssets(renderer, 'assets/', assets, () => {\r\n    raycontrol = new RayControl(context, handedness);\r\n    context.raycontrol = raycontrol;\r\n\r\n    teleport = new Teleport(context);\r\n    context.teleport = teleport;\r\n\r\n    // voiceCommander = new VoiceCommander(context);\n\n    setupControllers();\n\r\n    rooms[ROOM_LOBBY] = roomLobby;\r\n    rooms[ROOM_LOBBY].setup(context);\r\n    context.room = ROOM_LOBBY;\r\n    context.cameraRig.position.set(0, 0, 2);\r\n\r\n    document.body.appendChild(renderer.domElement);\r\n    document.body.appendChild(VRButton.createButton(renderer, status => {\r\n      const wasVrMode = context.vrMode;\r\n      context.vrMode = status === 'sessionStarted';\r\n\r\n      if (context.vrMode && !wasVrMode) {\r\n        rooms[context.room].exit(context);\r\n        context.cameraRig.position.set(0, 0, 2);\r\n      } else if (!context.vrMode && wasVrMode) {\r\n        rooms[context.room].enter(context);\r\n      }\r\n    }));\r\n\r\n    document.getElementById('loading').style.display = 'none';\r\n\r\n    rooms[ROOM_LOBBY].enter(context);\r\n    renderer.setAnimationLoop(animate);\r\n  },\r\n\r\n  loadProgress => {\r\n    document.querySelector('#progressbar').setAttribute('stroke-dashoffset',\r\n      - (282 - Math.floor(loadProgress / 27 * 282)));\r\n  },\r\n\r\n  debug);\r\n}\r\n\r\nfunction setupControllers() {\n  // voiceCommander.init();\n\n  var model = assets['generic_controller_model'].scene;\n  var material = new THREE.MeshLambertMaterial({\r\n    map: assets['controller_tex'],\r\n  });\r\n  model.getObjectByName('body').material = material;\r\n  model.getObjectByName('trigger').material = material;\r\n\r\n  for (let i = 0; i < 2; i++) {\r\n    let controller = controllers[i];\r\n    controller.boundingBox = new THREE.Box3();\r\n    controller.userData.grabbing = null;\r\n    controller.addEventListener( 'connected', function ( event ) {\r\n      this.add(model.clone());\r\n      raycontrol.addController(this, event.data);\r\n    } );\r\n    controller.addEventListener( 'disconnect', function () {\r\n      this.remove(this.children[0]);\r\n      raycontrol.removeController(this, event.data);\r\n    });\r\n  }\r\n}\r\n\r\nvar selectStartSkip = {};\r\nvar selectEndSkip = {};\r\nvar OculusBrowser = navigator.userAgent.indexOf(\"OculusBrowser\") !== -1 &&\r\n  parseInt(navigator.userAgent.match(/OculusBrowser\\/([0-9]+)./)[1]) < 8;\r\n\r\nfunction onSelectStart(ev) {\r\n  if (OculusBrowser) {\r\n    const controller = ev.target;\r\n    if (!selectStartSkip[controller]) {\r\n      selectStartSkip[controller] = true;\r\n      return;\r\n    }\r\n    selectStartSkip[controller] = false;\r\n  }\r\n\r\n  const trigger = ev.target.getObjectByName('trigger');\r\n  trigger.rotation.x = -0.3;\r\n  raycontrol.onSelectStart(ev);\r\n}\r\n\r\nfunction onSelectEnd(ev) {\r\n  if (OculusBrowser) {\r\n    const controller = ev.target;\r\n    if (!selectEndSkip[controller]) {\r\n      selectEndSkip[controller] = true;\r\n      return;\r\n    }\r\n    selectEndSkip[controller] = false;\r\n  }\r\n\r\n  const trigger = ev.target.getObjectByName('trigger');\r\n  trigger.rotation.x = 0;\r\n  raycontrol.onSelectEnd(ev);\r\n}\r\n\r\nfunction onWindowResize() {\n  if (!camera || !renderer) return;\n  camera.aspect = window.innerWidth / window.innerHeight;\n  camera.updateProjectionMatrix();\n  renderer.setSize(window.innerWidth, window.innerHeight);\n}\n\r\nfunction animate() {\r\n  var delta = clock.getDelta();\r\n  var elapsedTime = clock.elapsedTime;\r\n\r\n  ecsyWorld.execute(delta, elapsedTime);\r\n\r\n  for (let i = 0; i < controllers.length; i++) {\r\n    const model = controllers[i].getObjectByName('Scene');\r\n    if (model) {\r\n      controllers[i].boundingBox.setFromObject(model);\r\n    }\r\n  }\r\n\r\n  if (!context.vrMode && context.browserControls) {\r\n    const velocity = 3.0;\r\n    const bc = context.browserControls;\r\n\r\n    if (bc.controls.isLocked) {\r\n      if (bc.moveForward()) context.camera.translateZ(-velocity * delta);\r\n      if (bc.moveBackward()) context.camera.translateZ(velocity * delta);\r\n      if (bc.moveLeft()) context.camera.translateX(-velocity * delta);\r\n      if (bc.moveRight()) context.camera.translateX(velocity * delta);\r\n    }\r\n  }\r\n\r\n  if (context.raycontrol) {\r\n    context.raycontrol.execute(context, delta, elapsedTime);\r\n  }\r\n  if (typeof context.room !== 'undefined' && rooms[context.room]) {\r\n    const currentRoom = rooms[context.room];\r\n    if (typeof currentRoom.execute === 'function') {\r\n      currentRoom.execute(context, delta, elapsedTime);\r\n    }\r\n  }\r\n\r\n  renderer.render(scene, camera);\r\n  if (typeof context.goto !== 'undefined' && context.goto !== null) {\r\n    gotoRoom(context.goto);\r\n    context.goto = null;\r\n  }\r\n}\r\n\r\nwindow.addEventListener('resize', onWindowResize, false);\r\nwindow.onload = () => {init()};\r\n"],"sourceRoot":""}