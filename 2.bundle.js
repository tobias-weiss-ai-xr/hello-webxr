(window.webpackJsonp=window.webpackJsonp||[]).push([[2],[,,function(e,t,r){!function(e){"use strict";var t="function"==typeof Promise?function(){var e,t,r=new Promise((function(r,i){e=r,t=i}));return{then:r.then.bind(r),resolve:e,reject:t}}:function e(){var t,r=0,i=[],n=0,a=0,s=A((function(e){a||l(1,e)})),o=A((function(e){a||l(-1,e)}));function l(e,i){a++;var n=0;try{i===m&&f();var s=e>0&&d(i);s?s.call(i,A((function(e){n++,l(1,e)})),A((function(e){n++,l(-1,e)}))):(r=e,t=i,h())}catch(e){r||n||l(-1,e)}}function h(){n||(setTimeout(u,0),n=1)}function u(){var e=i;n=0,i=[],e.forEach(c)}function c(e){e()}function d(e){var t=e&&(p(e)||"object"==typeof e)&&e.then;return p(t)&&t}function A(e){var t=0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];t++||e.apply(this,r)}}function f(){throw new TypeError("Chaining cycle detected")}var p=function(e){return"function"==typeof e},m={then:function(n,a){var s=e();return i.push((function(){var e=r>0?n:a;if(p(e))try{var i=e(t);i===s&&f();var o=d(i);o?o.call(i,s.resolve,s.reject):s.resolve(i)}catch(e){s.reject(e)}else s[r>0?"resolve":"reject"](t)})),r&&h(),s},resolve:s,reject:o};return m},r=0,i=0,n=Object.create(null),a=Object.create(null);function s(e){if(!e||"function"!=typeof e.init)throw new Error("requires `options.init` function");var t=e.dependencies,i=e.init,n=e.getTransferables,a=e.workerId;null==a&&(a="#default");var l="workerModule"+ ++r,u=null;function c(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return u||(u=h(a,"registerModule",c.workerModuleData)),u.then((function(t){if(t.isCallable)return h(a,"callModule",{id:l,args:e});throw new Error("Worker module function was called but `init` did not return a callable function")}))}return t=t&&t.map((function(e){return"function"!=typeof e||e.workerModuleData||(e=s({workerId:a,init:new Function("return function(){return ("+o(e)+")}")()})),e&&e.workerModuleData&&(e=e.workerModuleData),e})),c.workerModuleData={isWorkerModule:!0,id:l,dependencies:t,init:o(i),getTransferables:n&&o(n)},c}function o(e){var t=e.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function l(e){var t=n[e];if(!t){var r=function(){var e=Object.create(null);self.addEventListener("message",(function(t){var r=t.data,i=r.messageId,n=r.action,a=r.data;try{"registerModule"===n&&function t(r,i){var n=r.id,a=r.dependencies;void 0===a&&(a=[]);var s=r.init;void 0===s&&(s=function(){});var o=r.getTransferables;if(void 0===o&&(o=null),!e[n])try{a=a.map((function(r){return r&&r.isWorkerModule&&(t(r,(function(e){if(e instanceof Error)throw e})),r=e[r.id].value),r})),s=new Function("return ("+s+")")(),o&&(o=new Function("return ("+o+")")());var l=s.apply(void 0,a);e[n]={id:n,value:l,getTransferables:o},i(l)}catch(e){e&&e.noLog||console.error(e),i(e)}}(a,(function(e){e instanceof Error?postMessage({messageId:i,success:!1,error:e.message}):postMessage({messageId:i,success:!0,result:{isCallable:"function"==typeof e}})})),"callModule"===n&&function(t,r){var i,n=t.id,a=t.args;e[n]&&"function"==typeof e[n].value||r(new Error("Worker module "+n+": not found or its 'init' did not return a function"));try{var s=(i=e[n]).value.apply(i,a);s&&"function"==typeof s.then?s.then(o,(function(e){return r(e instanceof Error?e:new Error(""+e))})):o(s)}catch(e){r(e)}function o(t){try{var i=e[n].getTransferables&&e[n].getTransferables(t);i&&Array.isArray(i)&&i.length||(i=void 0),r(t,i)}catch(e){console.error(e),r(e)}}}(a,(function(e,t){e instanceof Error?postMessage({messageId:i,success:!1,error:e.message}):postMessage({messageId:i,success:!0,result:e},t||void 0)}))}catch(e){postMessage({messageId:i,success:!1,error:e.stack})}}))}.toString();(t=n[e]=new Worker(URL.createObjectURL(new Blob([";("+r+")()"],{type:"application/javascript"})))).onmessage=function(e){var t=e.data,r=t.messageId,i=a[r];if(!i)throw new Error("WorkerModule response with empty or unknown messageId");delete a[r],a.count--,i(t)}}return t}function h(e,r,n){var s=t(),o=++i;return a[o]=function(e){e.success?s.resolve(e.result):s.reject(new Error("Error in worker "+r+" call: "+e.error))},a._count++,a.count>1e3&&console.warn("Large number of open WorkerModule requests, some may not be returning"),l(e).postMessage({messageId:o,action:r,data:n}),s}a._count=0;var u=s({dependencies:[t],init:function(e){return e}});e.Thenable=t,e.ThenableWorkerModule=u,e.defineWorkerModule=s,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,r){"use strict";r.d(t,"a",(function(){return w}));var i=r(0),n=r(2),a=r(9);var s=Object(n.defineWorkerModule)({dependencies:[function(){var e=self,t={parse:function(e){var r=t._bin,i=new Uint8Array(e);if("ttcf"==r.readASCII(i,0,4)){var n=4;r.readUshort(i,n);n+=2;r.readUshort(i,n);n+=2;var a=r.readUint(i,n);n+=4;for(var s=[],o=0;o<a;o++){var l=r.readUint(i,n);n+=4,s.push(t._readFont(i,l))}return s}return[t._readFont(i,0)]},_readFont:function(e,r){var i=t._bin,n=r;i.readFixed(e,r);r+=4;var a=i.readUshort(e,r);r+=2;i.readUshort(e,r);r+=2;i.readUshort(e,r);r+=2;i.readUshort(e,r);r+=2;for(var s=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],o={_data:e,_offset:n},l={},h=0;h<a;h++){var u=i.readASCII(e,r,4);r+=4;i.readUint(e,r);r+=4;var c=i.readUint(e,r);r+=4;var d=i.readUint(e,r);r+=4,l[u]={offset:c,length:d}}for(h=0;h<s.length;h++){var A=s[h];l[A]&&(o[A.trim()]=t[A.trim()].parse(e,l[A].offset,l[A].length,o))}return o},_tabOffset:function(e,r,i){for(var n=t._bin,a=n.readUshort(e,i+4),s=i+12,o=0;o<a;o++){var l=n.readASCII(e,s,4);s+=4;n.readUint(e,s);s+=4;var h=n.readUint(e,s);s+=4;n.readUint(e,s);if(s+=4,l==r)return h}return 0}};return t._bin={readFixed:function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<8|e[t+3])/65540},readF2dot14:function(e,r){return t._bin.readShort(e,r)/16384},readInt:function(e,r){var i=t._bin.t.uint8;return i[0]=e[r+3],i[1]=e[r+2],i[2]=e[r+1],i[3]=e[r],t._bin.t.int32[0]},readInt8:function(e,r){return t._bin.t.uint8[0]=e[r],t._bin.t.int8[0]},readShort:function(e,r){var i=t._bin.t.uint8;return i[1]=e[r],i[0]=e[r+1],t._bin.t.int16[0]},readUshort:function(e,t){return e[t]<<8|e[t+1]},readUshorts:function(e,r,i){for(var n=[],a=0;a<i;a++)n.push(t._bin.readUshort(e,r+2*a));return n},readUint:function(e,r){var i=t._bin.t.uint8;return i[3]=e[r],i[2]=e[r+1],i[1]=e[r+2],i[0]=e[r+3],t._bin.t.uint32[0]},readUint64:function(e,r){return 4294967296*t._bin.readUint(e,r)+t._bin.readUint(e,r+4)},readASCII:function(e,t,r){for(var i="",n=0;n<r;n++)i+=String.fromCharCode(e[t+n]);return i},readUnicode:function(e,t,r){for(var i="",n=0;n<r;n++){var a=e[t++]<<8|e[t++];i+=String.fromCharCode(a)}return i},_tdec:e.TextDecoder?new e.TextDecoder:null,readUTF8:function(e,r,i){var n=t._bin._tdec;return n&&0==r&&i==e.length?n.decode(e):t._bin.readASCII(e,r,i)},readBytes:function(e,t,r){for(var i=[],n=0;n<r;n++)i.push(e[t+n]);return i},readASCIIArray:function(e,t,r){for(var i=[],n=0;n<r;n++)i.push(String.fromCharCode(e[t+n]));return i}},t._bin.t={buff:new ArrayBuffer(8)},t._bin.t.int8=new Int8Array(t._bin.t.buff),t._bin.t.uint8=new Uint8Array(t._bin.t.buff),t._bin.t.int16=new Int16Array(t._bin.t.buff),t._bin.t.uint16=new Uint16Array(t._bin.t.buff),t._bin.t.int32=new Int32Array(t._bin.t.buff),t._bin.t.uint32=new Uint32Array(t._bin.t.buff),t._lctf={},t._lctf.parse=function(e,r,i,n,a){var s=t._bin,o={},l=r;s.readFixed(e,r);r+=4;var h=s.readUshort(e,r);r+=2;var u=s.readUshort(e,r);r+=2;var c=s.readUshort(e,r);return r+=2,o.scriptList=t._lctf.readScriptList(e,l+h),o.featureList=t._lctf.readFeatureList(e,l+u),o.lookupList=t._lctf.readLookupList(e,l+c,a),o},t._lctf.readLookupList=function(e,r,i){var n=t._bin,a=r,s=[],o=n.readUshort(e,r);r+=2;for(var l=0;l<o;l++){var h=n.readUshort(e,r);r+=2;var u=t._lctf.readLookupTable(e,a+h,i);s.push(u)}return s},t._lctf.readLookupTable=function(e,r,i){var n=t._bin,a=r,s={tabs:[]};s.ltype=n.readUshort(e,r),r+=2,s.flag=n.readUshort(e,r),r+=2;var o=n.readUshort(e,r);r+=2;for(var l=0;l<o;l++){var h=n.readUshort(e,r);r+=2;var u=i(e,s.ltype,a+h);s.tabs.push(u)}return s},t._lctf.numOfOnes=function(e){for(var t=0,r=0;r<32;r++)0!=(e>>>r&1)&&t++;return t},t._lctf.readClassDef=function(e,r){var i=t._bin,n=[],a=i.readUshort(e,r);if(r+=2,1==a){var s=i.readUshort(e,r);r+=2;var o=i.readUshort(e,r);r+=2;for(var l=0;l<o;l++)n.push(s+l),n.push(s+l),n.push(i.readUshort(e,r)),r+=2}if(2==a){var h=i.readUshort(e,r);r+=2;for(l=0;l<h;l++)n.push(i.readUshort(e,r)),r+=2,n.push(i.readUshort(e,r)),r+=2,n.push(i.readUshort(e,r)),r+=2}return n},t._lctf.getInterval=function(e,t){for(var r=0;r<e.length;r+=3){var i=e[r],n=e[r+1];e[r+2];if(i<=t&&t<=n)return r}return-1},t._lctf.readCoverage=function(e,r){var i=t._bin,n={};n.fmt=i.readUshort(e,r),r+=2;var a=i.readUshort(e,r);return r+=2,1==n.fmt&&(n.tab=i.readUshorts(e,r,a)),2==n.fmt&&(n.tab=i.readUshorts(e,r,3*a)),n},t._lctf.coverageIndex=function(e,r){var i=e.tab;if(1==e.fmt)return i.indexOf(r);if(2==e.fmt){var n=t._lctf.getInterval(i,r);if(-1!=n)return i[n+2]+(r-i[n])}return-1},t._lctf.readFeatureList=function(e,r){var i=t._bin,n=r,a=[],s=i.readUshort(e,r);r+=2;for(var o=0;o<s;o++){var l=i.readASCII(e,r,4);r+=4;var h=i.readUshort(e,r);r+=2,a.push({tag:l.trim(),tab:t._lctf.readFeatureTable(e,n+h)})}return a},t._lctf.readFeatureTable=function(e,r){var i=t._bin;i.readUshort(e,r);r+=2;var n=i.readUshort(e,r);r+=2;for(var a=[],s=0;s<n;s++)a.push(i.readUshort(e,r+2*s));return a},t._lctf.readScriptList=function(e,r){var i=t._bin,n=r,a={},s=i.readUshort(e,r);r+=2;for(var o=0;o<s;o++){var l=i.readASCII(e,r,4);r+=4;var h=i.readUshort(e,r);r+=2,a[l.trim()]=t._lctf.readScriptTable(e,n+h)}return a},t._lctf.readScriptTable=function(e,r){var i=t._bin,n=r,a={},s=i.readUshort(e,r);r+=2,a.default=t._lctf.readLangSysTable(e,n+s);var o=i.readUshort(e,r);r+=2;for(var l=0;l<o;l++){var h=i.readASCII(e,r,4);r+=4;var u=i.readUshort(e,r);r+=2,a[h.trim()]=t._lctf.readLangSysTable(e,n+u)}return a},t._lctf.readLangSysTable=function(e,r){var i=t._bin,n={};i.readUshort(e,r);r+=2,n.reqFeature=i.readUshort(e,r),r+=2;var a=i.readUshort(e,r);return r+=2,n.features=i.readUshorts(e,r,a),n},t.CFF={},t.CFF.parse=function(e,r,i){var n=t._bin;(e=new Uint8Array(e.buffer,r,i))[r=0],e[++r],e[++r],e[++r];r++;var a=[];r=t.CFF.readIndex(e,r,a);for(var s=[],o=0;o<a.length-1;o++)s.push(n.readASCII(e,r+a[o],a[o+1]-a[o]));r+=a[a.length-1];var l=[];r=t.CFF.readIndex(e,r,l);var h=[];for(o=0;o<l.length-1;o++)h.push(t.CFF.readDict(e,r+l[o],r+l[o+1]));r+=l[l.length-1];var u=h[0],c=[];r=t.CFF.readIndex(e,r,c);var d=[];for(o=0;o<c.length-1;o++)d.push(n.readASCII(e,r+c[o],c[o+1]-c[o]));if(r+=c[c.length-1],t.CFF.readSubrs(e,r,u),u.CharStrings){r=u.CharStrings;c=[];r=t.CFF.readIndex(e,r,c);var A=[];for(o=0;o<c.length-1;o++)A.push(n.readBytes(e,r+c[o],c[o+1]-c[o]));u.CharStrings=A}if(u.ROS){r=u.FDArray;var f=[];r=t.CFF.readIndex(e,r,f),u.FDArray=[];for(o=0;o<f.length-1;o++){var p=t.CFF.readDict(e,r+f[o],r+f[o+1]);t.CFF._readFDict(e,p,d),u.FDArray.push(p)}r+=f[f.length-1],r=u.FDSelect,u.FDSelect=[];var m=e[r];if(r++,3!=m)throw m;var v=n.readUshort(e,r);r+=2;for(o=0;o<v+1;o++)u.FDSelect.push(n.readUshort(e,r),e[r+2]),r+=3}return u.Encoding&&(u.Encoding=t.CFF.readEncoding(e,u.Encoding,u.CharStrings.length)),u.charset&&(u.charset=t.CFF.readCharset(e,u.charset,u.CharStrings.length)),t.CFF._readFDict(e,u,d),u},t.CFF._readFDict=function(e,r,i){var n;for(var a in r.Private&&(n=r.Private[1],r.Private=t.CFF.readDict(e,n,n+r.Private[0]),r.Private.Subrs&&t.CFF.readSubrs(e,n+r.Private.Subrs,r.Private)),r)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(a)&&(r[a]=i[r[a]-426+35])},t.CFF.readSubrs=function(e,r,i){var n=t._bin,a=[];r=t.CFF.readIndex(e,r,a);var s,o=a.length;s=o<1240?107:o<33900?1131:32768,i.Bias=s,i.Subrs=[];for(var l=0;l<a.length-1;l++)i.Subrs.push(n.readBytes(e,r+a[l],a[l+1]-a[l]))},t.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],t.CFF.glyphByUnicode=function(e,t){for(var r=0;r<e.charset.length;r++)if(e.charset[r]==t)return r;return-1},t.CFF.glyphBySE=function(e,r){return r<0||r>255?-1:t.CFF.glyphByUnicode(e,t.CFF.tableSE[r])},t.CFF.readEncoding=function(e,r,i){t._bin;var n=[".notdef"],a=e[r];if(r++,0!=a)throw"error: unknown encoding format: "+a;var s=e[r];r++;for(var o=0;o<s;o++)n.push(e[r+o]);return n},t.CFF.readCharset=function(e,r,i){var n=t._bin,a=[".notdef"],s=e[r];if(r++,0==s)for(var o=0;o<i;o++){var l=n.readUshort(e,r);r+=2,a.push(l)}else{if(1!=s&&2!=s)throw"error: format: "+s;for(;a.length<i;){l=n.readUshort(e,r);r+=2;var h=0;1==s?(h=e[r],r++):(h=n.readUshort(e,r),r+=2);for(o=0;o<=h;o++)a.push(l),l++}}return a},t.CFF.readIndex=function(e,r,i){var n=t._bin,a=n.readUshort(e,r)+1,s=e[r+=2];if(r++,1==s)for(var o=0;o<a;o++)i.push(e[r+o]);else if(2==s)for(o=0;o<a;o++)i.push(n.readUshort(e,r+2*o));else if(3==s)for(o=0;o<a;o++)i.push(16777215&n.readUint(e,r+3*o-1));else if(1!=a)throw"unsupported offset size: "+s+", count: "+a;return(r+=a*s)-1},t.CFF.getCharString=function(e,r,i){var n=t._bin,a=e[r],s=e[r+1],o=(e[r+2],e[r+3],e[r+4],1),l=null,h=null;a<=20&&(l=a,o=1),12==a&&(l=100*a+s,o=2),21<=a&&a<=27&&(l=a,o=1),28==a&&(h=n.readShort(e,r+1),o=3),29<=a&&a<=31&&(l=a,o=1),32<=a&&a<=246&&(h=a-139,o=1),247<=a&&a<=250&&(h=256*(a-247)+s+108,o=2),251<=a&&a<=254&&(h=256*-(a-251)-s-108,o=2),255==a&&(h=n.readInt(e,r+1)/65535,o=5),i.val=null!=h?h:"o"+l,i.size=o},t.CFF.readCharString=function(e,r,i){for(var n=r+i,a=t._bin,s=[];r<n;){var o=e[r],l=e[r+1],h=(e[r+2],e[r+3],e[r+4],1),u=null,c=null;o<=20&&(u=o,h=1),12==o&&(u=100*o+l,h=2),19!=o&&20!=o||(u=o,h=2),21<=o&&o<=27&&(u=o,h=1),28==o&&(c=a.readShort(e,r+1),h=3),29<=o&&o<=31&&(u=o,h=1),32<=o&&o<=246&&(c=o-139,h=1),247<=o&&o<=250&&(c=256*(o-247)+l+108,h=2),251<=o&&o<=254&&(c=256*-(o-251)-l-108,h=2),255==o&&(c=a.readInt(e,r+1)/65535,h=5),s.push(null!=c?c:"o"+u),r+=h}return s},t.CFF.readDict=function(e,r,i){for(var n=t._bin,a={},s=[];r<i;){var o=e[r],l=e[r+1],h=(e[r+2],e[r+3],e[r+4],1),u=null,c=null;if(28==o&&(c=n.readShort(e,r+1),h=3),29==o&&(c=n.readInt(e,r+1),h=5),32<=o&&o<=246&&(c=o-139,h=1),247<=o&&o<=250&&(c=256*(o-247)+l+108,h=2),251<=o&&o<=254&&(c=256*-(o-251)-l-108,h=2),255==o)throw c=n.readInt(e,r+1)/65535,h=5,"unknown number";if(30==o){var d=[];for(h=1;;){var A=e[r+h];h++;var f=A>>4,p=15&A;if(15!=f&&d.push(f),15!=p&&d.push(p),15==p)break}for(var m="",v=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],g=0;g<d.length;g++)m+=v[d[g]];c=parseFloat(m)}if(o<=21)if(u=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][o],h=1,12==o)u=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][l],h=2;null!=u?(a[u]=1==s.length?s[0]:s,s=[]):s.push(c),r+=h}return a},t.cmap={},t.cmap.parse=function(e,r,i){e=new Uint8Array(e.buffer,r,i),r=0;var n=t._bin,a={};n.readUshort(e,r);r+=2;var s=n.readUshort(e,r);r+=2;var o=[];a.tables=[];for(var l=0;l<s;l++){var h=n.readUshort(e,r);r+=2;var u=n.readUshort(e,r);r+=2;var c=n.readUint(e,r);r+=4;var d="p"+h+"e"+u,A=o.indexOf(c);if(-1==A){var f;A=a.tables.length,o.push(c);var p=n.readUshort(e,c);0==p?f=t.cmap.parse0(e,c):4==p?f=t.cmap.parse4(e,c):6==p?f=t.cmap.parse6(e,c):12==p?f=t.cmap.parse12(e,c):console.log("unknown format: "+p,h,u,c),a.tables.push(f)}if(null!=a[d])throw"multiple tables for one platform+encoding";a[d]=A}return a},t.cmap.parse0=function(e,r){var i=t._bin,n={};n.format=i.readUshort(e,r),r+=2;var a=i.readUshort(e,r);r+=2;i.readUshort(e,r);r+=2,n.map=[];for(var s=0;s<a-6;s++)n.map.push(e[r+s]);return n},t.cmap.parse4=function(e,r){var i=t._bin,n=r,a={};a.format=i.readUshort(e,r),r+=2;var s=i.readUshort(e,r);r+=2;i.readUshort(e,r);r+=2;var o=i.readUshort(e,r);r+=2;var l=o/2;a.searchRange=i.readUshort(e,r),r+=2,a.entrySelector=i.readUshort(e,r),r+=2,a.rangeShift=i.readUshort(e,r),r+=2,a.endCount=i.readUshorts(e,r,l),r+=2*l,r+=2,a.startCount=i.readUshorts(e,r,l),r+=2*l,a.idDelta=[];for(var h=0;h<l;h++)a.idDelta.push(i.readShort(e,r)),r+=2;for(a.idRangeOffset=i.readUshorts(e,r,l),r+=2*l,a.glyphIdArray=[];r<n+s;)a.glyphIdArray.push(i.readUshort(e,r)),r+=2;return a},t.cmap.parse6=function(e,r){var i=t._bin,n={};n.format=i.readUshort(e,r),r+=2;i.readUshort(e,r);r+=2;i.readUshort(e,r);r+=2,n.firstCode=i.readUshort(e,r),r+=2;var a=i.readUshort(e,r);r+=2,n.glyphIdArray=[];for(var s=0;s<a;s++)n.glyphIdArray.push(i.readUshort(e,r)),r+=2;return n},t.cmap.parse12=function(e,r){var i=t._bin,n={};n.format=i.readUshort(e,r),r+=2,r+=2;i.readUint(e,r);r+=4;i.readUint(e,r);r+=4;var a=i.readUint(e,r);r+=4,n.groups=[];for(var s=0;s<a;s++){var o=r+12*s,l=i.readUint(e,o+0),h=i.readUint(e,o+4),u=i.readUint(e,o+8);n.groups.push([l,h,u])}return n},t.glyf={},t.glyf.parse=function(e,t,r,i){for(var n=[],a=0;a<i.maxp.numGlyphs;a++)n.push(null);return n},t.glyf._parseGlyf=function(e,r){var i=t._bin,n=e._data,a=t._tabOffset(n,"glyf",e._offset)+e.loca[r];if(e.loca[r]==e.loca[r+1])return null;var s={};if(s.noc=i.readShort(n,a),a+=2,s.xMin=i.readShort(n,a),a+=2,s.yMin=i.readShort(n,a),a+=2,s.xMax=i.readShort(n,a),a+=2,s.yMax=i.readShort(n,a),a+=2,s.xMin>=s.xMax||s.yMin>=s.yMax)return null;if(s.noc>0){s.endPts=[];for(var o=0;o<s.noc;o++)s.endPts.push(i.readUshort(n,a)),a+=2;var l=i.readUshort(n,a);if(a+=2,n.length-a<l)return null;s.instructions=i.readBytes(n,a,l),a+=l;var h=s.endPts[s.noc-1]+1;s.flags=[];for(o=0;o<h;o++){var u=n[a];if(a++,s.flags.push(u),0!=(8&u)){var c=n[a];a++;for(var d=0;d<c;d++)s.flags.push(u),o++}}s.xs=[];for(o=0;o<h;o++){var A=0!=(2&s.flags[o]),f=0!=(16&s.flags[o]);A?(s.xs.push(f?n[a]:-n[a]),a++):f?s.xs.push(0):(s.xs.push(i.readShort(n,a)),a+=2)}s.ys=[];for(o=0;o<h;o++){A=0!=(4&s.flags[o]),f=0!=(32&s.flags[o]);A?(s.ys.push(f?n[a]:-n[a]),a++):f?s.ys.push(0):(s.ys.push(i.readShort(n,a)),a+=2)}var p=0,m=0;for(o=0;o<h;o++)p+=s.xs[o],m+=s.ys[o],s.xs[o]=p,s.ys[o]=m}else{var v;s.parts=[];do{v=i.readUshort(n,a),a+=2;var g={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(s.parts.push(g),g.glyphIndex=i.readUshort(n,a),a+=2,1&v){var y=i.readShort(n,a);a+=2;var w=i.readShort(n,a);a+=2}else{y=i.readInt8(n,a);a++;w=i.readInt8(n,a);a++}2&v?(g.m.tx=y,g.m.ty=w):(g.p1=y,g.p2=w),8&v?(g.m.a=g.m.d=i.readF2dot14(n,a),a+=2):64&v?(g.m.a=i.readF2dot14(n,a),a+=2,g.m.d=i.readF2dot14(n,a),a+=2):128&v&&(g.m.a=i.readF2dot14(n,a),a+=2,g.m.b=i.readF2dot14(n,a),a+=2,g.m.c=i.readF2dot14(n,a),a+=2,g.m.d=i.readF2dot14(n,a),a+=2)}while(32&v);if(256&v){var b=i.readUshort(n,a);a+=2,s.instr=[];for(o=0;o<b;o++)s.instr.push(n[a]),a++}}return s},t.GPOS={},t.GPOS.parse=function(e,r,i,n){return t._lctf.parse(e,r,i,n,t.GPOS.subt)},t.GPOS.subt=function(e,r,i){var n=t._bin,a=i,s={};if(s.fmt=n.readUshort(e,i),i+=2,1==r||2==r||3==r||7==r||8==r&&s.fmt<=2){var o=n.readUshort(e,i);i+=2,s.coverage=t._lctf.readCoverage(e,o+a)}if(1==r&&1==s.fmt){var l=n.readUshort(e,i);i+=2;var h=t._lctf.numOfOnes(l);0!=l&&(s.pos=t.GPOS.readValueRecord(e,i,l))}else if(2==r){l=n.readUshort(e,i);i+=2;var u=n.readUshort(e,i);i+=2;h=t._lctf.numOfOnes(l);var c=t._lctf.numOfOnes(u);if(1==s.fmt){s.pairsets=[];var d=n.readUshort(e,i);i+=2;for(var A=0;A<d;A++){var f=a+n.readUshort(e,i);i+=2;var p=n.readUshort(e,f);f+=2;for(var m=[],v=0;v<p;v++){var g=n.readUshort(e,f);f+=2,0!=l&&(_=t.GPOS.readValueRecord(e,f,l),f+=2*h),0!=u&&(E=t.GPOS.readValueRecord(e,f,u),f+=2*c),m.push({gid2:g,val1:_,val2:E})}s.pairsets.push(m)}}if(2==s.fmt){var y=n.readUshort(e,i);i+=2;var w=n.readUshort(e,i);i+=2;var b=n.readUshort(e,i);i+=2;var S=n.readUshort(e,i);i+=2,s.classDef1=t._lctf.readClassDef(e,a+y),s.classDef2=t._lctf.readClassDef(e,a+w),s.matrix=[];for(A=0;A<b;A++){var x=[];for(v=0;v<S;v++){var _=null,E=null;0!=s.valFmt1&&(_=t.GPOS.readValueRecord(e,i,s.valFmt1),i+=2*h),0!=s.valFmt2&&(E=t.GPOS.readValueRecord(e,i,s.valFmt2),i+=2*c),x.push({val1:_,val2:E})}s.matrix.push(x)}}}return s},t.GPOS.readValueRecord=function(e,r,i){var n=t._bin,a=[];return a.push(1&i?n.readShort(e,r):0),r+=1&i?2:0,a.push(2&i?n.readShort(e,r):0),r+=2&i?2:0,a.push(4&i?n.readShort(e,r):0),r+=4&i?2:0,a.push(8&i?n.readShort(e,r):0),r+=8&i?2:0,a},t.GSUB={},t.GSUB.parse=function(e,r,i,n){return t._lctf.parse(e,r,i,n,t.GSUB.subt)},t.GSUB.subt=function(e,r,i){var n=t._bin,a=i,s={};if(s.fmt=n.readUshort(e,i),i+=2,1!=r&&4!=r&&5!=r&&6!=r)return null;if(1==r||4==r||5==r&&s.fmt<=2||6==r&&s.fmt<=2){var o=n.readUshort(e,i);i+=2,s.coverage=t._lctf.readCoverage(e,a+o)}if(1==r){if(1==s.fmt)s.delta=n.readShort(e,i),i+=2;else if(2==s.fmt){var l=n.readUshort(e,i);i+=2,s.newg=n.readUshorts(e,i,l),i+=2*s.newg.length}}else if(4==r){s.vals=[];l=n.readUshort(e,i);i+=2;for(var h=0;h<l;h++){var u=n.readUshort(e,i);i+=2,s.vals.push(t.GSUB.readLigatureSet(e,a+u))}}else if(5==r){if(2==s.fmt){var c=n.readUshort(e,i);i+=2,s.cDef=t._lctf.readClassDef(e,a+c),s.scset=[];var d=n.readUshort(e,i);i+=2;for(h=0;h<d;h++){var A=n.readUshort(e,i);i+=2,s.scset.push(0==A?null:t.GSUB.readSubClassSet(e,a+A))}}}else if(6==r&&3==s.fmt){for(h=0;h<3;h++){l=n.readUshort(e,i);i+=2;for(var f=[],p=0;p<l;p++)f.push(t._lctf.readCoverage(e,a+n.readUshort(e,i+2*p)));i+=2*l,0==h&&(s.backCvg=f),1==h&&(s.inptCvg=f),2==h&&(s.ahedCvg=f)}l=n.readUshort(e,i);i+=2,s.lookupRec=t.GSUB.readSubstLookupRecords(e,i,l)}return s},t.GSUB.readSubClassSet=function(e,r){var i=t._bin.readUshort,n=r,a=[],s=i(e,r);r+=2;for(var o=0;o<s;o++){var l=i(e,r);r+=2,a.push(t.GSUB.readSubClassRule(e,n+l))}return a},t.GSUB.readSubClassRule=function(e,r){var i=t._bin.readUshort,n={},a=i(e,r),s=i(e,r+=2);r+=2,n.input=[];for(var o=0;o<a-1;o++)n.input.push(i(e,r)),r+=2;return n.substLookupRecords=t.GSUB.readSubstLookupRecords(e,r,s),n},t.GSUB.readSubstLookupRecords=function(e,r,i){for(var n=t._bin.readUshort,a=[],s=0;s<i;s++)a.push(n(e,r),n(e,r+2)),r+=4;return a},t.GSUB.readChainSubClassSet=function(e,r){var i=t._bin,n=r,a=[],s=i.readUshort(e,r);r+=2;for(var o=0;o<s;o++){var l=i.readUshort(e,r);r+=2,a.push(t.GSUB.readChainSubClassRule(e,n+l))}return a},t.GSUB.readChainSubClassRule=function(e,r){for(var i=t._bin,n={},a=["backtrack","input","lookahead"],s=0;s<a.length;s++){var o=i.readUshort(e,r);r+=2,1==s&&o--,n[a[s]]=i.readUshorts(e,r,o),r+=2*n[a[s]].length}o=i.readUshort(e,r);return r+=2,n.subst=i.readUshorts(e,r,2*o),r+=2*n.subst.length,n},t.GSUB.readLigatureSet=function(e,r){var i=t._bin,n=r,a=[],s=i.readUshort(e,r);r+=2;for(var o=0;o<s;o++){var l=i.readUshort(e,r);r+=2,a.push(t.GSUB.readLigature(e,n+l))}return a},t.GSUB.readLigature=function(e,r){var i=t._bin,n={chain:[]};n.nglyph=i.readUshort(e,r),r+=2;var a=i.readUshort(e,r);r+=2;for(var s=0;s<a-1;s++)n.chain.push(i.readUshort(e,r)),r+=2;return n},t.head={},t.head.parse=function(e,r,i){var n=t._bin,a={};n.readFixed(e,r);r+=4,a.fontRevision=n.readFixed(e,r),r+=4;n.readUint(e,r);r+=4;n.readUint(e,r);return r+=4,a.flags=n.readUshort(e,r),r+=2,a.unitsPerEm=n.readUshort(e,r),r+=2,a.created=n.readUint64(e,r),r+=8,a.modified=n.readUint64(e,r),r+=8,a.xMin=n.readShort(e,r),r+=2,a.yMin=n.readShort(e,r),r+=2,a.xMax=n.readShort(e,r),r+=2,a.yMax=n.readShort(e,r),r+=2,a.macStyle=n.readUshort(e,r),r+=2,a.lowestRecPPEM=n.readUshort(e,r),r+=2,a.fontDirectionHint=n.readShort(e,r),r+=2,a.indexToLocFormat=n.readShort(e,r),r+=2,a.glyphDataFormat=n.readShort(e,r),r+=2,a},t.hhea={},t.hhea.parse=function(e,r,i){var n=t._bin,a={};n.readFixed(e,r);return r+=4,a.ascender=n.readShort(e,r),r+=2,a.descender=n.readShort(e,r),r+=2,a.lineGap=n.readShort(e,r),r+=2,a.advanceWidthMax=n.readUshort(e,r),r+=2,a.minLeftSideBearing=n.readShort(e,r),r+=2,a.minRightSideBearing=n.readShort(e,r),r+=2,a.xMaxExtent=n.readShort(e,r),r+=2,a.caretSlopeRise=n.readShort(e,r),r+=2,a.caretSlopeRun=n.readShort(e,r),r+=2,a.caretOffset=n.readShort(e,r),r+=2,r+=8,a.metricDataFormat=n.readShort(e,r),r+=2,a.numberOfHMetrics=n.readUshort(e,r),r+=2,a},t.hmtx={},t.hmtx.parse=function(e,r,i,n){for(var a=t._bin,s={aWidth:[],lsBearing:[]},o=0,l=0,h=0;h<n.maxp.numGlyphs;h++)h<n.hhea.numberOfHMetrics&&(o=a.readUshort(e,r),r+=2,l=a.readShort(e,r),r+=2),s.aWidth.push(o),s.lsBearing.push(l);return s},t.kern={},t.kern.parse=function(e,r,i,n){var a=t._bin,s=a.readUshort(e,r);if(r+=2,1==s)return t.kern.parseV1(e,r-2,i,n);var o=a.readUshort(e,r);r+=2;for(var l={glyph1:[],rval:[]},h=0;h<o;h++){r+=2;i=a.readUshort(e,r);r+=2;var u=a.readUshort(e,r);r+=2;var c=u>>>8;if(0!=(c&=15))throw"unknown kern table format: "+c;r=t.kern.readFormat0(e,r,l)}return l},t.kern.parseV1=function(e,r,i,n){var a=t._bin;a.readFixed(e,r);r+=4;var s=a.readUint(e,r);r+=4;for(var o={glyph1:[],rval:[]},l=0;l<s;l++){a.readUint(e,r);r+=4;var h=a.readUshort(e,r);r+=2;a.readUshort(e,r);r+=2;var u=h>>>8;if(0!=(u&=15))throw"unknown kern table format: "+u;r=t.kern.readFormat0(e,r,o)}return o},t.kern.readFormat0=function(e,r,i){var n=t._bin,a=-1,s=n.readUshort(e,r);r+=2;n.readUshort(e,r);r+=2;n.readUshort(e,r);r+=2;n.readUshort(e,r);r+=2;for(var o=0;o<s;o++){var l=n.readUshort(e,r);r+=2;var h=n.readUshort(e,r);r+=2;var u=n.readShort(e,r);r+=2,l!=a&&(i.glyph1.push(l),i.rval.push({glyph2:[],vals:[]}));var c=i.rval[i.rval.length-1];c.glyph2.push(h),c.vals.push(u),a=l}return r},t.loca={},t.loca.parse=function(e,r,i,n){var a=t._bin,s=[],o=n.head.indexToLocFormat,l=n.maxp.numGlyphs+1;if(0==o)for(var h=0;h<l;h++)s.push(a.readUshort(e,r+(h<<1))<<1);if(1==o)for(h=0;h<l;h++)s.push(a.readUint(e,r+(h<<2)));return s},t.maxp={},t.maxp.parse=function(e,r,i){var n=t._bin,a={},s=n.readUint(e,r);return r+=4,a.numGlyphs=n.readUshort(e,r),r+=2,65536==s&&(a.maxPoints=n.readUshort(e,r),r+=2,a.maxContours=n.readUshort(e,r),r+=2,a.maxCompositePoints=n.readUshort(e,r),r+=2,a.maxCompositeContours=n.readUshort(e,r),r+=2,a.maxZones=n.readUshort(e,r),r+=2,a.maxTwilightPoints=n.readUshort(e,r),r+=2,a.maxStorage=n.readUshort(e,r),r+=2,a.maxFunctionDefs=n.readUshort(e,r),r+=2,a.maxInstructionDefs=n.readUshort(e,r),r+=2,a.maxStackElements=n.readUshort(e,r),r+=2,a.maxSizeOfInstructions=n.readUshort(e,r),r+=2,a.maxComponentElements=n.readUshort(e,r),r+=2,a.maxComponentDepth=n.readUshort(e,r),r+=2),a},t.name={},t.name.parse=function(e,r,i){var n=t._bin,a={};n.readUshort(e,r);r+=2;var s=n.readUshort(e,r);r+=2;n.readUshort(e,r);for(var o,l=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],h=r+=2,u=0;u<s;u++){var c=n.readUshort(e,r);r+=2;var d=n.readUshort(e,r);r+=2;var A=n.readUshort(e,r);r+=2;var f=n.readUshort(e,r);r+=2;var p=n.readUshort(e,r);r+=2;var m=n.readUshort(e,r);r+=2;var v,g=l[f],y=h+12*s+m;if(0==c)v=n.readUnicode(e,y,p/2);else if(3==c&&0==d)v=n.readUnicode(e,y,p/2);else if(0==d)v=n.readASCII(e,y,p);else if(1==d)v=n.readUnicode(e,y,p/2);else if(3==d)v=n.readUnicode(e,y,p/2);else{if(1!=c)throw"unknown encoding "+d+", platformID: "+c;v=n.readASCII(e,y,p),console.log("reading unknown MAC encoding "+d+" as ASCII")}var w="p"+c+","+A.toString(16);null==a[w]&&(a[w]={}),a[w][g]=v,a[w]._lang=A}for(var b in a)if(null!=a[b].postScriptName&&1033==a[b]._lang)return a[b];for(var b in a)if(null!=a[b].postScriptName&&0==a[b]._lang)return a[b];for(var b in a)if(null!=a[b].postScriptName&&3084==a[b]._lang)return a[b];for(var b in a)if(null!=a[b].postScriptName)return a[b];for(var b in a){o=b;break}return console.log("returning name table with languageID "+a[o]._lang),a[o]},t["OS/2"]={},t["OS/2"].parse=function(e,r,i){var n=t._bin.readUshort(e,r);r+=2;var a={};if(0==n)t["OS/2"].version0(e,r,a);else if(1==n)t["OS/2"].version1(e,r,a);else if(2==n||3==n||4==n)t["OS/2"].version2(e,r,a);else{if(5!=n)throw"unknown OS/2 table version: "+n;t["OS/2"].version5(e,r,a)}return a},t["OS/2"].version0=function(e,r,i){var n=t._bin;return i.xAvgCharWidth=n.readShort(e,r),r+=2,i.usWeightClass=n.readUshort(e,r),r+=2,i.usWidthClass=n.readUshort(e,r),r+=2,i.fsType=n.readUshort(e,r),r+=2,i.ySubscriptXSize=n.readShort(e,r),r+=2,i.ySubscriptYSize=n.readShort(e,r),r+=2,i.ySubscriptXOffset=n.readShort(e,r),r+=2,i.ySubscriptYOffset=n.readShort(e,r),r+=2,i.ySuperscriptXSize=n.readShort(e,r),r+=2,i.ySuperscriptYSize=n.readShort(e,r),r+=2,i.ySuperscriptXOffset=n.readShort(e,r),r+=2,i.ySuperscriptYOffset=n.readShort(e,r),r+=2,i.yStrikeoutSize=n.readShort(e,r),r+=2,i.yStrikeoutPosition=n.readShort(e,r),r+=2,i.sFamilyClass=n.readShort(e,r),r+=2,i.panose=n.readBytes(e,r,10),r+=10,i.ulUnicodeRange1=n.readUint(e,r),r+=4,i.ulUnicodeRange2=n.readUint(e,r),r+=4,i.ulUnicodeRange3=n.readUint(e,r),r+=4,i.ulUnicodeRange4=n.readUint(e,r),r+=4,i.achVendID=[n.readInt8(e,r),n.readInt8(e,r+1),n.readInt8(e,r+2),n.readInt8(e,r+3)],r+=4,i.fsSelection=n.readUshort(e,r),r+=2,i.usFirstCharIndex=n.readUshort(e,r),r+=2,i.usLastCharIndex=n.readUshort(e,r),r+=2,i.sTypoAscender=n.readShort(e,r),r+=2,i.sTypoDescender=n.readShort(e,r),r+=2,i.sTypoLineGap=n.readShort(e,r),r+=2,i.usWinAscent=n.readUshort(e,r),r+=2,i.usWinDescent=n.readUshort(e,r),r+=2},t["OS/2"].version1=function(e,r,i){var n=t._bin;return r=t["OS/2"].version0(e,r,i),i.ulCodePageRange1=n.readUint(e,r),r+=4,i.ulCodePageRange2=n.readUint(e,r),r+=4},t["OS/2"].version2=function(e,r,i){var n=t._bin;return r=t["OS/2"].version1(e,r,i),i.sxHeight=n.readShort(e,r),r+=2,i.sCapHeight=n.readShort(e,r),r+=2,i.usDefault=n.readUshort(e,r),r+=2,i.usBreak=n.readUshort(e,r),r+=2,i.usMaxContext=n.readUshort(e,r),r+=2},t["OS/2"].version5=function(e,r,i){var n=t._bin;return r=t["OS/2"].version2(e,r,i),i.usLowerOpticalPointSize=n.readUshort(e,r),r+=2,i.usUpperOpticalPointSize=n.readUshort(e,r),r+=2},t.post={},t.post.parse=function(e,r,i){var n=t._bin,a={};return a.version=n.readFixed(e,r),r+=4,a.italicAngle=n.readFixed(e,r),r+=4,a.underlinePosition=n.readShort(e,r),r+=2,a.underlineThickness=n.readShort(e,r),r+=2,a},t.SVG={},t.SVG.parse=function(e,r,i){var n=t._bin,a={entries:[]},s=r;n.readUshort(e,r);r+=2;var o=n.readUint(e,r);r+=4;n.readUint(e,r);r+=4,r=o+s;var l=n.readUshort(e,r);r+=2;for(var h=0;h<l;h++){var u=n.readUshort(e,r);r+=2;var c=n.readUshort(e,r);r+=2;var d=n.readUint(e,r);r+=4;var A=n.readUint(e,r);r+=4;for(var f=new Uint8Array(e.buffer,s+d+o,A),p=n.readUTF8(f,0,f.length),m=u;m<=c;m++)a.entries[m]=p}return a},t.SVG.toPath=function(e){var r={cmds:[],crds:[]};if(null==e)return r;for(var i=(new DOMParser).parseFromString(e,"image/svg+xml").firstChild;"svg"!=i.tagName;)i=i.nextSibling;var n=i.getAttribute("viewBox");n=n?n.trim().split(" ").map(parseFloat):[0,0,1e3,1e3],t.SVG._toPath(i.children,r);for(var a=0;a<r.crds.length;a+=2){var s=r.crds[a],o=r.crds[a+1];s-=n[0],o=-(o-=n[1]),r.crds[a]=s,r.crds[a+1]=o}return r},t.SVG._toPath=function(e,r,i){for(var n=0;n<e.length;n++){var a=e[n],s=a.tagName,o=a.getAttribute("fill");if(null==o&&(o=i),"g"==s)t.SVG._toPath(a.children,r,o);else if("path"==s){r.cmds.push(o||"#000000");var l=a.getAttribute("d"),h=t.SVG._tokens(l);t.SVG._toksToPath(h,r),r.cmds.push("X")}else"defs"==s||console.log(s,a)}},t.SVG._tokens=function(e){for(var t=[],r=0,i=!1,n="";r<e.length;){var a=e.charCodeAt(r),s=e.charAt(r);r++;var o=48<=a&&a<=57||"."==s||"-"==s;i?"-"==s?(t.push(parseFloat(n)),n=s):o?n+=s:(t.push(parseFloat(n)),","!=s&&" "!=s&&t.push(s),i=!1):o?(n=s,i=!0):","!=s&&" "!=s&&t.push(s)}return i&&t.push(parseFloat(n)),t},t.SVG._toksToPath=function(e,r){for(var i=0,n=0,a=0,s=0,o=0,l={M:2,L:2,H:1,V:1,S:4,C:6},h=r.cmds,u=r.crds;i<e.length;){var c=e[i];if(i++,"z"==c)h.push("Z"),n=s,a=o;else for(var d=c.toUpperCase(),A=l[d],f=t.SVG._reps(e,i,A),p=0;p<f;p++){var m=0,v=0;if(c!=d&&(m=n,v=a),"M"==d)n=m+e[i++],a=v+e[i++],h.push("M"),u.push(n,a),s=n,o=a;else if("L"==d)n=m+e[i++],a=v+e[i++],h.push("L"),u.push(n,a);else if("H"==d)n=m+e[i++],h.push("L"),u.push(n,a);else if("V"==d)a=v+e[i++],h.push("L"),u.push(n,a);else if("C"==d){var g=m+e[i++],y=v+e[i++],w=m+e[i++],b=v+e[i++],S=m+e[i++],x=v+e[i++];h.push("C"),u.push(g,y,w,b,S,x),n=S,a=x}else if("S"==d){var _=Math.max(u.length-4,0);g=n+n-u[_],y=a+a-u[_+1],w=m+e[i++],b=v+e[i++],S=m+e[i++],x=v+e[i++];h.push("C"),u.push(g,y,w,b,S,x),n=S,a=x}else console.log("Unknown SVG command "+c)}}},t.SVG._reps=function(e,t,r){for(var i=t;i<e.length&&"string"!=typeof e[i];)i+=r;return(i-t)/r},null==t&&(t={}),null==t.U&&(t.U={}),t.U.codeToGlyph=function(e,t){var r=e.cmap,i=-1;if(null!=r.p0e4?i=r.p0e4:null!=r.p3e1?i=r.p3e1:null!=r.p1e0?i=r.p1e0:null!=r.p0e3&&(i=r.p0e3),-1==i)throw"no familiar platform and encoding!";var n=r.tables[i];if(0==n.format)return t>=n.map.length?0:n.map[t];if(4==n.format){for(var a=-1,s=0;s<n.endCount.length;s++)if(t<=n.endCount[s]){a=s;break}if(-1==a)return 0;if(n.startCount[a]>t)return 0;return 65535&(0!=n.idRangeOffset[a]?n.glyphIdArray[t-n.startCount[a]+(n.idRangeOffset[a]>>1)-(n.idRangeOffset.length-a)]:t+n.idDelta[a])}if(12==n.format){if(t>n.groups[n.groups.length-1][1])return 0;for(s=0;s<n.groups.length;s++){var o=n.groups[s];if(o[0]<=t&&t<=o[1])return o[2]+(t-o[0])}return 0}throw"unknown cmap table format "+n.format},t.U.glyphToPath=function(e,r){var i={cmds:[],crds:[]};if(e.SVG&&e.SVG.entries[r]){var n=e.SVG.entries[r];return null==n?i:("string"==typeof n&&(n=t.SVG.toPath(n),e.SVG.entries[r]=n),n)}if(e.CFF){var a={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:e.CFF.Private?e.CFF.Private.defaultWidthX:0,open:!1},s=e.CFF,o=e.CFF.Private;if(s.ROS){for(var l=0;s.FDSelect[l+2]<=r;)l+=2;o=s.FDArray[s.FDSelect[l+1]].Private}t.U._drawCFF(e.CFF.CharStrings[r],a,s,o,i)}else e.glyf&&t.U._drawGlyf(r,e,i);return i},t.U._drawGlyf=function(e,r,i){var n=r.glyf[e];null==n&&(n=r.glyf[e]=t.glyf._parseGlyf(r,e)),null!=n&&(n.noc>-1?t.U._simpleGlyph(n,i):t.U._compoGlyph(n,r,i))},t.U._simpleGlyph=function(e,r){for(var i=0;i<e.noc;i++){for(var n=0==i?0:e.endPts[i-1]+1,a=e.endPts[i],s=n;s<=a;s++){var o=s==n?a:s-1,l=s==a?n:s+1,h=1&e.flags[s],u=1&e.flags[o],c=1&e.flags[l],d=e.xs[s],A=e.ys[s];if(s==n)if(h){if(!u){t.U.P.moveTo(r,d,A);continue}t.U.P.moveTo(r,e.xs[o],e.ys[o])}else u?t.U.P.moveTo(r,e.xs[o],e.ys[o]):t.U.P.moveTo(r,(e.xs[o]+d)/2,(e.ys[o]+A)/2);h?u&&t.U.P.lineTo(r,d,A):c?t.U.P.qcurveTo(r,d,A,e.xs[l],e.ys[l]):t.U.P.qcurveTo(r,d,A,(d+e.xs[l])/2,(A+e.ys[l])/2)}t.U.P.closePath(r)}},t.U._compoGlyph=function(e,r,i){for(var n=0;n<e.parts.length;n++){var a={cmds:[],crds:[]},s=e.parts[n];t.U._drawGlyf(s.glyphIndex,r,a);for(var o=s.m,l=0;l<a.crds.length;l+=2){var h=a.crds[l],u=a.crds[l+1];i.crds.push(h*o.a+u*o.b+o.tx),i.crds.push(h*o.c+u*o.d+o.ty)}for(l=0;l<a.cmds.length;l++)i.cmds.push(a.cmds[l])}},t.U._getGlyphClass=function(e,r){var i=t._lctf.getInterval(r,e);return-1==i?0:r[i+2]},t.U.getPairAdjustment=function(e,r,i){if(e.GPOS)for(var n=e.GPOS,a=n.lookupList,s=n.featureList,o=[],l=0;l<s.length;l++){var h=s[l];if("kern"==h.tag)for(var u=0;u<h.tab.length;u++)if(!o[h.tab[u]]){o[h.tab[u]]=!0;for(var c=a[h.tab[u]],d=0;d<c.tabs.length;d++)if(null!=c.tabs[l]){var A,f=c.tabs[d];if(!f.coverage||-1!=(A=t._lctf.coverageIndex(f.coverage,r)))if(1==c.ltype);else if(2==c.ltype){var p;if(1==f.fmt){var m=f.pairsets[A];for(l=0;l<m.length;l++)m[l].gid2==i&&(p=m[l])}else if(2==f.fmt){var v=t.U._getGlyphClass(r,f.classDef1),g=t.U._getGlyphClass(i,f.classDef2);p=f.matrix[v][g]}if(p&&p.val2)return p.val2[2]}}}}if(e.kern){var y=e.kern.glyph1.indexOf(r);if(-1!=y){var w=e.kern.rval[y].glyph2.indexOf(i);if(-1!=w)return e.kern.rval[y].vals[w]}}return 0},t.U.stringToGlyphs=function(e,r){for(var i=[],n=0;n<r.length;n++){(a=r.codePointAt(n))>65535&&n++,i.push(t.U.codeToGlyph(e,a))}for(n=0;n<r.length;n++){var a;if(2367==(a=r.codePointAt(n))){var s=i[n-1];i[n-1]=i[n],i[n]=s}a>65535&&n++}var o=e.GSUB;if(null==o)return i;for(var l=o.lookupList,h=o.featureList,u=["rlig","liga","mset","isol","init","fina","medi","half","pres","blws"],c=[],d=0;d<h.length;d++){var A=h[d];if(-1!=u.indexOf(A.tag))for(var f=0;f<A.tab.length;f++)if(!c[A.tab[f]]){c[A.tab[f]]=!0;for(var p=l[A.tab[f]],m=0;m<i.length;m++){var v=t.U._getWPfeature(r,m);-1!="isol,init,fina,medi".indexOf(A.tag)&&A.tag!=v||t.U._applySubs(i,m,p,l)}}}return i},t.U._getWPfeature=function(e,t){var r='\n\t" ,.:;!?()  ،',i="آأؤإاةدذرزوٱٲٳٵٶٷڈډڊڋڌڍڎڏڐڑڒړڔڕږڗژڙۀۃۄۅۆۇۈۉۊۋۍۏےۓەۮۯܐܕܖܗܘܙܞܨܪܬܯݍݙݚݛݫݬݱݳݴݸݹࡀࡆࡇࡉࡔࡧࡩࡪࢪࢫࢬࢮࢱࢲࢹૅેૉ૊૎૏ૐ૑૒૝ૡ૤૯஁ஃ஄அஉ஌எஏ஑னப஫஬",n=0==t||-1!=r.indexOf(e[t-1]),a=t==e.length-1||-1!=r.indexOf(e[t+1]);n||-1==i.indexOf(e[t-1])||(n=!0),a||-1==i.indexOf(e[t])||(a=!0),a||-1=="ꡲ્૗".indexOf(e[t+1])||(a=!0),n||-1=="ꡲ્૗".indexOf(e[t])||(n=!0);return n?a?"isol":"init":a?"fina":"medi"},t.U._applySubs=function(e,r,i,n){for(var a=e.length-r-1,s=0;s<i.tabs.length;s++)if(null!=i.tabs[s]){var o,l=i.tabs[s];if(!l.coverage||-1!=(o=t._lctf.coverageIndex(l.coverage,e[r])))if(1==i.ltype){e[r];1==l.fmt?e[r]=e[r]+l.delta:e[r]=l.newg[o]}else if(4==i.ltype)for(var h=l.vals[o],u=0;u<h.length;u++){var c=h[u],d=c.chain.length;if(!(d>a)){for(var A=!0,f=0,p=0;p<d;p++){for(;-1==e[r+f+(1+p)];)f++;c.chain[p]!=e[r+f+(1+p)]&&(A=!1)}if(A){e[r]=c.nglyph;for(p=0;p<d+f;p++)e[r+p+1]=-1;break}}}else if(5==i.ltype&&2==l.fmt)for(var m=t._lctf.getInterval(l.cDef,e[r]),v=l.cDef[m+2],g=l.scset[v],y=0;y<g.length;y++){var w=g[y],b=w.input;if(!(b.length>a)){for(A=!0,p=0;p<b.length;p++){var S=t._lctf.getInterval(l.cDef,e[r+1+p]);if(-1==m&&l.cDef[S+2]!=b[p]){A=!1;break}}if(A){var x=w.substLookupRecords;for(u=0;u<x.length;u+=2)x[u],x[u+1]}}}else if(6==i.ltype&&3==l.fmt){if(!t.U._glsCovered(e,l.backCvg,r-l.backCvg.length))continue;if(!t.U._glsCovered(e,l.inptCvg,r))continue;if(!t.U._glsCovered(e,l.ahedCvg,r+l.inptCvg.length))continue;var _=l.lookupRec;for(y=0;y<_.length;y+=2){m=_[y];var E=n[_[y+1]];t.U._applySubs(e,r+m,E,n)}}}},t.U._glsCovered=function(e,r,i){for(var n=0;n<r.length;n++){if(-1==t._lctf.coverageIndex(r[n],e[i+n]))return!1}return!0},t.U.glyphsToPath=function(e,r,i){for(var n={cmds:[],crds:[]},a=0,s=0;s<r.length;s++){var o=r[s];if(-1!=o){for(var l=s<r.length-1&&-1!=r[s+1]?r[s+1]:0,h=t.U.glyphToPath(e,o),u=0;u<h.crds.length;u+=2)n.crds.push(h.crds[u]+a),n.crds.push(h.crds[u+1]);i&&n.cmds.push(i);for(u=0;u<h.cmds.length;u++)n.cmds.push(h.cmds[u]);i&&n.cmds.push("X"),a+=e.hmtx.aWidth[o],s<r.length-1&&(a+=t.U.getPairAdjustment(e,o,l))}}return n},t.U.pathToSVG=function(e,t){null==t&&(t=5);for(var r=[],i=0,n={M:2,L:2,Q:4,C:6},a=0;a<e.cmds.length;a++){var s=e.cmds[a],o=i+(n[s]?n[s]:0);for(r.push(s);i<o;){var l=e.crds[i++];r.push(parseFloat(l.toFixed(t))+(i==o?"":" "))}}return r.join("")},t.U.pathToContext=function(e,t){for(var r=0,i=e.crds,n=0;n<e.cmds.length;n++){var a=e.cmds[n];"M"==a?(t.moveTo(i[r],i[r+1]),r+=2):"L"==a?(t.lineTo(i[r],i[r+1]),r+=2):"C"==a?(t.bezierCurveTo(i[r],i[r+1],i[r+2],i[r+3],i[r+4],i[r+5]),r+=6):"Q"==a?(t.quadraticCurveTo(i[r],i[r+1],i[r+2],i[r+3]),r+=4):"#"==a.charAt(0)?(t.beginPath(),t.fillStyle=a):"Z"==a?t.closePath():"X"==a&&t.fill()}},t.U.P={},t.U.P.moveTo=function(e,t,r){e.cmds.push("M"),e.crds.push(t,r)},t.U.P.lineTo=function(e,t,r){e.cmds.push("L"),e.crds.push(t,r)},t.U.P.curveTo=function(e,t,r,i,n,a,s){e.cmds.push("C"),e.crds.push(t,r,i,n,a,s)},t.U.P.qcurveTo=function(e,t,r,i,n){e.cmds.push("Q"),e.crds.push(t,r,i,n)},t.U.P.closePath=function(e){e.cmds.push("Z")},t.U._drawCFF=function(e,r,i,n,a){for(var s=r.stack,o=r.nStems,l=r.haveWidth,h=r.width,u=r.open,c=0,d=r.x,A=r.y,f=0,p=0,m=0,v=0,g=0,y=0,w=0,b=0,S=0,x=0,_={val:0,size:0};c<e.length;){t.CFF.getCharString(e,c,_);var E=_.val;if(c+=_.size,"o1"==E||"o18"==E)s.length%2!=0&&!l&&(h=s.shift()+n.nominalWidthX),o+=s.length>>1,s.length=0,l=!0;else if("o3"==E||"o23"==E){s.length%2!=0&&!l&&(h=s.shift()+n.nominalWidthX),o+=s.length>>1,s.length=0,l=!0}else if("o4"==E)s.length>1&&!l&&(h=s.shift()+n.nominalWidthX,l=!0),u&&t.U.P.closePath(a),A+=s.pop(),t.U.P.moveTo(a,d,A),u=!0;else if("o5"==E)for(;s.length>0;)d+=s.shift(),A+=s.shift(),t.U.P.lineTo(a,d,A);else if("o6"==E||"o7"==E)for(var M=s.length,F="o6"==E,T=0;T<M;T++){var C=s.shift();F?d+=C:A+=C,F=!F,t.U.P.lineTo(a,d,A)}else if("o8"==E||"o24"==E){M=s.length;for(var D=0;D+6<=M;)f=d+s.shift(),p=A+s.shift(),m=f+s.shift(),v=p+s.shift(),d=m+s.shift(),A=v+s.shift(),t.U.P.curveTo(a,f,p,m,v,d,A),D+=6;"o24"==E&&(d+=s.shift(),A+=s.shift(),t.U.P.lineTo(a,d,A))}else{if("o11"==E)break;if("o1234"==E||"o1235"==E||"o1236"==E||"o1237"==E)"o1234"==E&&(p=A,m=(f=d+s.shift())+s.shift(),x=v=p+s.shift(),y=v,b=A,d=(w=(g=(S=m+s.shift())+s.shift())+s.shift())+s.shift(),t.U.P.curveTo(a,f,p,m,v,S,x),t.U.P.curveTo(a,g,y,w,b,d,A)),"o1235"==E&&(f=d+s.shift(),p=A+s.shift(),m=f+s.shift(),v=p+s.shift(),S=m+s.shift(),x=v+s.shift(),g=S+s.shift(),y=x+s.shift(),w=g+s.shift(),b=y+s.shift(),d=w+s.shift(),A=b+s.shift(),s.shift(),t.U.P.curveTo(a,f,p,m,v,S,x),t.U.P.curveTo(a,g,y,w,b,d,A)),"o1236"==E&&(f=d+s.shift(),p=A+s.shift(),m=f+s.shift(),x=v=p+s.shift(),y=v,w=(g=(S=m+s.shift())+s.shift())+s.shift(),b=y+s.shift(),d=w+s.shift(),t.U.P.curveTo(a,f,p,m,v,S,x),t.U.P.curveTo(a,g,y,w,b,d,A)),"o1237"==E&&(f=d+s.shift(),p=A+s.shift(),m=f+s.shift(),v=p+s.shift(),S=m+s.shift(),x=v+s.shift(),g=S+s.shift(),y=x+s.shift(),w=g+s.shift(),b=y+s.shift(),Math.abs(w-d)>Math.abs(b-A)?d=w+s.shift():A=b+s.shift(),t.U.P.curveTo(a,f,p,m,v,S,x),t.U.P.curveTo(a,g,y,w,b,d,A));else if("o14"==E){if(s.length>0&&!l&&(h=s.shift()+i.nominalWidthX,l=!0),4==s.length){var P=s.shift(),R=s.shift(),B=s.shift(),U=s.shift(),I=t.CFF.glyphBySE(i,B),L=t.CFF.glyphBySE(i,U);t.U._drawCFF(i.CharStrings[I],r,i,n,a),r.x=P,r.y=R,t.U._drawCFF(i.CharStrings[L],r,i,n,a)}u&&(t.U.P.closePath(a),u=!1)}else if("o19"==E||"o20"==E){s.length%2!=0&&!l&&(h=s.shift()+n.nominalWidthX),o+=s.length>>1,s.length=0,l=!0,c+=o+7>>3}else if("o21"==E)s.length>2&&!l&&(h=s.shift()+n.nominalWidthX,l=!0),A+=s.pop(),d+=s.pop(),u&&t.U.P.closePath(a),t.U.P.moveTo(a,d,A),u=!0;else if("o22"==E)s.length>1&&!l&&(h=s.shift()+n.nominalWidthX,l=!0),d+=s.pop(),u&&t.U.P.closePath(a),t.U.P.moveTo(a,d,A),u=!0;else if("o25"==E){for(;s.length>6;)d+=s.shift(),A+=s.shift(),t.U.P.lineTo(a,d,A);f=d+s.shift(),p=A+s.shift(),m=f+s.shift(),v=p+s.shift(),d=m+s.shift(),A=v+s.shift(),t.U.P.curveTo(a,f,p,m,v,d,A)}else if("o26"==E)for(s.length%2&&(d+=s.shift());s.length>0;)f=d,p=A+s.shift(),d=m=f+s.shift(),A=(v=p+s.shift())+s.shift(),t.U.P.curveTo(a,f,p,m,v,d,A);else if("o27"==E)for(s.length%2&&(A+=s.shift());s.length>0;)p=A,m=(f=d+s.shift())+s.shift(),v=p+s.shift(),d=m+s.shift(),A=v,t.U.P.curveTo(a,f,p,m,v,d,A);else if("o10"==E||"o29"==E){var O="o10"==E?n:i;if(0==s.length)console.log("error: empty stack");else{var k=s.pop(),G=O.Subrs[k+O.Bias];r.x=d,r.y=A,r.nStems=o,r.haveWidth=l,r.width=h,r.open=u,t.U._drawCFF(G,r,i,n,a),d=r.x,A=r.y,o=r.nStems,l=r.haveWidth,h=r.width,u=r.open}}else if("o30"==E||"o31"==E){var N=s.length,z=(D=0,"o31"==E);for(D+=N-(M=-3&N);D<M;)z?(p=A,m=(f=d+s.shift())+s.shift(),A=(v=p+s.shift())+s.shift(),M-D==5?(d=m+s.shift(),D++):d=m,z=!1):(f=d,p=A+s.shift(),m=f+s.shift(),v=p+s.shift(),d=m+s.shift(),M-D==5?(A=v+s.shift(),D++):A=v,z=!0),t.U.P.curveTo(a,f,p,m,v,d,A),D+=4}else{if("o"==(E+"").charAt(0))throw console.log("Unknown operation: "+E,e),E;s.push(E)}}}r.x=d,r.y=A,r.nStems=o,r.haveWidth=l,r.width=h,r.open=u},t},function(){var e=function(){var e={};function t(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function r(e,r){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=r,this.destLen=0,this.ltree=new t,this.dtree=new t}var i=new t,n=new t,a=new Uint8Array(30),s=new Uint16Array(30),o=new Uint8Array(30),l=new Uint16Array(30),h=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u=new t,c=new Uint8Array(320);function d(e,t,r,i){var n,a;for(n=0;n<r;++n)e[n]=0;for(n=0;n<30-r;++n)e[n+r]=n/r|0;for(a=i,n=0;n<30;++n)t[n]=a,a+=1<<e[n]}var A=new Uint16Array(16);function f(e,t,r,i){var n,a;for(n=0;n<16;++n)e.table[n]=0;for(n=0;n<i;++n)e.table[t[r+n]]++;for(e.table[0]=0,a=0,n=0;n<16;++n)A[n]=a,a+=e.table[n];for(n=0;n<i;++n)t[r+n]&&(e.trans[A[t[r+n]]++]=n)}function p(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],e.bitcount=7);var t=1&e.tag;return e.tag>>>=1,t}function m(e,t,r){if(!t)return r;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var i=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,i+r}function v(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var r=0,i=0,n=0,a=e.tag;do{i=2*i+(1&a),a>>>=1,++n,r+=t.table[n],i-=t.table[n]}while(i>=0);return e.tag=a,e.bitcount-=n,t.trans[r+i]}function g(e,t,r){var i,n,a,s,o,l;for(i=m(e,5,257),n=m(e,5,1),a=m(e,4,4),s=0;s<19;++s)c[s]=0;for(s=0;s<a;++s){var d=m(e,3,0);c[h[s]]=d}for(f(u,c,0,19),o=0;o<i+n;){var A=v(e,u);switch(A){case 16:var p=c[o-1];for(l=m(e,2,3);l;--l)c[o++]=p;break;case 17:for(l=m(e,3,3);l;--l)c[o++]=0;break;case 18:for(l=m(e,7,11);l;--l)c[o++]=0;break;default:c[o++]=A}}f(t,c,0,i),f(r,c,i,n)}function y(e,t,r){for(;;){var i,n,h,u,c=v(e,t);if(256===c)return 0;if(c<256)e.dest[e.destLen++]=c;else for(i=m(e,a[c-=257],s[c]),n=v(e,r),u=h=e.destLen-m(e,o[n],l[n]);u<h+i;++u)e.dest[e.destLen++]=e.dest[u]}}function w(e){for(var t,r;e.bitcount>8;)e.sourceIndex--,e.bitcount-=8;if((t=256*(t=e.source[e.sourceIndex+1])+e.source[e.sourceIndex])!==(65535&~(256*e.source[e.sourceIndex+3]+e.source[e.sourceIndex+2])))return-3;for(e.sourceIndex+=4,r=t;r;--r)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,0}return function(e,t){var r;for(r=0;r<7;++r)e.table[r]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,r=0;r<24;++r)e.trans[r]=256+r;for(r=0;r<144;++r)e.trans[24+r]=r;for(r=0;r<8;++r)e.trans[168+r]=280+r;for(r=0;r<112;++r)e.trans[176+r]=144+r;for(r=0;r<5;++r)t.table[r]=0;for(t.table[5]=32,r=0;r<32;++r)t.trans[r]=r}(i,n),d(a,s,4,3),d(o,l,2,1),a[28]=0,s[28]=258,e.exports=function(e,t){var a,s,o=new r(e,t);do{switch(a=p(o),m(o,2,0)){case 0:s=w(o);break;case 1:s=y(o,i,n);break;case 2:g(o,o.ltree,o.dtree),s=y(o,o.ltree,o.dtree);break;default:s=-3}if(0!==s)throw new Error("Data error")}while(!a);return o.destLen<o.dest.length?"function"==typeof o.dest.slice?o.dest.slice(0,o.destLen):o.dest.subarray(0,o.destLen):o.dest},e.exports}();return function(t){return function(e,t){var r=new DataView(e),i=0;function n(){var e=r.getUint16(i);return i+=2,e}function a(){var e=r.getUint32(i);return i+=4,e}function s(e){g.setUint16(y,e),y+=2}function o(e){g.setUint32(y,e),y+=4}for(var l={signature:a(),flavor:a(),length:a(),numTables:n(),reserved:n(),totalSfntSize:a(),majorVersion:n(),minorVersion:n(),metaOffset:a(),metaLength:a(),metaOrigLength:a(),privOffset:a(),privLength:a()},h=0;Math.pow(2,h)<=l.numTables;)h++;h--;for(var u=16*Math.pow(2,h),c=16*l.numTables-u,d=12,A=[],f=0;f<l.numTables;f++)A.push({tag:a(),offset:a(),compLength:a(),origLength:a(),origChecksum:a()}),d+=16;var p,m=new Uint8Array(12+16*A.length+A.reduce((function(e,t){return e+t.origLength+4}),0)),v=m.buffer,g=new DataView(v),y=0;return o(l.flavor),s(l.numTables),s(u),s(h),s(c),A.forEach((function(e){o(e.tag),o(e.origChecksum),o(d),o(e.origLength),e.outOffset=d,(d+=e.origLength)%4!=0&&(d+=4-d%4)})),A.forEach((function(r){var i=e.slice(r.offset,r.offset+r.compLength);if(r.compLength!=r.origLength){var n=new Uint8Array(r.origLength);t(new Uint8Array(i,2),n)}else n=new Uint8Array(i);m.set(n,r.outOffset);var a=0;(d=r.outOffset+r.origLength)%4!=0&&(a=4-d%4),m.set(new Uint8Array(a).buffer,r.outOffset+r.origLength),p=d+a})),v.slice(0,p)}(t,e)}},function(e,t){var r={M:2,L:2,Q:4,C:6,Z:0};return function(i){var n,a,s,o,l=new Uint8Array(i,0,4),h=e._bin.readASCII(l,0,4);if("wOFF"===h)i=t(i);else if("wOF2"===h)throw new Error("woff2 fonts not supported");return n=e.parse(i),a=n[0],s=Object.create(null),o={unitsPerEm:a.head.unitsPerEm,ascender:a.hhea.ascender,descender:a.hhea.descender,forEachGlyph:function(t,i,n,l){var h=0,u=1/o.unitsPerEm*i,c=e.U.stringToGlyphs(a,t),d=0;return c.forEach((function(o){if(-1!==o){var c=s[o];if(!c){var A=e.glyf._parseGlyf(a,o)||{xMin:0,xMax:0,yMin:0,yMax:0},f=e.U.glyphToPath(a,o),p=f.cmds,m=f.crds;c=s[o]={index:o,advanceWidth:a.hmtx.aWidth[o],xMin:A.xMin,yMin:A.yMin,xMax:A.xMax,yMax:A.yMax,pathCommandCount:p.length,forEachPathCommand:function(e){for(var t=0,i=[],n=0,a=p.length;n<a;n++){var s=r[p[n]];i.length=1+s,i[0]=p[n];for(var o=1;o<=s;o++)i[o]=m[t++];e.apply(null,i)}}}}l.call(null,c,h,d),c.advanceWidth&&(h+=c.advanceWidth*u),n&&(h+=n*i)}d+=t.codePointAt(d)>65535?2:1})),h}}}}],init:function(e,t,r){return r(e(),t())}}),o={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,textureWidth:2048},l=document.createElement("a");var h=Object.create(null);function u(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}var c=Object(n.defineWorkerModule)({dependencies:[o,1/8,s,function(e){var t=e.sdfTextureSize,r=e.sdfDistancePercent;function i(e,t,r,i,n,a,s){var o=1-s;return{x:o*o*e+2*o*s*r+s*s*n,y:o*o*t+2*o*s*i+s*s*a}}function n(e,t,r,i,n,a,s,o,l){var h=1-l;return{x:h*h*h*e+3*h*h*l*r+3*h*l*l*n+l*l*l*s,y:h*h*h*t+3*h*h*l*i+3*h*l*l*a+l*l*l*o}}function a(e){return e*e}function s(e,t,r,i,n,s){var o=n-r,l=s-i,h=a(o)+a(l),u=h?Math.max(0,Math.min(1,((e-r)*o+(t-i)*l)/h)):0;return Math.sqrt(a(e-(r+u*o))+a(t-(i+u*l)))}var o=function(e){var t=e.xMin,r=e.yMin,i=e.xMax-t,n=e.yMax-r,a=Math.round(t+i/2),s=Math.round(r+n/2),o=Math.pow(2,Math.floor(Math.log(Math.max(i,n))*Math.LOG2E));this._root={0:null,1:null,2:null,3:null,data:null,cx:a,cy:s,r:o,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}};return o.prototype.addLineSegment=function(e,t,r,i){var n={x0:e,y0:t,x1:r,y1:i,cx:(e+r)/2,cy:(t+i)/2,minX:Math.min(e,r),minY:Math.min(t,i),maxX:Math.max(e,r),maxY:Math.max(t,i),next:null};this._insertSegment(n,this._root)},o.prototype._insertSegment=function(e,t){var r=e.minX,i=e.minY,n=e.maxX,a=e.maxY,s=e.cx,o=e.cy;r<t.minX&&(t.minX=r),i<t.minY&&(t.minY=i),n>t.maxX&&(t.maxX=n),a>t.maxY&&(t.maxY=a);var l=t.data;if(l)if(l.cx===s&&l.cy===o){for(;l.next;)l=l.next;l.next=e}else t.data=null,this._insertSegment(l,t),this._insertSegment(e,t);else{var h=(o<t.cy?0:2)+(s<t.cx?0:1);t[h]?this._insertSegment(e,t[h]):t[h]={0:null,1:null,2:null,3:null,data:e,cx:t.cx+t.r/2*(h%2?1:-1),cy:t.cy+t.r/2*(h<2?-1:1),r:t.r/2,minX:r,minY:i,maxX:n,maxY:a}}},o.prototype.walkTree=function(e){this.walkBranch(this._root,e)},o.prototype.walkBranch=function(e,t){if(!1!==t(e)&&!e.data)for(var r=0;r<4;r++)null!==e[r]&&this.walkBranch(e[r],t)},o.prototype.findNearestSignedDistance=function(e,t,r){var i=r;return this.walkTree((function(r){if(e-i>r.maxX||e+i<r.minX||t-i>r.maxY||t+i<r.minY)return!1;if(r.data)for(var n=r.data;n;n=n.next)if(e-i<n.maxX||e+i>n.minX||t-i<n.maxY||t+i>n.minY){var a=s(e,t,n.x0,n.y0,n.x1,n.y1);a<i&&(i=a)}})),this.isPointInPoly(e,t)||(i=-i),i},o.prototype.isPointInPoly=function(e,t){var r=!1;return this.walkTree((function(i){if(i.maxX<e||i.minY>t||i.maxY<t)return!1;if(i.data)for(var n=i.data;n;n=n.next){var a=n.x0,s=n.y0,o=n.x1,l=n.y1;s>t!=l>t&&e<(o-a)*(t-s)/(l-s)+a&&(r=!r)}})),r},function(e){var s=new Uint8Array(a(t)),l=e.xMax-e.xMin,h=e.yMax-e.yMin,u=Math.max(l,h)*r,c=(l+2*u)/t,d=(h+2*u)/t,A=e.xMin-u-c,f=e.yMin-u-d,p=e.xMax+u+c,m=e.yMax+u+d;if(e.pathCommandCount){var v,g,y,w,b=new o(e);e.forEachPathCommand((function(e,t,r,a,s,o,l){switch(e){case"M":y=v=t,w=g=r;break;case"L":t===y&&r===w||b.addLineSegment(y,w,y=t,w=r);break;case"Q":for(var h={x:y,y:w},u=1;u<16;u++){var c=i(y,w,t,r,a,s,u/15);b.addLineSegment(h.x,h.y,c.x,c.y),h=c}y=a,w=s;break;case"C":for(var d={x:y,y:w},A=1;A<16;A++){var f=n(y,w,t,r,a,s,o,l,A/15);b.addLineSegment(d.x,d.y,f.x,f.y),d=f}y=o,w=l;break;case"Z":y===v&&w===g||b.addLineSegment(y,w,v,g)}}));for(var S=0;S<t;S++)for(var x=0;x<t;x++){var _=b.findNearestSignedDistance(A+(p-A)*(S+.5)/t,f+(m-f)*(x+.5)/t,u),E=isFinite(_)?Math.round(255*(1+_/u)*.5):_;E=Math.max(0,Math.min(255,E)),s[x*t+S]=E}}return{textureData:s,renderingBounds:[A,f,p,m]}}},function(e,t,r){var i=r.defaultFontUrl,n=Object.create(null);function a(t,r){t||(t=i);var a=n[t];if(a)a.onload?a.onload.push(r):r();else{var s=n[t]={onload:[r]};!function(t,r){!function n(){var a=function(e){console.error("Failure loading font "+t+(t===i?"":"; trying fallback"),e),t!==i&&(t=i,n())};try{var s=new XMLHttpRequest;s.open("get",t,!0),s.responseType="arraybuffer",s.onload=function(){if(s.status>=400)a(new Error(s.statusText));else if(s.status>0)try{var t=e(s.response);r(t)}catch(e){a(e)}},s.onerror=a,s.send()}catch(e){a(e)}}()}(t,(function(e){a=n[t]={fontObj:e,glyphs:{},glyphCount:0},s.onload.forEach((function(e){return e()}))}))}}function s(e,r,s){var o=e.text;void 0===o&&(o="");var l=e.font;void 0===l&&(l=i);var h=e.fontSize;void 0===h&&(h=1);var u=e.letterSpacing;void 0===u&&(u=0);var c=e.lineHeight;void 0===c&&(c="normal");var d=e.maxWidth;void 0===d&&(d=1/0);var A=e.textAlign;void 0===A&&(A="left");var f=e.whiteSpace;void 0===f&&(f="normal");var p=e.overflowWrap;void 0===p&&(p="normal");var m=e.anchor,v=e.includeCaretPositions;void 0===v&&(v=!1),void 0===s&&(s=!1),o.indexOf("\r")>-1&&(console.warn("FontProcessor.process: got text with \\r chars; normalizing to \\n"),o=o.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),function(e,t){e||(e=i),a(e,(function(){t(n[e])}))}(l,(function(e){var i=e.fontObj,n=isFinite(d),a=null,l=null,g=null,y=null,w=null,b=0,S="nowrap"!==f,x=i.ascender,_=i.descender,E=i.unitsPerEm,M=h/E;"normal"===c&&(c=(x-_)/E);var F=((c*=h)-(x-_)*M)/2,T=Math.min(c,(x-_)*M),C=(x+_)/2*M-T/2,D=0,P={glyphs:[],width:0},R=[P];if(i.forEachGlyph(o,h,u,(function(e,t,r){var i,a=o.charAt(r),s=e.advanceWidth*M,l=!!a&&/\s/.test(a),h=P.glyphs;if(S&&n&&!l&&t+s+D>d&&h.length){if(h[h.length-1].isWhitespace)i=[],D=-t;else for(var u=h.length;u--;){if(0===u&&"break-word"===p){i=[],D=-t;break}if(h[u].isWhitespace){var c=(i=h.splice(u+1))[0].x;D-=c;for(var A=0;A<i.length;A++)i[A].x-=c;break}}i&&(P.isSoftWrapped=!0,P={glyphs:i,width:0},R.push(P),b=d)}P.glyphs.push({glyphObj:e,x:t+D,y:0,width:s,char:a,charIndex:r,isWhitespace:l,isEmpty:e.xMin===e.xMax||e.yMin===e.yMax,atlasInfo:null}),"\n"===a&&(P={glyphs:[],width:0},R.push(P),D=-(t+s))})),R.forEach((function(e){for(var t=e.glyphs,r=t.length;r--;){var i=t[r];if(!i.isWhitespace)return e.width=i.x+i.width,void(e.width>b&&(b=e.width))}})),!s){var B=[],U=-(h+F);v&&(y=new Float32Array(3*o.length));var I=-1;R.forEach((function(r){var i=r.glyphs,n=r.width;if(i.length){var s=0,o=0;if("center"===A)s=(b-n)/2;else if("right"===A)s=b-n;else if("justify"===A)for(var l=i.length;l--;)if(!i[l].isWhitespace){for(;l--;)i[l].isWhitespace&&o++;break}for(var h=0,u=i.length;h<u;h++){var d=i[h];if(s&&(d.x+=s),d.y=U,d.isWhitespace&&"justify"===A&&r.isSoftWrapped){var f=(b-n)/o;s+=f,d.width+=f}if(v){var p=d.charIndex;for(y[3*p]=d.x,y[3*p+1]=d.x+d.width,y[3*p+2]=d.y+C;p-I>1;)y[3*(I+1)]=y[3*I+1],y[3*(I+1)+1]=y[3*I+1],y[3*(I+1)+2]=y[3*I+2],I++;I=p}if(!d.isWhitespace&&!d.isEmpty){var m=d.glyphObj,g=e.glyphs[m.index];if(!g){var w=t(m);w.atlasIndex=e.glyphCount++,a||(a=[]),a.push(w),g=e.glyphs[m.index]={atlasIndex:w.atlasIndex,glyphObj:m,renderingBounds:w.renderingBounds}}d.atlasInfo=g,B.push(d)}}}U-=c}));var L=0,O=0;if(m&&(m[0]&&(L=-b*m[0]),m[1]&&(O=R.length*c*m[1])),v&&(L||O))for(var k=0,G=y.length;k<G;k+=3)y[k]+=L,y[k+1]+=L,y[k+2]+=O;l=new Float32Array(4*B.length),g=new Float32Array(B.length),w=[1/0,1/0,-1/0,-1/0],B.forEach((function(e,t){var r=e.atlasInfo,i=r.renderingBounds,n=r.atlasIndex,a=l[4*t]=e.x+i[0]*M+L,s=l[4*t+1]=e.y+i[1]*M+O,o=l[4*t+2]=e.x+i[2]*M+L,h=l[4*t+3]=e.y+i[3]*M+O;a<w[0]&&(w[0]=a),s<w[1]&&(w[1]=s),o>w[2]&&(w[2]=o),h>w[3]&&(w[3]=h),g[t]=n}))}r({glyphBounds:l,glyphAtlasIndices:g,caretPositions:y,caretHeight:T,totalBounds:w,totalBlockSize:[b,R.length*c],newGlyphSDFs:a})}))}return{process:s,measure:function(e,t){s(e,(function(e){t({width:e.totalBlockSize[0],height:e.totalBlockSize[1]})}),{metricsOnly:!0})},loadFont:a}}],init:function(e,t,r,i,n){return n(r,i({sdfTextureSize:e.sdfGlyphSize,sdfDistancePercent:t}),{defaultFontUrl:e.defaultFontURL})}}),d=Object(n.defineWorkerModule)({dependencies:[c,n.ThenableWorkerModule],init:function(e,t){return function(r){var i=new t;return e.process(r,i.resolve),i}},getTransferables:function(e){var t=[e.glyphBounds.buffer,e.glyphAtlasIndices.buffer];return e.caretPositions&&t.push(e.caretPositions.buffer),e.newGlyphSDFs&&e.newGlyphSDFs.forEach((function(e){t.push(e.textureData.buffer)})),t}}),A=new i.PlaneBufferGeometry(1,1).translate(.5,.5,0),f=new i.Vector3,p=function(e){function t(){e.call(this),this.copy(A),this.boundingSphere=new i.Sphere}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.computeBoundingSphere=function(){},t.prototype.updateGlyphs=function(e,t,r){m(this,"aTroikaGlyphBounds",e,4),m(this,"aTroikaGlyphIndex",t,1),this.maxInstancedCount=t.length;var i=this.boundingSphere;i.center.set((r[0]+r[2])/2,(r[1]+r[3])/2,0),i.radius=i.center.distanceTo(f.set(r[0],r[1],0))},t}(i.InstancedBufferGeometry);function m(e,t,r,n){var a=e.getAttribute(t);a&&a.array.length===r.length?(a.array.set(r),a.needsUpdate=!0):e.setAttribute(t,new i.InstancedBufferAttribute(r,n))}p.prototype.setAttribute||(p.prototype.setAttribute=function(e,t){return this.attributes[e]=t,this});var v=new i.MeshBasicMaterial({color:16777215,side:i.DoubleSide,transparent:!0}),g=new i.Matrix4,y=new i.Mesh(new i.PlaneBufferGeometry(1,1).translate(.5,.5,0),v),w=function(e){function t(t){var r=new p;e.call(this,r,null),this.text="",this.anchor=null,this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.whiteSpace="normal",this.material=null,this.color=null,this.depthOffset=0,this.clipRect=null,this.debugSDF=!1}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={textRenderInfo:{configurable:!0},material:{configurable:!0},customDepthMaterial:{configurable:!0},customDistanceMaterial:{configurable:!0}};return t.prototype.sync=function(e){var t=this;this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,function(e,t){e=u({},e),l.href=e.font||o.defaultFontURL,e.font=l.href,e.text=""+e.text;var r=o.sdfGlyphSize,n=o.textureWidth,a=h[e.font];a||((a=h[e.font]={sdfTexture:new i.DataTexture(new Uint8Array(r*n),n,r,i.LuminanceFormat,void 0,void 0,void 0,void 0,i.LinearFilter,i.LinearFilter)}).sdfTexture.font=e.font),d(e).then((function(e){e.newGlyphSDFs&&(e.newGlyphSDFs.forEach((function(e){for(var t=e.textureData,i=e.atlasIndex,n=a.sdfTexture.image;n.data.length<(i+1)*r*r;){var s=new Uint8Array(2*n.data.length);s.set(n.data),n.data=s,n.height*=2}for(var o=n.width/r,l=0;l<r;l++)for(var h=l*r,u=n.width*r*Math.floor(i/o)+i%o*r+l*n.width,c=0;c<r;c++)n.data[u+c]=t[h+c]})),a.sdfTexture.needsUpdate=!0),t(Object.freeze({sdfTexture:a.sdfTexture,sdfGlyphSize:r,sdfMinDistancePercent:1/8,glyphBounds:e.glyphBounds,glyphAtlasIndices:e.glyphAtlasIndices,caretPositions:e.caretPositions,caretHeight:e.caretHeight,totalBounds:e.totalBounds,totalBlockSize:e.totalBlockSize}))}))}({text:this.text,font:this.font,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,maxWidth:this.maxWidth,textAlign:this.textAlign,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchor:this.anchor,includeCaretPositions:!0},(function(r){t._isSyncing=!1,t._textRenderInfo=r,t.geometry.updateGlyphs(r.glyphBounds,r.glyphAtlasIndices,r.totalBounds);var i=t._queuedSyncs;i&&(t._queuedSyncs=null,t._needsSync=!0,t.sync((function(){i.forEach((function(e){return e&&e()}))}))),e&&e()}))))},t.prototype.onBeforeRender=function(){this.sync(),this._prepareMaterial()},t.prototype.dispose=function(){this.geometry.dispose()},r.textRenderInfo.get=function(){return this._textRenderInfo||null},r.material.get=function(){var e=this._derivedMaterial,t=this._baseMaterial||v;return e&&e.baseMaterial===t||(e&&e.dispose(),e=this._derivedMaterial=function(e){var t=Object(a.createDerivedMaterial)(e,{extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new i.Vector2},uTroikaSDFGlyphSize:{value:0},uTroikaSDFMinDistancePct:{value:0},uTroikaTotalBounds:{value:new i.Vector4},uTroikaClipRect:{value:new i.Vector4},uTroikaSDFDebug:{value:!1}},vertexDefs:"\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform vec4 uTroikaTotalBounds;\nattribute vec4 aTroikaGlyphBounds;\nattribute float aTroikaGlyphIndex;\nvarying vec2 vTroikaSDFTextureUV;\nvarying vec2 vTroikaGlyphUV;\nvarying vec3 vTroikaLocalPos;\n",vertexTransform:"\nvTroikaGlyphUV = vec2(position);\n\nvec2 colsAndRows = uTroikaSDFTextureSize / uTroikaSDFGlyphSize;\nvTroikaSDFTextureUV = vec2(\n  mod(aTroikaGlyphIndex, colsAndRows.x) + position.x,\n  floor(aTroikaGlyphIndex / colsAndRows.x) + position.y\n) * uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\n\nposition = vec3(\n  mix(aTroikaGlyphBounds.x, aTroikaGlyphBounds.z, position.x),\n  mix(aTroikaGlyphBounds.y, aTroikaGlyphBounds.w, position.y),\n  position.z\n);\nvTroikaLocalPos = vec3(position);\n\nuv = vec2(\n  (position.x - uTroikaTotalBounds.x) / (uTroikaTotalBounds.z - uTroikaTotalBounds.x),\n  (position.y - uTroikaTotalBounds.y) / (uTroikaTotalBounds.w - uTroikaTotalBounds.y)\n);\n",fragmentDefs:"\nuniform sampler2D uTroikaSDFTexture;\nuniform float uTroikaSDFMinDistancePct;\nuniform bool uTroikaSDFDebug;\nuniform vec4 uTroikaClipRect;\nvarying vec2 vTroikaSDFTextureUV;\nvarying vec2 vTroikaGlyphUV;\nvarying vec3 vTroikaLocalPos;\n\nfloat troikaGetClipAlpha() {\n  vec4 clip = uTroikaClipRect;\n  vec3 pos = vTroikaLocalPos;\n  float dClip = min(\n    min(pos.x - min(clip.x, clip.z), max(clip.x, clip.z) - pos.x),\n    min(pos.y - min(clip.y, clip.w), max(clip.y, clip.w) - pos.y)\n  );\n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n  float aa = length(fwidth(pos)) * 0.5;\n  return smoothstep(-aa, aa, dClip);\n  #else\n  return step(0.0, dClip);\n  #endif\n}\n\nfloat troikaGetTextAlpha() {\n  float troikaSDFValue = texture2D(uTroikaSDFTexture, vTroikaSDFTextureUV).r;\n  \n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n  float alpha = step(0.5, troikaSDFValue);\n  #else\n  \n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n  float aaDist = min(\n    0.5,\n    0.5 * min(\n      fwidth(vTroikaGlyphUV.x),\n      fwidth(vTroikaGlyphUV.y)\n    )\n  ) / uTroikaSDFMinDistancePct;\n  #else\n  float aaDist = 0.01;\n  #endif\n  \n  float alpha = uTroikaSDFDebug ? troikaSDFValue : smoothstep(\n    0.5 - aaDist,\n    0.5 + aaDist,\n    troikaSDFValue\n  );\n  #endif\n  \n  return min(alpha, troikaGetClipAlpha());\n}\n",fragmentColorTransform:"\nfloat troikaAlphaMult = troikaGetTextAlpha();\nif (troikaAlphaMult == 0.0) {\n  discard;\n} else {\n  gl_FragColor.a *= troikaAlphaMult;\n}\n"});return t.transparent=!0,Object.defineProperty(t,"shadowSide",{get:function(){return this.side}}),t}(t),t.addEventListener("dispose",(function r(){t.removeEventListener("dispose",r),e.dispose()}))),e},r.material.set=function(e){this._baseMaterial=e},r.customDepthMaterial.get=function(){return this._updateLayoutUniforms(this.material.getDepthMaterial())},r.customDistanceMaterial.get=function(){return this._updateLayoutUniforms(this.material.getDistanceMaterial())},t.prototype._prepareMaterial=function(){var e=this._derivedMaterial;this._updateLayoutUniforms(e),e.uniforms.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;var t=this.color;null!=t&&e.color&&e.color.isColor&&t!==e._troikaColor&&e.color.set(e._troikaColor=t)},t.prototype._updateLayoutUniforms=function(e){var t=this.textRenderInfo,r=e.uniforms;if(t){var i=t.sdfTexture,n=t.totalBounds;r.uTroikaSDFTexture.value=i,r.uTroikaSDFTextureSize.value.set(i.image.width,i.image.height),r.uTroikaSDFGlyphSize.value=t.sdfGlyphSize,r.uTroikaSDFMinDistancePct.value=t.sdfMinDistancePercent,r.uTroikaTotalBounds.value.fromArray(n);var a=this.clipRect;a&&Array.isArray(a)&&4===a.length?r.uTroikaClipRect.value.set(Math.max(n[0],a[0]),Math.max(n[1],a[1]),Math.min(n[2],a[2]),Math.min(n[3],a[3])):r.uTroikaClipRect.value.fromArray(n)}return e},t.prototype.raycast=function(e,t){var r=this.textRenderInfo;if(r){var i=r.totalBounds;y.matrixWorld.multiplyMatrices(this.matrixWorld,g.set(i[2]-i[0],0,0,i[0],0,i[3]-i[1],0,i[1],0,0,1,0,0,0,0,1)),y.raycast(e,t)}},Object.defineProperties(t.prototype,r),t}(i.Mesh);["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","textAlign","whiteSpace","anchor"].forEach((function(e){var t="_private_"+e;Object.defineProperty(w.prototype,e,{get:function(){return this[t]},set:"anchor"===e?function(e){JSON.stringify(e)!==JSON.stringify(this[t])&&(this[t]=e,this._needsSync=!0)}:function(e){e!==this[t]&&(this[t]=e,this._needsSync=!0)}})}))},,,,,,function(e,t,r){!function(e,t){"use strict";var r=/\bvoid\s+main\s*\(\s*\)\s*{/g;function i(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(e,r){var n=t.ShaderChunk[r];return n?i(n):e}))}var n=Object.assign||function(){for(var e=arguments,t=arguments[0],r=1,i=arguments.length;r<i;r++){var n=e[r];if(n)for(var a in n)n.hasOwnProperty(a)&&(t[a]=n[a])}return t},a=0,s=Date.now(),o=new WeakMap;function l(e,u){var c=function(e){return JSON.stringify(e,h)}(u),d=o.get(e);if(d||(d=Object.create(null),o.set(e,d)),d[c])return d[c].clone();var A,f,p=++a,m="_derivedShaders"+p,v="_onBeforeCompile"+p;function g(t){e.onBeforeCompile.call(this,t);var a=this[m]||(this[m]={vertex:{},fragment:{}}),o=a.vertex,l=a.fragment;if(o.source!==t.vertexShader||l.source!==t.fragmentShader){var h=function(e,t,n){var a=e.vertexShader,s=e.fragmentShader,o=t.vertexDefs,l=t.vertexMainIntro,h=t.vertexTransform,u=t.fragmentDefs,c=t.fragmentMainIntro,d=t.fragmentColorTransform,A=t.timeUniform;if(A){var f="\nuniform float "+A+";\n";o=(o||"")+f,u=(u||"")+f}return(o||l||h)&&(h&&(a=i(a),o=(o||"")+"\nvoid troikaVertexTransform"+n+"(inout vec3 position, inout vec3 normal, inout vec2 uv) {\n  "+h+"\n}\n",a=a.replace(/\b(position|normal|uv)\b/g,(function(e,t,r,i){return/\battribute\s+vec[23]\s+$/.test(i.substr(0,r))?t:"troika_"+t+"_"+n})),l="\nvec3 troika_position_"+n+" = vec3(position);\nvec3 troika_normal_"+n+" = vec3(normal);\nvec2 troika_uv_"+n+" = vec2(uv);\ntroikaVertexTransform"+n+"(troika_position_"+n+", troika_normal_"+n+", troika_uv_"+n+");\n"+(l||"")+"\n"),a=a.replace(r,(o||"")+"\n\n$&\n\n"+(l||""))),(u||c||d)&&(s=(s=i(s)).replace(r,"\n"+(u||"")+"\nvoid troikaOrigMain"+n+"() {\n"+(c||"")+"\n"),s+="\nvoid main() {\n  troikaOrigMain"+n+"();\n  "+(d||"")+"\n}"),{vertexShader:a,fragmentShader:s}}(t,u,p);o.source=t.vertexShader,o.result=h.vertexShader,l.source=t.fragmentShader,l.result=h.fragmentShader}t.vertexShader=o.result,t.fragmentShader=l.result,n(t.uniforms,this.uniforms),u.timeUniform&&(t.uniforms[u.timeUniform]={get value(){return Date.now()-s}}),this[v]&&this[v](t)}function y(){e.constructor.apply(this,arguments),this._listeners=void 0}y.prototype=Object.create(e,{constructor:{value:y},isDerivedMaterial:{value:!0},baseMaterial:{value:e},onBeforeCompile:{get:function(){return g},set:function(e){this[v]=e}},copy:{value:function(r){return e.copy.call(this,r),e.isShaderMaterial||e.isDerivedMaterial||(this.extensions=n({},r.extensions),this.defines=n({},r.defines),this.uniforms=t.UniformsUtils.clone(r.uniforms)),this}},getDepthMaterial:{value:function(){var r=this._depthMaterial;return r||(f||((f=l(e.isDerivedMaterial?e.getDepthMaterial():new t.MeshDepthMaterial({depthPacking:t.RGBADepthPacking}),u)).defines.IS_DEPTH_MATERIAL=""),r=this._depthMaterial=f.clone()),r}},getDistanceMaterial:{value:function(){var r=this._distanceMaterial;return r||(A||((A=l(e.isDerivedMaterial?e.getDistanceMaterial():new t.MeshDistanceMaterial,u)).defines.IS_DISTANCE_MATERIAL=""),r=this._distanceMaterial=A.clone()),r}},dispose:{value:function(){var t=this._depthMaterial,r=this._distanceMaterial;t&&t.dispose(),r&&r.dispose(),e.dispose.call(this)}}});var w=new y;return w.copy(e),w.uniforms=n(t.UniformsUtils.clone(e.uniforms||{}),u.uniforms),w.defines=n({},e.defines,u.defines),w.defines.TROIKA_DERIVED_MATERIAL=p,w.extensions=n({},e.extensions,u.extensions),d[c]=w,w.clone()}function h(e,t){return"uniforms"===e?void 0:t}var u={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},c=function(e){this.name=e,this.textureUniform="dataTex_"+e,this.textureSizeUniform="dataTexSize_"+e,this.multiplierUniform="dataMultiplier_"+e,this.dataSizeUniform="dataSize_"+e,this.readFunction="readData_"+e,this._raw=new Float32Array(0),this._texture=new t.DataTexture(new Uint8Array(0),0,1),this._length=0,this._multiplier=1},d={length:{configurable:!0}};function A(e,t,r){var i=255*e,n=i%1*255,a=n%1*255,s=a%1*255;return i&=255,n&=255,a&=255,s=255&Math.round(s),t[r]=i,t[r+1]=n,t[r+2]=a,t[r+3]=s,t}d.length.set=function(e){if(e!==this._length){var t=Math.pow(2,Math.ceil(Math.log2(e))),r=this._raw;t<r.length?this._raw=r.subarray(0,t):t>r.length&&(this._raw=new Float32Array(t),this._raw.set(r)),this._length=e}},d.length.get=function(){return this._length},c.prototype.push=function(e){return this.set(this.length++,e)},c.prototype.setArray=function(e){this.length=e.length,this._raw.set(e),this._needsRepack=!0},c.prototype.get=function(e){return this._raw[e]},c.prototype.set=function(e,t){e+1>this._length&&(this.length=e+1),t!==this._raw[e]&&(this._raw[e]=t,A(t/this._multiplier,this._texture.image.data,4*e),this._needsMultCheck=!0)},c.prototype.clone=function(){var e=new c(this.name);return e.setArray(this._raw),e},c.prototype.getShaderUniforms=function(){var e,t=this;return(e={})[this.textureUniform]={get value(){return t._sync(),t._texture}},e[this.textureSizeUniform]={get value(){return t._sync(),t._texture.image.width}},e[this.dataSizeUniform]={get value(){return t._sync(),t.length}},e[this.multiplierUniform]={get value(){return t._sync(),t._multiplier}},e},c.prototype.getShaderHeaderCode=function(){var e=this.textureUniform,t=this.textureSizeUniform,r=this.dataSizeUniform,i=this.multiplierUniform;return"\nuniform sampler2D "+e+";\nuniform float "+t+";\nuniform float "+r+";\nuniform float "+i+";\n\nfloat "+this.readFunction+"(float index) {\n  vec2 texUV = vec2((index + 0.5) / "+t+", 0.5);\n  vec4 pixel = texture2D("+e+", texUV);\n  return dot(pixel, 1.0 / vec4(1.0, 255.0, 65025.0, 16581375.0)) * "+i+";\n}\n"},c.prototype._sync=function(){var e=this._texture,t=this._raw,r=this._needsRepack;if(t.length!==e.image.width&&(e.image={data:new Uint8Array(4*t.length),width:t.length,height:1},r=!0),r||this._needsMultCheck){var i=this._raw.reduce((function(e,t){return Math.max(e,t)}),0),n=Math.pow(2,Math.ceil(Math.log2(i)));n!==this._multiplier&&(this._multiplier=n,r=!0),e.needsUpdate=!0,this._needsMultCheck=!1}if(r){for(var a=0,s=t.length,o=this._multiplier;a<s;a++)A(t[a]/o,e.image.data,4*a);this._needsRepack=!1}},Object.defineProperties(c.prototype,d);var f=null,p=new t.MeshStandardMaterial({color:16777215,side:t.DoubleSide}),m=function(e){function r(){e.call(this,f||(f=new t.CylinderBufferGeometry(1,1,1,6,64).translate(0,.5,0)),p),this.pointA=new t.Vector3,this.controlA=new t.Vector3,this.controlB=new t.Vector3,this.pointB=new t.Vector3,this.radius=.01,this.dashArray=new t.Vector2,this.dashOffset=0,this.frustumCulled=!1}e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r;var i={material:{configurable:!0},customDepthMaterial:{configurable:!0},customDistanceMaterial:{configurable:!0}};return i.material.get=function(){var e=this._derivedMaterial,r=this._baseMaterial||p;return e&&e.baseMaterial===r||(e&&e.dispose(),e=this._derivedMaterial=function(e){return l(e,{uniforms:{pointA:{value:new t.Vector3},controlA:{value:new t.Vector3},controlB:{value:new t.Vector3},pointB:{value:new t.Vector3},radius:{value:.01},dashing:{value:new t.Vector3}},vertexDefs:"\nuniform vec3 pointA;\nuniform vec3 controlA;\nuniform vec3 controlB;\nuniform vec3 pointB;\nuniform float radius;\nvarying float bezierT;\n\nvec3 cubicBezier(vec3 p1, vec3 c1, vec3 c2, vec3 p2, float t) {\n  float t2 = 1.0 - t;\n  float b0 = t2 * t2 * t2;\n  float b1 = 3.0 * t * t2 * t2;\n  float b2 = 3.0 * t * t * t2;\n  float b3 = t * t * t;\n  return b0 * p1 + b1 * c1 + b2 * c2 + b3 * p2;\n}\n\nvec3 cubicBezierDerivative(vec3 p1, vec3 c1, vec3 c2, vec3 p2, float t) {\n  float t2 = 1.0 - t;\n  return -3.0 * p1 * t2 * t2 +\n    c1 * (3.0 * t2 * t2 - 6.0 * t2 * t) +\n    c2 * (6.0 * t2 * t - 3.0 * t * t) +\n    3.0 * p2 * t * t;\n}\n",vertexTransform:'\nfloat t = position.y;\nbezierT = t;\nvec3 bezierCenterPos = cubicBezier(pointA, controlA, controlB, pointB, t);\nvec3 bezierDir = normalize(cubicBezierDerivative(pointA, controlA, controlB, pointB, t));\n\n// Make "sideways" always perpendicular to the camera ray; this ensures that any twists\n// in the cylinder occur where you won\'t see them: \nvec3 viewDirection = normalMatrix * vec3(0.0, 0.0, 1.0);\nif (bezierDir == viewDirection) {\n  bezierDir = normalize(cubicBezierDerivative(pointA, controlA, controlB, pointB, t == 1.0 ? t - 0.0001 : t + 0.0001));\n}\nvec3 sideways = normalize(cross(bezierDir, viewDirection));\nvec3 upish = normalize(cross(sideways, bezierDir));\n\n// Build a matrix for transforming this disc in the cylinder:\nmat4 discTx;\ndiscTx[0].xyz = sideways * radius;\ndiscTx[1].xyz = bezierDir * radius;\ndiscTx[2].xyz = upish * radius;\ndiscTx[3].xyz = bezierCenterPos;\ndiscTx[3][3] = 1.0;\n\n// Apply transform, ignoring original y\nposition = (discTx * vec4(position.x, 0.0, position.z, 1.0)).xyz;\nnormal = normalize(mat3(discTx) * normal);\n',fragmentDefs:"\nuniform vec3 dashing;\nvarying float bezierT;\n",fragmentMainIntro:"\nif (dashing.x + dashing.y > 0.0) {\n  float dashFrac = mod(bezierT - dashing.z, dashing.x + dashing.y);\n  if (dashFrac > dashing.x) {\n    discard;\n  }\n}\n"})}(r),r.addEventListener("dispose",(function t(){r.removeEventListener("dispose",t),e.dispose()}))),e},i.material.set=function(e){this._baseMaterial=e},i.customDepthMaterial.get=function(){return this._updateBezierUniforms(this.material.getDepthMaterial())},i.customDistanceMaterial.get=function(){return this._updateBezierUniforms(this.material.getDistanceMaterial())},r.prototype.onBeforeRender=function(e){this._updateBezierUniforms(this.material)},r.prototype._updateBezierUniforms=function(e){var t=e.uniforms,r=this.pointA,i=this.controlA,n=this.controlB,a=this.pointB,s=this.radius,o=this.dashArray,l=this.dashOffset;return t.pointA.value.copy(r),t.controlA.value.copy(i),t.controlB.value.copy(n),t.pointB.value.copy(a),t.radius.value=s,t.dashing.value.set(o.x,o.y,l||0),e},r.prototype.raycast=function(e,t){},Object.defineProperties(r.prototype,i),r}(t.Mesh);e.BezierMesh=m,e.ShaderFloatArray=c,e.createDerivedMaterial=l,e.expandShaderIncludes=i,e.getShaderUniformTypes=function(e){for(var t,r=/\buniform\s+(int|float|vec[234])\s+([A-Za-z_][\w]*)/g,i=Object.create(null);null!==(t=r.exec(e));)i[t[2]]=t[1];return i},e.getShadersForMaterial=function(e){var r=u[e.type];return r?t.ShaderLib[r]:e},e.voidMainRegExp=r,Object.defineProperty(e,"__esModule",{value:!0})}(t,r(0))},function(e,t,r){"use strict";(function(e){
/**
 * @license
 * webxr-polyfill
 * Copyright (c) 2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * cardboard-vr-display
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * webvr-polyfill-dpdb 
 * Copyright (c) 2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * wglu-preserve-state
 * Copyright (c) 2016, Brandon Jones.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
/**
 * @license
 * nosleep.js
 * Copyright (c) 2017, Rich Tibbett
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
const r=void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},i=Symbol("@@webxr-polyfill/EventTarget");class n{constructor(){this[i]={listeners:new Map}}addEventListener(e,t){if("string"!=typeof e)throw new Error("`type` must be a string");if("function"!=typeof t)throw new Error("`listener` must be a function");const r=this[i].listeners.get(e)||[];r.push(t),this[i].listeners.set(e,r)}removeEventListener(e,t){if("string"!=typeof e)throw new Error("`type` must be a string");if("function"!=typeof t)throw new Error("`listener` must be a function");const r=this[i].listeners.get(e)||[];for(let e=r.length;e>=0;e--)r[e]===t&&r.pop()}dispatchEvent(e,t){const r=this[i].listeners.get(e)||[],n=[];for(let e=0;e<r.length;e++)n[e]=r[e];for(let e of n)e(t);"function"==typeof this["on"+e]&&this["on"+e](t)}}let a="undefined"!=typeof Float32Array?Float32Array:Array;Math.PI;function s(){let e=new a(16);return a!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function o(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function l(e,t){let r=t[0],i=t[1],n=t[2],a=t[3],s=t[4],o=t[5],l=t[6],h=t[7],u=t[8],c=t[9],d=t[10],A=t[11],f=t[12],p=t[13],m=t[14],v=t[15],g=r*o-i*s,y=r*l-n*s,w=r*h-a*s,b=i*l-n*o,S=i*h-a*o,x=n*h-a*l,_=u*p-c*f,E=u*m-d*f,M=u*v-A*f,F=c*m-d*p,T=c*v-A*p,C=d*v-A*m,D=g*C-y*T+w*F+b*M-S*E+x*_;return D?(D=1/D,e[0]=(o*C-l*T+h*F)*D,e[1]=(n*T-i*C-a*F)*D,e[2]=(p*x-m*S+v*b)*D,e[3]=(d*S-c*x-A*b)*D,e[4]=(l*M-s*C-h*E)*D,e[5]=(r*C-n*M+a*E)*D,e[6]=(m*w-f*x-v*y)*D,e[7]=(u*x-d*w+A*y)*D,e[8]=(s*T-o*M+h*_)*D,e[9]=(i*M-r*T-a*_)*D,e[10]=(f*S-p*w+v*g)*D,e[11]=(c*w-u*S-A*g)*D,e[12]=(o*E-s*F-l*_)*D,e[13]=(r*F-i*E+n*_)*D,e[14]=(p*y-f*b-m*g)*D,e[15]=(u*b-c*y+d*g)*D,e):null}function h(e,t,r){let i=t[0],n=t[1],a=t[2],s=t[3],o=t[4],l=t[5],h=t[6],u=t[7],c=t[8],d=t[9],A=t[10],f=t[11],p=t[12],m=t[13],v=t[14],g=t[15],y=r[0],w=r[1],b=r[2],S=r[3];return e[0]=y*i+w*o+b*c+S*p,e[1]=y*n+w*l+b*d+S*m,e[2]=y*a+w*h+b*A+S*v,e[3]=y*s+w*u+b*f+S*g,y=r[4],w=r[5],b=r[6],S=r[7],e[4]=y*i+w*o+b*c+S*p,e[5]=y*n+w*l+b*d+S*m,e[6]=y*a+w*h+b*A+S*v,e[7]=y*s+w*u+b*f+S*g,y=r[8],w=r[9],b=r[10],S=r[11],e[8]=y*i+w*o+b*c+S*p,e[9]=y*n+w*l+b*d+S*m,e[10]=y*a+w*h+b*A+S*v,e[11]=y*s+w*u+b*f+S*g,y=r[12],w=r[13],b=r[14],S=r[15],e[12]=y*i+w*o+b*c+S*p,e[13]=y*n+w*l+b*d+S*m,e[14]=y*a+w*h+b*A+S*v,e[15]=y*s+w*u+b*f+S*g,e}function u(e,t,r){let i=t[0],n=t[1],a=t[2],s=t[3],o=i+i,l=n+n,h=a+a,u=i*o,c=i*l,d=i*h,A=n*l,f=n*h,p=a*h,m=s*o,v=s*l,g=s*h;return e[0]=1-(A+p),e[1]=c+g,e[2]=d-v,e[3]=0,e[4]=c-g,e[5]=1-(u+p),e[6]=f+m,e[7]=0,e[8]=d+v,e[9]=f-m,e[10]=1-(u+A),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function c(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function d(e,t){let r=t[0]+t[5]+t[10],i=0;return r>0?(i=2*Math.sqrt(r+1),e[3]=.25*i,e[0]=(t[6]-t[9])/i,e[1]=(t[8]-t[2])/i,e[2]=(t[1]-t[4])/i):t[0]>t[5]&&t[0]>t[10]?(i=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/i,e[0]=.25*i,e[1]=(t[1]+t[4])/i,e[2]=(t[8]+t[2])/i):t[5]>t[10]?(i=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/i,e[0]=(t[1]+t[4])/i,e[1]=.25*i,e[2]=(t[6]+t[9])/i):(i=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/i,e[0]=(t[8]+t[2])/i,e[1]=(t[6]+t[9])/i,e[2]=.25*i),e}function A(e,t,r,i,n){let a,s=1/Math.tan(t/2);return e[0]=s/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=n&&n!==1/0?(a=1/(i-n),e[10]=(n+i)*a,e[14]=2*n*i*a):(e[10]=-1,e[14]=-2*i),e}function f(){let e=new a(3);return a!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function p(e){var t=new a(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function m(e,t,r){let i=new a(3);return i[0]=e,i[1]=t,i[2]=r,i}function v(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function g(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function y(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function w(e,t){let r=t[0],i=t[1],n=t[2],a=r*r+i*i+n*n;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a),e}function b(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function S(e,t,r){let i=t[0],n=t[1],a=t[2],s=r[0],o=r[1],l=r[2];return e[0]=n*l-a*o,e[1]=a*s-i*l,e[2]=i*o-n*s,e}function x(e,t,r){let i=r[0],n=r[1],a=r[2],s=r[3],o=t[0],l=t[1],h=t[2],u=n*h-a*l,c=a*o-i*h,d=i*l-n*o,A=n*d-a*c,f=a*u-i*d,p=i*c-n*u,m=2*s;return u*=m,c*=m,d*=m,A*=2,f*=2,p*=2,e[0]=o+u+A,e[1]=l+c+f,e[2]=h+d+p,e}const _=function(e){let t=e[0],r=e[1],i=e[2];return Math.sqrt(t*t+r*r+i*i)};!function(){let e=f()}();!function(){let e=function(){let e=new a(4);return a!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}()}();function E(){let e=new a(4);return a!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function M(e,t,r){let i=t[0],n=t[1],a=t[2],s=t[3],o=r[0],l=r[1],h=r[2],u=r[3];return e[0]=i*u+s*o+n*h-a*l,e[1]=n*u+s*l+a*o-i*h,e[2]=a*u+s*h+i*l-n*o,e[3]=s*u-i*o-n*l-a*h,e}function F(e,t,r,i){let n,a,s,o,l,h=t[0],u=t[1],c=t[2],d=t[3],A=r[0],f=r[1],p=r[2],m=r[3];return a=h*A+u*f+c*p+d*m,a<0&&(a=-a,A=-A,f=-f,p=-p,m=-m),1-a>1e-6?(n=Math.acos(a),s=Math.sin(n),o=Math.sin((1-i)*n)/s,l=Math.sin(i*n)/s):(o=1-i,l=i),e[0]=o*h+l*A,e[1]=o*u+l*f,e[2]=o*c+l*p,e[3]=o*d+l*m,e}function T(e,t){let r=t[0],i=t[1],n=t[2],a=t[3],s=r*r+i*i+n*n+a*a,o=s?1/s:0;return e[0]=-r*o,e[1]=-i*o,e[2]=-n*o,e[3]=a*o,e}const C=function(e){let t=new a(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},D=function(e,t,r,i){let n=new a(4);return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n},P=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},R=function(e,t){let r=t[0],i=t[1],n=t[2],a=t[3],s=r*r+i*i+n*n+a*a;return s>0&&(s=1/Math.sqrt(s),e[0]=r*s,e[1]=i*s,e[2]=n*s,e[3]=a*s),e},B=(function(){let e=f(),t=m(1,0,0),r=m(0,1,0)}(),function(){let e=E(),t=E()}(),function(){let e=function(){let e=new a(9);return a!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}()}(),Symbol("@@webxr-polyfill/XRRigidTransform"));class U{constructor(){if(this[B]={matrix:null,position:null,orientation:null,inverse:null},0===arguments.length)this[B].matrix=o(new Float32Array(16));else if(1===arguments.length)arguments[0]instanceof Float32Array?this[B].matrix=arguments[0]:(this[B].position=this._getPoint(arguments[0]),this[B].orientation=DOMPointReadOnly.fromPoint({x:0,y:0,z:0,w:1}));else{if(2!==arguments.length)throw new Error("Too many arguments!");this[B].position=this._getPoint(arguments[0]),this[B].orientation=this._getPoint(arguments[1])}if(this[B].matrix){let e=f();c(e,this[B].matrix),this[B].position=DOMPointReadOnly.fromPoint({x:e[0],y:e[1],z:e[2]});let t=E();d(t,this[B].matrix),this[B].orientation=DOMPointReadOnly.fromPoint({x:t[0],y:t[1],z:t[2],w:t[3]})}else this[B].matrix=o(new Float32Array(16)),u(this[B].matrix,D(this[B].orientation.x,this[B].orientation.y,this[B].orientation.z,this[B].orientation.w),m(this[B].position.x,this[B].position.y,this[B].position.z))}_getPoint(e){return e instanceof DOMPointReadOnly?e:DOMPointReadOnly.fromPoint(e)}get matrix(){return this[B].matrix}get position(){return this[B].position}get orientation(){return this[B].orientation}get inverse(){if(null===this[B].inverse){let e=o(new Float32Array(16));l(e,this[B].matrix),this[B].inverse=new U(e),this[B].inverse[B].inverse=this}return this[B].inverse}}const I=Symbol("@@webxr-polyfill/XRSpace");class L{constructor(e=null,t=null){this[I]={specialType:e,inputSource:t,baseMatrix:null,inverseBaseMatrix:null,lastFrameId:-1}}get _specialType(){return this[I].specialType}get _inputSource(){return this[I].inputSource}_ensurePoseUpdated(e,t){t!=this[I].lastFrameId&&(this[I].lastFrameId=t,this._onPoseUpdate(e))}_onPoseUpdate(e){"viewer"==this[I].specialType&&(this._baseMatrix=e.getBasePoseMatrix())}set _baseMatrix(e){this[I].baseMatrix=e,this[I].inverseBaseMatrix=null}get _baseMatrix(){return this[I].baseMatrix||this[I].inverseBaseMatrix&&(this[I].baseMatrix=new Float32Array(16),l(this[I].baseMatrix,this[I].inverseBaseMatrix)),this[I].baseMatrix}set _inverseBaseMatrix(e){this[I].inverseBaseMatrix=e,this[I].baseMatrix=null}get _inverseBaseMatrix(){return this[I].inverseBaseMatrix||this[I].baseMatrix&&(this[I].inverseBaseMatrix=new Float32Array(16),l(this[I].inverseBaseMatrix,this[I].baseMatrix)),this[I].inverseBaseMatrix}_getSpaceRelativeTransform(e){if(!this._inverseBaseMatrix||!e._baseMatrix)return null;let t=new Float32Array(16);return h(t,this._inverseBaseMatrix,e._baseMatrix),new U(t)}}const O=Symbol("@@webxr-polyfill/XRReferenceSpace"),k=["viewer","local","local-floor","bounded-floor","unbounded"];class G extends L{constructor(e,t=null){if(!k.includes(e))throw new Error("XRReferenceSpaceType must be one of "+k);if(super(e),"bounded-floor"===e&&!t)throw new Error("XRReferenceSpace cannot use 'bounded-floor' type if the platform does not provide the floor level");(function(e){return"bounded-floor"===e||"local-floor"===e})(e)&&!t&&((t=o(new Float32Array(16)))[13]=1.6),this._inverseBaseMatrix=t||o(new Float32Array(16)),this[O]={type:e,transform:t,originOffset:o(new Float32Array(16))}}_transformBasePoseMatrix(e,t){h(e,this._inverseBaseMatrix,t)}_originOffsetMatrix(){return this[O].originOffset}_adjustForOriginOffset(e){let t=new Float32Array(16);l(t,this[O].originOffset),h(e,t,e)}_getSpaceRelativeTransform(e){let t=super._getSpaceRelativeTransform(e);return this._adjustForOriginOffset(t.matrix),new XRRigidTransform(t.matrix)}getOffsetReferenceSpace(e){let t=new G(this[O].type,this[O].transform,this[O].bounds);return h(t[O].originOffset,this[O].originOffset,e.matrix),t}}const N=Symbol("@@webxr-polyfill/XR"),z=["inline","immersive-vr","immersive-ar"],V={inline:{requiredFeatures:["viewer"],optionalFeatures:[]},"immersive-vr":{requiredFeatures:["viewer","local"],optionalFeatures:[]},"immersive-ar":{requiredFeatures:["viewer","local"],optionalFeatures:[]}};let Q;if("performance"in r==!1){let e=Date.now();Q=()=>Date.now()-e}else Q=()=>performance.now();var W=Q;const X=Symbol("@@webxr-polyfill/XRPose");class H{constructor(e,t){this[X]={transform:e,emulatedPosition:t}}get transform(){return this[X].transform}get emulatedPosition(){return this[X].emulatedPosition}}const j=Symbol("@@webxr-polyfill/XRViewerPose");class q extends H{constructor(e,t,r=!1){super(e,r),this[j]={views:t}}get views(){return this[j].views}}const Y=Symbol("@@webxr-polyfill/XRViewport");class Z{constructor(e){this[Y]={target:e}}get x(){return this[Y].target.x}get y(){return this[Y].target.y}get width(){return this[Y].target.width}get height(){return this[Y].target.height}}const J=["left","right","none"],K=Symbol("@@webxr-polyfill/XRView");class ${constructor(e,t,r,i){if(!J.includes(r))throw new Error("XREye must be one of: "+J);const n=Object.create(null),a=new Z(n);this[K]={device:e,eye:r,viewport:a,temp:n,sessionId:i,transform:t}}get eye(){return this[K].eye}get projectionMatrix(){return this[K].device.getProjectionMatrix(this.eye)}get transform(){return this[K].transform}_getViewport(e){if(this[K].device.getViewport(this[K].sessionId,this.eye,e,this[K].temp))return this[K].viewport}}const ee=Symbol("@@webxr-polyfill/XRFrame"),te="XRFrame access outside the callback that produced it is invalid.";let re=0;class ie{constructor(e,t,r){this[ee]={id:++re,active:!1,animationFrame:!1,device:e,session:t,sessionId:r}}get session(){return this[ee].session}getViewerPose(e){if(!this[ee].animationFrame)throw new DOMException("getViewerPose can only be called on XRFrame objects passed to XRSession.requestAnimationFrame callbacks.","InvalidStateError");if(!this[ee].active)throw new DOMException(te,"InvalidStateError");const t=this[ee].device,r=this[ee].session;r[ve].viewerSpace._ensurePoseUpdated(t,this[ee].id),e._ensurePoseUpdated(t,this[ee].id);let i=e._getSpaceRelativeTransform(r[ve].viewerSpace);const n=[];for(let i of r[ve].viewSpaces){i._ensurePoseUpdated(t,this[ee].id);let r=e._getSpaceRelativeTransform(i),a=new $(t,r,i.eye,this[ee].sessionId);n.push(a)}return new q(i,n,!1)}getPose(e,t){if(!this[ee].active)throw new DOMException(te,"InvalidStateError");const r=this[ee].device;if("target-ray"===e._specialType||"grip"===e._specialType)return r.getInputPose(e._inputSource,t,e._specialType);{e._ensurePoseUpdated(r,this[ee].id),t._ensurePoseUpdated(r,this[ee].id);let i=t._getSpaceRelativeTransform(e);return i?new XRPose(i,!1):null}}}const ne=Symbol("@@webxr-polyfill/XRRenderState"),ae=Object.freeze({depthNear:.1,depthFar:1e3,inlineVerticalFieldOfView:null,baseLayer:null});class se{constructor(e={}){const t=Object.assign({},ae,e);this[ne]={config:t}}get depthNear(){return this[ne].config.depthNear}get depthFar(){return this[ne].config.depthFar}get inlineVerticalFieldOfView(){return this[ne].config.inlineVerticalFieldOfView}get baseLayer(){return this[ne].config.baseLayer}}const oe=Symbol("@@webxr-polyfill/polyfilled-xr-compatible"),le=Symbol("@@webxr-polyfill/xr-compatible"),he=Symbol("@@webxr-polyfill/XRWebGLLayer"),ue=Object.freeze({antialias:!0,depth:!1,stencil:!1,alpha:!0,multiview:!1,ignoreDepthValues:!1,framebufferScaleFactor:1});const ce=Symbol("@@webxr-polyfill/XRInputSourceEvent");class de extends Event{constructor(e,t){super(e,t),this[ce]={frame:t.frame,inputSource:t.inputSource},Object.setPrototypeOf(this,de.prototype)}get frame(){return this[ce].frame}get inputSource(){return this[ce].inputSource}}const Ae=Symbol("@@webxr-polyfill/XRSessionEvent");class fe extends Event{constructor(e,t){super(e,t),this[Ae]={session:t.session},Object.setPrototypeOf(this,fe.prototype)}get session(){return this[Ae].session}}const pe=Symbol("@@webxr-polyfill/XRInputSourcesChangeEvent");class me extends Event{constructor(e,t){super(e,t),this[pe]={session:t.session,added:t.added,removed:t.removed},Object.setPrototypeOf(this,me.prototype)}get session(){return this[pe].session}get added(){return this[pe].added}get removed(){return this[pe].removed}}const ve=Symbol("@@webxr-polyfill/XRSession");class ge extends L{constructor(e){super(e)}get eye(){return this._specialType}_onPoseUpdate(e){this._inverseBaseMatrix=e.getBaseViewMatrix(this._specialType)}}class ye extends n{constructor(e,t,r){super();let i="inline"!=t,n=new se({inlineVerticalFieldOfView:i?null:.5*Math.PI});this[ve]={device:e,mode:t,immersive:i,ended:!1,suspended:!1,frameCallbacks:[],currentFrameCallbacks:null,frameHandle:0,deviceFrameHandle:null,id:r,activeRenderState:n,pendingRenderState:null,viewerSpace:new G("viewer"),viewSpaces:[],currentInputSources:[]},i?this[ve].viewSpaces.push(new ge("left"),new ge("right")):this[ve].viewSpaces.push(new ge("none")),this[ve].onDeviceFrame=()=>{if(this[ve].ended||this[ve].suspended)return;if(this[ve].deviceFrameHandle=null,this[ve].startDeviceFrameLoop(),null!==this[ve].pendingRenderState&&(this[ve].activeRenderState=new se(this[ve].pendingRenderState),this[ve].pendingRenderState=null,this[ve].activeRenderState.baseLayer&&this[ve].device.onBaseLayerSet(this[ve].id,this[ve].activeRenderState.baseLayer)),null===this[ve].activeRenderState.baseLayer)return;const t=new ie(e,this,this[ve].id),r=this[ve].currentFrameCallbacks=this[ve].frameCallbacks;this[ve].frameCallbacks=[],t[ee].active=!0,t[ee].animationFrame=!0,this[ve].device.onFrameStart(this[ve].id,this[ve].activeRenderState),this._checkInputSourcesChange();const i=W();for(let e=0;e<r.length;e++)try{r[e].cancelled||"function"!=typeof r[e].callback||r[e].callback(i,t)}catch(e){console.error(e)}this[ve].currentFrameCallbacks=null,t[ee].active=!1,this[ve].device.onFrameEnd(this[ve].id)},this[ve].startDeviceFrameLoop=()=>{null===this[ve].deviceFrameHandle&&(this[ve].deviceFrameHandle=this[ve].device.requestAnimationFrame(this[ve].onDeviceFrame))},this[ve].stopDeviceFrameLoop=()=>{const e=this[ve].deviceFrameHandle;null!==e&&(this[ve].device.cancelAnimationFrame(e),this[ve].deviceFrameHandle=null)},this[ve].onPresentationEnd=t=>{if(t!==this[ve].id)return this[ve].suspended=!1,this[ve].startDeviceFrameLoop(),void this.dispatchEvent("focus",{session:this});this[ve].ended=!0,this[ve].stopDeviceFrameLoop(),e.removeEventListener("@@webxr-polyfill/vr-present-end",this[ve].onPresentationEnd),e.removeEventListener("@@webxr-polyfill/vr-present-start",this[ve].onPresentationStart),e.removeEventListener("@@webxr-polyfill/input-select-start",this[ve].onSelectStart),e.removeEventListener("@@webxr-polyfill/input-select-end",this[ve].onSelectEnd),this.dispatchEvent("end",new fe("end",{session:this}))},e.addEventListener("@@webxr-polyfill/vr-present-end",this[ve].onPresentationEnd),this[ve].onPresentationStart=e=>{e!==this[ve].id&&(this[ve].suspended=!0,this[ve].stopDeviceFrameLoop(),this.dispatchEvent("blur",{session:this}))},e.addEventListener("@@webxr-polyfill/vr-present-start",this[ve].onPresentationStart),this[ve].onSelectStart=e=>{e.sessionId===this[ve].id&&this[ve].dispatchInputSourceEvent("selectstart",e.inputSource)},e.addEventListener("@@webxr-polyfill/input-select-start",this[ve].onSelectStart),this[ve].onSelectEnd=e=>{e.sessionId===this[ve].id&&(this[ve].dispatchInputSourceEvent("selectend",e.inputSource),this[ve].dispatchInputSourceEvent("select",e.inputSource))},e.addEventListener("@@webxr-polyfill/input-select-end",this[ve].onSelectEnd),this[ve].onSqueezeStart=e=>{e.sessionId===this[ve].id&&this[ve].dispatchInputSourceEvent("squeezestart",e.inputSource)},e.addEventListener("@@webxr-polyfill/input-squeeze-start",this[ve].onSqueezeStart),this[ve].onSqueezeEnd=e=>{e.sessionId===this[ve].id&&(this[ve].dispatchInputSourceEvent("squeezeend",e.inputSource),this[ve].dispatchInputSourceEvent("squeeze",e.inputSource))},e.addEventListener("@@webxr-polyfill/input-squeeze-end",this[ve].onSqueezeEnd),this[ve].dispatchInputSourceEvent=(t,r)=>{const i=new ie(e,this,this[ve].id),n=new de(t,{frame:i,inputSource:r});i[ee].active=!0,this.dispatchEvent(t,n),i[ee].active=!1},this[ve].startDeviceFrameLoop(),this.onblur=void 0,this.onfocus=void 0,this.onresetpose=void 0,this.onend=void 0,this.onselect=void 0,this.onselectstart=void 0,this.onselectend=void 0}get renderState(){return this[ve].activeRenderState}get environmentBlendMode(){return this[ve].device.environmentBlendMode||"opaque"}async requestReferenceSpace(e){if(this[ve].ended)return;if(!k.includes(e))throw new TypeError("XRReferenceSpaceType must be one of "+k);if(!this[ve].device.doesSessionSupportReferenceSpace(this[ve].id,e))throw new DOMException(`The ${e} reference space is not supported by this session.`,"NotSupportedError");if("viewer"===e)return this[ve].viewerSpace;let t=await this[ve].device.requestFrameOfReferenceTransform(e);if("bounded-floor"===e){if(!t)throw new DOMException(e+" XRReferenceSpace not supported by this device.","NotSupportedError");if(!this[ve].device.requestStageBounds())throw new DOMException(e+" XRReferenceSpace not supported by this device.","NotSupportedError");throw new DOMException(`The WebXR polyfill does not support the ${e} reference space yet.`,"NotSupportedError")}return new G(e,t)}requestAnimationFrame(e){if(this[ve].ended)return;const t=++this[ve].frameHandle;return this[ve].frameCallbacks.push({handle:t,callback:e,cancelled:!1}),t}cancelAnimationFrame(e){let t=this[ve].frameCallbacks,r=t.findIndex(t=>t&&t.handle===e);r>-1&&(t[r].cancelled=!0,t.splice(r,1)),t=this[ve].currentFrameCallbacks,t&&(r=t.findIndex(t=>t&&t.handle===e),r>-1&&(t[r].cancelled=!0))}get inputSources(){return this[ve].device.getInputSources()}async end(){if(!this[ve].ended)return this[ve].immersive&&(this[ve].ended=!0,this[ve].device.removeEventListener("@@webxr-polyfill/vr-present-start",this[ve].onPresentationStart),this[ve].device.removeEventListener("@@webxr-polyfill/vr-present-end",this[ve].onPresentationEnd),this[ve].device.removeEventListener("@@webxr-polyfill/input-select-start",this[ve].onSelectStart),this[ve].device.removeEventListener("@@webxr-polyfill/input-select-end",this[ve].onSelectEnd),this.dispatchEvent("end",new fe("end",{session:this}))),this[ve].stopDeviceFrameLoop(),this[ve].device.endSession(this[ve].id)}updateRenderState(e){if(this[ve].ended){throw new Error("Can't call updateRenderState on an XRSession that has already ended.")}if(e.baseLayer&&e.baseLayer._session!==this){throw new Error("Called updateRenderState with a base layer that was created by a different session.")}if(null!==e.inlineVerticalFieldOfView&&void 0!==e.inlineVerticalFieldOfView){if(this[ve].immersive){throw new Error("inlineVerticalFieldOfView must not be set for an XRRenderState passed to updateRenderState for an immersive session.")}e.inlineVerticalFieldOfView=Math.min(3.13,Math.max(.01,e.inlineVerticalFieldOfView))}if(null===this[ve].pendingRenderState){const e=this[ve].activeRenderState;this[ve].pendingRenderState={depthNear:e.depthNear,depthFar:e.depthFar,inlineVerticalFieldOfView:e.inlineVerticalFieldOfView,baseLayer:e.baseLayer}}Object.assign(this[ve].pendingRenderState,e)}_checkInputSourcesChange(){const e=[],t=[],r=this.inputSources,i=this[ve].currentInputSources;for(const t of r)i.includes(t)||e.push(t);for(const e of i)r.includes(e)||t.push(e);(e.length>0||t.length>0)&&this.dispatchEvent("inputsourceschange",new me("inputsourceschange",{session:this,added:e,removed:t})),this[ve].currentInputSources.length=0;for(const e of r)this[ve].currentInputSources.push(e)}}const we=Symbol("@@webxr-polyfill/XRInputSource");class be{constructor(e){this[we]={impl:e,gripSpace:new L("grip",this),targetRaySpace:new L("target-ray",this)}}get handedness(){return this[we].impl.handedness}get targetRayMode(){return this[we].impl.targetRayMode}get gripSpace(){let e=this[we].impl.targetRayMode;return"gaze"===e||"screen"===e?null:this[we].gripSpace}get targetRaySpace(){return this[we].targetRaySpace}get profiles(){return this[we].impl.profiles}get gamepad(){return this[we].impl.gamepad}}const Se=Symbol("@@webxr-polyfill/XRReferenceSpaceEvent");class xe extends Event{constructor(e,t){super(e,t),this[Se]={referenceSpace:t.referenceSpace,transform:t.transform||null},Object.setPrototypeOf(this,xe.prototype)}get referenceSpace(){return this[Se].referenceSpace}get transform(){return this[Se].transform}}var _e={XRSystem:class extends n{constructor(e){super(),this[N]={device:null,devicePromise:e,immersiveSession:null,inlineSessions:new Set},e.then(e=>{this[N].device=e})}async isSessionSupported(e){return this[N].device||await this[N].devicePromise,"inline"!=e?Promise.resolve(this[N].device.isSessionSupported(e)):Promise.resolve(!0)}async requestSession(e,t){if(!this[N].device){if("inline"!=e)throw new Error("Polyfill Error: Must call navigator.xr.isSessionSupported() with any XRSessionMode\nor navigator.xr.requestSession('inline') prior to requesting an immersive\nsession. This is a limitation specific to the WebXR Polyfill and does not apply\nto native implementations of the API.");await this[N].devicePromise}if(!z.includes(e))throw new TypeError(`The provided value '${e}' is not a valid enum value of type XRSessionMode`);const r=V[e],i=r.requiredFeatures.concat(t&&t.requiredFeatures?t.requiredFeatures:[]),n=r.optionalFeatures.concat(t&&t.optionalFeatures?t.optionalFeatures:[]),a=new Set;let s=!1;for(let e of i)this[N].device.isFeatureSupported(e)?a.add(e):(console.error(`The required feature '${e}' is not supported`),s=!0);if(s)throw new DOMException("Session does not support some required features","NotSupportedError");for(let e of n)this[N].device.isFeatureSupported(e)?a.add(e):console.log(`The optional feature '${e}' is not supported`);const o=await this[N].device.requestSession(e,a),l=new XRSession(this[N].device,e,o);"inline"==e?this[N].inlineSessions.add(l):this[N].immersiveSession=l;const h=()=>{"inline"==e?this[N].inlineSessions.delete(l):this[N].immersiveSession=null,l.removeEventListener("end",h)};return l.addEventListener("end",h),l}},XRSession:ye,XRSessionEvent:fe,XRFrame:ie,XRView:$,XRViewport:Z,XRViewerPose:q,XRWebGLLayer:class{constructor(e,t,r={}){const i=Object.assign({},ue,r);if(!(e instanceof ye))throw new Error("session must be a XRSession");if(e.ended)throw new Error("InvalidStateError");if(t[oe]&&!0!==t[le])throw new Error("InvalidStateError");const n=t.getParameter(t.FRAMEBUFFER_BINDING);this[he]={context:t,config:i,framebuffer:n,session:e}}get context(){return this[he].context}get antialias(){return this[he].config.antialias}get ignoreDepthValues(){return!0}get framebuffer(){return this[he].framebuffer}get framebufferWidth(){return this[he].context.drawingBufferWidth}get framebufferHeight(){return this[he].context.drawingBufferHeight}get _session(){return this[he].session}getViewport(e){return e._getViewport(this)}static getNativeFramebufferScaleFactor(e){if(!e)throw new TypeError("getNativeFramebufferScaleFactor must be passed a session.");return e[ve].ended?0:1}},XRSpace:L,XRReferenceSpace:G,XRReferenceSpaceEvent:xe,XRInputSource:be,XRInputSourceEvent:de,XRInputSourcesChangeEvent:me,XRRenderState:se,XRRigidTransform:U,XRPose:H};const Ee=e=>"function"!=typeof e.prototype.makeXRCompatible&&(e.prototype.makeXRCompatible=function(){return this[le]=!0,Promise.resolve()},!0),Me=e=>{const t=e.prototype.getContext;e.prototype.getContext=function(e,r){const i=t.call(this,e,r);return i&&(i[oe]=!0,r&&"xrCompatible"in r&&(i[le]=r.xrCompatible)),i}};var Fe="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};var Te,Ce=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,t){e.exports=function(){var e,t,r,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],i=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{!i&&o.return&&o.return()}finally{if(n)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(e,t,r){return e+(t-e)*r},s=function(){var e=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return e}}(),o=function(){var e=-1!==navigator.userAgent.indexOf("Version")&&-1!==navigator.userAgent.indexOf("Android")&&-1!==navigator.userAgent.indexOf("Chrome");return function(){return e}}(),l=function(){var e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return e}}(),h=function(){var e=-1!==navigator.userAgent.indexOf("Firefox")&&-1!==navigator.userAgent.indexOf("Android");return function(){return e}}(),u=(t=navigator.userAgent.match(/.*Chrome\/([0-9]+)/),r=t?parseInt(t[1],10):null,function(){return r}),c=function(){var e;return e=s()&&l()&&-1!==navigator.userAgent.indexOf("13_4"),function(){return e}}(),d=function(){var e=!1;if(65===u()){var t=navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(t){var r=t[1].split("."),i=n(r,4),a=(i[0],i[1],i[2]),s=i[3];e=3325===parseInt(a,10)&&parseInt(s,10)<148}}return function(){return e}}(),A=function(){var e=-1!==navigator.userAgent.indexOf("R7 Build");return function(){return e}}(),f=function(){var e=90==window.orientation||-90==window.orientation;return A()?!e:e},p=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},m=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},v=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},g=function(e,t,r,i){var n=e.createShader(e.VERTEX_SHADER);e.shaderSource(n,t),e.compileShader(n);var a=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(a,r),e.compileShader(a);var s=e.createProgram();for(var o in e.attachShader(s,n),e.attachShader(s,a),i)e.bindAttribLocation(s,i[o],o);return e.linkProgram(s),e.deleteShader(n),e.deleteShader(a),s},y=function(e,t){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n="",a=0;a<i;a++)r[n=e.getActiveUniform(t,a).name.replace("[0]","")]=e.getUniformLocation(t,n);return r},w=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},b=function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},S=function(e){if(s()){var t=e.style.width,r=e.style.height;e.style.width=parseInt(t)+1+"px",e.style.height=parseInt(r)+"px",setTimeout((function(){e.style.width=t,e.style.height=r}),100)}window.canvas=e},x=function(){var e=Math.PI/180,t=.25*Math.PI,r=new Float32Array([0,0,0,1]),i=new Float32Array([0,0,0]);function n(n,a,s,o,l,h){!function(r,i,n,a){var s=Math.tan(i?i.upDegrees*e:t),o=Math.tan(i?i.downDegrees*e:t),l=Math.tan(i?i.leftDegrees*e:t),h=Math.tan(i?i.rightDegrees*e:t),u=2/(l+h),c=2/(s+o);r[0]=u,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=c,r[6]=0,r[7]=0,r[8]=-(l-h)*u*.5,r[9]=(s-o)*c*.5,r[10]=a/(n-a),r[11]=-1,r[12]=0,r[13]=0,r[14]=a*n/(n-a),r[15]=0}(n,o||null,h.depthNear,h.depthFar);var u,c,d,A,f,p,m,v,g,y,w,b,S,x,_,E,M,F,T,C=s.orientation||r,D=s.position||i;u=a,d=D,A=(c=C)[0],f=c[1],p=c[2],m=c[3],w=A*(v=A+A),b=A*(g=f+f),S=A*(y=p+p),x=f*g,_=f*y,E=p*y,M=m*v,F=m*g,T=m*y,u[0]=1-(x+E),u[1]=b+T,u[2]=S-F,u[3]=0,u[4]=b-T,u[5]=1-(w+E),u[6]=_+M,u[7]=0,u[8]=S+F,u[9]=_-M,u[10]=1-(w+x),u[11]=0,u[12]=d[0],u[13]=d[1],u[14]=d[2],u[15]=1,l&&function(e,t,r){var i,n,a,s,o,l,h,u,c,d,A,f,p=r[0],m=r[1],v=r[2];t===e?(e[12]=t[0]*p+t[4]*m+t[8]*v+t[12],e[13]=t[1]*p+t[5]*m+t[9]*v+t[13],e[14]=t[2]*p+t[6]*m+t[10]*v+t[14],e[15]=t[3]*p+t[7]*m+t[11]*v+t[15]):(i=t[0],n=t[1],a=t[2],s=t[3],o=t[4],l=t[5],h=t[6],u=t[7],c=t[8],d=t[9],A=t[10],f=t[11],e[0]=i,e[1]=n,e[2]=a,e[3]=s,e[4]=o,e[5]=l,e[6]=h,e[7]=u,e[8]=c,e[9]=d,e[10]=A,e[11]=f,e[12]=i*p+o*m+c*v+t[12],e[13]=n*p+l*m+d*v+t[13],e[14]=a*p+h*m+A*v+t[14],e[15]=s*p+u*m+f*v+t[15])}(a,a,l),function(e,t){var r=t[0],i=t[1],n=t[2],a=t[3],s=t[4],o=t[5],l=t[6],h=t[7],u=t[8],c=t[9],d=t[10],A=t[11],f=t[12],p=t[13],m=t[14],v=t[15],g=r*o-i*s,y=r*l-n*s,w=r*h-a*s,b=i*l-n*o,S=i*h-a*o,x=n*h-a*l,_=u*p-c*f,E=u*m-d*f,M=u*v-A*f,F=c*m-d*p,T=c*v-A*p,C=d*v-A*m,D=g*C-y*T+w*F+b*M-S*E+x*_;D&&(D=1/D,e[0]=(o*C-l*T+h*F)*D,e[1]=(n*T-i*C-a*F)*D,e[2]=(p*x-m*S+v*b)*D,e[3]=(d*S-c*x-A*b)*D,e[4]=(l*M-s*C-h*E)*D,e[5]=(r*C-n*M+a*E)*D,e[6]=(m*w-f*x-v*y)*D,e[7]=(u*x-d*w+A*y)*D,e[8]=(s*T-o*M+h*_)*D,e[9]=(i*M-r*T-a*_)*D,e[10]=(f*S-p*w+v*g)*D,e[11]=(c*w-u*S-A*g)*D,e[12]=(o*E-s*F-l*_)*D,e[13]=(r*F-i*E+n*_)*D,e[14]=(p*y-f*b-m*g)*D,e[15]=(u*b-c*y+d*g)*D)}(a,a)}return function(e,t,r){return!(!e||!t||(e.pose=t,e.timestamp=t.timestamp,n(e.leftProjectionMatrix,e.leftViewMatrix,t,r._getFieldOfView("left"),r._getEyeOffset("left"),r),n(e.rightProjectionMatrix,e.rightViewMatrix,t,r._getFieldOfView("right"),r._getEyeOffset("right"),r),0))}}(),_=function(e){var t,r=e.indexOf("://");t=-1!==r?r+3:0;var i=e.indexOf("/",t);return-1===i&&(i=e.length),e.substring(0,i)},E=(e={},function(t,r){void 0===e[t]&&(console.warn("webvr-polyfill: "+r),e[t]=!0)}),M=function(e,t){E(e,e+" has been deprecated. This may not work on native WebVR displays. "+(t?"Please use "+t+" instead.":""))},F=function(e,t,r){if(t){for(var i=[],n=null,a=0;a<t.length;++a)switch(s=t[a]){case e.TEXTURE_BINDING_2D:case e.TEXTURE_BINDING_CUBE_MAP:if((l=t[++a])<e.TEXTURE0||l>e.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),i.push(null,null);break}n||(n=e.getParameter(e.ACTIVE_TEXTURE)),e.activeTexture(l),i.push(e.getParameter(s),null);break;case e.ACTIVE_TEXTURE:n=e.getParameter(e.ACTIVE_TEXTURE),i.push(null);break;default:i.push(e.getParameter(s))}for(r(e),a=0;a<t.length;++a){var s=t[a],o=i[a];switch(s){case e.ACTIVE_TEXTURE:break;case e.ARRAY_BUFFER_BINDING:e.bindBuffer(e.ARRAY_BUFFER,o);break;case e.COLOR_CLEAR_VALUE:e.clearColor(o[0],o[1],o[2],o[3]);break;case e.COLOR_WRITEMASK:e.colorMask(o[0],o[1],o[2],o[3]);break;case e.CURRENT_PROGRAM:e.useProgram(o);break;case e.ELEMENT_ARRAY_BUFFER_BINDING:e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,o);break;case e.FRAMEBUFFER_BINDING:e.bindFramebuffer(e.FRAMEBUFFER,o);break;case e.RENDERBUFFER_BINDING:e.bindRenderbuffer(e.RENDERBUFFER,o);break;case e.TEXTURE_BINDING_2D:if((l=t[++a])<e.TEXTURE0||l>e.TEXTURE31)break;e.activeTexture(l),e.bindTexture(e.TEXTURE_2D,o);break;case e.TEXTURE_BINDING_CUBE_MAP:var l;if((l=t[++a])<e.TEXTURE0||l>e.TEXTURE31)break;e.activeTexture(l),e.bindTexture(e.TEXTURE_CUBE_MAP,o);break;case e.VIEWPORT:e.viewport(o[0],o[1],o[2],o[3]);break;case e.BLEND:case e.CULL_FACE:case e.DEPTH_TEST:case e.SCISSOR_TEST:case e.STENCIL_TEST:o?e.enable(s):e.disable(s);break;default:console.log("No GL restore behavior for 0x"+s.toString(16))}n&&e.activeTexture(n)}}else r(e)},T=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),C=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");function D(e,t,r,i){this.gl=e,this.cardboardUI=t,this.bufferScale=r,this.dirtySubmitFrameBindings=i,this.ctxAttribs=e.getContextAttributes(),this.instanceExt=e.getExtension("ANGLE_instanced_arrays"),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=e.drawingBufferWidth,this.bufferHeight=e.drawingBufferHeight,this.realBindFramebuffer=e.bindFramebuffer,this.realEnable=e.enable,this.realDisable=e.disable,this.realColorMask=e.colorMask,this.realClearColor=e.clearColor,this.realViewport=e.viewport,s()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=g(e,T,C,this.attribs),this.uniforms=y(e,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.indexCount=0,this.renderTarget=e.createTexture(),this.framebuffer=e.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=e.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=e.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=e.createRenderbuffer()),this.patch(),this.onResize()}D.prototype.destroy=function(){var e=this.gl;this.unpatch(),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer),e.deleteTexture(this.renderTarget),e.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&e.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&e.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&e.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},D.prototype.onResize=function(){var e=this.gl,t=this,r=[e.RENDERBUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0];F(e,r,(function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.framebuffer),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.texImage2D(e.TEXTURE_2D,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,t.bufferWidth,t.bufferHeight,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.renderTarget,0),t.ctxAttribs.depth&&t.ctxAttribs.stencil?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthStencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t.depthStencilBuffer)):t.ctxAttribs.depth?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t.depthBuffer)):t.ctxAttribs.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,t.stencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.STENCIL_INDEX8,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.STENCIL_ATTACHMENT,e.RENDERBUFFER,t.stencilBuffer)),!e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),t.realClearColor.apply(e,t.clearColor)})),this.cardboardUI&&this.cardboardUI.onResize()},D.prototype.patch=function(){if(!this.isPatched){var e=this,t=this.gl.canvas,r=this.gl;s()||(t.width=p()*this.bufferScale,t.height=m()*this.bufferScale,Object.defineProperty(t,"width",{configurable:!0,enumerable:!0,get:function(){return e.bufferWidth},set:function(r){e.bufferWidth=r,e.realCanvasWidth.set.call(t,r),e.onResize()}}),Object.defineProperty(t,"height",{configurable:!0,enumerable:!0,get:function(){return e.bufferHeight},set:function(r){e.bufferHeight=r,e.realCanvasHeight.set.call(t,r),e.onResize()}})),this.lastBoundFramebuffer=r.getParameter(r.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(t,i){e.lastBoundFramebuffer=i||e.framebuffer,e.realBindFramebuffer.call(r,t,e.lastBoundFramebuffer)},this.cullFace=r.getParameter(r.CULL_FACE),this.depthTest=r.getParameter(r.DEPTH_TEST),this.blend=r.getParameter(r.BLEND),this.scissorTest=r.getParameter(r.SCISSOR_TEST),this.stencilTest=r.getParameter(r.STENCIL_TEST),r.enable=function(t){switch(t){case r.CULL_FACE:e.cullFace=!0;break;case r.DEPTH_TEST:e.depthTest=!0;break;case r.BLEND:e.blend=!0;break;case r.SCISSOR_TEST:e.scissorTest=!0;break;case r.STENCIL_TEST:e.stencilTest=!0}e.realEnable.call(r,t)},r.disable=function(t){switch(t){case r.CULL_FACE:e.cullFace=!1;break;case r.DEPTH_TEST:e.depthTest=!1;break;case r.BLEND:e.blend=!1;break;case r.SCISSOR_TEST:e.scissorTest=!1;break;case r.STENCIL_TEST:e.stencilTest=!1}e.realDisable.call(r,t)},this.colorMask=r.getParameter(r.COLOR_WRITEMASK),r.colorMask=function(t,i,n,a){e.colorMask[0]=t,e.colorMask[1]=i,e.colorMask[2]=n,e.colorMask[3]=a,e.realColorMask.call(r,t,i,n,a)},this.clearColor=r.getParameter(r.COLOR_CLEAR_VALUE),r.clearColor=function(t,i,n,a){e.clearColor[0]=t,e.clearColor[1]=i,e.clearColor[2]=n,e.clearColor[3]=a,e.realClearColor.call(r,t,i,n,a)},this.viewport=r.getParameter(r.VIEWPORT),r.viewport=function(t,i,n,a){e.viewport[0]=t,e.viewport[1]=i,e.viewport[2]=n,e.viewport[3]=a,e.realViewport.call(r,t,i,n,a)},this.isPatched=!0,S(t)}},D.prototype.unpatch=function(){if(this.isPatched){var e=this.gl,t=this.gl.canvas;s()||(Object.defineProperty(t,"width",this.realCanvasWidth),Object.defineProperty(t,"height",this.realCanvasHeight)),t.width=this.bufferWidth,t.height=this.bufferHeight,e.bindFramebuffer=this.realBindFramebuffer,e.enable=this.realEnable,e.disable=this.realDisable,e.colorMask=this.realColorMask,e.clearColor=this.realClearColor,e.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&e.bindFramebuffer(e.FRAMEBUFFER,null),this.isPatched=!1,setTimeout((function(){S(t)}),1)}},D.prototype.setTextureBounds=function(e,t){e||(e=[0,0,.5,1]),t||(t=[.5,0,.5,1]),this.viewportOffsetScale[0]=e[0],this.viewportOffsetScale[1]=e[1],this.viewportOffsetScale[2]=e[2],this.viewportOffsetScale[3]=e[3],this.viewportOffsetScale[4]=t[0],this.viewportOffsetScale[5]=t[1],this.viewportOffsetScale[6]=t[2],this.viewportOffsetScale[7]=t[3]},D.prototype.submitFrame=function(){var e=this.gl,t=this,r=[];if(this.dirtySubmitFrameBindings||r.push(e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING,e.ELEMENT_ARRAY_BUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0),F(e,r,(function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null);var r=0,i=0;t.instanceExt&&(r=e.getVertexAttrib(t.attribs.position,t.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE),i=e.getVertexAttrib(t.attribs.texCoord,t.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE)),t.cullFace&&t.realDisable.call(e,e.CULL_FACE),t.depthTest&&t.realDisable.call(e,e.DEPTH_TEST),t.blend&&t.realDisable.call(e,e.BLEND),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realDisable.call(e,e.STENCIL_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),(t.ctxAttribs.alpha||s())&&(t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT)),e.useProgram(t.program),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.indexBuffer),e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.enableVertexAttribArray(t.attribs.position),e.enableVertexAttribArray(t.attribs.texCoord),e.vertexAttribPointer(t.attribs.position,2,e.FLOAT,!1,20,0),e.vertexAttribPointer(t.attribs.texCoord,3,e.FLOAT,!1,20,8),t.instanceExt&&(0!=r&&t.instanceExt.vertexAttribDivisorANGLE(t.attribs.position,0),0!=i&&t.instanceExt.vertexAttribDivisorANGLE(t.attribs.texCoord,0)),e.activeTexture(e.TEXTURE0),e.uniform1i(t.uniforms.diffuse,0),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.uniform4fv(t.uniforms.viewportOffsetScale,t.viewportOffsetScale),e.drawElements(e.TRIANGLES,t.indexCount,e.UNSIGNED_SHORT,0),t.cardboardUI&&t.cardboardUI.renderNoState(),t.realBindFramebuffer.call(t.gl,e.FRAMEBUFFER,t.framebuffer),t.ctxAttribs.preserveDrawingBuffer||(t.realClearColor.call(e,0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)),t.dirtySubmitFrameBindings||t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.cullFace&&t.realEnable.call(e,e.CULL_FACE),t.depthTest&&t.realEnable.call(e,e.DEPTH_TEST),t.blend&&t.realEnable.call(e,e.BLEND),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realEnable.call(e,e.STENCIL_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),!t.ctxAttribs.alpha&&t.ctxAttribs.preserveDrawingBuffer||t.realClearColor.apply(e,t.clearColor),t.instanceExt&&(0!=r&&t.instanceExt.vertexAttribDivisorANGLE(t.attribs.position,r),0!=i&&t.instanceExt.vertexAttribDivisorANGLE(t.attribs.texCoord,i))})),s()){var i=e.canvas;i.width==t.bufferWidth&&i.height==t.bufferHeight||(t.bufferWidth=i.width,t.bufferHeight=i.height,t.onResize())}},D.prototype.updateDeviceInfo=function(e){var t=this.gl,r=this,i=[t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING];F(t,i,(function(t){var i=r.computeMeshVertices_(r.meshWidth,r.meshHeight,e);if(t.bindBuffer(t.ARRAY_BUFFER,r.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW),!r.indexCount){var n=r.computeMeshIndices_(r.meshWidth,r.meshHeight);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW),r.indexCount=n.length}}))},D.prototype.computeMeshVertices_=function(e,t,r){for(var i=new Float32Array(2*e*t*5),n=r.getLeftEyeVisibleTanAngles(),s=r.getLeftEyeNoLensTanAngles(),o=r.getLeftEyeVisibleScreenRect(s),l=0,h=0;h<2;h++){for(var u=0;u<t;u++)for(var c=0;c<e;c++,l++){var d=c/(e-1),A=u/(t-1),f=d,p=A,m=a(n[0],n[2],d),v=a(n[3],n[1],A),g=Math.sqrt(m*m+v*v),y=r.distortion.distortInverse(g),w=v*y/g;d=(m*y/g-s[0])/(s[2]-s[0]),A=(w-s[3])/(s[1]-s[3]),d=2*(o.x+d*o.width-.5),A=2*(o.y+A*o.height-.5),i[5*l+0]=d,i[5*l+1]=A,i[5*l+2]=f,i[5*l+3]=p,i[5*l+4]=h}var b=n[2]-n[0];n[0]=-(b+n[0]),n[2]=b-n[2],b=s[2]-s[0],s[0]=-(b+s[0]),s[2]=b-s[2],o.x=1-(o.x+o.width)}return i},D.prototype.computeMeshIndices_=function(e,t){for(var r=new Uint16Array(2*(e-1)*(t-1)*6),i=e/2,n=t/2,a=0,s=0,o=0;o<2;o++)for(var l=0;l<t;l++)for(var h=0;h<e;h++,a++)0!=h&&0!=l&&(h<=i==l<=n?(r[s++]=a,r[s++]=a-e-1,r[s++]=a-e,r[s++]=a-e-1,r[s++]=a,r[s++]=a-1):(r[s++]=a-1,r[s++]=a-e,r[s++]=a,r[s++]=a-e,r[s++]=a-1,r[s++]=a-e-1));return r},D.prototype.getOwnPropertyDescriptor_=function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return void 0!==r.get&&void 0!==r.set||(r.configurable=!0,r.enumerable=!0,r.get=function(){return this.getAttribute(t)},r.set=function(e){this.setAttribute(t,e)}),r};var P=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),R=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),B=Math.PI/180;function U(e){this.gl=e,this.attribs={position:0},this.program=g(e,P,R,this.attribs),this.uniforms=y(e,this.program),this.vertexBuffer=e.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}function I(e){this.coefficients=e}U.prototype.destroy=function(){var e=this.gl;this.listener&&e.canvas.removeEventListener("click",this.listener,!1),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer)},U.prototype.listen=function(e,t){var r=this.gl.canvas;this.listener=function(i){var n=r.clientWidth/2;i.clientX>n-42&&i.clientX<n+42&&i.clientY>r.clientHeight-42?e(i):i.clientX<42&&i.clientY<42&&t(i)},r.addEventListener("click",this.listener,!1)},U.prototype.onResize=function(){var e=this.gl,t=this,r=[e.ARRAY_BUFFER_BINDING];F(e,r,(function(e){var r=[],i=e.drawingBufferWidth/2,n=Math.max(screen.width,screen.height)*window.devicePixelRatio,a=e.drawingBufferWidth/n*window.devicePixelRatio,s=4*a/2,o=42*a,l=28*a/2,h=14*a;function u(e,t){var n=(90-e)*B,a=Math.cos(n),s=Math.sin(n);r.push(.3125*a*l+i,.3125*s*l+l),r.push(t*a*l+i,t*s*l+l)}r.push(i-s,o),r.push(i-s,e.drawingBufferHeight),r.push(i+s,o),r.push(i+s,e.drawingBufferHeight),t.gearOffset=r.length/2;for(var c=0;c<=6;c++){var d=60*c;u(d,1),u(d+12,1),u(d+20,.75),u(d+40,.75),u(d+48,1)}function A(t,i){r.push(h+t,e.drawingBufferHeight-h-i)}t.gearVertexCount=r.length/2-t.gearOffset,t.arrowOffset=r.length/2;var f=s/Math.sin(45*B);A(0,l),A(l,0),A(l+f,f),A(f,l+f),A(f,l-f),A(0,l),A(l,2*l),A(l+f,2*l-f),A(f,l-f),A(0,l),A(f,l-s),A(28*a,l-s),A(f,l+s),A(28*a,l+s),t.arrowVertexCount=r.length/2-t.arrowOffset,e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array(r),e.STATIC_DRAW)}))},U.prototype.render=function(){var e=this.gl,t=this,r=[e.CULL_FACE,e.DEPTH_TEST,e.BLEND,e.SCISSOR_TEST,e.STENCIL_TEST,e.COLOR_WRITEMASK,e.VIEWPORT,e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING];F(e,r,(function(e){e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.BLEND),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.colorMask(!0,!0,!0,!0),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.renderNoState()}))},U.prototype.renderNoState=function(){var e,t,r,i,n,a,s,o,l,h,u=this.gl;u.useProgram(this.program),u.bindBuffer(u.ARRAY_BUFFER,this.vertexBuffer),u.enableVertexAttribArray(this.attribs.position),u.vertexAttribPointer(this.attribs.position,2,u.FLOAT,!1,8,0),u.uniform4f(this.uniforms.color,1,1,1,1),e=this.projMat,t=0,r=u.drawingBufferWidth,i=0,n=u.drawingBufferHeight,o=1/(t-r),l=1/(i-n),h=1/((a=.1)-(s=1024)),e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*h,e[11]=0,e[12]=(t+r)*o,e[13]=(n+i)*l,e[14]=(s+a)*h,e[15]=1,u.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),u.drawArrays(u.TRIANGLE_STRIP,0,4),u.drawArrays(u.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),u.drawArrays(u.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},I.prototype.distortInverse=function(e){for(var t=0,r=1,i=e-this.distort(t);Math.abs(r-t)>1e-4;){var n=e-this.distort(r),a=r-n*((r-t)/(n-i));t=r,r=a,i=n}return r},I.prototype.distort=function(e){for(var t=e*e,r=0,i=0;i<this.coefficients.length;i++)r=t*(r+this.coefficients[i]);return(r+1)*e};var L=Math.PI/180,O=180/Math.PI,k=function(e,t,r){this.x=e||0,this.y=t||0,this.z=r||0};k.prototype={constructor:k,set:function(e,t,r){return this.x=e,this.y=t,this.z=r,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var e=this.length();if(0!==e){var t=1/e;this.multiplyScalar(t)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(e){this.x*=e,this.y*=e,this.z*=e},applyQuaternion:function(e){var t=this.x,r=this.y,i=this.z,n=e.x,a=e.y,s=e.z,o=e.w,l=o*t+a*i-s*r,h=o*r+s*t-n*i,u=o*i+n*r-a*t,c=-n*t-a*r-s*i;return this.x=l*o+c*-n+h*-s-u*-a,this.y=h*o+c*-a+u*-n-l*-s,this.z=u*o+c*-s+l*-a-h*-n,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},crossVectors:function(e,t){var r=e.x,i=e.y,n=e.z,a=t.x,s=t.y,o=t.z;return this.x=i*o-n*s,this.y=n*a-r*o,this.z=r*s-i*a,this}};var G,N,z=function(e,t,r,i){this.x=e||0,this.y=t||0,this.z=r||0,this.w=void 0!==i?i:1};function V(e){this.width=e.width||p(),this.height=e.height||m(),this.widthMeters=e.widthMeters,this.heightMeters=e.heightMeters,this.bevelMeters=e.bevelMeters}z.prototype={constructor:z,set:function(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},setFromEulerXYZ:function(e,t,r){var i=Math.cos(e/2),n=Math.cos(t/2),a=Math.cos(r/2),s=Math.sin(e/2),o=Math.sin(t/2),l=Math.sin(r/2);return this.x=s*n*a+i*o*l,this.y=i*o*a-s*n*l,this.z=i*n*l+s*o*a,this.w=i*n*a-s*o*l,this},setFromEulerYXZ:function(e,t,r){var i=Math.cos(e/2),n=Math.cos(t/2),a=Math.cos(r/2),s=Math.sin(e/2),o=Math.sin(t/2),l=Math.sin(r/2);return this.x=s*n*a+i*o*l,this.y=i*o*a-s*n*l,this.z=i*n*l-s*o*a,this.w=i*n*a+s*o*l,this},setFromAxisAngle:function(e,t){var r=t/2,i=Math.sin(r);return this.x=e.x*i,this.y=e.y*i,this.z=e.z*i,this.w=Math.cos(r),this},multiply:function(e){return this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var r=e.x,i=e.y,n=e.z,a=e.w,s=t.x,o=t.y,l=t.z,h=t.w;return this.x=r*h+a*s+i*l-n*o,this.y=i*h+a*o+n*s-r*l,this.z=n*h+a*l+r*o-i*s,this.w=a*h-r*s-i*o-n*l,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=1):(e=1/e,this.x=this.x*e,this.y=this.y*e,this.z=this.z*e,this.w=this.w*e),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var r=this.x,i=this.y,n=this.z,a=this.w,s=a*e.w+r*e.x+i*e.y+n*e.z;if(s<0?(this.w=-e.w,this.x=-e.x,this.y=-e.y,this.z=-e.z,s=-s):this.copy(e),s>=1)return this.w=a,this.x=r,this.y=i,this.z=n,this;var o=Math.acos(s),l=Math.sqrt(1-s*s);if(Math.abs(l)<.001)return this.w=.5*(a+this.w),this.x=.5*(r+this.x),this.y=.5*(i+this.y),this.z=.5*(n+this.z),this;var h=Math.sin((1-t)*o)/l,u=Math.sin(t*o)/l;return this.w=a*h+this.w*u,this.x=r*h+this.x*u,this.y=i*h+this.y*u,this.z=n*h+this.z*u,this},setFromUnitVectors:function(e,t){return void 0===G&&(G=new k),(N=e.dot(t)+1)<1e-6?(N=0,Math.abs(e.x)>Math.abs(e.z)?G.set(-e.y,e.x,0):G.set(0,-e.z,e.y)):G.crossVectors(e,t),this.x=G.x,this.y=G.y,this.z=G.z,this.w=N,this.normalize(),this}};var Q=new V({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),W=new V({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),X={CardboardV1:new j({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new j({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function H(e,t){this.viewer=X.CardboardV2,this.updateDeviceParams(e),this.distortion=new I(this.viewer.distortionCoefficients);for(var r=0;r<t.length;r++){var i=t[r];X[i.id]=new j(i)}}function j(e){this.id=e.id,this.label=e.label,this.fov=e.fov,this.interLensDistance=e.interLensDistance,this.baselineLensDistance=e.baselineLensDistance,this.screenLensDistance=e.screenLensDistance,this.distortionCoefficients=e.distortionCoefficients,this.inverseCoefficients=e.inverseCoefficients}H.prototype.updateDeviceParams=function(e){this.device=this.determineDevice_(e)||this.device},H.prototype.getDevice=function(){return this.device},H.prototype.setViewer=function(e){this.viewer=e,this.distortion=new I(this.viewer.distortionCoefficients)},H.prototype.determineDevice_=function(e){if(!e)return s()?(console.warn("Using fallback iOS device measurements."),W):(console.warn("Using fallback Android device measurements."),Q);var t=.0254/e.xdpi,r=.0254/e.ydpi;return new V({widthMeters:t*p(),heightMeters:r*m(),bevelMeters:.001*e.bevelMm})},H.prototype.getDistortedFieldOfViewLeftEye=function(){var e=this.viewer,t=this.device,r=this.distortion,i=e.screenLensDistance,n=(t.widthMeters-e.interLensDistance)/2,a=e.interLensDistance/2,s=e.baselineLensDistance-t.bevelMeters,o=t.heightMeters-s,l=O*Math.atan(r.distort(n/i)),h=O*Math.atan(r.distort(a/i)),u=O*Math.atan(r.distort(s/i)),c=O*Math.atan(r.distort(o/i));return{leftDegrees:Math.min(l,e.fov),rightDegrees:Math.min(h,e.fov),downDegrees:Math.min(u,e.fov),upDegrees:Math.min(c,e.fov)}},H.prototype.getLeftEyeVisibleTanAngles=function(){var e=this.viewer,t=this.device,r=this.distortion,i=Math.tan(-L*e.fov),n=Math.tan(L*e.fov),a=Math.tan(L*e.fov),s=Math.tan(-L*e.fov),o=t.widthMeters/4,l=t.heightMeters/2,h=e.baselineLensDistance-t.bevelMeters-l,u=e.interLensDistance/2-o,c=-h,d=e.screenLensDistance,A=r.distort((u-o)/d),f=r.distort((c+l)/d),p=r.distort((u+o)/d),m=r.distort((c-l)/d),v=new Float32Array(4);return v[0]=Math.max(i,A),v[1]=Math.min(n,f),v[2]=Math.min(a,p),v[3]=Math.max(s,m),v},H.prototype.getLeftEyeNoLensTanAngles=function(){var e=this.viewer,t=this.device,r=this.distortion,i=new Float32Array(4),n=r.distortInverse(Math.tan(-L*e.fov)),a=r.distortInverse(Math.tan(L*e.fov)),s=r.distortInverse(Math.tan(L*e.fov)),o=r.distortInverse(Math.tan(-L*e.fov)),l=t.widthMeters/4,h=t.heightMeters/2,u=e.baselineLensDistance-t.bevelMeters-h,c=e.interLensDistance/2-l,d=-u,A=e.screenLensDistance,f=(c-l)/A,p=(d+h)/A,m=(c+l)/A,v=(d-h)/A;return i[0]=Math.max(n,f),i[1]=Math.min(a,p),i[2]=Math.min(s,m),i[3]=Math.max(o,v),i},H.prototype.getLeftEyeVisibleScreenRect=function(e){var t=this.viewer,r=this.device,i=t.screenLensDistance,n=(r.widthMeters-t.interLensDistance)/2,a=t.baselineLensDistance-r.bevelMeters,s=(e[0]*i+n)/r.widthMeters,o=(e[1]*i+a)/r.heightMeters,l=(e[2]*i+n)/r.widthMeters,h=(e[3]*i+a)/r.heightMeters;return{x:s,y:h,width:l-s,height:o-h}},H.prototype.getFieldOfViewLeftEye=function(e){return e?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},H.prototype.getFieldOfViewRightEye=function(e){var t=this.getFieldOfViewLeftEye(e);return{leftDegrees:t.rightDegrees,rightDegrees:t.leftDegrees,upDegrees:t.upDegrees,downDegrees:t.downDegrees}},H.prototype.getUndistortedFieldOfViewLeftEye=function(){var e=this.getUndistortedParams_();return{leftDegrees:O*Math.atan(e.outerDist),rightDegrees:O*Math.atan(e.innerDist),downDegrees:O*Math.atan(e.bottomDist),upDegrees:O*Math.atan(e.topDist)}},H.prototype.getUndistortedViewportLeftEye=function(){var e=this.getUndistortedParams_(),t=this.viewer,r=this.device,i=t.screenLensDistance,n=r.widthMeters/i,a=r.heightMeters/i,s=r.width/n,o=r.height/a,l=Math.round((e.eyePosX-e.outerDist)*s),h=Math.round((e.eyePosY-e.bottomDist)*o);return{x:l,y:h,width:Math.round((e.eyePosX+e.innerDist)*s)-l,height:Math.round((e.eyePosY+e.topDist)*o)-h}},H.prototype.getUndistortedParams_=function(){var e=this.viewer,t=this.device,r=this.distortion,i=e.screenLensDistance,n=e.interLensDistance/2/i,a=t.widthMeters/i,s=t.heightMeters/i,o=a/2-n,l=(e.baselineLensDistance-t.bevelMeters)/i,h=e.fov,u=r.distortInverse(Math.tan(L*h)),c=Math.min(o,u),d=Math.min(n,u),A=Math.min(l,u);return{outerDist:c,innerDist:d,topDist:Math.min(s-l,u),bottomDist:A,eyePosX:o,eyePosY:l}},H.Viewers=X;var q={format:1,last_updated:"2019-11-09T17:36:14Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X00PD/*"},{ua:"ASUS_X00PD"}],dpi:245,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X008D/*"},{ua:"ASUS_X008D"}],dpi:282,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2 XL/*"},{ua:"Pixel 2 XL"}],dpi:537.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3 XL/*"},{ua:"Pixel 3 XL"}],dpi:[558.5,553.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3/*"},{ua:"Pixel 3"}],dpi:442.4,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2/*"},{ua:"Pixel 2"}],dpi:441,bw:3,ac:500},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/BLN-L24/*"},{ua:"HONORBLN-L24"}],dpi:480,bw:4,ac:500},{type:"android",rules:[{mdmh:"Huawei/*/BKL-L09/*"},{ua:"BKL-L09"}],dpi:403,bw:3.47,ac:500},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1001/*"},{ua:"ONE E1001"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1003/*"},{ua:"ONE E1003"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2001/*"},{ua:"ONE A2001"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2003/*"},{ua:"ONE A2003"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3000/*"},{ua:"ONEPLUS A3000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3003/*"},{ua:"ONEPLUS A3003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3010/*"},{ua:"ONEPLUS A3010"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6000/*"},{ua:"ONEPLUS A6000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6003/*"},{ua:"ONEPLUS A6003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6010/*"},{ua:"ONEPLUS A6010"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6013/*"},{ua:"ONEPLUS A6013"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955F/*"},{ua:"SM-G955F"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G960F/*"},{ua:"SM-G960F"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9600/*"},{ua:"SM-G9600"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960T/*"},{ua:"SM-G960T"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960N/*"},{ua:"SM-G960N"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960U/*"},{ua:"SM-G960U"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9608/*"},{ua:"SM-G9608"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960FD/*"},{ua:"SM-G960FD"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960W/*"},{ua:"SM-G960W"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G965F/*"},{ua:"SM-G965F"}],dpi:529,bw:2,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/EML-L29/*"},{ua:"EML-L29"}],dpi:428,bw:3.45,ac:500},{type:"android",rules:[{mdmh:"Nokia/*/Nokia 7.1/*"},{ua:"Nokia 7.1"}],dpi:[432,431.9],bw:3,ac:500},{type:"ios",rules:[{res:[1242,2688]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G570M/*"},{ua:"SM-G570M"}],dpi:320,bw:3.684,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G970F/*"},{ua:"SM-G970F"}],dpi:438,bw:2.281,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G973F/*"},{ua:"SM-G973F"}],dpi:550,bw:2.002,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G975F/*"},{ua:"SM-G975F"}],dpi:522,bw:2.054,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G977F/*"},{ua:"SM-G977F"}],dpi:505,bw:2.334,ac:500},{type:"ios",rules:[{res:[828,1792]}],dpi:326,bw:5,ac:500}]};function Y(e,t){if(this.dpdb=q,this.recalculateDeviceParams_(),e){this.onDeviceParamsUpdated=t;var r=new XMLHttpRequest,i=this;r.open("GET",e,!0),r.addEventListener("load",(function(){i.loading=!1,r.status>=200&&r.status<=299?(i.dpdb=JSON.parse(r.response),i.recalculateDeviceParams_()):console.error("Error loading online DPDB!")})),r.send()}}function Z(e){this.xdpi=e.xdpi,this.ydpi=e.ydpi,this.bevelMm=e.bevelMm}function J(e,t){this.set(e,t)}function K(e,t){this.kFilter=e,this.isDebug=t,this.currentAccelMeasurement=new J,this.currentGyroMeasurement=new J,this.previousGyroMeasurement=new J,s()?this.filterQ=new z(-1,0,0,1):this.filterQ=new z(1,0,0,1),this.previousFilterQ=new z,this.previousFilterQ.copy(this.filterQ),this.accelQ=new z,this.isOrientationInitialized=!1,this.estimatedGravity=new k,this.measuredGravity=new k,this.gyroIntegralQ=new z}function $(e,t){this.predictionTimeS=e,this.isDebug=t,this.previousQ=new z,this.previousTimestampS=null,this.deltaQ=new z,this.outQ=new z}function ee(e,t,r,i){this.yawOnly=r,this.accelerometer=new k,this.gyroscope=new k,this.filter=new K(e,i),this.posePredictor=new $(t,i),this.isFirefoxAndroid=h(),this.isIOS=s();var n=u();this.isDeviceMotionInRadians=!this.isIOS&&n&&n<66,this.isWithoutDeviceMotion=d()||c(),this.filterToWorldQ=new z,s()?this.filterToWorldQ.setFromAxisAngle(new k(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new k(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new z,this.worldToScreenQ=new z,this.originalPoseAdjustQ=new z,this.originalPoseAdjustQ.setFromAxisAngle(new k(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),f()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new z,this.orientationOut_=new Float32Array(4),this.start()}Y.prototype.getDeviceParams=function(){return this.deviceParams},Y.prototype.recalculateDeviceParams_=function(){var e=this.calcDeviceParams_();e?(this.deviceParams=e,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},Y.prototype.calcDeviceParams_=function(){var e=this.dpdb;if(!e)return console.error("DPDB not available."),null;if(1!=e.format)return console.error("DPDB has unexpected format version."),null;if(!e.devices||!e.devices.length)return console.error("DPDB does not have a devices section."),null;var t=navigator.userAgent||navigator.vendor||window.opera,r=p(),i=m();if(!e.devices)return console.error("DPDB has no devices section."),null;for(var n=0;n<e.devices.length;n++){var a=e.devices[n];if(a.rules)if("ios"==a.type||"android"==a.type){if(s()==("ios"==a.type)){for(var o=!1,l=0;l<a.rules.length;l++){var h=a.rules[l];if(this.ruleMatches_(h,t,r,i)){o=!0;break}}if(o)return new Z({xdpi:a.dpi[0]||a.dpi,ydpi:a.dpi[1]||a.dpi,bevelMm:a.bw})}}else console.warn("Device["+n+"] has invalid type.");else console.warn("Device["+n+"] has no rules section.")}return console.warn("No DPDB device match."),null},Y.prototype.ruleMatches_=function(e,t,r,i){if(!e.ua&&!e.res)return!1;if(e.ua&&"SM"===e.ua.substring(0,2)&&(e.ua=e.ua.substring(0,7)),e.ua&&t.indexOf(e.ua)<0)return!1;if(e.res){if(!e.res[0]||!e.res[1])return!1;var n=e.res[0],a=e.res[1];if(Math.min(r,i)!=Math.min(n,a)||Math.max(r,i)!=Math.max(n,a))return!1}return!0},J.prototype.set=function(e,t){this.sample=e,this.timestampS=t},J.prototype.copy=function(e){this.set(e.sample,e.timestampS)},K.prototype.addAccelMeasurement=function(e,t){this.currentAccelMeasurement.set(e,t)},K.prototype.addGyroMeasurement=function(e,t){this.currentGyroMeasurement.set(e,t);var r,i=t-this.previousGyroMeasurement.timestampS;r=i,isNaN(r)||r<=.001||r>1||this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},K.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var e=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,t=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,e);this.gyroIntegralQ.multiply(t),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(t);var r=new z;r.copy(this.filterQ),r.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(r),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var i,n=new z;n.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),n.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",O*((i=n).w>1?(console.warn("getQuaternionAngle: w > 1"),0):2*Math.acos(i.w)),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var a=new z;a.copy(this.filterQ),a.multiply(n),this.filterQ.slerp(a,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},K.prototype.getOrientation=function(){return this.filterQ},K.prototype.accelToQuaternion_=function(e){var t=new k;t.copy(e),t.normalize();var r=new z;return r.setFromUnitVectors(new k(0,0,-1),t),r.inverse(),r},K.prototype.gyroToQuaternionDelta_=function(e,t){var r=new z,i=new k;return i.copy(e),i.normalize(),r.setFromAxisAngle(i,e.length()*t),r},$.prototype.getPrediction=function(e,t,r){if(!this.previousTimestampS)return this.previousQ.copy(e),this.previousTimestampS=r,e;var i=new k;i.copy(t),i.normalize();var n=t.length();if(n<20*L)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(O*n).toFixed(1)),this.outQ.copy(e),this.previousQ.copy(e),this.outQ;var a=n*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(i,a),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(e),this.previousTimestampS=r,this.outQ},ee.prototype.getPosition=function(){return null},ee.prototype.getOrientation=function(){var e=void 0;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ)return this.deviceOrientationFixQ=this.deviceOrientationFixQ||(r=(new z).setFromAxisAngle(new k(0,0,-1),0),i=new z,-90===window.orientation?i.setFromAxisAngle(new k(0,1,0),Math.PI/-2):i.setFromAxisAngle(new k(0,1,0),Math.PI/2),r.multiply(i)),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||((t=new z).setFromAxisAngle(new k(1,0,0),-Math.PI/2),t),e=this._deviceOrientationQ,(n=new z).copy(e),n.multiply(this.deviceOrientationFilterToWorldQ),n.multiply(this.resetQ),n.multiply(this.worldToScreenQ),n.multiplyQuaternions(this.deviceOrientationFixQ,n),this.yawOnly&&(n.x=0,n.z=0,n.normalize()),this.orientationOut_[0]=n.x,this.orientationOut_[1]=n.y,this.orientationOut_[2]=n.z,this.orientationOut_[3]=n.w,this.orientationOut_;var t,r,i,n,a=this.filter.getOrientation();return e=this.posePredictor.getPrediction(a,this.gyroscope,this.previousTimestampS),(n=new z).copy(this.filterToWorldQ),n.multiply(this.resetQ),n.multiply(e),n.multiply(this.worldToScreenQ),this.yawOnly&&(n.x=0,n.z=0,n.normalize()),this.orientationOut_[0]=n.x,this.orientationOut_[1]=n.y,this.orientationOut_[2]=n.z,this.orientationOut_[3]=n.w,this.orientationOut_},ee.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),f()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},ee.prototype.onDeviceOrientation_=function(e){this._deviceOrientationQ=this._deviceOrientationQ||new z;var t=e.alpha,r=e.beta,i=e.gamma;t=(t||0)*Math.PI/180,r=(r||0)*Math.PI/180,i=(i||0)*Math.PI/180,this._deviceOrientationQ.setFromEulerYXZ(r,t,-i)},ee.prototype.onDeviceMotion_=function(e){this.updateDeviceMotion_(e)},ee.prototype.updateDeviceMotion_=function(e){var t=e.accelerationIncludingGravity,r=e.rotationRate,i=e.timeStamp/1e3,n=i-this.previousTimestampS;return n<0?(E("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=i)):n<=.001||n>1?(E("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=i)):(this.accelerometer.set(-t.x,-t.y,-t.z),r&&(A()?this.gyroscope.set(-r.beta,r.alpha,r.gamma):this.gyroscope.set(r.alpha,r.beta,r.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addGyroMeasurement(this.gyroscope,i)),this.filter.addAccelMeasurement(this.accelerometer,i),void(this.previousTimestampS=i))},ee.prototype.onOrientationChange_=function(e){this.setScreenTransform_()},ee.prototype.onMessage_=function(e){var t=e.data;t&&t.type&&"devicemotion"===t.type.toLowerCase()&&this.updateDeviceMotion_(t.deviceMotionEvent)},ee.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new k(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new k(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},ee.prototype.start=function(){var e,t,r;this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),this.onDeviceOrientationCallback_=this.onDeviceOrientation_.bind(this),s()&&(e=window.self!==window.top,t=_(document.referrer),r=_(window.location.href),e&&t!==r)&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",this.onDeviceOrientationCallback_):window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},ee.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("deviceorientation",this.onDeviceOrientationCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)};var te=new k(1,0,0),re=new k(0,0,1),ie=new z;ie.setFromAxisAngle(te,-Math.PI/2),ie.multiply((new z).setFromAxisAngle(re,Math.PI/2));var ne=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t,this.sensor=null,this.fusionSensor=null,this._out=new Float32Array(4),this.api=null,this.errors=[],this._sensorQ=new z,this._outQ=new z,this._onSensorRead=this._onSensorRead.bind(this),this._onSensorError=this._onSensorError.bind(this),this.init()}return i(e,[{key:"init",value:function(){var e=null;try{(e=new RelativeOrientationSensor({frequency:60,referenceFrame:"screen"})).addEventListener("error",this._onSensorError)}catch(e){this.errors.push(e),"SecurityError"===e.name?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):"ReferenceError"===e.name?this.useDeviceMotion():console.error(e)}e&&(this.api="sensor",this.sensor=e,this.sensor.addEventListener("reading",this._onSensorRead),this.sensor.start())}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new ee(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG),this.sensor&&(this.sensor.removeEventListener("reading",this._onSensorRead),this.sensor.removeEventListener("error",this._onSensorError),this.sensor=null)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this._out[0]=this._out[1]=this._out[2]=0,this._out[3]=1,this._out;var e=this.sensor.quaternion;this._sensorQ.set(e[0],e[1],e[2],e[3]);var t=this._outQ;return t.copy(ie),t.multiply(this._sensorQ),this.config.YAW_ONLY&&(t.x=t.z=0,t.normalize()),this._out[0]=t.x,this._out[1]=t.y,this._out[2]=t.z,this._out[3]=t.w,this._out}},{key:"_onSensorError",value:function(e){this.errors.push(e.error),"NotAllowedError"===e.error.name?console.error("Permission to access sensor was denied"):"NotReadableError"===e.error.name?console.error("Sensor could not be read"):console.error(e.error),this.useDeviceMotion()}},{key:"_onSensorRead",value:function(){}}]),e}();function ae(){this.loadIcon_();var e=document.createElement("div");(a=e.style).position="fixed",a.top=0,a.right=0,a.bottom=0,a.left=0,a.backgroundColor="gray",a.fontFamily="sans-serif",a.zIndex=1e6;var t=document.createElement("img");t.src=this.icon,(a=t.style).marginLeft="25%",a.marginTop="25%",a.width="50%",e.appendChild(t);var r=document.createElement("div");(a=r.style).textAlign="center",a.fontSize="16px",a.lineHeight="24px",a.margin="24px 25%",a.width="50%",r.innerHTML="Place your phone into your Cardboard viewer.",e.appendChild(r);var i=document.createElement("div");(a=i.style).backgroundColor="#CFD8DC",a.position="fixed",a.bottom=0,a.width="100%",a.height="48px",a.padding="14px 24px",a.boxSizing="border-box",a.color="#656A6B",e.appendChild(i);var n=document.createElement("div");n.style.float="left",n.innerHTML="No Cardboard viewer?";var a,s=document.createElement("a");s.href="https://www.google.com/get/cardboard/get-cardboard/",s.innerHTML="get one",s.target="_blank",(a=s.style).float="right",a.fontWeight=600,a.textTransform="uppercase",a.borderLeft="1px solid gray",a.paddingLeft="24px",a.textDecoration="none",a.color="#656A6B",i.appendChild(n),i.appendChild(s),this.overlay=e,this.text=r,this.hide()}function se(e){try{this.selectedKey=localStorage.getItem("WEBVR_CARDBOARD_VIEWER")}catch(e){console.error("Failed to load viewer profile: %s",e)}this.selectedKey||(this.selectedKey=e||"CardboardV1"),this.dialog=this.createDialog_(H.Viewers),this.root=null,this.onChangeCallbacks_=[]}ae.prototype.show=function(e){e||this.overlay.parentElement?e&&(this.overlay.parentElement&&this.overlay.parentElement!=e&&this.overlay.parentElement.removeChild(this.overlay),e.appendChild(this.overlay)):document.body.appendChild(this.overlay),this.overlay.style.display="block";var t=this.overlay.querySelector("img").style;f()?(t.width="20%",t.marginLeft="40%",t.marginTop="3%"):(t.width="50%",t.marginLeft="25%",t.marginTop="25%")},ae.prototype.hide=function(){this.overlay.style.display="none"},ae.prototype.showTemporarily=function(e,t){this.show(t),this.timer=setTimeout(this.hide.bind(this),e)},ae.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},ae.prototype.update=function(){this.disableShowTemporarily(),!f()&&w()?this.show():this.hide()},ae.prototype.loadIcon_=function(){this.icon="data:image/svg+xml,"+encodeURIComponent("<svg width='198' height='240' viewBox='0 0 198 240' xmlns='http://www.w3.org/2000/svg'><g fill='none' fill-rule='evenodd'><path d='M149.625 109.527l6.737 3.891v.886c0 .177.013.36.038.549.01.081.02.162.027.242.14 1.415.974 2.998 2.105 3.999l5.72 5.062.081-.09s4.382-2.53 5.235-3.024l25.97 14.993v54.001c0 .771-.386 1.217-.948 1.217-.233 0-.495-.076-.772-.236l-23.967-13.838-.014.024-27.322 15.775-.85-1.323c-4.731-1.529-9.748-2.74-14.951-3.61a.27.27 0 0 0-.007.024l-5.067 16.961-7.891 4.556-.037-.063v27.59c0 .772-.386 1.217-.948 1.217-.232 0-.495-.076-.772-.236l-42.473-24.522c-.95-.549-1.72-1.877-1.72-2.967v-1.035l-.021.047a5.111 5.111 0 0 0-1.816-.399 5.682 5.682 0 0 0-.546.001 13.724 13.724 0 0 1-1.918-.041c-1.655-.153-3.2-.6-4.404-1.296l-46.576-26.89.005.012-10.278-18.75c-1.001-1.827-.241-4.216 1.698-5.336l56.011-32.345a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.659 3.227 1.853l.005-.003.227.413-.006.004a9.63 9.63 0 0 0 1.477 2.018l.277.27c1.914 1.85 4.468 2.801 7.113 2.801 1.949 0 3.948-.517 5.775-1.572.013 0 7.319-4.219 7.319-4.219a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.658 3.226 1.853l3.25 5.928.022-.018 6.785 3.917-.105-.182 46.881-26.965m0-1.635c-.282 0-.563.073-.815.218l-46.169 26.556-5.41-3.124-3.005-5.481c-.913-1.667-2.699-2.702-4.66-2.703-1.011 0-2.02.274-2.917.792a3825 3825 0 0 1-7.275 4.195l-.044.024a9.937 9.937 0 0 1-4.957 1.353c-2.292 0-4.414-.832-5.976-2.342l-.252-.245a7.992 7.992 0 0 1-1.139-1.534 1.379 1.379 0 0 0-.06-.122l-.227-.414a1.718 1.718 0 0 0-.095-.154c-.938-1.574-2.673-2.545-4.571-2.545-1.011 0-2.02.274-2.917.792L3.125 155.502c-2.699 1.559-3.738 4.94-2.314 7.538l10.278 18.75c.177.323.448.563.761.704l46.426 26.804c1.403.81 3.157 1.332 5.072 1.508a15.661 15.661 0 0 0 2.146.046 4.766 4.766 0 0 1 .396 0c.096.004.19.011.283.022.109 1.593 1.159 3.323 2.529 4.114l42.472 24.522c.524.302 1.058.455 1.59.455 1.497 0 2.583-1.2 2.583-2.852v-26.562l7.111-4.105a1.64 1.64 0 0 0 .749-.948l4.658-15.593c4.414.797 8.692 1.848 12.742 3.128l.533.829a1.634 1.634 0 0 0 2.193.531l26.532-15.317L193 192.433c.523.302 1.058.455 1.59.455 1.497 0 2.583-1.199 2.583-2.852v-54.001c0-.584-.312-1.124-.818-1.416l-25.97-14.993a1.633 1.633 0 0 0-1.636.001c-.606.351-2.993 1.73-4.325 2.498l-4.809-4.255c-.819-.725-1.461-1.933-1.561-2.936a7.776 7.776 0 0 0-.033-.294 2.487 2.487 0 0 1-.023-.336v-.886c0-.584-.312-1.123-.817-1.416l-6.739-3.891a1.633 1.633 0 0 0-.817-.219' fill='#455A64'/><path d='M96.027 132.636l46.576 26.891c1.204.695 1.979 1.587 2.242 2.541l-.01.007-81.374 46.982h-.001c-1.654-.152-3.199-.6-4.403-1.295l-46.576-26.891 83.546-48.235' fill='#FAFAFA'/><path d='M63.461 209.174c-.008 0-.015 0-.022-.002-1.693-.156-3.228-.609-4.441-1.309l-46.576-26.89a.118.118 0 0 1 0-.203l83.546-48.235a.117.117 0 0 1 .117 0l46.576 26.891c1.227.708 2.021 1.612 2.296 2.611a.116.116 0 0 1-.042.124l-.021.016-81.375 46.981a.11.11 0 0 1-.058.016zm-50.747-28.303l46.401 26.79c1.178.68 2.671 1.121 4.32 1.276l81.272-46.922c-.279-.907-1.025-1.73-2.163-2.387l-46.517-26.857-83.313 48.1z' fill='#607D8B'/><path d='M148.327 165.471a5.85 5.85 0 0 1-.546.001c-1.894-.083-3.302-1.038-3.145-2.132a2.693 2.693 0 0 0-.072-1.105l-81.103 46.822c.628.058 1.272.073 1.918.042.182-.009.364-.009.546-.001 1.894.083 3.302 1.038 3.145 2.132l79.257-45.759' fill='#FFF'/><path d='M69.07 211.347a.118.118 0 0 1-.115-.134c.045-.317-.057-.637-.297-.925-.505-.61-1.555-1.022-2.738-1.074a5.966 5.966 0 0 0-.535.001 14.03 14.03 0 0 1-1.935-.041.117.117 0 0 1-.103-.092.116.116 0 0 1 .055-.126l81.104-46.822a.117.117 0 0 1 .171.07c.104.381.129.768.074 1.153-.045.316.057.637.296.925.506.61 1.555 1.021 2.739 1.073.178.008.357.008.535-.001a.117.117 0 0 1 .064.218l-79.256 45.759a.114.114 0 0 1-.059.016zm-3.405-2.372c.089 0 .177.002.265.006 1.266.056 2.353.488 2.908 1.158.227.274.35.575.36.882l78.685-45.429c-.036 0-.072-.001-.107-.003-1.267-.056-2.354-.489-2.909-1.158-.282-.34-.402-.724-.347-1.107a2.604 2.604 0 0 0-.032-.91L63.846 208.97a13.91 13.91 0 0 0 1.528.012c.097-.005.194-.007.291-.007z' fill='#607D8B'/><path d='M2.208 162.134c-1.001-1.827-.241-4.217 1.698-5.337l56.011-32.344c1.939-1.12 4.324-.546 5.326 1.281l.232.41a9.344 9.344 0 0 0 1.47 2.021l.278.27c3.325 3.214 8.583 3.716 12.888 1.23l7.319-4.22c1.94-1.119 4.324-.546 5.325 1.282l3.25 5.928-83.519 48.229-10.278-18.75z' fill='#FAFAFA'/><path d='M12.486 181.001a.112.112 0 0 1-.031-.005.114.114 0 0 1-.071-.056L2.106 162.19c-1.031-1.88-.249-4.345 1.742-5.494l56.01-32.344a4.328 4.328 0 0 1 2.158-.588c1.415 0 2.65.702 3.311 1.882.01.008.018.017.024.028l.227.414a.122.122 0 0 1 .013.038 9.508 9.508 0 0 0 1.439 1.959l.275.266c1.846 1.786 4.344 2.769 7.031 2.769 1.977 0 3.954-.538 5.717-1.557a.148.148 0 0 1 .035-.013l7.284-4.206a4.321 4.321 0 0 1 2.157-.588c1.427 0 2.672.716 3.329 1.914l3.249 5.929a.116.116 0 0 1-.044.157l-83.518 48.229a.116.116 0 0 1-.059.016zm49.53-57.004c-.704 0-1.41.193-2.041.557l-56.01 32.345c-1.882 1.086-2.624 3.409-1.655 5.179l10.221 18.645 83.317-48.112-3.195-5.829c-.615-1.122-1.783-1.792-3.124-1.792a4.08 4.08 0 0 0-2.04.557l-7.317 4.225a.148.148 0 0 1-.035.013 11.7 11.7 0 0 1-5.801 1.569c-2.748 0-5.303-1.007-7.194-2.835l-.278-.27a9.716 9.716 0 0 1-1.497-2.046.096.096 0 0 1-.013-.037l-.191-.347a.11.11 0 0 1-.023-.029c-.615-1.123-1.783-1.793-3.124-1.793z' fill='#607D8B'/><path d='M42.434 155.808c-2.51-.001-4.697-1.258-5.852-3.365-1.811-3.304-.438-7.634 3.059-9.654l12.291-7.098a7.599 7.599 0 0 1 3.789-1.033c2.51 0 4.697 1.258 5.852 3.365 1.811 3.304.439 7.634-3.059 9.654l-12.291 7.098a7.606 7.606 0 0 1-3.789 1.033zm13.287-20.683a7.128 7.128 0 0 0-3.555.971l-12.291 7.098c-3.279 1.893-4.573 5.942-2.883 9.024 1.071 1.955 3.106 3.122 5.442 3.122a7.13 7.13 0 0 0 3.556-.97l12.291-7.098c3.279-1.893 4.572-5.942 2.883-9.024-1.072-1.955-3.106-3.123-5.443-3.123z' fill='#607D8B'/><path d='M149.588 109.407l6.737 3.89v.887c0 .176.013.36.037.549.011.081.02.161.028.242.14 1.415.973 2.998 2.105 3.999l7.396 6.545c.177.156.358.295.541.415 1.579 1.04 2.95.466 3.062-1.282.049-.784.057-1.595.023-2.429l-.003-.16v-1.151l25.987 15.003v54c0 1.09-.77 1.53-1.72.982l-42.473-24.523c-.95-.548-1.72-1.877-1.72-2.966v-34.033' fill='#FAFAFA'/><path d='M194.553 191.25c-.257 0-.54-.085-.831-.253l-42.472-24.521c-.981-.567-1.779-1.943-1.779-3.068v-34.033h.234v34.033c0 1.051.745 2.336 1.661 2.866l42.473 24.521c.424.245.816.288 1.103.122.285-.164.442-.52.442-1.002v-53.933l-25.753-14.868.003 1.106c.034.832.026 1.654-.024 2.439-.054.844-.396 1.464-.963 1.746-.619.309-1.45.173-2.28-.373a5.023 5.023 0 0 1-.553-.426l-7.397-6.544c-1.158-1.026-1.999-2.625-2.143-4.076a9.624 9.624 0 0 0-.027-.238 4.241 4.241 0 0 1-.038-.564v-.82l-6.68-3.856.117-.202 6.738 3.89.058.034v.954c0 .171.012.351.036.533.011.083.021.165.029.246.138 1.395.948 2.935 2.065 3.923l7.397 6.545c.173.153.35.289.527.406.758.499 1.504.63 2.047.359.49-.243.786-.795.834-1.551.05-.778.057-1.591.024-2.417l-.004-.163v-1.355l.175.1 25.987 15.004.059.033v54.068c0 .569-.198.996-.559 1.204a1.002 1.002 0 0 1-.506.131' fill='#607D8B'/><path d='M145.685 163.161l24.115 13.922-25.978 14.998-1.462-.307c-6.534-2.17-13.628-3.728-21.019-4.616-4.365-.524-8.663 1.096-9.598 3.62a2.746 2.746 0 0 0-.011 1.928c1.538 4.267 4.236 8.363 7.995 12.135l.532.845-25.977 14.997-24.115-13.922 75.518-43.6' fill='#FFF'/><path d='M94.282 220.818l-.059-.033-24.29-14.024.175-.101 75.577-43.634.058.033 24.29 14.024-26.191 15.122-.045-.01-1.461-.307c-6.549-2.174-13.613-3.725-21.009-4.614a13.744 13.744 0 0 0-1.638-.097c-3.758 0-7.054 1.531-7.837 3.642a2.62 2.62 0 0 0-.01 1.848c1.535 4.258 4.216 8.326 7.968 12.091l.016.021.526.835.006.01.064.102-.105.061-25.977 14.998-.058.033zm-23.881-14.057l23.881 13.788 24.802-14.32c.546-.315.846-.489 1.017-.575l-.466-.74c-3.771-3.787-6.467-7.881-8.013-12.168a2.851 2.851 0 0 1 .011-2.008c.815-2.199 4.203-3.795 8.056-3.795.557 0 1.117.033 1.666.099 7.412.891 14.491 2.445 21.041 4.621.836.175 1.215.254 1.39.304l25.78-14.884-23.881-13.788-75.284 43.466z' fill='#607D8B'/><path d='M167.23 125.979v50.871l-27.321 15.773-6.461-14.167c-.91-1.996-3.428-1.738-5.624.574a10.238 10.238 0 0 0-2.33 4.018l-6.46 21.628-27.322 15.774v-50.871l75.518-43.6' fill='#FFF'/><path d='M91.712 220.567a.127.127 0 0 1-.059-.016.118.118 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.519-43.6a.117.117 0 0 1 .175.101v50.871c0 .041-.023.08-.059.1l-27.321 15.775a.118.118 0 0 1-.094.01.12.12 0 0 1-.071-.063l-6.46-14.168c-.375-.822-1.062-1.275-1.934-1.275-1.089 0-2.364.686-3.5 1.881a10.206 10.206 0 0 0-2.302 3.972l-6.46 21.627a.118.118 0 0 1-.054.068L91.77 220.551a.12.12 0 0 1-.058.016zm.117-50.92v50.601l27.106-15.65 6.447-21.583a10.286 10.286 0 0 1 2.357-4.065c1.18-1.242 2.517-1.954 3.669-1.954.969 0 1.731.501 2.146 1.411l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M168.543 126.213v50.87l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.624.574a10.248 10.248 0 0 0-2.33 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6' fill='#FFF'/><path d='M93.025 220.8a.123.123 0 0 1-.059-.015.12.12 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.518-43.6a.112.112 0 0 1 .117 0c.036.02.059.059.059.1v50.871a.116.116 0 0 1-.059.101l-27.321 15.774a.111.111 0 0 1-.094.01.115.115 0 0 1-.071-.062l-6.46-14.168c-.375-.823-1.062-1.275-1.935-1.275-1.088 0-2.363.685-3.499 1.881a10.19 10.19 0 0 0-2.302 3.971l-6.461 21.628a.108.108 0 0 1-.053.067l-27.322 15.775a.12.12 0 0 1-.058.015zm.117-50.919v50.6l27.106-15.649 6.447-21.584a10.293 10.293 0 0 1 2.357-4.065c1.179-1.241 2.516-1.954 3.668-1.954.969 0 1.732.502 2.147 1.412l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M169.8 177.083l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.625.574a10.246 10.246 0 0 0-2.329 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6v50.87z' fill='#FAFAFA'/><path d='M94.282 220.917a.234.234 0 0 1-.234-.233v-50.871c0-.083.045-.161.117-.202l75.518-43.601a.234.234 0 1 1 .35.202v50.871a.233.233 0 0 1-.116.202l-27.322 15.775a.232.232 0 0 1-.329-.106l-6.461-14.168c-.36-.789-.992-1.206-1.828-1.206-1.056 0-2.301.672-3.415 1.844a10.099 10.099 0 0 0-2.275 3.924l-6.46 21.628a.235.235 0 0 1-.107.136l-27.322 15.774a.23.23 0 0 1-.116.031zm.233-50.969v50.331l26.891-15.525 6.434-21.539a10.41 10.41 0 0 1 2.384-4.112c1.201-1.265 2.569-1.991 3.753-1.991 1.018 0 1.818.526 2.253 1.48l6.354 13.934 26.982-15.578v-50.331l-75.051 43.331z' fill='#607D8B'/><path d='M109.894 199.943c-1.774 0-3.241-.725-4.244-2.12a.224.224 0 0 1 .023-.294.233.233 0 0 1 .301-.023c.78.547 1.705.827 2.75.827 1.323 0 2.754-.439 4.256-1.306 5.311-3.067 9.631-10.518 9.631-16.611 0-1.927-.442-3.56-1.278-4.724a.232.232 0 0 1 .323-.327c1.671 1.172 2.591 3.381 2.591 6.219 0 6.242-4.426 13.863-9.865 17.003-1.574.908-3.084 1.356-4.488 1.356zm-2.969-1.542c.813.651 1.82.877 2.968.877h.001c1.321 0 2.753-.327 4.254-1.194 5.311-3.067 9.632-10.463 9.632-16.556 0-1.979-.463-3.599-1.326-4.761.411 1.035.625 2.275.625 3.635 0 6.243-4.426 13.883-9.865 17.023-1.574.909-3.084 1.317-4.49 1.317-.641 0-1.243-.149-1.799-.341z' fill='#607D8B'/><path d='M113.097 197.23c5.384-3.108 9.748-10.636 9.748-16.814 0-2.051-.483-3.692-1.323-4.86-1.784-1.252-4.374-1.194-7.257.47-5.384 3.108-9.748 10.636-9.748 16.814 0 2.051.483 3.692 1.323 4.86 1.784 1.252 4.374 1.194 7.257-.47' fill='#FAFAFA'/><path d='M108.724 198.614c-1.142 0-2.158-.213-3.019-.817-.021-.014-.04.014-.055-.007-.894-1.244-1.367-2.948-1.367-4.973 0-6.242 4.426-13.864 9.865-17.005 1.574-.908 3.084-1.363 4.49-1.363 1.142 0 2.158.309 3.018.913a.23.23 0 0 1 .056.056c.894 1.244 1.367 2.972 1.367 4.997 0 6.243-4.426 13.783-9.865 16.923-1.574.909-3.084 1.276-4.49 1.276zm-2.718-1.109c.774.532 1.688.776 2.718.776 1.323 0 2.754-.413 4.256-1.28 5.311-3.066 9.631-10.505 9.631-16.598 0-1.909-.434-3.523-1.255-4.685-.774-.533-1.688-.799-2.718-.799-1.323 0-2.755.441-4.256 1.308-5.311 3.066-9.631 10.506-9.631 16.599 0 1.909.434 3.517 1.255 4.679z' fill='#607D8B'/><path d='M149.318 114.262l-9.984 8.878 15.893 11.031 5.589-6.112-11.498-13.797' fill='#FAFAFA'/><path d='M169.676 120.84l-9.748 5.627c-3.642 2.103-9.528 2.113-13.147.024-3.62-2.089-3.601-5.488.041-7.591l9.495-5.608-6.729-3.885-81.836 47.071 45.923 26.514 3.081-1.779c.631-.365.869-.898.618-1.39-2.357-4.632-2.593-9.546-.683-14.262 5.638-13.92 24.509-24.815 48.618-28.07 8.169-1.103 16.68-.967 24.704.394.852.145 1.776.008 2.407-.357l3.081-1.778-25.825-14.91' fill='#FAFAFA'/><path d='M113.675 183.459a.47.47 0 0 1-.233-.062l-45.924-26.515a.468.468 0 0 1 .001-.809l81.836-47.071a.467.467 0 0 1 .466 0l6.729 3.885a.467.467 0 0 1-.467.809l-6.496-3.75-80.9 46.533 44.988 25.973 2.848-1.644c.192-.111.62-.409.435-.773-2.416-4.748-2.658-9.814-.7-14.65 2.806-6.927 8.885-13.242 17.582-18.263 8.657-4.998 19.518-8.489 31.407-10.094 8.198-1.107 16.79-.97 24.844.397.739.125 1.561.007 2.095-.301l2.381-1.374-25.125-14.506a.467.467 0 0 1 .467-.809l25.825 14.91a.467.467 0 0 1 0 .809l-3.081 1.779c-.721.417-1.763.575-2.718.413-7.963-1.351-16.457-1.486-24.563-.392-11.77 1.589-22.512 5.039-31.065 9.977-8.514 4.916-14.456 11.073-17.183 17.805-1.854 4.578-1.623 9.376.666 13.875.37.725.055 1.513-.8 2.006l-3.081 1.78a.476.476 0 0 1-.234.062' fill='#455A64'/><path d='M153.316 128.279c-2.413 0-4.821-.528-6.652-1.586-1.818-1.049-2.82-2.461-2.82-3.975 0-1.527 1.016-2.955 2.861-4.02l9.493-5.607a.233.233 0 1 1 .238.402l-9.496 5.609c-1.696.979-2.628 2.263-2.628 3.616 0 1.34.918 2.608 2.585 3.571 3.549 2.049 9.343 2.038 12.914-.024l9.748-5.628a.234.234 0 0 1 .234.405l-9.748 5.628c-1.858 1.072-4.296 1.609-6.729 1.609' fill='#607D8B'/><path d='M113.675 182.992l-45.913-26.508M113.675 183.342a.346.346 0 0 1-.175-.047l-45.913-26.508a.35.35 0 1 1 .35-.607l45.913 26.508a.35.35 0 0 1-.175.654' fill='#455A64'/><path d='M67.762 156.484v54.001c0 1.09.77 2.418 1.72 2.967l42.473 24.521c.95.549 1.72.11 1.72-.98v-54.001' fill='#FAFAFA'/><path d='M112.727 238.561c-.297 0-.62-.095-.947-.285l-42.473-24.521c-1.063-.613-1.895-2.05-1.895-3.27v-54.001a.35.35 0 1 1 .701 0v54.001c0 .96.707 2.18 1.544 2.663l42.473 24.522c.344.198.661.243.87.122.206-.119.325-.411.325-.799v-54.001a.35.35 0 1 1 .7 0v54.001c0 .655-.239 1.154-.675 1.406a1.235 1.235 0 0 1-.623.162' fill='#455A64'/><path d='M112.86 147.512h-.001c-2.318 0-4.499-.522-6.142-1.471-1.705-.984-2.643-2.315-2.643-3.749 0-1.445.952-2.791 2.68-3.788l12.041-6.953c1.668-.962 3.874-1.493 6.212-1.493 2.318 0 4.499.523 6.143 1.472 1.704.984 2.643 2.315 2.643 3.748 0 1.446-.952 2.791-2.68 3.789l-12.042 6.952c-1.668.963-3.874 1.493-6.211 1.493zm12.147-16.753c-2.217 0-4.298.497-5.861 1.399l-12.042 6.952c-1.502.868-2.33 1.998-2.33 3.182 0 1.173.815 2.289 2.293 3.142 1.538.889 3.596 1.378 5.792 1.378h.001c2.216 0 4.298-.497 5.861-1.399l12.041-6.953c1.502-.867 2.33-1.997 2.33-3.182 0-1.172-.814-2.288-2.292-3.142-1.539-.888-3.596-1.377-5.793-1.377z' fill='#607D8B'/><path d='M165.63 123.219l-5.734 3.311c-3.167 1.828-8.286 1.837-11.433.02-3.147-1.817-3.131-4.772.036-6.601l5.734-3.31 11.397 6.58' fill='#FAFAFA'/><path d='M154.233 117.448l9.995 5.771-4.682 2.704c-1.434.827-3.352 1.283-5.399 1.283-2.029 0-3.923-.449-5.333-1.263-1.29-.744-2-1.694-2-2.674 0-.991.723-1.955 2.036-2.713l5.383-3.108m0-.809l-5.734 3.31c-3.167 1.829-3.183 4.784-.036 6.601 1.568.905 3.623 1.357 5.684 1.357 2.077 0 4.159-.46 5.749-1.377l5.734-3.311-11.397-6.58M145.445 179.667c-1.773 0-3.241-.85-4.243-2.245-.067-.092-.057-.275.023-.356.08-.081.207-.12.3-.055.781.548 1.706.812 2.751.811 1.322 0 2.754-.446 4.256-1.313 5.31-3.066 9.631-10.522 9.631-16.615 0-1.927-.442-3.562-1.279-4.726a.235.235 0 0 1 .024-.301.232.232 0 0 1 .3-.027c1.67 1.172 2.59 3.38 2.59 6.219 0 6.242-4.425 13.987-9.865 17.127-1.573.908-3.083 1.481-4.488 1.481zM142.476 178c.814.651 1.82 1.002 2.969 1.002 1.322 0 2.753-.452 4.255-1.32 5.31-3.065 9.631-10.523 9.631-16.617 0-1.98-.463-3.63-1.325-4.793.411 1.035.624 2.26.624 3.62 0 6.242-4.425 13.875-9.865 17.015-1.573.909-3.084 1.376-4.489 1.376a5.49 5.49 0 0 1-1.8-.283z' fill='#607D8B'/><path d='M148.648 176.704c5.384-3.108 9.748-10.636 9.748-16.813 0-2.052-.483-3.693-1.322-4.861-1.785-1.252-4.375-1.194-7.258.471-5.383 3.108-9.748 10.636-9.748 16.813 0 2.051.484 3.692 1.323 4.86 1.785 1.253 4.374 1.195 7.257-.47' fill='#FAFAFA'/><path d='M144.276 178.276c-1.143 0-2.158-.307-3.019-.911a.217.217 0 0 1-.055-.054c-.895-1.244-1.367-2.972-1.367-4.997 0-6.241 4.425-13.875 9.865-17.016 1.573-.908 3.084-1.369 4.489-1.369 1.143 0 2.158.307 3.019.91a.24.24 0 0 1 .055.055c.894 1.244 1.367 2.971 1.367 4.997 0 6.241-4.425 13.875-9.865 17.016-1.573.908-3.084 1.369-4.489 1.369zm-2.718-1.172c.773.533 1.687.901 2.718.901 1.322 0 2.754-.538 4.256-1.405 5.31-3.066 9.631-10.567 9.631-16.661 0-1.908-.434-3.554-1.256-4.716-.774-.532-1.688-.814-2.718-.814-1.322 0-2.754.433-4.256 1.3-5.31 3.066-9.631 10.564-9.631 16.657 0 1.91.434 3.576 1.256 4.738z' fill='#607D8B'/><path d='M150.72 172.361l-.363-.295a24.105 24.105 0 0 0 2.148-3.128 24.05 24.05 0 0 0 1.977-4.375l.443.149a24.54 24.54 0 0 1-2.015 4.46 24.61 24.61 0 0 1-2.19 3.189M115.917 191.514l-.363-.294a24.174 24.174 0 0 0 2.148-3.128 24.038 24.038 0 0 0 1.976-4.375l.443.148a24.48 24.48 0 0 1-2.015 4.461 24.662 24.662 0 0 1-2.189 3.188M114 237.476V182.584 237.476' fill='#607D8B'/><g><path d='M81.822 37.474c.017-.135-.075-.28-.267-.392-.327-.188-.826-.21-1.109-.045l-6.012 3.471c-.131.076-.194.178-.191.285.002.132.002.461.002.578v.043l-.007.128-6.591 3.779c-.001 0-2.077 1.046-2.787 5.192 0 0-.912 6.961-.898 19.745.015 12.57.606 17.07 1.167 21.351.22 1.684 3.001 2.125 3.001 2.125.331.04.698-.027 1.08-.248l75.273-43.551c1.808-1.069 2.667-3.719 3.056-6.284 1.213-7.99 1.675-32.978-.275-39.878-.196-.693-.51-1.083-.868-1.282l-2.086-.79c-.727.028-1.416.467-1.534.535L82.032 37.072l-.21.402' fill='#FFF'/><path d='M144.311 1.701l2.085.79c.358.199.672.589.868 1.282 1.949 6.9 1.487 31.887.275 39.878-.39 2.565-1.249 5.215-3.056 6.284L69.21 93.486a1.78 1.78 0 0 1-.896.258l-.183-.011c0 .001-2.782-.44-3.003-2.124-.56-4.282-1.151-8.781-1.165-21.351-.015-12.784.897-19.745.897-19.745.71-4.146 2.787-5.192 2.787-5.192l6.591-3.779.007-.128v-.043c0-.117 0-.446-.002-.578-.003-.107.059-.21.191-.285l6.012-3.472a.98.98 0 0 1 .481-.11c.218 0 .449.053.627.156.193.112.285.258.268.392l.211-.402 60.744-34.836c.117-.068.806-.507 1.534-.535m0-.997l-.039.001c-.618.023-1.283.244-1.974.656l-.021.012-60.519 34.706a2.358 2.358 0 0 0-.831-.15c-.365 0-.704.084-.98.244l-6.012 3.471c-.442.255-.699.69-.689 1.166l.001.15-6.08 3.487c-.373.199-2.542 1.531-3.29 5.898l-.006.039c-.009.07-.92 7.173-.906 19.875.014 12.62.603 17.116 1.172 21.465l.002.015c.308 2.355 3.475 2.923 3.836 2.98l.034.004c.101.013.204.019.305.019a2.77 2.77 0 0 0 1.396-.392l75.273-43.552c1.811-1.071 2.999-3.423 3.542-6.997 1.186-7.814 1.734-33.096-.301-40.299-.253-.893-.704-1.527-1.343-1.882l-.132-.062-2.085-.789a.973.973 0 0 0-.353-.065' fill='#455A64'/><path d='M128.267 11.565l1.495.434-56.339 32.326' fill='#FFF'/><path d='M74.202 90.545a.5.5 0 0 1-.25-.931l18.437-10.645a.499.499 0 1 1 .499.864L74.451 90.478l-.249.067M75.764 42.654l-.108-.062.046-.171 5.135-2.964.17.045-.045.171-5.135 2.964-.063.017M70.52 90.375V46.421l.063-.036L137.84 7.554v43.954l-.062.036L70.52 90.375zm.25-43.811v43.38l66.821-38.579V7.985L70.77 46.564z' fill='#607D8B'/><path d='M86.986 83.182c-.23.149-.612.384-.849.523l-11.505 6.701c-.237.139-.206.252.068.252h.565c.275 0 .693-.113.93-.252L87.7 83.705c.237-.139.428-.253.425-.256a11.29 11.29 0 0 1-.006-.503c0-.274-.188-.377-.418-.227l-.715.463' fill='#607D8B'/><path d='M75.266 90.782H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.236-.138.615-.371.844-.519l.715-.464a.488.488 0 0 1 .266-.089c.172 0 .345.13.345.421 0 .214.001.363.003.437l.006.004-.004.069c-.003.075-.003.075-.486.356l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.108.866-.234l11.505-6.702c.168-.098.294-.173.361-.214-.004-.084-.004-.218-.004-.437l-.095-.171-.131.049-.714.463c-.232.15-.616.386-.854.525l-11.505 6.702-.029.018z' fill='#607D8B'/><path d='M75.266 89.871H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.258-.151.694-.268.993-.268h.565c.2 0 .316.056.346.166.03.11-.043.217-.215.317l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.107.866-.234l11.505-6.702.03-.018-.035-.001h-.565c-.252 0-.649.108-.867.234l-11.505 6.702-.029.018zM74.37 90.801v-1.247 1.247' fill='#607D8B'/><path d='M68.13 93.901c-.751-.093-1.314-.737-1.439-1.376-.831-4.238-1.151-8.782-1.165-21.352-.015-12.784.897-19.745.897-19.745.711-4.146 2.787-5.192 2.787-5.192l74.859-43.219c.223-.129 2.487-1.584 3.195.923 1.95 6.9 1.488 31.887.275 39.878-.389 2.565-1.248 5.215-3.056 6.283L69.21 93.653c-.382.221-.749.288-1.08.248 0 0-2.781-.441-3.001-2.125-.561-4.281-1.152-8.781-1.167-21.351-.014-12.784.898-19.745.898-19.745.71-4.146 2.787-5.191 2.787-5.191l6.598-3.81.871-.119 6.599-3.83.046-.461L68.13 93.901' fill='#FAFAFA'/><path d='M68.317 94.161l-.215-.013h-.001l-.244-.047c-.719-.156-2.772-.736-2.976-2.292-.568-4.34-1.154-8.813-1.168-21.384-.014-12.654.891-19.707.9-19.777.725-4.231 2.832-5.338 2.922-5.382l6.628-3.827.87-.119 6.446-3.742.034-.334a.248.248 0 0 1 .273-.223.248.248 0 0 1 .223.272l-.059.589-6.752 3.919-.87.118-6.556 3.785c-.031.016-1.99 1.068-2.666 5.018-.007.06-.908 7.086-.894 19.702.014 12.539.597 16.996 1.161 21.305.091.691.689 1.154 1.309 1.452a1.95 1.95 0 0 1-.236-.609c-.781-3.984-1.155-8.202-1.17-21.399-.014-12.653.891-19.707.9-19.777.725-4.231 2.832-5.337 2.922-5.382-.004.001 74.444-42.98 74.846-43.212l.028-.017c.904-.538 1.72-.688 2.36-.433.555.221.949.733 1.172 1.52 2.014 7.128 1.46 32.219.281 39.983-.507 3.341-1.575 5.515-3.175 6.462L69.335 93.869a2.023 2.023 0 0 1-1.018.292zm-.147-.507c.293.036.604-.037.915-.217l75.273-43.551c1.823-1.078 2.602-3.915 2.934-6.106 1.174-7.731 1.731-32.695-.268-39.772-.178-.631-.473-1.032-.876-1.192-.484-.193-1.166-.052-1.921.397l-.034.021-74.858 43.218c-.031.017-1.989 1.069-2.666 5.019-.007.059-.908 7.085-.894 19.702.015 13.155.386 17.351 1.161 21.303.09.461.476.983 1.037 1.139.114.025.185.037.196.039h.001z' fill='#455A64'/><path d='M69.317 68.982c.489-.281.885-.056.885.505 0 .56-.396 1.243-.885 1.525-.488.282-.884.057-.884-.504 0-.56.396-1.243.884-1.526' fill='#FFF'/><path d='M68.92 71.133c-.289 0-.487-.228-.487-.625 0-.56.396-1.243.884-1.526a.812.812 0 0 1 .397-.121c.289 0 .488.229.488.626 0 .56-.396 1.243-.885 1.525a.812.812 0 0 1-.397.121m.794-2.459a.976.976 0 0 0-.49.147c-.548.317-.978 1.058-.978 1.687 0 .486.271.812.674.812a.985.985 0 0 0 .491-.146c.548-.317.978-1.057.978-1.687 0-.486-.272-.813-.675-.813' fill='#8097A2'/><path d='M68.92 70.947c-.271 0-.299-.307-.299-.439 0-.491.361-1.116.79-1.363a.632.632 0 0 1 .303-.096c.272 0 .301.306.301.438 0 .491-.363 1.116-.791 1.364a.629.629 0 0 1-.304.096m.794-2.086a.812.812 0 0 0-.397.121c-.488.283-.884.966-.884 1.526 0 .397.198.625.487.625a.812.812 0 0 0 .397-.121c.489-.282.885-.965.885-1.525 0-.397-.199-.626-.488-.626' fill='#8097A2'/><path d='M69.444 85.35c.264-.152.477-.031.477.272 0 .303-.213.67-.477.822-.263.153-.477.031-.477-.271 0-.302.214-.671.477-.823' fill='#FFF'/><path d='M69.23 86.51c-.156 0-.263-.123-.263-.337 0-.302.214-.671.477-.823a.431.431 0 0 1 .214-.066c.156 0 .263.124.263.338 0 .303-.213.67-.477.822a.431.431 0 0 1-.214.066m.428-1.412c-.1 0-.203.029-.307.09-.32.185-.57.618-.57.985 0 .309.185.524.449.524a.63.63 0 0 0 .308-.09c.32-.185.57-.618.57-.985 0-.309-.185-.524-.45-.524' fill='#8097A2'/><path d='M69.23 86.322l-.076-.149c0-.235.179-.544.384-.661l.12-.041.076.151c0 .234-.179.542-.383.66l-.121.04m.428-1.038a.431.431 0 0 0-.214.066c-.263.152-.477.521-.477.823 0 .214.107.337.263.337a.431.431 0 0 0 .214-.066c.264-.152.477-.519.477-.822 0-.214-.107-.338-.263-.338' fill='#8097A2'/><path d='M139.278 7.769v43.667L72.208 90.16V46.493l67.07-38.724' fill='#455A64'/><path d='M72.083 90.375V46.421l.063-.036 67.257-38.831v43.954l-.062.036-67.258 38.831zm.25-43.811v43.38l66.821-38.579V7.985L72.333 46.564z' fill='#607D8B'/></g><path d='M125.737 88.647l-7.639 3.334V84l-11.459 4.713v8.269L99 100.315l13.369 3.646 13.368-15.314' fill='#455A64'/></g></svg>")},se.prototype.show=function(e){this.root=e,e.appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},se.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},se.prototype.getCurrentViewer=function(){return H.Viewers[this.selectedKey]},se.prototype.getSelectedKey_=function(){var e=this.dialog.querySelector("input[name=field]:checked");return e?e.id:null},se.prototype.onChange=function(e){this.onChangeCallbacks_.push(e)},se.prototype.fireOnChange_=function(e){for(var t=0;t<this.onChangeCallbacks_.length;t++)this.onChangeCallbacks_[t](e)},se.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),this.selectedKey&&H.Viewers[this.selectedKey]){this.fireOnChange_(H.Viewers[this.selectedKey]);try{localStorage.setItem("WEBVR_CARDBOARD_VIEWER",this.selectedKey)}catch(e){console.error("Failed to save viewer profile: %s",e)}this.hide()}else console.error("ViewerSelector.onSave_: this should never happen!")},se.prototype.createDialog_=function(e){var t=document.createElement("div");t.classList.add("webvr-polyfill-viewer-selector"),t.style.display="none";var r=document.createElement("div");(n=r.style).position="fixed",n.left=0,n.top=0,n.width="100%",n.height="100%",n.background="rgba(0, 0, 0, 0.3)",r.addEventListener("click",this.hide.bind(this));var i=document.createElement("div"),n=i.style;for(var a in n.boxSizing="border-box",n.position="fixed",n.top="24px",n.left="50%",n.marginLeft="-140px",n.width="280px",n.padding="24px",n.overflow="hidden",n.background="#fafafa",n.fontFamily="'Roboto', sans-serif",n.boxShadow="0px 5px 20px #666",i.appendChild(this.createH1_("Select your viewer")),e)i.appendChild(this.createChoice_(a,e[a].label));return i.appendChild(this.createButton_("Save",this.onSave_.bind(this))),t.appendChild(r),t.appendChild(i),t},se.prototype.createH1_=function(e){var t=document.createElement("h1"),r=t.style;return r.color="black",r.fontSize="20px",r.fontWeight="bold",r.marginTop=0,r.marginBottom="24px",t.innerHTML=e,t},se.prototype.createChoice_=function(e,t){var r=document.createElement("div");r.style.marginTop="8px",r.style.color="black";var i=document.createElement("input");i.style.fontSize="30px",i.setAttribute("id",e),i.setAttribute("type","radio"),i.setAttribute("value",e),i.setAttribute("name","field");var n=document.createElement("label");return n.style.marginLeft="4px",n.setAttribute("for",e),n.innerHTML=t,r.appendChild(i),r.appendChild(n),r},se.prototype.createButton_=function(e,t){var r=document.createElement("button");r.innerHTML=e;var i=r.style;return i.float="right",i.textTransform="uppercase",i.color="#1094f7",i.fontSize="14px",i.letterSpacing=0,i.border=0,i.background="none",i.marginTop="16px",r.addEventListener("click",t),r},"undefined"!=typeof window?window:void 0!==Fe||"undefined"!=typeof self&&self;var oe,le=(oe=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,t){!function(t,r){e.exports=r()}(0,(function(){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(1),a="undefined"!=typeof navigator&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",n),this.noSleepVideo.addEventListener("timeupdate",function(e){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())}.bind(this)))}return i(e,[{key:"enable",value:function(){a?(this.disable(),this.noSleepTimer=window.setInterval((function(){window.location.href="/",window.setTimeout(window.stop,0)}),15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){a?this.noSleepTimer&&(window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),e}();e.exports=s},function(e,t,r){e.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])}))})))&&oe.__esModule&&Object.prototype.hasOwnProperty.call(oe,"default")?oe.default:oe,he=1e3,ue=[0,0,.5,1],ce=[.5,0,.5,1],de=window.requestAnimationFrame,Ae=window.cancelAnimationFrame;function fe(e){Object.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:e.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:e.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:e.canPresent},maxLayers:{writable:!1,enumerable:!0,value:e.maxLayers},hasOrientation:{enumerable:!0,get:function(){return M("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),e.hasOrientation}}})}function pe(e){var t=!("wakelock"in(e=e||{}))||e.wakelock;this.isPolyfilled=!0,this.displayId=he++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,Object.defineProperty(this,"isConnected",{get:function(){return M("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new fe({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.originalParent_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,t&&w()&&(this.wakelock_=new le)}pe.prototype.getFrameData=function(e){return x(e,this._getPose(),this)},pe.prototype.getPose=function(){return M("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this._getPose()},pe.prototype.resetPose=function(){return M("VRDisplay.prototype.resetPose"),this._resetPose()},pe.prototype.getImmediatePose=function(){return M("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this._getPose()},pe.prototype.requestAnimationFrame=function(e){return de(e)},pe.prototype.cancelAnimationFrame=function(e){return Ae(e)},pe.prototype.wrapForFullscreen=function(e){if(s())return e;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var t=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",t.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==e)return this.fullscreenWrapper_;if(this.fullscreenElement_&&(this.originalParent_?this.originalParent_.appendChild(this.fullscreenElement_):this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_)),this.fullscreenElement_=e,this.originalParent_=e.parentElement,this.originalParent_||document.body.appendChild(e),!this.fullscreenWrapper_.parentElement){var r=this.fullscreenElement_.parentElement;r.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),r.removeChild(this.fullscreenElement_)}this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var i=this;return function(){if(i.fullscreenElement_){var e=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];i.fullscreenElement_.setAttribute("style",e.join("; ")+";")}}(),this.fullscreenWrapper_},pe.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var e=this.fullscreenElement_;this.fullscreenElementCachedStyle_?e.setAttribute("style",this.fullscreenElementCachedStyle_):e.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var t=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(e),this.originalParent_===t?t.insertBefore(e,this.fullscreenWrapper_):this.originalParent_&&this.originalParent_.appendChild(e),t.removeChild(this.fullscreenWrapper_),e}},pe.prototype.requestPresent=function(e){var t=this.isPresenting,r=this;return e instanceof Array||(M("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),e=[e]),new Promise((function(i,n){if(r.capabilities.canPresent)if(0==e.length||e.length>r.capabilities.maxLayers)n(new Error("Invalid number of layers."));else{var a=e[0];if(a.source){var l=a.leftBounds||ue,h=a.rightBounds||ce;if(t){var u=r.layer_;u.source!==a.source&&(u.source=a.source);for(var c=0;c<4;c++)u.leftBounds[c]=l[c],u.rightBounds[c]=h[c];return r.wrapForFullscreen(r.layer_.source),r.updatePresent_(),void i()}if(r.layer_={predistorted:a.predistorted,source:a.source,leftBounds:l.slice(0),rightBounds:h.slice(0)},r.waitingForPresent_=!1,r.layer_&&r.layer_.source){var d=r.wrapForFullscreen(r.layer_.source);r.addFullscreenListeners_(d,(function(){var e=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;r.isPresenting=d===e,r.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch((function(e){console.error("screen.orientation.lock() failed due to",e.message)})),r.waitingForPresent_=!1,r.beginPresent_(),i()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),r.removeFullscreenWrapper(),r.disableWakeLock(),r.endPresent_(),r.removeFullscreenListeners_()),r.fireVRDisplayPresentChange_()}),(function(){r.waitingForPresent_&&(r.removeFullscreenWrapper(),r.removeFullscreenListeners_(),r.disableWakeLock(),r.waitingForPresent_=!1,r.isPresenting=!1,n(new Error("Unable to present.")))})),function(e){if(o())return!1;if(e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else{if(!e.msRequestFullscreen)return!1;e.msRequestFullscreen()}return!0}(d)?(r.enableWakeLock(),r.waitingForPresent_=!0):(s()||o())&&(r.enableWakeLock(),r.isPresenting=!0,r.beginPresent_(),r.fireVRDisplayPresentChange_(),i())}r.waitingForPresent_||s()||(v(),n(new Error("Unable to present.")))}else i()}else n(new Error("VRDisplay is not capable of presenting."))}))},pe.prototype.exitPresent=function(){var e=this.isPresenting,t=this;return this.isPresenting=!1,this.layer_=null,this.disableWakeLock(),new Promise((function(r,i){e?(!v()&&s()&&(t.endPresent_(),t.fireVRDisplayPresentChange_()),o()&&(t.removeFullscreenWrapper(),t.removeFullscreenListeners_(),t.endPresent_(),t.fireVRDisplayPresentChange_()),r()):i(new Error("Was not presenting to VRDisplay."))}))},pe.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},pe.prototype.fireVRDisplayPresentChange_=function(){var e=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(e)},pe.prototype.fireVRDisplayConnect_=function(){var e=new CustomEvent("vrdisplayconnect",{detail:{display:this}});window.dispatchEvent(e)},pe.prototype.addFullscreenListeners_=function(e,t,r){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=e,this.fullscreenChangeHandler_=t,this.fullscreenErrorHandler_=r,t&&(document.fullscreenEnabled?e.addEventListener("fullscreenchange",t,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenchange",t,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",t,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenchange",t,!1)),r&&(document.fullscreenEnabled?e.addEventListener("fullscreenerror",r,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenerror",r,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",r,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenerror",r,!1))},pe.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var e=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var t=this.fullscreenChangeHandler_;e.removeEventListener("fullscreenchange",t,!1),e.removeEventListener("webkitfullscreenchange",t,!1),document.removeEventListener("mozfullscreenchange",t,!1),e.removeEventListener("msfullscreenchange",t,!1)}if(this.fullscreenErrorHandler_){var r=this.fullscreenErrorHandler_;e.removeEventListener("fullscreenerror",r,!1),e.removeEventListener("webkitfullscreenerror",r,!1),document.removeEventListener("mozfullscreenerror",r,!1),e.removeEventListener("msfullscreenerror",r,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},pe.prototype.enableWakeLock=function(){this.wakelock_&&this.wakelock_.enable()},pe.prototype.disableWakeLock=function(){this.wakelock_&&this.wakelock_.disable()},pe.prototype.beginPresent_=function(){},pe.prototype.endPresent_=function(){},pe.prototype.submitFrame=function(e){},pe.prototype.getEyeParameters=function(e){return null};var me={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},ve="left",ge="right";function ye(e){var t=b({},me);e=b(t,e||{}),pe.call(this,{wakelock:e.MOBILE_WAKE_LOCK}),this.config=e,this.displayName="Cardboard VRDisplay",this.capabilities=new fe({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.bufferScale_=this.config.BUFFER_SCALE,this.poseSensor_=new ne(this.config),this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new Y(this.config.DPDB_URL,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new H(this.dpdb_.getDeviceParams(),e.ADDITIONAL_VIEWERS),this.viewerSelector_=new se(e.DEFAULT_VIEWER),this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new ae),s()&&window.addEventListener("resize",this.onResize_.bind(this))}return ye.prototype=Object.create(pe.prototype),ye.prototype._getPose=function(){return{position:null,orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},ye.prototype._resetPose=function(){this.poseSensor_.resetPose&&this.poseSensor_.resetPose()},ye.prototype._getFieldOfView=function(e){var t;if(e==ve)t=this.deviceInfo_.getFieldOfViewLeftEye();else{if(e!=ge)return console.error("Invalid eye provided: %s",e),null;t=this.deviceInfo_.getFieldOfViewRightEye()}return t},ye.prototype._getEyeOffset=function(e){var t;if(e==ve)t=[.5*-this.deviceInfo_.viewer.interLensDistance,0,0];else{if(e!=ge)return console.error("Invalid eye provided: %s",e),null;t=[.5*this.deviceInfo_.viewer.interLensDistance,0,0]}return t},ye.prototype.getEyeParameters=function(e){var t=this._getEyeOffset(e),r=this._getFieldOfView(e),i={offset:t,renderWidth:.5*this.deviceInfo_.device.width*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_};return Object.defineProperty(i,"fieldOfView",{enumerable:!0,get:function(){return M("VRFieldOfView","VRFrameData's projection matrices"),r}}),i},ye.prototype.onDeviceParamsUpdated_=function(e){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},ye.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},ye.prototype.beginPresent_=function(){var e=this.layer_.source.getContext("webgl");e||(e=this.layer_.source.getContext("experimental-webgl")),e||(e=this.layer_.source.getContext("webgl2")),e&&(this.layer_.predistorted?this.config.CARDBOARD_UI_DISABLED||(e.canvas.width=p()*this.bufferScale_,e.canvas.height=m()*this.bufferScale_,this.cardboardUI_=new U(e)):(this.config.CARDBOARD_UI_DISABLED||(this.cardboardUI_=new U(e)),this.distorter_=new D(e,this.cardboardUI_,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.distorter_.updateDeviceInfo(this.deviceInfo_)),this.cardboardUI_&&this.cardboardUI_.listen(function(e){this.viewerSelector_.show(this.layer_.source.parentElement),e.stopPropagation(),e.preventDefault()}.bind(this),function(e){this.exitPresent(),e.stopPropagation(),e.preventDefault()}.bind(this)),this.rotateInstructions_&&(f()&&w()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},ye.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},ye.prototype.updatePresent_=function(){this.endPresent_(),this.beginPresent_()},ye.prototype.submitFrame=function(e){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var t=this.layer_.source.getContext("webgl");t||(t=this.layer_.source.getContext("experimental-webgl")),t||(t=this.layer_.source.getContext("webgl2"));var r=t.canvas;r.width==this.lastWidth&&r.height==this.lastHeight||this.cardboardUI_.onResize(),this.lastWidth=r.width,this.lastHeight=r.height,this.cardboardUI_.render()}},ye.prototype.onOrientationChange_=function(e){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},ye.prototype.onResize_=function(e){if(this.layer_){var t=this.layer_.source.getContext("webgl");t||(t=this.layer_.source.getContext("experimental-webgl")),t||(t=this.layer_.source.getContext("webgl2")),t.canvas.setAttribute("style",["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"].join("; ")+";"),S(t.canvas)}},ye.prototype.onViewerChanged_=function(e){this.deviceInfo_.setViewer(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},ye.prototype.fireVRDisplayDeviceParamsChange_=function(){var e=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(e)},ye.VRFrameData=function(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null},ye.VRDisplay=pe,ye}()})),De=(Te=Ce)&&Te.__esModule&&Object.prototype.hasOwnProperty.call(Te,"default")?Te.default:Te;class Pe extends n{constructor(e){super(),this.global=e,this.onWindowResize=this.onWindowResize.bind(this),this.global.window.addEventListener("resize",this.onWindowResize),this.environmentBlendMode="opaque"}onBaseLayerSet(e,t){throw new Error("Not implemented")}isSessionSupported(e){throw new Error("Not implemented")}isFeatureSupported(e){throw new Error("Not implemented")}async requestSession(e,t){throw new Error("Not implemented")}requestAnimationFrame(e){throw new Error("Not implemented")}onFrameStart(e){throw new Error("Not implemented")}onFrameEnd(e){throw new Error("Not implemented")}doesSessionSupportReferenceSpace(e,t){throw new Error("Not implemented")}requestStageBounds(){throw new Error("Not implemented")}async requestFrameOfReferenceTransform(e,t){}cancelAnimationFrame(e){throw new Error("Not implemented")}endSession(e){throw new Error("Not implemented")}getViewport(e,t,r,i){throw new Error("Not implemented")}getProjectionMatrix(e){throw new Error("Not implemented")}getBasePoseMatrix(){throw new Error("Not implemented")}getBaseViewMatrix(e){throw new Error("Not implemented")}getInputSources(){throw new Error("Not implemented")}getInputPose(e,t,r){throw new Error("Not implemented")}onWindowResize(){this.onWindowResize()}}let Re={mapping:"xr-standard",profiles:["oculus-go","generic-trigger-touchpad"],buttons:{length:3,0:1,1:null,2:0},gripTransform:{orientation:[.11*Math.PI,0,0,1]}},Be={mapping:"xr-standard",displayProfiles:{"Oculus Quest":["oculus-touch-v2","oculus-touch","generic-trigger-squeeze-thumbstick"]},profiles:["oculus-touch","generic-trigger-squeeze-thumbstick"],axes:{length:4,0:null,1:null,2:0,3:1},buttons:{length:7,0:1,1:2,2:null,3:0,4:3,5:4,6:null},gripTransform:{position:[0,-.02,.04,1],orientation:[.11*Math.PI,0,0,1]}},Ue={mapping:"xr-standard",profiles:["htc-vive","generic-trigger-squeeze-touchpad"],displayProfiles:{"HTC Vive":["htc-vive","generic-trigger-squeeze-touchpad"],"HTC Vive DVT":["htc-vive","generic-trigger-squeeze-touchpad"],"Valve Index":["valve-index","generic-trigger-squeeze-touchpad-thumbstick"]},buttons:{length:3,0:1,1:2,2:0},gripTransform:{position:[0,0,.05,1]},targetRayTransform:{orientation:[-.08*Math.PI,0,0,1]},userAgentOverrides:{Firefox:{axes:{invert:[1,3]}}}},Ie={mapping:"xr-standard",profiles:["samsung-gearvr","generic-trigger-touchpad"],buttons:{length:3,0:1,1:null,2:0},gripTransform:{orientation:[.11*Math.PI,0,0,1]}},Le={mapping:"xr-standard",profiles:["samsung-odyssey","microsoft-mixed-reality","generic-trigger-squeeze-touchpad-thumbstick"],buttons:{length:4,0:1,1:0,2:2,3:4},gripTransform:{position:[0,-.02,.04,1],orientation:[.11*Math.PI,0,0,1]}},Oe={mapping:"xr-standard",profiles:["microsoft-mixed-reality","generic-trigger-squeeze-touchpad-thumbstick"],buttons:{length:4,0:1,1:0,2:2,3:4},gripTransform:{position:[0,-.02,.04,1],orientation:[.11*Math.PI,0,0,1]}},ke={"Daydream Controller":{mapping:"",profiles:["google-daydream","generic-trigger-touchpad"],buttons:{length:3,0:null,1:null,2:0}},"Gear VR Controller":Ie,"HTC Vive Focus Controller":{mapping:"xr-standard",profiles:["htc-vive-focus","generic-trigger-touchpad"],buttons:{length:3,0:1,1:null,2:0}},"Oculus Go Controller":Re,"Oculus Touch (Right)":Be,"Oculus Touch (Left)":Be,"OpenVR Gamepad":Ue,"Spatial Controller (Spatial Interaction Source) 045E-065A":Oe,"Spatial Controller (Spatial Interaction Source) 045E-065D":Le,"Windows Mixed Reality (Right)":Oe,"Windows Mixed Reality (Left)":Oe};const Ge=m(.155,-.465,-.15),Ne=m(-.155,-.465,-.15),ze=m(0,0,-.25),Ve=m(0,0,.05),Qe=m(-.08,.14,.08),We=180/Math.PI;class Xe{constructor(){this.hand="right",this.headElbowOffset=Ge,this.controllerQ=E(),this.lastControllerQ=E(),this.headQ=E(),this.headPos=f(),this.elbowPos=f(),this.wristPos=f(),this.time=null,this.lastTime=null,this.rootQ=E(),this.position=f()}setHandedness(e){this.hand!=e&&(this.hand=e,"left"==this.hand?this.headElbowOffset=Ne:this.headElbowOffset=Ge)}update(e,t){this.time=W(),e&&(P(this.lastControllerQ,this.controllerQ),P(this.controllerQ,e)),t&&(c(this.headPos,t),d(this.headQ,t));let r=this.getHeadYawOrientation_(),i=this.quatAngle_(this.lastControllerQ,this.controllerQ);i/((this.time-this.lastTime)/1e3)>.61?F(this.rootQ,this.rootQ,r,Math.min(i/.175,1)):P(this.rootQ,r);let n=m(0,0,-1);x(n,n,this.controllerQ);let a=b(n,[0,1,0]),s=this.clamp_((a-.12)/.87,0,1),o=C(this.rootQ);T(o,o),M(o,o,this.controllerQ);let l=this.elbowPos;v(l,this.headPos),g(l,l,this.headElbowOffset);let h=p(Qe);y(h,h,s),g(l,l,h);let u=this.quatAngle_(o,E())*We,A=(1-Math.pow(u/180,4))*(.4+.6*s*.4),f=E();F(f,f,o,A);let w=T(E(),f),S=C(o);M(S,S,w);let _=this.wristPos;v(_,Ve),x(_,_,f),g(_,_,ze),x(_,_,S),g(_,_,l);let D=p(Qe);y(D,D,s),g(this.position,this.wristPos,D),x(this.position,this.position,this.rootQ),this.lastTime=this.time}getPosition(){return this.position}getHeadYawOrientation_(){let e=f();return function(e,t,r){function i(e,t,r){return e<t?t:e>r?r:e}var n=t[0]*t[0],a=t[1]*t[1],s=t[2]*t[2],o=t[3]*t[3];if("XYZ"===r)e[0]=Math.atan2(2*(t[0]*t[3]-t[1]*t[2]),o-n-a+s),e[1]=Math.asin(i(2*(t[0]*t[2]+t[1]*t[3]),-1,1)),e[2]=Math.atan2(2*(t[2]*t[3]-t[0]*t[1]),o+n-a-s);else if("YXZ"===r)e[0]=Math.asin(i(2*(t[0]*t[3]-t[1]*t[2]),-1,1)),e[1]=Math.atan2(2*(t[0]*t[2]+t[1]*t[3]),o-n-a+s),e[2]=Math.atan2(2*(t[0]*t[1]+t[2]*t[3]),o-n+a-s);else if("ZXY"===r)e[0]=Math.asin(i(2*(t[0]*t[3]+t[1]*t[2]),-1,1)),e[1]=Math.atan2(2*(t[1]*t[3]-t[2]*t[0]),o-n-a+s),e[2]=Math.atan2(2*(t[2]*t[3]-t[0]*t[1]),o-n+a-s);else if("ZYX"===r)e[0]=Math.atan2(2*(t[0]*t[3]+t[2]*t[1]),o-n-a+s),e[1]=Math.asin(i(2*(t[1]*t[3]-t[0]*t[2]),-1,1)),e[2]=Math.atan2(2*(t[0]*t[1]+t[2]*t[3]),o+n-a-s);else if("YZX"===r)e[0]=Math.atan2(2*(t[0]*t[3]-t[2]*t[1]),o-n+a-s),e[1]=Math.atan2(2*(t[1]*t[3]-t[0]*t[2]),o+n-a-s),e[2]=Math.asin(i(2*(t[0]*t[1]+t[2]*t[3]),-1,1));else{if("XZY"!==r)return void console.log("No order given for quaternion to euler conversion.");e[0]=Math.atan2(2*(t[0]*t[3]+t[1]*t[2]),o-n+a-s),e[1]=Math.atan2(2*(t[0]*t[2]+t[1]*t[3]),o+n-a-s),e[2]=Math.asin(i(2*(t[2]*t[3]-t[0]*t[1]),-1,1))}}(e,this.headQ,"YXZ"),function(e,t,r,i){let n=.5*Math.PI/180;t*=n,r*=n,i*=n;let a=Math.sin(t),s=Math.cos(t),o=Math.sin(r),l=Math.cos(r),h=Math.sin(i),u=Math.cos(i);return e[0]=a*l*u-s*o*h,e[1]=s*o*u+a*l*h,e[2]=s*l*h-a*o*u,e[3]=s*l*u+a*o*h,e}(E(),0,e[1]*We,0)}clamp_(e,t,r){return Math.min(Math.max(e,t),r)}quatAngle_(e,t){let r=[0,0,-1],i=[0,0,-1];return x(r,r,e),x(i,i,t),function(e,t){let r=m(e[0],e[1],e[2]),i=m(t[0],t[1],t[2]);w(r,r),w(i,i);let n=b(r,i);return n>1?0:n<-1?Math.PI:Math.acos(n)}(r,i)}}const He=Symbol("@@webxr-polyfill/XRRemappedGamepad"),je={pressed:!1,touched:!1,value:0};Object.freeze(je);class qe{constructor(e,t,r){if(r||(r={}),r.userAgentOverrides)for(let e in r.userAgentOverrides)if(navigator.userAgent.includes(e)){let t=r.userAgentOverrides[e];for(let e in t)e in r?Object.assign(r[e],t[e]):r[e]=t[e];break}let i=new Array(r.axes&&r.axes.length?r.axes.length:e.axes.length),n=new Array(r.buttons&&r.buttons.length?r.buttons.length:e.buttons.length),a=null;if(r.gripTransform){let e=r.gripTransform.orientation||[0,0,0,1];a=s(),u(a,R(e,e),r.gripTransform.position||[0,0,0])}let o=null;if(r.targetRayTransform){let e=r.targetRayTransform.orientation||[0,0,0,1];o=s(),u(o,R(e,e),r.targetRayTransform.position||[0,0,0])}let l=r.profiles;r.displayProfiles&&t.displayName in r.displayProfiles&&(l=r.displayProfiles[t.displayName]),this[He]={gamepad:e,map:r,profiles:l||[e.id],mapping:r.mapping||e.mapping,axes:i,buttons:n,gripTransform:a,targetRayTransform:o},this._update()}_update(){let e=this[He].gamepad,t=this[He].map,r=this[He].axes;for(let i=0;i<r.length;++i)t.axes&&i in t.axes?null===t.axes[i]?r[i]=0:r[i]=e.axes[t.axes[i]]:r[i]=e.axes[i];if(t.axes&&t.axes.invert)for(let e of t.axes.invert)e<r.length&&(r[e]*=-1);let i=this[He].buttons;for(let r=0;r<i.length;++r)t.buttons&&r in t.buttons?null===t.buttons[r]?i[r]=je:i[r]=e.buttons[t.buttons[r]]:i[r]=e.buttons[r]}get id(){return""}get _profiles(){return this[He].profiles}get index(){return-1}get connected(){return this[He].gamepad.connected}get timestamp(){return this[He].gamepad.timestamp}get mapping(){return this[He].mapping}get axes(){return this[He].axes}get buttons(){return this[He].buttons}get hapticActuators(){return this[He].gamepad.hapticActuators}}class Ye{constructor(e,t,r=0,i=-1){this.polyfill=e,this.display=t,this.nativeGamepad=null,this.gamepad=null,this.inputSource=new be(this),this.lastPosition=f(),this.emulatedPosition=!1,this.basePoseMatrix=s(),this.outputMatrix=s(),this.primaryButtonIndex=r,this.primaryActionPressed=!1,this.primarySqueezeButtonIndex=i,this.primarySqueezeActionPressed=!1,this.handedness="",this.targetRayMode="gaze",this.armModel=null}get profiles(){return this.gamepad?this.gamepad._profiles:[]}updateFromGamepad(e){this.nativeGamepad!==e&&(this.nativeGamepad=e,this.gamepad=e?new qe(e,this.display,ke[e.id]):null),this.handedness=""===e.hand?"none":e.hand,this.gamepad&&this.gamepad._update(),e.pose?(this.targetRayMode="tracked-pointer",this.emulatedPosition=!e.pose.hasPosition):""===e.hand&&(this.targetRayMode="gaze",this.emulatedPosition=!1)}updateBasePoseMatrix(){if(this.nativeGamepad&&this.nativeGamepad.pose){let e=this.nativeGamepad.pose,t=e.position,r=e.orientation;if(!t&&!r)return;t?(this.lastPosition[0]=t[0],this.lastPosition[1]=t[1],this.lastPosition[2]=t[2]):e.hasPosition?t=this.lastPosition:(this.armModel||(this.armModel=new Xe),this.armModel.setHandedness(this.nativeGamepad.hand),this.armModel.update(r,this.polyfill.getBasePoseMatrix()),t=this.armModel.getPosition()),u(this.basePoseMatrix,r,t)}else e=this.basePoseMatrix,t=this.polyfill.getBasePoseMatrix(),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15];var e,t;return this.basePoseMatrix}getXRPose(e,t){switch(this.updateBasePoseMatrix(),t){case"target-ray":e._transformBasePoseMatrix(this.outputMatrix,this.basePoseMatrix),this.gamepad&&this.gamepad[He].targetRayTransform&&h(this.outputMatrix,this.outputMatrix,this.gamepad[He].targetRayTransform);break;case"grip":if(!this.nativeGamepad||!this.nativeGamepad.pose)return null;e._transformBasePoseMatrix(this.outputMatrix,this.basePoseMatrix),this.gamepad&&this.gamepad[He].gripTransform&&h(this.outputMatrix,this.outputMatrix,this.gamepad[He].gripTransform);break;default:return null}return e._adjustForOriginOffset(this.outputMatrix),new XRPose(new XRRigidTransform(this.outputMatrix),this.emulatedPosition)}}const Ze={highRefreshRate:!0},Je={oculus:1,openvr:1,"spatial controller (spatial interaction source)":1};let Ke=0;class $e{constructor(e,t,r={}){if(this.mode=e,this.enabledFeatures=t,this.outputContext=null,this.immersive="immersive-vr"==e||"immersive-ar"==e,this.ended=null,this.baseLayer=null,this.id=++Ke,this.modifiedCanvasLayer=!1,this.outputContext){const e=r.renderContextType||"2d";this.renderContext=this.outputContext.canvas.getContext(e)}}}class et extends Pe{constructor(e,t){const{canPresent:r}=t.capabilities;super(e),this.display=t,this.frame=new e.VRFrameData,this.sessions=new Map,this.immersiveSession=null,this.canPresent=r,this.baseModelMatrix=s(),this.gamepadInputSources={},this.tempVec3=new Float32Array(3),this.onVRDisplayPresentChange=this.onVRDisplayPresentChange.bind(this),e.window.addEventListener("vrdisplaypresentchange",this.onVRDisplayPresentChange),this.CAN_USE_GAMEPAD=e.navigator&&"getGamepads"in e.navigator,this.HAS_BITMAP_SUPPORT=(e=>!(!e.ImageBitmapRenderingContext||!e.createImageBitmap))(e)}get depthNear(){return this.display.depthNear}set depthNear(e){this.display.depthNear=e}get depthFar(){return this.display.depthFar}set depthFar(e){this.display.depthFar=e}onBaseLayerSet(e,t){const r=this.sessions.get(e),i=t.context.canvas;if(r.immersive){const e=this.display.getEyeParameters("left"),n=this.display.getEyeParameters("right");i.width=2*Math.max(e.renderWidth,n.renderWidth),i.height=Math.max(e.renderHeight,n.renderHeight),this.display.requestPresent([{source:i,attributes:Ze}]).then(()=>{this.global.document.body.contains(i)||(r.modifiedCanvasLayer=!0,this.global.document.body.appendChild(i),(e=>{e.style.display="block",e.style.position="absolute",e.style.width=e.style.height="1px",e.style.top=e.style.left="0px"})(i)),r.baseLayer=t})}else r.baseLayer=t}isSessionSupported(e){return"immersive-ar"!=e&&("immersive-vr"!=e||!1!==this.canPresent)}isFeatureSupported(e){switch(e){case"viewer":case"local":case"local-floor":return!0;case"bounded":case"unbounded":default:return!1}}async requestSession(e,t){if(!this.isSessionSupported(e))return Promise.reject();let r="immersive-vr"==e;if(r){const e=this.global.document.createElement("canvas");e.getContext("webgl");await this.display.requestPresent([{source:e,attributes:Ze}])}const i=new $e(e,t,{renderContextType:this.HAS_BITMAP_SUPPORT?"bitmaprenderer":"2d"});return this.sessions.set(i.id,i),r&&(this.immersiveSession=i,this.dispatchEvent("@@webxr-polyfill/vr-present-start",i.id)),Promise.resolve(i.id)}requestAnimationFrame(e){return this.display.requestAnimationFrame(e)}getPrimaryButtonIndex(e){let t=0,r=e.id.toLowerCase();for(let e in Je)if(r.includes(e)){t=Je[e];break}return Math.min(t,e.buttons.length-1)}onFrameStart(e,t){this.display.depthNear=t.depthNear,this.display.depthFar=t.depthFar,this.display.getFrameData(this.frame);const r=this.sessions.get(e);if(r.immersive&&this.CAN_USE_GAMEPAD){let e=this.gamepadInputSources;this.gamepadInputSources={};let t=this.global.navigator.getGamepads();for(let i=0;i<t.length;++i){let n=t[i];if(n&&n.displayId>0){let t=e[i];if(t||(t=new Ye(this,this.display,this.getPrimaryButtonIndex(n))),t.updateFromGamepad(n),this.gamepadInputSources[i]=t,-1!=t.primaryButtonIndex){let e=n.buttons[t.primaryButtonIndex].pressed;e&&!t.primaryActionPressed?this.dispatchEvent("@@webxr-polyfill/input-select-start",{sessionId:r.id,inputSource:t.inputSource}):!e&&t.primaryActionPressed&&this.dispatchEvent("@@webxr-polyfill/input-select-end",{sessionId:r.id,inputSource:t.inputSource}),t.primaryActionPressed=e}if(-1!=t.primarySqueezeButtonIndex){let e=n.buttons[t.primarySqueezeButtonIndex].pressed;e&&!t.primarySqueezeActionPressed?this.dispatchEvent("@@webxr-polyfill/input-squeeze-start",{sessionId:r.id,inputSource:t.inputSource}):!e&&t.primarySqueezeActionPressed&&this.dispatchEvent("@@webxr-polyfill/input-squeeze-end",{sessionId:r.id,inputSource:t.inputSource}),t.primarySqueezeActionPressed=e}}}}if(!r.immersive&&r.baseLayer){const e=r.baseLayer.context.canvas;A(this.frame.leftProjectionMatrix,t.inlineVerticalFieldOfView,e.width/e.height,t.depthNear,t.depthFar)}}onFrameEnd(e){const t=this.sessions.get(e);if(!t.ended&&t.baseLayer){if(t.outputContext&&(!t.immersive||this.display.capabilities.hasExternalDisplay)){const e=t.immersive&&this.display.capabilities.hasExternalDisplay,r=t.baseLayer.context.canvas,i=e?r.width/2:r.width,n=r.height;{const e=t.outputContext.canvas,a=e.width,s=e.height,o=t.renderContext;this.HAS_BITMAP_SUPPORT?r.transferToImageBitmap?o.transferFromImageBitmap(r.transferToImageBitmap()):this.global.createImageBitmap(r,0,0,i,n,{resizeWidth:a,resizeHeight:s}).then(e=>o.transferFromImageBitmap(e)):o.drawImage(r,0,0,i,n,0,0,a,s)}}t.immersive&&t.baseLayer&&this.display.submitFrame()}}cancelAnimationFrame(e){this.display.cancelAnimationFrame(e)}async endSession(e){const t=this.sessions.get(e);if(!t.ended)return t.immersive?this.display.exitPresent():void(t.ended=!0)}doesSessionSupportReferenceSpace(e,t){const r=this.sessions.get(e);return!r.ended&&r.enabledFeatures.has(t)}requestStageBounds(){if(this.display.stageParameters){const e=this.display.stageParameters.sizeX,t=this.display.stageParameters.sizeZ,r=[];return r.push(-e/2),r.push(-t/2),r.push(e/2),r.push(-t/2),r.push(e/2),r.push(t/2),r.push(-e/2),r.push(t/2),r}return null}async requestFrameOfReferenceTransform(e,t){return("local-floor"===e||"bounded-floor"===e)&&this.display.stageParameters&&this.display.stageParameters.sittingToStandingTransform?this.display.stageParameters.sittingToStandingTransform:null}getProjectionMatrix(e){if("left"===e)return this.frame.leftProjectionMatrix;if("right"===e)return this.frame.rightProjectionMatrix;if("none"===e)return this.frame.leftProjectionMatrix;throw new Error("eye must be of type 'left' or 'right'")}getViewport(e,t,r,i){const n=this.sessions.get(e),{width:a,height:s}=r.context.canvas;if(!n.immersive)return i.x=i.y=0,i.width=a,i.height=s,!0;if("left"===t||"none"===t)i.x=0;else{if("right"!==t)return!1;i.x=a/2}return i.y=0,i.width=a/2,i.height=s,!0}getBasePoseMatrix(){let{position:e,orientation:t}=this.frame.pose;return e||t?(e||(e=this.tempVec3,e[0]=e[1]=e[2]=0),u(this.baseModelMatrix,t,e),this.baseModelMatrix):this.baseModelMatrix}getBaseViewMatrix(e){if("left"===e||"none"===e)return this.frame.leftViewMatrix;if("right"===e)return this.frame.rightViewMatrix;throw new Error("eye must be of type 'left' or 'right'")}getInputSources(){let e=[];for(let t in this.gamepadInputSources)e.push(this.gamepadInputSources[t].inputSource);return e}getInputPose(e,t,r){if(!t)return null;for(let i in this.gamepadInputSources){let n=this.gamepadInputSources[i];if(n.inputSource===e)return n.getXRPose(t,r)}return null}onWindowResize(){}onVRDisplayPresentChange(e){this.display.isPresenting||this.sessions.forEach(e=>{if(e.immersive&&!e.ended){if(e.modifiedCanvasLayer){const t=e.baseLayer.context.canvas;document.body.removeChild(t),t.setAttribute("style","")}this.immersiveSession===e&&(this.immersiveSession=null),this.dispatchEvent("@@webxr-polyfill/vr-present-end",e.id)}})}}class tt extends et{constructor(e,t){const r=new De(t||{});super(e,r),this.display=r,this.frame={rightViewMatrix:new Float32Array(16),leftViewMatrix:new Float32Array(16),rightProjectionMatrix:new Float32Array(16),leftProjectionMatrix:new Float32Array(16),pose:null,timestamp:null}}}let rt=0;class it{constructor(e,t){this.mode=e,this.enabledFeatures=t,this.ended=null,this.baseLayer=null,this.id=++rt}}class nt extends Pe{constructor(e){super(e),this.sessions=new Map,this.projectionMatrix=s(),this.identityMatrix=s()}onBaseLayerSet(e,t){this.sessions.get(e).baseLayer=t}isSessionSupported(e){return"inline"==e}isFeatureSupported(e){switch(e){case"viewer":return!0;default:return!1}}async requestSession(e,t){if(!this.isSessionSupported(e))return Promise.reject();const r=new it(e,t);return this.sessions.set(r.id,r),Promise.resolve(r.id)}requestAnimationFrame(e){return window.requestAnimationFrame(e)}cancelAnimationFrame(e){window.cancelAnimationFrame(e)}onFrameStart(e,t){const r=this.sessions.get(e);if(r.baseLayer){const e=r.baseLayer.context.canvas;A(this.projectionMatrix,t.inlineVerticalFieldOfView,e.width/e.height,t.depthNear,t.depthFar)}}onFrameEnd(e){}async endSession(e){this.sessions.get(e).ended=!0}doesSessionSupportReferenceSpace(e,t){const r=this.sessions.get(e);return!r.ended&&r.enabledFeatures.has(t)}requestStageBounds(){return null}async requestFrameOfReferenceTransform(e,t){return null}getProjectionMatrix(e){return this.projectionMatrix}getViewport(e,t,r,i){this.sessions.get(e);const{width:n,height:a}=r.context.canvas;return i.x=i.y=0,i.width=n,i.height=a,!0}getBasePoseMatrix(){return this.identityMatrix}getBaseViewMatrix(e){return this.identityMatrix}getInputSources(){return[]}getInputPose(e,t,r){return null}onWindowResize(){}}const at=async function(e,t){if(t.webvr){let t=await async function(e){let t=null;if("getVRDisplays"in e.navigator)try{const r=await e.navigator.getVRDisplays();r&&r.length&&(t=new et(e,r[0]))}catch(e){}return t}(e);if(t)return t}let r=(e=>{var t,r=!1;return t=e.navigator.userAgent||e.navigator.vendor||e.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(r=!0),r})(e);return r&&t.cardboard||!r&&t.allowCardboardOnDesktop?(e.VRFrameData||(e.VRFrameData=function(){this.rightViewMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.leftProjectionMatrix=new Float32Array(16),this.pose=null}),new tt(e,t.cardboardConfig)):new nt(e)},st={global:r,webvr:!0,cardboard:!0,cardboardConfig:null,allowCardboardOnDesktop:!1},ot=["navigator","HTMLCanvasElement","WebGLRenderingContext"];t.a=class{constructor(e={}){this.config=Object.freeze(Object.assign({},st,e)),this.global=this.config.global,this.nativeWebXR="xr"in this.global.navigator,this.injected=!1,this.nativeWebXR?this._injectCompatibilityShims(this.global):this._injectPolyfill(this.global)}_injectPolyfill(e){if(!ot.every(t=>!!e[t]))throw new Error("Global must have the following attributes : "+ot);for(const t of Object.keys(_e))void 0!==e[t]?console.warn(t+" already defined on global."):e[t]=_e[t];Ee(e.WebGLRenderingContext)&&(Me(e.HTMLCanvasElement),e.OffscreenCanvas&&Me(e.OffscreenCanvas),e.WebGL2RenderingContext&&Ee(e.WebGL2RenderingContext),window.isSecureContext||console.warn("WebXR Polyfill Warning:\nThis page is not running in a secure context (https:// or localhost)!\nThis means that although the page may be able to use the WebXR Polyfill it will\nnot be able to use native WebXR implementations, and as such will not be able to\naccess dedicated VR or AR hardware, and will not be able to take advantage of\nany performance improvements a native WebXR implementation may offer. Please\nhost this content on a secure origin for the best user experience.\n"));this.injected=!0,this._patchNavigatorXR()}_patchNavigatorXR(){let e=at(this.global,this.config);this.xr=new _e.XRSystem(e),Object.defineProperty(this.global.navigator,"xr",{value:this.xr,configurable:!0})}_injectCompatibilityShims(e){if(!ot.every(t=>!!e[t]))throw new Error("Global must have the following attributes : "+ot);if(e.navigator.xr&&"supportsSession"in e.navigator.xr&&!("isSessionSupported"in e.navigator.xr)){let t=e.navigator.xr.supportsSession;e.navigator.xr.isSessionSupported=function(e){return t.call(this,e).then(()=>!0).catch(()=>!1)},e.navigator.xr.supportsSession=function(e){return console.warn("navigator.xr.supportsSession() is deprecated. Please call navigator.xr.isSessionSupported() instead and check the boolean value returned when the promise resolves."),t.call(this,e)}}}}}).call(this,r(11))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r}]]);
//# sourceMappingURL=2.bundle.js.map